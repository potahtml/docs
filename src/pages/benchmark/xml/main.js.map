{"version":3,"file":"main.js","sources":["../../../../../pota/src/lib/std.js","../../../../../pota/src/constants.js","../../../../../pota/src/lib/solid.js","../../../../../pota/src/lib/reactive.js","../../../../../pota/src/use/dom.js","../../../../../pota/src/use/css.js","../../../../../pota/src/core/scheduler.js","../../../../../pota/src/core/props/plugin.js","../../../../../pota/src/core/props/property.js","../../../../../pota/src/core/props/event.js","../../../../../pota/src/use/random.js","../../../../../pota/src/core/props/css.js","../../../../../pota/src/core/props/lifecycle.js","../../../../../pota/src/core/props/style.js","../../../../../pota/src/core/props/class.js","../../../../../pota/src/core/props/attribute.js","../../../../../pota/src/core/props/@main.js","../../../../../pota/src/core/renderer.js","../../../../../pota/src/use/event.js","../../../../../pota/src/components/CustomElement.js","../../../../../pota/src/components/Collapse.js","../../../../../pota/src/components/Dynamic.js","../../../../../pota/src/components/For.js","../../../../../pota/src/components/Portal.js","../../../../../pota/src/components/Head.js","../../../../../pota/src/components/Range.js","../../../../../pota/src/lib/store/blacklist.js","../../../../../pota/src/lib/store/descriptors.js","../../../../../pota/src/lib/store/tracker.js","../../../../../pota/src/lib/store/signalify.js","../../../../../pota/src/lib/store/proxies/base.js","../../../../../pota/src/lib/store/proxies/array.js","../../../../../pota/src/lib/store/proxies/object.js","../../../../../pota/src/lib/store/proxies/map.js","../../../../../pota/src/lib/store/copy.js","../../../../../pota/src/lib/store/mutable.js","../../../../../pota/src/lib/store/reconcile/replace.js","../../../../../pota/src/use/selector.js","../../../../../pota/src/use/scroll.js","../../../../../pota/src/use/url.js","../../../../../pota/src/use/time.js","../../../../../pota/src/components/route/context.js","../../../../../pota/src/use/location.js","../../../../../pota/src/components/Show.js","../../../../../pota/src/components/route/scroll.js","../../../../../pota/src/components/route/Route.js","../../../../../pota/src/components/route/Navigate.js","../../../../../pota/src/components/route/link.js","../../../../../pota/src/components/Suspense.js","../../../../../pota/src/components/Switch.js","../../../../../pota/src/core/xml.js","index.jsx"],"sourcesContent":["export const window = globalThis\n\nexport const requestAnimationFrame = window.requestAnimationFrame\nexport const queueMicrotask = window.queueMicrotask\n\nexport const history = window.history\nexport const navigator = window.navigator\nexport const location = window.location\nexport const origin = location?.origin\n\nexport const Object = window.Object\nexport const Array = window.Array\nexport const Promise = window.Promise\nexport const Symbol = window.Symbol\n\nexport const assign = Object.assign\nexport const create = Object.create\nexport const defineProperties = Object.defineProperties\nexport const defineProperty = Object.defineProperty\nexport const entries = Object.entries\nexport const freeze = Object.freeze\nexport const fromEntries = Object.fromEntries\nexport const getOwnPropertyDescriptor =\n\tObject.getOwnPropertyDescriptor\nexport const getOwnPropertyDescriptors =\n\tObject.getOwnPropertyDescriptors\nexport const getOwnPropertyNames = Object.getOwnPropertyNames\nexport const getOwnPropertySymbols = Object.getOwnPropertySymbols\nexport const getPrototypeOf = Object.getPrototypeOf\nexport const groupBy = Object.groupBy\nexport const hasOwn = Object.hasOwn\nexport const is = Object.is\nexport const isExtensible = Object.isExtensible\nexport const keys = Object.keys\nexport const values = Object.values\nexport const setPrototypeOf = Object.setPrototypeOf\n\nexport const toArray = Array.from\n\n/**\n * @template T\n * @param {T} value\n */\nexport const toValues = value =>\n\tisArray(value)\n\t\t? value\n\t\t: // @ts-expect-error\n\t\t\tisObject(value) && 'values' in value\n\t\t\t? /** @type {{ values(): IterableIterator<T> }} */ (\n\t\t\t\t\tvalue\n\t\t\t\t).values()\n\t\t\t: toArray(/** @type {Iterable<T> | ArrayLike<T>} */ (value))\n\n/**\n * @template T\n * @param {T} value\n */\nexport const toEntries = value =>\n\t// @ts-expect-error\n\tisObject(value) && 'entries' in value\n\t\t? /** @type {{ entries(): IterableIterator<[string, T]> }} */ (\n\t\t\t\tvalue\n\t\t\t).entries()\n\t\t: toArray(/** @type {Iterable<T> | ArrayLike<T>} */ (value))\n\nexport const iterator = Symbol.iterator\nexport const Iterator = window.Iterator\n\nexport const stringify = JSON.stringify\n\n/** @param {unknown} o */\nexport const stringifyReadable = o => stringify(o, null, 2)\n\n/** @param {unknown} o */\nexport const stringifySorted = o => {\n\tfunction sort(o) {\n\t\tif (!isObject(o)) {\n\t\t\treturn o\n\t\t}\n\n\t\tconst asArray = isArray(o)\n\t\t/** @type {unknown[] | { [key: string]: unknown }} */\n\t\tconst tmp = asArray ? [] : {}\n\t\tkeys(o)\n\t\t\t.sort()\n\t\t\t.map(k => (tmp[k] = sort(o[k])))\n\n\t\tif (asArray) {\n\t\t\t// @ts-expect-error\n\t\t\ttmp.sort((a, b) => stringify(a).localeCompare(stringify(b)))\n\t\t}\n\t\treturn tmp\n\t}\n\treturn stringifyReadable(sort(o))\n}\n\n/**\n * @param {(\n * \tresolve: (value: unknown) => void,\n * \treject: (reason?: any) => void,\n * ) => void} fn\n */\nexport const promise = fn => new Promise(fn)\n\n/**\n * Creates a promise together with deferred `resolve`/`reject`\n * helpers.\n *\n * @template T\n * @returns {{\n * \tpromise: Promise<T>\n * \tresolve: (value: T | PromiseLike<T>) => void\n * \treject: (reason?: any) => void\n * }}\n */\nexport const withResolvers = () => Promise.withResolvers()\n\n/**\n * Given a promise it adds `onDone` to `then` and `catch`\n *\n * ```js\n * resolved(promise, onDone)\n * // is same as\n * promise.then(onDone).catch(onDone)\n * ```\n */\nexport const resolved = (promise, onDone) =>\n\tpromise.then(onDone).catch(e => {\n\t\terror(e)\n\t\tonDone(e.toString())\n\t})\n\n/**\n * Runs an array of functions\n *\n * @param {Iterable<Function>} fns\n */\nexport const call = fns => {\n\tfor (const fn of fns) fn()\n}\n\n/**\n * Flats an array recursively and passes values to secondary function\n *\n * @template {unknown | unknown[]} T\n * @param {T} arr\n * @param {(value: T) => void} fn\n */\nexport const flatForEach = (arr, fn) => {\n\tisArray(arr)\n\t\t? arr.flat(Infinity).forEach(value => value && fn(value))\n\t\t: arr\n\t\t\t? fn(arr)\n\t\t\t: nothing\n}\n\n/**\n * Object.defineProperty with `enumerable` and `configurable` set to\n * `true` unless overwriten by `descriptor` argument\n *\n * @template T\n * @param {T} target\n * @param {PropertyKey} key\n * @param {PropertyDescriptor} descriptor\n */\nexport const redefineProperty = (target, key, descriptor) =>\n\tdefineProperty(\n\t\ttarget,\n\t\tkey,\n\t\tassign(create(redefinePropertyDefailts), descriptor),\n\t)\n\nconst redefinePropertyDefailts = {\n\t__proto__: null,\n\tconfigurable: true,\n\tenumerable: true,\n}\n\n/**\n * Returns an object without a prototype\n *\n * @type {Function}\n */\nexport const empty = Object.create.bind(null, null)\n\n/**\n * An empty frozen array\n *\n * @type {readonly unknown[]}\n */\nexport const emptyArray = freeze([])\n\n/** An empty frozen object */\nexport const nothing = freeze(empty())\n\n/**\n * Iterates over own enumerable string and symbol keys.\n *\n * @param {Record<PropertyKey, unknown>} target\n * @returns {IterableIterator<[PropertyKey, unknown]>}\n */\nexport function* entriesIncludingSymbols(target) {\n\tfor (const item of entries(target)) {\n\t\tyield item\n\t}\n\n\tfor (const item of getOwnPropertySymbols(target)) {\n\t\tyield [item, target[item]]\n\t}\n}\n\n/**\n * Compares two values for equality. Handles primitive types, objects,\n * and arrays recursively.\n *\n * @template T\n * @param {T} a - The first value to compare.\n * @param {T} b - The second value to compare.\n * @returns {boolean} True if the values are equal, false otherwise.\n * @url modified version of https://github.com/epoberezkin/fast-deep-equal\n */\nexport function equals(a, b) {\n\tif (a === b) {\n\t\treturn true\n\t}\n\n\tif (a && b && typeof a == 'object' && typeof b == 'object') {\n\t\tif (a.constructor !== b.constructor) {\n\t\t\treturn false\n\t\t}\n\n\t\tlet length, i, k\n\t\tif (isArray(a)) {\n\t\t\tlength = a.length\n\t\t\t// @ts-expect-error\n\t\t\tif (length != b.length) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tfor (i = length; i-- !== 0; ) {\n\t\t\t\tif (!equals(a[i], b[i])) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true\n\t\t}\n\n\t\tif (a.constructor === RegExp)\n\t\t\t// @ts-expect-error\n\t\t\treturn a.source === b.source && a.flags === b.flags\n\t\tif (a.valueOf !== Object.prototype.valueOf)\n\t\t\treturn a.valueOf() === b.valueOf()\n\t\tif (a.toString !== Object.prototype.toString)\n\t\t\treturn a.toString() === b.toString()\n\n\t\tk = keys(a)\n\t\tlength = k.length\n\t\tif (length !== keys(b).length) {\n\t\t\treturn false\n\t\t}\n\n\t\tfor (i = length; i-- !== 0; ) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(b, k[i])) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\tfor (i = length; i-- !== 0; ) {\n\t\t\tvar key = k[i]\n\n\t\t\tif (!equals(a[key], b[key])) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\treturn true\n\t}\n\n\t// true if both NaN, false otherwise\n\treturn a !== a && b !== b\n}\n\n/**\n * Unwraps an array/childNodes to the first item if the length is 1\n *\n * @param {any[] | NodeListOf<ChildNode>} arr\n * @returns {any}\n */\nexport const unwrapArray = arr => (arr.length === 1 ? arr[0] : arr)\n\n/**\n * Flats an array/childNodes recursively\n *\n * @template {unknown | unknown[]} T\n * @param {T} arr\n * @returns {T[]}\n */\nexport const flatToArray = arr =>\n\tisArray(arr) ? arr.flat(Infinity) : [arr]\n\n/**\n * Flats an array/childNodes recursively if its an array else it\n * returns\n *\n * @template {unknown | unknown[]} T\n * @param {T} arr\n * @returns {T[] | T}\n */\nexport const flatNoArray = arr =>\n\tisArray(arr) ? arr.flat(Infinity) : arr\n\n/**\n * Keeps state in the function as the first param\n *\n * @template {(...args: any[]) => any} T\n * @param {T} fn - Function to which add state to it\n * @param {() => DataStore<Map<unknown, unknown>>} [state] - Passed to\n *   `fn` as first param\n * @returns {(...args: Parameters<T>) => ReturnType<T>} A copy of the\n *   function with the state\n */\nexport const withState = /* #__NO_SIDE_EFFECTS__ */ (\n\tfn,\n\tstate = cacheStore,\n) => fn.bind(null, state())\n\n/**\n * Memoizes a unary function using a strong Map-backed cache.\n *\n * @template T, R\n * @param {(value: T) => R} fn\n * @returns {(value: T) => R}\n */\nexport const withCache = fn =>\n\twithState(\n\t\t(cache, thing) => cache.get(thing, thing => fn(thing)),\n\t\tcacheStore,\n\t)\n/**\n * Memoizes a unary function using a WeakMap-backed cache.\n *\n * @template {object} T\n * @template R\n * @param {(value: T) => R} fn\n * @returns {(value: T) => R}\n */\nexport const withWeakCache = fn =>\n\twithState(\n\t\t(cache, thing) => cache.get(thing, thing => fn(thing)),\n\t\tweakStore,\n\t)\n\n/**\n * Safely collects own property values, skipping getters that throw.\n *\n * @param {Record<PropertyKey, unknown>} o\n * @returns {unknown[]}\n */\nexport const getOwnValues = o =>\n\tgetOwnPropertyNames(o).map(key => {\n\t\ttry {\n\t\t\treturn o[key]\n\t\t} catch (e) {}\n\t})\n\n/**\n * Walks a prototype and returns the names of every setter it defines.\n *\n * @param {object} object\n * @param {Set<PropertyKey>} [set]\n * @returns {Set<PropertyKey>}\n */\nexport function getSetterNamesFromPrototype(object, set = new Set()) {\n\tconst descriptors = getOwnPropertyDescriptors(object)\n\n\tfor (const key in descriptors) {\n\t\tif (descriptors[key].set) {\n\t\t\tset.add(key)\n\t\t}\n\t}\n\n\treturn set\n}\n\n/**\n * Unwraps values. If the argument is a function then it runs it\n * recursively and returns the value\n *\n * @template T\n * @param {Accessor<T>} value - Maybe function\n * @returns T\n */\nexport function getValue(value) {\n\twhile (typeof value === 'function')\n\t\tvalue = /** @type {() => T} */ (value)()\n\treturn value\n}\n\n/**\n * Resolves functions (optionally with arguments) and unwraps nested\n * accessors.\n *\n * @template T\n * @param {T} value\n * @param {...unknown} args\n * @returns {T}\n */\nexport const getValueWithArguments = (value, ...args) =>\n\ttypeof value === 'function'\n\t\t? args.length\n\t\t\t? getValue(value(...args))\n\t\t\t: getValue(value())\n\t\t: value\n\n/**\n * Identity function, given `x` returns `x`\n *\n * @template T\n * @param {T} x\n * @returns {T}\n */\nexport const identity = x => x\n\n/**\n * When `value` is an object, it will check if the `key` on `target`\n * is `configurable`\n *\n * @param {object} target\n * @param {PropertyKey} key\n * @param {boolean | undefined} value\n */\nexport const isConfigurable = (target, key, value) => {\n\tif (isObject(value)) {\n\t\tconst descriptor = getOwnPropertyDescriptor(target, key)\n\t\tif (descriptor) {\n\t\t\treturn descriptor.configurable\n\t\t}\n\t}\n\treturn true\n}\n\n/**\n * Returns `true` when `typeof` of `value` is `function`\n *\n * @template T\n * @param {T} value\n * @returns {value is ((...args:unknown[])=>T)}\n */\nexport const isFunction = value => typeof value === 'function'\n\nexport const isNaN = Number.isNaN\n\n/**\n * Returns `true` when value is Iterable\n *\n * @param {unknown} value\n * @returns {value is Iterable<unknown>}\n */\nexport const isIterable = value => value?.[iterator]\n\n/**\n * Returns `true` if the value is `null` or `undefined`\n *\n * @param {unknown} value\n * @returns {value is null | undefined}\n */\nexport const isNullUndefined = value => value == null\n\n/**\n * Returns `true` when typeof of value is object and not null\n *\n * @template T\n * @param {T} value\n * @returns {value is object}\n */\nexport const isObject = value =>\n\tvalue !== null && typeof value === 'object'\n\n/**\n * Returns `true` when `typeof` of `value` is `string`\n *\n * @param {unknown} value\n * @returns {value is string}\n */\nexport const isString = value => typeof value === 'string'\n\n/**\n * Returns `true` when `typeof` of `value` is `number`\n *\n * @param {unknown} value\n * @returns {value is number}\n */\nexport const isNumber = value => typeof value === 'number'\n\n/**\n * Returns `true` when `typeof` of `value` is `symbol`\n *\n * @param {unknown} value\n * @returns {value is symbol}\n */\nexport const isSymbol = value => typeof value === 'symbol'\n\n/**\n * Returns `true` when `typeof` of `value` is `boolean`\n *\n * @param {unknown} value\n * @returns {value is boolean}\n */\nexport const isBoolean = value => typeof value === 'boolean'\n\n/**\n * Returns `true` when `value` may be a promise\n *\n * @template T\n * @param {T} value\n * @returns {value is Promise<T>}\n */\nexport const isPromise = value =>\n\tisFunction(/** @type {any} */ (value)?.then)\n\n/**\n * @template T\n * @param {T} value\n * @returns {value is array}\n */\nexport const isArray = Array.isArray\n\n/**\n * Returns `true` when object morphed between array/object\n *\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport const morphedBetweenArrayAndObject = (a, b) =>\n\t(isObject(a) && !isObject(b)) ||\n\t(isObject(b) && !isObject(a)) ||\n\t(isArray(a) && !isArray(b)) ||\n\t(isArray(b) && !isArray(a))\n\n/**\n * Returns `true` if the property is defined in the `prototype` and\n * absent in the `object`\n *\n * @param {object} target\n * @param {PropertyKey} key\n */\nexport const isPrototypeProperty = (target, key) =>\n\t// must do `key in target` to check that it DOES have it somewhere\n\t// must do !hasOwnProperty to check that isnt an own property\n\tkey in target && !hasOwn(target, key)\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction\nconst GeneratorFunction = function* () {}.constructor\n\n/** Returns `true` when is a generator function */\nexport const isGeneratorFunction = target =>\n\ttarget &&\n\t(target.constructor === GeneratorFunction ||\n\t\ttarget.constructor?.constructor === GeneratorFunction)\n\n/** Function that intentionally performs no operation. */\nexport const noop = () => {}\n\n// an optional value is `true` by default, so most of the time is undefined which means is `true`\n// to avoid having conditions like `if(something.bla === undefined || something.bla)`\n// this function will short it to `if(optional(something.bla))`\n// additionally the value is resolved, for cases like `when={() => show() && optional(props.when)}`\n\n/**\n * Returns `true` when value is `true` or `undefined`\n *\n * @template T\n * @param {T} value\n * @returns {true | T} True when value is true or undefined\n */\nexport const optional = value =>\n\tvalue === undefined || getValue(value)\n\nexport function* range(start, stop, step) {\n\tif (step < 0) step = Math.abs(step)\n\tyield start\n\tif (start < stop) {\n\t\twhile (start < stop) {\n\t\t\tyield (start += step)\n\t\t}\n\t} else {\n\t\twhile (start > stop) {\n\t\t\tyield (start -= step)\n\t\t}\n\t}\n}\n\nexport const {\n\townKeys: reflectOwnKeys,\n\thas: reflectHas,\n\tdeleteProperty: reflectDeleteProperty,\n\tgetOwnPropertyDescriptor: reflectGetOwnPropertyDescriptor,\n\tget: reflectGet,\n\tapply: reflectApply,\n\tset: reflectSet,\n\tisExtensible: reflectIsExtensible,\n} = Reflect\n\n/**\n * Removes a value from an array\n *\n * @template T\n * @param {T[]} array\n * @param {T} value To remove from the array\n */\nexport function removeFromArray(array, value) {\n\tconst index = array.indexOf(value)\n\tif (index !== -1) array.splice(index, 1)\n}\n/**\n * Removes values from an array based on a condition\n *\n * @template T\n * @param {T[]} array\n * @param {(index: number, value: T) => boolean} cb Function with\n *   condition\n */\nexport function removeFromArrayConditionally(array, cb) {\n\tlet i = array.length\n\twhile (i--) {\n\t\tif (cb(i, array[i])) {\n\t\t\tarray.splice(i, 1)\n\t\t}\n\t}\n}\n/**\n * Removes values from an array based on a condition\n *\n * @template T\n * @param {Iterable<T>} iterable\n * @param {PropertyKey} key Function with condition\n */\nexport function indexByKey(iterable, key) {\n\tconst byKey = empty()\n\tfor (const item of iterable) {\n\t\tbyKey[item[key]] = item\n\t}\n\treturn byKey\n}\n\n/**\n * Returns the internal `[[Class]]` tag for a value (e.g. `Array`).\n *\n * @param {unknown} obj\n * @returns {string}\n */\nexport const typeString = obj =>\n\tObject.prototype.toString.call(obj).slice(8, -1)\n\n/**\n * Walks up a linked structure invoking `cb` for each parent until\n * `cb` returns `true`.\n *\n * @param {object} context\n * @param {PropertyKey} propertyName\n * @param {(value: any) => boolean | void} cb\n * @returns {boolean} Whether the callback succeeded.\n */\nexport function walkParents(context, propertyName, cb) {\n\twhile (context) {\n\t\tif (cb(context)) return true\n\t\tcontext = context[propertyName]\n\t}\n\treturn false\n}\n\n/** @template {Map<any, any> | WeakMap<any, any>} T */\nclass DataStore {\n\t/** @param {new () => T} kind */\n\tconstructor(kind) {\n\t\tconst store = new kind()\n\n\t\tconst get = store.get.bind(store)\n\t\tconst set = store.set.bind(store)\n\t\tconst has = store.has.bind(store)\n\t\tconst del = store.delete.bind(store)\n\n\t\tthis.set = set\n\t\tthis.has = has\n\t\tthis.delete = del\n\n\t\tthis.get = (target, defaults = null) => {\n\t\t\tconst o = get(target)\n\n\t\t\tif (defaults !== null && o === undefined) {\n\t\t\t\t/**\n\t\t\t\t * Default values should be passed as a function, so we dont\n\t\t\t\t * constantly initialize values when giving them\n\t\t\t\t */\n\t\t\t\tdefaults = defaults(target)\n\t\t\t\tset(target, defaults)\n\t\t\t\treturn defaults\n\t\t\t}\n\t\t\treturn o\n\t\t}\n\t}\n\n\t*[Symbol.iterator]() {\n\t\tyield this.get\n\t\tyield this.set\n\t\tyield this.has\n\t\tyield this.delete\n\t}\n}\n\n/**\n * Creates a WeakMap-backed `DataStore` instance.\n *\n * @returns {DataStore<WeakMap<any, any>>}\n */\nexport const weakStore = () => new DataStore(WeakMap)\n/**\n * Creates a Map-backed `DataStore` instance.\n *\n * @returns {DataStore<Map<any, any>>}\n */\nexport const cacheStore = () => new DataStore(Map)\n\n/**\n * `console.warn` wrapper kept for consistent dependency\n * injection/mocking.\n *\n * @param {...unknown} args\n * @returns {void}\n */\nexport const warn = (...args) => console.warn(...args)\n/**\n * `console.error` wrapper kept for consistent dependency\n * injection/mocking.\n *\n * @param {...unknown} args\n * @returns {void}\n */\nexport const error = (...args) => console.error(...args)\n\n/**\n * 1. A non-extensible object must return the real object, but still its\n *    children properties could be tracked/proxied\n * 2. A non-configurable property must return the real value\n *\n * [[Get]] For proxy objects enforces the following invariants:\n *\n * - The value reported for a property must be the same as the value of\n *   the corresponding target object property if the target object\n *   property is a non-writable, non-configurable own data property.\n * - The value reported for a property must be undefined if the\n *   corresponding target object property is a non-configurable own\n *   accessor property that has undefined as its [[Get]] attribute.\n */\nexport const isProxyValueReturnInvariant = (target, key, value) =>\n\t!isObject(value) ||\n\t!reflectIsExtensible(target) ||\n\treflectGetOwnPropertyDescriptor(target, key)?.configurable === false\n","// symbols\n\nimport { Symbol } from './lib/std.js'\n\nexport const $isComponent = Symbol()\nexport const $isMap = Symbol()\n\nexport const $isMutable = Symbol()\n\n// supported namespaces\n\nconst prefix = 'http://www.w3.org/'\n\n// when a tag/attribute is missing the namespace this puts it back in\n\nexport const NS = {\n\t__proto__: null,\n\tsvg: prefix + '2000/svg',\n\tmath: prefix + '1998/Math/MathML',\n\thtml: prefix + '1999/xhtml',\n\txlink: prefix + '1999/xlink',\n\txmlns: prefix + '2000/xmlns/',\n\txml: prefix + 'XML/1998/namespace',\n}\n","import {\n\tassign,\n\tcall,\n\tgetValue,\n\tisArray,\n\tisFunction,\n\tisPromise,\n\tnoop,\n\tnothing,\n\tqueueMicrotask,\n\tremoveFromArray,\n\tSymbol,\n\twalkParents,\n} from './std.js'\n\n/**\n * This is so far the core of Solid JS 1.x Reactivity, but ported to\n * classes and adapted to my taste.\n *\n * Adaptation for potas needs include:\n *\n * - Ported to Classes what does fit\n * - Signal has any options\n * - Writing to a signal returns `boolean` to tell if the value changed\n * - Signal is an object that could be used as signal.read/write or\n *   destructuring\n * - Signals can save and won't run functions\n * - `update` function on Signal that could be used to use the old value\n *   to set a new value\n * - The system is wrapped in a `createReactiveSystem` function so many\n *   systems can be run at the same time, for example for the\n *   developer tools context, so dev-tools context doesnt mess up the\n *   real context\n *\n * WARNING: typings here are a mess, Im slowly working on it.\n *\n * @url https://www.solidjs.com/\n * @url https://github.com/solidjs/solid\n * @url https://github.com/solidjs/signals\n */\n\nexport function createReactiveSystem() {\n\tconst CLEAN = 0\n\tconst STALE = 1\n\tconst CHECK = 2\n\n\t/** @type {undefined | Computation} */\n\tlet Owner\n\n\t/** @type {undefined | Computation} */\n\tlet Listener\n\n\t/** @type {undefined | Memo[]} */\n\tlet Updates\n\n\t/** @type {undefined | any[]} */\n\tlet Effects\n\n\tlet Time = 0\n\n\t// ROOT\n\n\tclass Root {\n\t\t/** @type {undefined | Root} */\n\t\towner\n\n\t\t/** @type {Computation | Computation[]} */\n\t\towned\n\n\t\t/** @type {undefined | Function | Function[]} */\n\t\tcleanups\n\n\t\t/** @type {Record<symbol, unknown>} */\n\t\tcontext\n\n\t\t/**\n\t\t * @param {Computation} owner\n\t\t * @param {object} [options]\n\t\t */\n\t\tconstructor(owner, options) {\n\t\t\tif (owner) {\n\t\t\t\tthis.owner = owner\n\n\t\t\t\tif (owner.context) {\n\t\t\t\t\tthis.context = owner.context\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toptions && assign(this, options)\n\t\t}\n\t\t/** @param {Function} fn */\n\t\taddCleanups(fn) {\n\t\t\tif (!this.cleanups) {\n\t\t\t\tthis.cleanups = fn\n\t\t\t} else if (isArray(this.cleanups)) {\n\t\t\t\tthis.cleanups.push(fn)\n\t\t\t} else {\n\t\t\t\tthis.cleanups = [this.cleanups, fn]\n\t\t\t}\n\t\t}\n\t\t/** @param {Function} fn */\n\t\tcleanupCancel(fn) {\n\t\t\tif (!this.cleanups) {\n\t\t\t} else if (this.cleanups === fn) {\n\t\t\t\tthis.cleanups = undefined\n\t\t\t} else if (isArray(this.cleanups)) {\n\t\t\t\tremoveFromArray(this.cleanups, fn)\n\t\t\t}\n\t\t}\n\t\t/** @param {Computation} value */\n\t\taddOwned(value) {\n\t\t\tif (!this.owned) {\n\t\t\t\tthis.owned = value\n\t\t\t} else if (isArray(this.owned)) {\n\t\t\t\tthis.owned.push(value)\n\t\t\t} else {\n\t\t\t\tthis.owned = [this.owned, value]\n\t\t\t}\n\t\t}\n\n\t\tdispose() {\n\t\t\tthis.disposeOwned()\n\t\t\tthis.doCleanups()\n\t\t}\n\n\t\tdisposeOwned() {\n\t\t\tif (!this.owned) {\n\t\t\t} else if (isArray(this.owned)) {\n\t\t\t\tfor (let i = this.owned.length - 1; i >= 0; i--) {\n\t\t\t\t\tthis.owned[i].dispose()\n\t\t\t\t}\n\t\t\t\tthis.owned = undefined\n\t\t\t} else {\n\t\t\t\tthis.owned.dispose()\n\t\t\t\tthis.owned = undefined\n\t\t\t}\n\t\t}\n\n\t\tdoCleanups() {\n\t\t\tif (!this.cleanups) {\n\t\t\t} else if (isArray(this.cleanups)) {\n\t\t\t\tfor (let i = this.cleanups.length - 1; i >= 0; i--) {\n\t\t\t\t\tthis.cleanups[i]()\n\t\t\t\t}\n\t\t\t\tthis.cleanups = undefined\n\t\t\t} else {\n\t\t\t\tthis.cleanups()\n\t\t\t\tthis.cleanups = undefined\n\t\t\t}\n\t\t}\n\t}\n\n\t// COMPUTATION\n\n\tclass Computation extends Root {\n\t\tstate = 1 /* STALE */\n\n\t\tupdatedAt = 0\n\n\t\t/** @type {Function | undefined} */\n\t\tfn\n\n\t\tsources\n\t\tsourceSlots\n\n\t\t/**\n\t\t * @param {Computation} owner\n\t\t * @param {Function} fn\n\t\t * @param {object} [options]\n\t\t */\n\t\tconstructor(owner, fn, options) {\n\t\t\tsuper(owner, options)\n\n\t\t\tthis.fn = fn\n\n\t\t\towner && owner.addOwned(this)\n\t\t}\n\n\t\tupdate() {\n\t\t\tthis.dispose()\n\n\t\t\tconst time = Time\n\n\t\t\trunWith(this.fn, this, this)\n\n\t\t\t/*} catch (err) {\n\t\t\t\tthis.updatedAt = time + 1\n\t\t\t}*/\n\n\t\t\tif (this.updatedAt < time) {\n\t\t\t\tthis.updatedAt = time\n\t\t\t}\n\t\t}\n\n\t\tdispose() {\n\t\t\tif (this.sources && this.sources.length) {\n\t\t\t\tlet source\n\t\t\t\tlet observers\n\t\t\t\tlet index\n\n\t\t\t\tlet observer\n\t\t\t\tlet slot\n\t\t\t\twhile (this.sources.length) {\n\t\t\t\t\tsource = this.sources.pop()\n\t\t\t\t\tobservers = source.observers\n\n\t\t\t\t\tindex = this.sourceSlots.pop()\n\n\t\t\t\t\tif (observers && observers.length) {\n\t\t\t\t\t\tobserver = observers.pop()\n\t\t\t\t\t\tslot = source.observerSlots.pop()\n\n\t\t\t\t\t\tif (index < observers.length) {\n\t\t\t\t\t\t\tobserver.sourceSlots[slot] = index\n\t\t\t\t\t\t\tobservers[index] = observer\n\t\t\t\t\t\t\tsource.observerSlots[index] = slot\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsuper.dispose()\n\n\t\t\tthis.state = 0 /* CLEAN */\n\t\t}\n\t\tqueue() {\n\t\t\tEffects.push(this)\n\t\t}\n\t}\n\n\tclass Effect extends Computation {\n\t\tuser = true\n\n\t\t/**\n\t\t * @param {Computation} owner\n\t\t * @param {Function} fn\n\t\t * @param {object} [options]\n\t\t */\n\t\tconstructor(owner, fn, options) {\n\t\t\tsuper(owner, fn, options)\n\n\t\t\tEffects ? Effects.push(this) : batch(() => this.update())\n\t\t}\n\t}\n\n\tclass SyncEffect extends Computation {\n\t\t/**\n\t\t * @param {Computation} owner\n\t\t * @param {Function} fn\n\t\t * @param {object} [options]\n\t\t */\n\t\tconstructor(owner, fn, options) {\n\t\t\tsuper(owner, fn, options)\n\n\t\t\tbatch(() => this.update())\n\t\t}\n\t}\n\n\t// SIGNALS\n\n\t/** @template in T */\n\tclass Memo extends Computation {\n\t\tvalue\n\n\t\tobservers\n\t\tobserverSlots\n\n\t\t// options:\n\t\t// equals\n\t\t/**\n\t\t * @param {Computation} owner\n\t\t * @param {Function} fn\n\t\t * @param {object} [options]\n\t\t */\n\t\tconstructor(owner, fn, options) {\n\t\t\tsuper(owner, fn, options)\n\n\t\t\tif (options) {\n\t\t\t\tassign(this, options)\n\t\t\t\tif (options.equals === false) {\n\t\t\t\t\tthis.equals = this.equalsFalse\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tread = () => {\n\t\t\tif (this.state === 1 /* STALE */) {\n\t\t\t\tthis.update()\n\t\t\t} else if (this.state === 2 /* CHECK */) {\n\t\t\t\tconst updates = Updates\n\t\t\t\tUpdates = undefined\n\t\t\t\trunUpdates(() => upstream(this))\n\t\t\t\tUpdates = updates\n\t\t\t}\n\n\t\t\tif (Listener) {\n\t\t\t\tconst sourceSlot = this.observers ? this.observers.length : 0\n\n\t\t\t\tif (Listener.sources) {\n\t\t\t\t\tListener.sources.push(this)\n\t\t\t\t\tListener.sourceSlots.push(sourceSlot)\n\t\t\t\t} else {\n\t\t\t\t\tListener.sources = [this]\n\t\t\t\t\tListener.sourceSlots = [sourceSlot]\n\t\t\t\t}\n\n\t\t\t\tconst observerSlot = Listener.sources.length - 1\n\n\t\t\t\tif (sourceSlot) {\n\t\t\t\t\tthis.observers.push(Listener)\n\t\t\t\t\tthis.observerSlots.push(observerSlot)\n\t\t\t\t} else {\n\t\t\t\t\tthis.observers = [Listener]\n\t\t\t\t\tthis.observerSlots = [observerSlot]\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.value\n\t\t}\n\n\t\twrite(value) {\n\t\t\tif (!this.equals(this.value, value)) {\n\t\t\t\tthis.value = value\n\n\t\t\t\tif (this.observers && this.observers.length) {\n\t\t\t\t\trunUpdates(() => {\n\t\t\t\t\t\tfor (const observer of this.observers) {\n\t\t\t\t\t\t\tif (observer.state === 0 /* CLEAN */) {\n\t\t\t\t\t\t\t\tobserver.queue()\n\t\t\t\t\t\t\t\tobserver.observers && downstream(observer)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tobserver.state = 1 /* STALE */\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * @param {T} a\n\t\t * @param {T} b\n\t\t */\n\t\tequals(a, b) {\n\t\t\treturn a === b\n\t\t}\n\t\t/**\n\t\t * @param {T} a\n\t\t * @param {T} b\n\t\t */\n\t\tequalsFalse(a, b) {\n\t\t\treturn false\n\t\t}\n\t\tupdate() {\n\t\t\tthis.dispose()\n\n\t\t\tconst time = Time\n\n\t\t\tconst nextValue = runWith(this.fn, this, this)\n\n\t\t\t/*} catch (err) {\n\t\t\t\tthis.state = 1 // STALE\n\t\t\t\tthis.disposeOwned()\n\n\t\t\t\tthis.updatedAt = time + 1\n\n\t\t\t\tthrow err\n\t\t\t} */\n\n\t\t\tif (this.updatedAt <= time) {\n\t\t\t\tthis.write(nextValue)\n\t\t\t\tthis.updatedAt = time\n\t\t\t}\n\t\t}\n\t\tqueue() {\n\t\t\tUpdates.push(this)\n\t\t}\n\t}\n\n\t/** @template in T */\n\tclass Derived extends Memo {\n\t\tisResolved\n\n\t\t/**\n\t\t * @param {Computation} owner\n\t\t * @param {() => T} fn\n\t\t * @param {unknown} [initialValue]\n\t\t */\n\t\tconstructor(owner, fn, initialValue) {\n\t\t\tsuper(owner, fn)\n\n\t\t\tthis.value = this.initialValue = initialValue\n\n\t\t\treturn this.self()\n\t\t}\n\n\t\tself() {\n\t\t\treturn assign(\n\t\t\t\t/** @type {SignalFunction<Accessed<T>>} */ (\n\t\t\t\t\t/** @type {unknown} */ (...args) => {\n\t\t\t\t\t\treturn args.length ? this.write(args[0]) : this.read()\n\t\t\t\t\t}\n\t\t\t\t),\n\t\t\t\tthis,\n\t\t\t)\n\t\t}\n\n\t\tresolved = () => {\n\t\t\tthis.read() // tracking\n\t\t\treturn this.isResolved === null\n\t\t}\n\t\trun = () => {\n\t\t\tthis.update()\n\t\t}\n\t\tupdate() {\n\t\t\tthis.dispose()\n\t\t\trunWith(\n\t\t\t\t() => {\n\t\t\t\t\tthis.write(this.fn())\n\t\t\t\t},\n\t\t\t\tthis,\n\t\t\t\tthis,\n\t\t\t)\n\t\t\t/*\n\t\t\t\t} catch (err) {\n\t\t\t\t\tthis.state = 1 // STALE\n\t\t\t\t\tthis.disposeOwned()\n\n\t\t\t\t\tthis.updatedAt = time + 1\n\n\t\t\t\t\tthrow err\n\t\t\t\t}\n\t\t\t*/\n\t\t}\n\t\twrite(nextValue) {\n\t\t\tconst time = Time\n\n\t\t\tif (this.updatedAt <= time) {\n\t\t\t\tthis.isResolved = undefined\n\n\t\t\t\twithValue(\n\t\t\t\t\tnextValue,\n\t\t\t\t\tnextValue => {\n\t\t\t\t\t\tif (this.updatedAt <= time) {\n\t\t\t\t\t\t\tthis.isResolved = null\n\n\t\t\t\t\t\t\tthis.writeNextValue(nextValue)\n\t\t\t\t\t\t\tthis.updatedAt = time\n\n\t\t\t\t\t\t\tthis.resolve && this.resolve(this)\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\t// is a promise so restore `then`\n\t\t\t\t\t\tthis.thenRestore()\n\t\t\t\t\t\t// remove the old value while the promise is resolving\n\t\t\t\t\t\tthis.writeNextValue(this.initialValue)\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\twriteNextValue(value) {\n\t\t\tif (!this.equals(this.value, value)) {\n\t\t\t\tthis.value = value\n\n\t\t\t\tif (this.observers && this.observers.length) {\n\t\t\t\t\trunUpdates(() => {\n\t\t\t\t\t\tfor (const observer of this.observers) {\n\t\t\t\t\t\t\tif (observer.state === 0 /* CLEAN */) {\n\t\t\t\t\t\t\t\tobserver.queue()\n\t\t\t\t\t\t\t\tobserver.observers && downstream(observer)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tobserver.state = 1 /* STALE */\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Thenable stuff. It has to be a property so assign works\n\t\t * properly\n\t\t */\n\t\tthen = (resolve, reject) => {\n\t\t\tthis._then(resolve, reject)\n\t\t}\n\t\t_then(resolve, reject) {\n\t\t\tthis.resolve = () => {\n\t\t\t\tthis.then = undefined\n\t\t\t\tthis.resolve = undefined\n\t\t\t\tresolve(this.self())\n\t\t\t}\n\t\t\tif (this.resolved()) {\n\t\t\t\tthis.resolve()\n\t\t\t}\n\t\t}\n\t\tthenRestore() {\n\t\t\tif (!this.then) {\n\t\t\t\t// TODO: unsure if has to be restored\n\t\t\t\tthis.then = this._then\n\t\t\t}\n\t\t}\n\t}\n\n\t// SIGNAL\n\n\t/**\n\t * @template in T\n\t * @type SignalObject<T>\n\t */\n\tclass Signal {\n\t\tvalue\n\n\t\t/** @private */\n\t\tobservers\n\t\t/** @private */\n\t\tobserverSlots\n\n\t\t// options:\n\t\t// equals\n\n\t\t/**\n\t\t * @param {T} [value]\n\t\t * @param {SignalOptions<T>} [options]\n\t\t */\n\t\tconstructor(value, options) {\n\t\t\tthis.value = value\n\t\t\tif (options) {\n\t\t\t\tassign(this, options)\n\t\t\t\tif (options.equals === false) {\n\t\t\t\t\tthis.equals = this.equalsFalse\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t/** @returns SignalAccessor<T> */\n\t\tread = () => {\n\t\t\tif (Listener) {\n\t\t\t\tconst sourceSlot = this.observers ? this.observers.length : 0\n\n\t\t\t\tif (Listener.sources) {\n\t\t\t\t\tListener.sources.push(this)\n\t\t\t\t\tListener.sourceSlots.push(sourceSlot)\n\t\t\t\t} else {\n\t\t\t\t\tListener.sources = [this]\n\t\t\t\t\tListener.sourceSlots = [sourceSlot]\n\t\t\t\t}\n\n\t\t\t\tconst observerSlot = Listener.sources.length - 1\n\n\t\t\t\tif (sourceSlot) {\n\t\t\t\t\tthis.observers.push(Listener)\n\t\t\t\t\tthis.observerSlots.push(observerSlot)\n\t\t\t\t} else {\n\t\t\t\t\tthis.observers = [Listener]\n\t\t\t\t\tthis.observerSlots = [observerSlot]\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.value\n\t\t}\n\t\t/**\n\t\t * @param {T} [value]\n\t\t * @returns SignalSetter<T>\n\t\t */\n\t\twrite = value => {\n\t\t\tif (!this.equals(this.value, value)) {\n\t\t\t\tthis.value = value\n\n\t\t\t\tif (this.observers && this.observers.length) {\n\t\t\t\t\trunUpdates(() => {\n\t\t\t\t\t\tfor (const observer of this.observers) {\n\t\t\t\t\t\t\tif (observer.state === 0 /* CLEAN */) {\n\t\t\t\t\t\t\t\tobserver.queue()\n\t\t\t\t\t\t\t\tobserver.observers && downstream(observer)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tobserver.state = 1 /* STALE */\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\treturn true\n\t\t\t}\n\t\t\treturn false\n\t\t}\n\t\t/**\n\t\t * @type SignalUpdate<T>\n\t\t * @returns SignalUpdate<T>\n\t\t */\n\t\tupdate = value => this.write(value(this.value))\n\n\t\t/**\n\t\t * @param {T} a\n\t\t * @param {T} b\n\t\t */\n\t\tequals(a, b) {\n\t\t\treturn a === b\n\t\t}\n\n\t\t/**\n\t\t * @param {T} a\n\t\t * @param {T} b\n\t\t */\n\t\tequalsFalse(a, b) {\n\t\t\treturn false\n\t\t}\n\n\t\t*[Symbol.iterator]() {\n\t\t\t/** @type SignalAccessor<T> */\n\t\t\tyield this.read\n\t\t\t/** @type SignalSetter<T> */\n\t\t\tyield this.write\n\t\t\t/** @type SignalUpdate<T> */\n\t\t\tyield this.update\n\t\t}\n\t}\n\n\t// API\n\n\t/**\n\t * Creates a new root\n\t *\n\t * @template T\n\t * @param {(dispose: () => void) => T} fn\n\t * @param {object} [options]\n\t * @returns {T}\n\t */\n\tfunction root(fn, options) {\n\t\tconst root = new Root(Owner, options)\n\t\treturn runWithOwner(root, () => fn(() => root.dispose()))\n\t}\n\n\t/**\n\t * Creates a signal\n\t *\n\t * @template T\n\t * @param {T} [initialValue] - Initial value of the signal\n\t * @param {SignalOptions<T>} [options] - Signal options\n\t */\n\t/* #__NO_SIDE_EFFECTS__ */ function signal(initialValue, options) {\n\t\treturn /** @type {SignalObject<T>} */ (\n\t\t\t/** @type {unknown} */ (new Signal(initialValue, options))\n\t\t)\n\t}\n\n\t/**\n\t * Creates an effect\n\t *\n\t * @template T\n\t * @param {() => T} fn\n\t * @param {object} [options]\n\t */\n\tfunction effect(fn, options) {\n\t\tnew Effect(Owner, fn, options)\n\t}\n\n\t/**\n\t * Creates an run once effect\n\t *\n\t * @template T\n\t * @param {() => T} fn\n\t * @param {object} [options]\n\t */\n\tfunction track(fn, options) {\n\t\tlet ran\n\t\tnew Effect(\n\t\t\tOwner,\n\t\t\t() => {\n\t\t\t\tif (ran === undefined) {\n\t\t\t\t\tran = null\n\t\t\t\t\tfn()\n\t\t\t\t}\n\t\t\t},\n\t\t\toptions,\n\t\t)\n\t}\n\n\t/**\n\t * Creates a syncEffect\n\t *\n\t * @template T\n\t * @param {() => T} fn\n\t * @param {object} [options]\n\t * @returns T\n\t */\n\tfunction syncEffect(fn, options) {\n\t\tnew SyncEffect(Owner, fn, options)\n\t}\n\n\t/**\n\t * Creates an effect with explicit dependencies\n\t *\n\t * @template T\n\t * @param {Function} depend - Function that causes tracking\n\t * @param {() => T} fn - Function that wont cause tracking\n\t * @param {object} [options]\n\t */\n\tfunction on(depend, fn, options) {\n\t\teffect(() => {\n\t\t\tdepend()\n\t\t\tuntrack(fn)\n\t\t}, options)\n\t}\n\n\t/**\n\t * Creates a read-only signal from the return value of a function\n\t * that automatically updates\n\t *\n\t * @template T\n\t * @param {() => T} fn - Function to re-run when dependencies change\n\t * @param {SignalOptions<T>} [options]\n\t * @returns {SignalAccessor<T>}\n\t */\n\t/* #__NO_SIDE_EFFECTS__ */ function memo(fn, options = undefined) {\n\t\treturn /** @type {SignalAccessor<T>} */ (\n\t\t\t/** @type {unknown} */ (new Memo(Owner, fn, options).read)\n\t\t)\n\t}\n\t/**\n\t * Lazy and writable version of `memo` that unwraps and tracks\n\t * functions and promises recursively\n\t *\n\t * @template T\n\t * @param {() => T} fn - Function to re-run when dependencies change\n\t * @param {Partial<Accessed<T>>} [initialValue]\n\t * @returns {import('../../pota.d.ts').Derived<Accessed<T>>}\n\t */\n\t/* #__NO_SIDE_EFFECTS__ */ function derived(\n\t\tfn,\n\t\tinitialValue = nothing,\n\t) {\n\t\treturn /** @type {import('../../pota.d.ts').Derived<Accessed<T>>} */ (\n\t\t\t/** @type {unknown} */ (new Derived(Owner, fn, initialValue))\n\t\t)\n\t}\n\n\t/**\n\t * Batches changes to signals\n\t *\n\t * @template T\n\t * @param {() => T} fn\n\t */\n\tconst batch = runUpdates\n\n\t/**\n\t * Returns current owner\n\t *\n\t * @returns {Computation}\n\t */\n\tfunction owner() {\n\t\treturn Owner\n\t}\n\n\t/**\n\t * Runs a function with owner and listener\n\t *\n\t * @param {Function} fn\n\t * @param {Computation} owner\n\t * @param {Listener} [listener]\n\t */\n\tfunction runWith(fn, owner, listener = undefined) {\n\t\tif (listener === Listener && owner === Owner) {\n\t\t\treturn fn()\n\t\t}\n\n\t\tconst prevOwner = Owner\n\t\tconst prevListener = Listener\n\n\t\tOwner = owner\n\t\tListener = listener\n\n\t\ttry {\n\t\t\treturn fn()\n\t\t} finally {\n\t\t\tOwner = prevOwner\n\t\t\tListener = prevListener\n\t\t}\n\t}\n\tfunction runWithOwner(owner, fn) {\n\t\treturn runWith(() => runUpdates(fn, true), owner)\n\t}\n\n\t/**\n\t * Disables tracking for a function\n\t *\n\t * @template T\n\t * @param {() => T} fn - Function to run with tracking disabled\n\t * @returns {T}\n\t */\n\tfunction untrack(fn) {\n\t\tif (Listener === undefined) {\n\t\t\treturn fn()\n\t\t}\n\n\t\treturn runWith(fn, Owner)\n\t}\n\n\t/**\n\t * Runs a callback on cleanup, returns callback\n\t *\n\t * @template {Function} T\n\t * @param {T} fn\n\t * @returns {T}\n\t */\n\tfunction cleanup(fn) {\n\t\tOwner?.addCleanups(fn)\n\t\treturn fn\n\t}\n\n\t// UPDATES\n\n\tfunction runTop(node) {\n\t\tswitch (node.state) {\n\t\t\tcase 0 /* CLEAN */: {\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase 2 /* CHECK */: {\n\t\t\t\tupstream(node)\n\t\t\t\tbreak\n\t\t\t}\n\n\t\t\tdefault: {\n\t\t\t\tconst ancestors = []\n\n\t\t\t\tdo {\n\t\t\t\t\tnode.state && ancestors.push(node)\n\n\t\t\t\t\tnode = node.owner\n\t\t\t\t} while (node && node.updatedAt < Time)\n\n\t\t\t\tfor (let i = ancestors.length - 1, updates; i >= 0; i--) {\n\t\t\t\t\tnode = ancestors[i]\n\n\t\t\t\t\tswitch (node.state) {\n\t\t\t\t\t\tcase 1 /* STALE */: {\n\t\t\t\t\t\t\tnode.update()\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 2 /* CHECK */: {\n\t\t\t\t\t\t\tupdates = Updates\n\t\t\t\t\t\t\tUpdates = undefined\n\t\t\t\t\t\t\trunUpdates(() => upstream(node, ancestors[0]))\n\t\t\t\t\t\t\tUpdates = updates\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @template T\n\t * @param {() => T} fn\n\t * @param {boolean} init\n\t * @returns {T}\n\t */\n\tfunction runUpdates(fn, init = false) {\n\t\tif (Updates) {\n\t\t\treturn fn()\n\t\t}\n\n\t\tlet wait = false\n\n\t\tif (!init) {\n\t\t\tUpdates = []\n\t\t}\n\n\t\tif (Effects) {\n\t\t\twait = true\n\t\t} else {\n\t\t\tEffects = []\n\t\t}\n\n\t\tTime++\n\n\t\ttry {\n\t\t\tconst res = fn()\n\n\t\t\tif (Updates) {\n\t\t\t\tfor (const update of Updates) {\n\t\t\t\t\trunTop(update)\n\t\t\t\t}\n\t\t\t}\n\t\t\tUpdates = undefined\n\n\t\t\tif (!wait) {\n\t\t\t\tconst effects = Effects\n\t\t\t\tEffects = undefined\n\t\t\t\teffects.length && runUpdates(() => runEffects(effects))\n\t\t\t}\n\n\t\t\treturn res\n\t\t} catch (err) {\n\t\t\tif (!wait) {\n\t\t\t\tEffects = undefined\n\t\t\t}\n\t\t\tUpdates = undefined\n\n\t\t\tthrow err\n\t\t}\n\t}\n\n\tfunction runEffects(queue) {\n\t\tlet userLength = 0\n\t\tfor (const effect of queue) {\n\t\t\tif (effect.user) {\n\t\t\t\tqueue[userLength++] = effect\n\t\t\t} else {\n\t\t\t\trunTop(effect)\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < userLength; i++) {\n\t\t\trunTop(queue[i])\n\t\t}\n\t}\n\n\tfunction upstream(node, ignore) {\n\t\tnode.state = 0 /* CLEAN */\n\n\t\tfor (const source of node.sources) {\n\t\t\tif (source.sources) {\n\t\t\t\tswitch (source.state) {\n\t\t\t\t\tcase 1 /* STALE */: {\n\t\t\t\t\t\tif (source !== ignore && source.updatedAt < Time) {\n\t\t\t\t\t\t\trunTop(source)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\tcase 2 /* CHECK */: {\n\t\t\t\t\t\tupstream(source, ignore)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction downstream(node) {\n\t\tfor (const observer of node.observers) {\n\t\t\tif (observer.state === 0 /* CLEAN */) {\n\t\t\t\tobserver.state = 2 /* CHECK */\n\t\t\t\tobserver.queue()\n\t\t\t\tobserver.observers && downstream(observer)\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Creates a context and returns a function to get or set the value\n\t *\n\t * @template T\n\t * @param {T} [defaultValue] - Default value for the context\n\t */\n\t/* #__NO_SIDE_EFFECTS__ */ function context(\n\t\tdefaultValue = undefined,\n\t) {\n\t\tconst id = Symbol()\n\n\t\t/**\n\t\t * @overload Runs `fn` with a new value as context\n\t\t * @param {T} newValue - New value for the context\n\t\t * @param {() => Children} fn - Callback to run with the new\n\t\t *   context value\n\t\t * @returns {Children} Context value\n\t\t */\n\t\t/**\n\t\t * @overload Gets the context value\n\t\t * @returns {T} Context value\n\t\t */\n\t\tfunction useContext(newValue, fn) {\n\t\t\tif (newValue === undefined) {\n\t\t\t\treturn Owner?.context && Owner.context[id] !== undefined\n\t\t\t\t\t? Owner.context[id]\n\t\t\t\t\t: defaultValue\n\t\t\t} else {\n\t\t\t\tlet ret\n\t\t\t\tsyncEffect(() => {\n\t\t\t\t\tOwner.context = {\n\t\t\t\t\t\t...Owner.context,\n\t\t\t\t\t\t[id]: newValue,\n\t\t\t\t\t}\n\t\t\t\t\tret = untrack(fn)\n\t\t\t\t})\n\t\t\t\treturn ret\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Sets the `value` for the context\n\t\t *\n\t\t * @param {object} props\n\t\t * @param {Partial<T>} props.value\n\t\t * @param {Children} props.children\n\t\t * @returns {Children} Children\n\t\t * @url https://pota.quack.uy/Reactivity/Context\n\t\t */\n\t\tuseContext.Provider = props =>\n\t\t\t// @ts-expect-error\n\t\t\tuseContext(props.value, () => context.toHTML(props.children))\n\n\t\t/**\n\t\t * Maps context following `parent` property (if any). When `true`\n\t\t * is returned from the callback it stops walking.\n\t\t *\n\t\t * @param {(context: T) => boolean | void} callback\n\t\t * @param {T} [context]\n\t\t */\n\t\tuseContext.walk = (callback, context) =>\n\t\t\twalkParents(context || useContext(), 'parent', callback)\n\n\t\treturn useContext\n\t}\n\n\t/**\n\t * Returns an owned function, that will only run if the owner wasnt\n\t * dispose already. `onCancel` will run if the owner of the owned\n\t * function is disposed, and wont run if the owned function runs.\n\t *\n\t * @template T\n\t * @template A\n\t * @param {((...args: A[]) => T) | Function} cb\n\t * @param {() => void} [onCancel]\n\t */\n\tconst owned = (cb, onCancel) => {\n\t\tif (cb) {\n\t\t\tconst o = Owner\n\n\t\t\t/**\n\t\t\t * Canceling prevent the callback from running and runs\n\t\t\t * `onCancel` if provided.\n\t\t\t */\n\t\t\tlet cleaned\n\t\t\tconst clean = cleanup(() => {\n\t\t\t\tcleaned = null\n\t\t\t\tonCancel && onCancel()\n\t\t\t})\n\n\t\t\treturn (...args) => {\n\t\t\t\to?.cleanupCancel(clean)\n\t\t\t\treturn cleaned !== null && runWithOwner(o, () => cb(...args))\n\t\t\t}\n\t\t}\n\t\treturn noop\n\t}\n\n\t/**\n\t * Unwraps and tracks functions and promises recursively providing\n\t * the result to a callback\n\t *\n\t * @template T\n\t * @param {Accessor<T> | Promise<T>} value\n\t * @param {(value: T) => void} fn\n\t */\n\tfunction withValue(value, fn, writeDefaultValue = noop) {\n\t\tif (isFunction(value)) {\n\t\t\t// TODO maybe change this to be a memo\n\t\t\teffect(() => withValue(value(), fn, writeDefaultValue))\n\t\t} else if (isPromise(value)) {\n\t\t\tasyncTracking.add()\n\t\t\t/**\n\t\t\t * WriteDefaultValue is used to avoid a double write. If the\n\t\t\t * value has no promises, then it will be a native value or a\n\t\t\t * function, which will resolve without having to wait.\n\t\t\t *\n\t\t\t * In case of promises, the value is resolved at a later point\n\t\t\t * in time, so we need an intermediate default\n\t\t\t */\n\t\t\twriteDefaultValue()\n\n\t\t\tvalue.then(\n\t\t\t\towned(\n\t\t\t\t\tvalue => {\n\t\t\t\t\t\tasyncTracking.remove()\n\t\t\t\t\t\twithValue(value, fn, noop)\n\t\t\t\t\t},\n\t\t\t\t\t() => asyncTracking.remove(),\n\t\t\t\t),\n\t\t\t)\n\t\t} else {\n\t\t\tfn(value)\n\t\t}\n\t}\n\n\t/**\n\t * Unwraps functions and promises recursively canceling if owner\n\t * gets disposed\n\t *\n\t * @template T\n\t * @param {Accessor<T> | Promise<T>} value\n\t * @returns {T | Promise<T> | void}\n\t */\n\tconst resolve = value =>\n\t\tisFunction(value)\n\t\t\t? track(() => resolve(getValue(value)))\n\t\t\t: isPromise(value)\n\t\t\t\t? value.then(owned(resolve))\n\t\t\t\t: value\n\t/**\n\t * Unwraps functions and promises recursively canceling if owner\n\t * gets disposed\n\t *\n\t * @template T\n\t * @template A\n\t * @param {((...args: A[]) => T) | Function} cb\n\t */\n\tconst action = cb => owned((...args) => resolve(cb(...args)))\n\n\t/** Utilities exposed for tracking async work from user-land. */\n\n\tconst asyncTracking = (() => {\n\t\tlet added = false\n\t\tlet fns = []\n\t\tlet count = 0\n\n\t\tfunction add() {\n\t\t\tcount++\n\t\t}\n\n\t\tfunction remove() {\n\t\t\t--count === 0 && queue()\n\t\t}\n\t\tfunction ready(fn) {\n\t\t\tfns.push(owned(fn))\n\t\t\tqueue()\n\t\t}\n\n\t\tfunction queue() {\n\t\t\tif (!added && fns.length) {\n\t\t\t\tadded = true\n\t\t\t\tqueueMicrotask(() => queueMicrotask(() => run()))\n\t\t\t}\n\t\t}\n\t\tfunction run() {\n\t\t\tadded = false\n\n\t\t\tif (count === 0) {\n\t\t\t\tconst cbs = fns.slice()\n\t\t\t\tfns.length = 0\n\t\t\t\tcall(cbs)\n\t\t\t}\n\t\t}\n\t\treturn { add, remove, ready }\n\t})()\n\n\t/** Suspense */\n\tclass createSuspenseContext {\n\t\ts = signal(false)\n\t\tc = 0\n\t\tadd() {\n\t\t\tthis.c++\n\t\t\tasyncTracking.add()\n\t\t}\n\t\tremove() {\n\t\t\tif (--this.c === 0) {\n\t\t\t\tthis.s.write(true)\n\t\t\t}\n\t\t\tasyncTracking.remove()\n\t\t}\n\t\tisEmpty() {\n\t\t\treturn this.c === 0\n\t\t}\n\t}\n\n\tconst useSuspense = context(new createSuspenseContext())\n\n\t// export\n\n\treturn {\n\t\taction,\n\t\tasyncTracking,\n\t\tbatch,\n\t\tcleanup,\n\t\tcontext,\n\t\tcreateSuspenseContext,\n\t\tderived,\n\t\teffect,\n\t\tmemo,\n\t\ton,\n\t\towned,\n\t\towner,\n\t\troot,\n\t\trunWithOwner,\n\t\tsignal,\n\t\tsyncEffect,\n\t\tuntrack,\n\t\tuseSuspense,\n\t\twithValue,\n\t}\n}\n","import { $isComponent, $isMap } from '../constants.js'\n\nimport {\n\temptyArray,\n\tflatNoArray,\n\tgetValue,\n\tisArray,\n\tisFunction,\n\tqueueMicrotask,\n\tremoveFromArray,\n\tresolved,\n\twithResolvers,\n\ttoEntries,\n} from './std.js'\n\n// solid\n\nimport { createReactiveSystem } from './solid.js'\n\nconst {\n\taction,\n\tasyncTracking,\n\tbatch,\n\tcleanup,\n\tcontext,\n\tcreateSuspenseContext,\n\tderived,\n\teffect,\n\tmemo,\n\ton,\n\towned,\n\towner,\n\troot,\n\trunWithOwner,\n\tsignal,\n\tsyncEffect,\n\tuntrack,\n\tuseSuspense,\n\twithValue,\n} = createReactiveSystem()\n\nexport {\n\taction,\n\tasyncTracking,\n\tbatch,\n\tcleanup,\n\tcontext,\n\tcreateSuspenseContext,\n\tderived,\n\teffect,\n\tmemo,\n\ton,\n\towned,\n\towner,\n\troot,\n\trunWithOwner,\n\tsignal,\n\tsyncEffect,\n\tuntrack,\n\tuseSuspense,\n\twithValue,\n\tcreateReactiveSystem,\n}\n\n/**\n * A self contained signal function, when an argument is present it\n * writes to the signal, when theres no argument it reads the signal.\n *\n * @template T\n * @param {T} [value] - Optional initial value\n * @returns {SignalFunction<T>}\n */\nexport function signalFunction(value) {\n\tconst [read, write] = signal(value)\n\t// @ts-expect-error\n\treturn (...args) => (args.length ? write(args[0]) : read())\n}\n\n/**\n * To set and read refs. To use in ref attribute.\n *\n * @template {DOMElement} T\n * @returns {SignalFunction<T>}\n */\nexport const ref = () => signalFunction()\n\n/**\n * Runs a function inside an effect if value is a function\n *\n * @param {unknown} value\n * @param {(value: unknown, prev?: unknown) => unknown} fn\n */\nexport function withPrevValue(value, fn) {\n\tif (isFunction(value)) {\n\t\tlet prev\n\t\teffect(() => {\n\t\t\tconst val = getValue(value)\n\t\t\tfn(val, prev)\n\t\t\tprev = val\n\t\t})\n\t} else {\n\t\tfn(value)\n\t}\n}\n\n/**\n * Returns `true` when all derived has been resolved\n *\n * @template {Derived<unknown>} T\n * @param {...T} args\n * @returns {boolean}\n */\nexport function isResolved(...args) {\n\treturn !args.some(x => !x.resolved())\n}\n\n/**\n * Creates an asynchronously effect\n *\n * @param {(currentRunningEffect: Promise<any>) => any} fn - A\n *   function that receives a `currentRunningEffect` that should be\n *   awaited for when wanting to run effects synchronously, that's it\n *   one effect after another.\n */\nexport function asyncEffect(fn) {\n\tconst queue = []\n\teffect(() => {\n\t\tconst { promise, resolve } = withResolvers()\n\n\t\tqueue.push(promise)\n\n\t\tfunction onDone() {\n\t\t\tremoveFromArray(queue, promise)\n\t\t\tresolve()\n\t\t}\n\n\t\tresolved(\n\t\t\tfn(queue.length === 1 ? undefined : queue[queue.length - 2]),\n\t\t\tonDone,\n\t\t)\n\t})\n}\n\n/** @param {() => unknown} fn */\nexport const microtask = fn => queueMicrotask(owned(fn))\n\n// MAP\n\nclass Row {\n\trunId\n\titem\n\tindex\n\tisDupe\n\tdisposer\n\tnodes\n\tindexSignal\n\t_begin\n\t_end\n\tconstructor(item, index, fn, isDupe, reactiveIndex) {\n\t\tthis.item = item\n\t\tthis.index = index\n\t\tthis.isDupe = isDupe\n\n\t\troot(disposer => {\n\t\t\tthis.disposer = disposer\n\t\t\tif (reactiveIndex) {\n\t\t\t\tthis.indexSignal = signal(index)\n\t\t\t\t/** @type Children[] */\n\t\t\t\tthis.nodes = fn(item, this.indexSignal.read)\n\t\t\t} else {\n\t\t\t\t/** @type Children[] */\n\t\t\t\tthis.nodes = fn(item, index)\n\t\t\t}\n\t\t})\n\t}\n\n\tupdateIndex(index) {\n\t\tif (this.index !== index) {\n\t\t\tthis.index = index // save sort order\n\t\t\tif (this.indexSignal) {\n\t\t\t\tthis.indexSignal.write(index)\n\t\t\t}\n\t\t}\n\t}\n\tbegin() {\n\t\tif (!this._begin) {\n\t\t\tthis.getBegin(this.nodes)\n\t\t}\n\t\treturn this._begin\n\t}\n\tgetBegin(nodes) {\n\t\tif (isArray(nodes)) {\n\t\t\treturn this.getBegin(nodes[0])\n\t\t}\n\t\tthis._begin = nodes\n\t}\n\tend() {\n\t\tif (!this._end) {\n\t\t\tthis.getEnd(this.nodes)\n\t\t}\n\t\treturn this._end\n\t}\n\tgetEnd(nodes) {\n\t\tif (isArray(nodes)) {\n\t\t\treturn this.getEnd(nodes[nodes.length - 1])\n\t\t}\n\t\tthis._end = nodes\n\t}\n\tnodesForRow() {\n\t\tconst begin = this.begin()\n\t\tconst end = this.end()\n\n\t\tconst nodes = [begin]\n\n\t\tlet nextSibling = begin\n\t\twhile (nextSibling !== end) {\n\t\t\tnextSibling = nextSibling.nextSibling\n\t\t\tnodes.push(nextSibling)\n\t\t}\n\n\t\treturn nodes\n\t}\n}\n\n/**\n * Reactive Map\n *\n * @template T\n * @param {Each<T>} list\n * @param {(...args: unknown[]) => Children} callback\n * @param {boolean} [noSort]\n * @param {Children} [fallback]\n * @param {boolean} [reactiveIndex] - Make indices reactive signals\n */\nexport function map(list, callback, noSort, fallback, reactiveIndex) {\n\tconst cache = new Map()\n\tconst duplicates = new Map() // for when caching by value is not possible [1, 2, 1, 1, 1]\n\n\tlet runId = 0\n\n\t/** @type Row[] */\n\tlet rows = []\n\t/** @type Row[] */\n\tlet prev = []\n\n\tfunction clear() {\n\t\tfor (const row of prev) {\n\t\t\trow.disposer()\n\t\t}\n\t\tcache.clear()\n\t\tduplicates.clear()\n\n\t\trows.length = 0\n\t\tprev.length = 0\n\t}\n\n\t// to get rid of all nodes when parent disposes\n\tcleanup(clear)\n\n\tfunction dispose(row) {\n\t\t// delete from cache\n\t\tif (!row.isDupe) {\n\t\t\tcache.delete(row.item)\n\t\t} else {\n\t\t\tconst arr = duplicates.get(row.item)\n\t\t\tarr.length === 1\n\t\t\t\t? duplicates.delete(row.item)\n\t\t\t\t: removeFromArray(arr, row)\n\t\t}\n\n\t\trow.disposer()\n\t}\n\n\t/**\n\t * @param {Function} [fn]\n\t * @returns {Children}\n\t */\n\tfunction mapper(fn) {\n\t\tconst cb = fn\n\t\t\t? (item, index) => fn(callback(item, index), index)\n\t\t\t: callback\n\n\t\tconst value = getValue(list) || emptyArray\n\n\t\t/** To allow iterate objects as if were an array with indexes */\n\t\tconst items = toEntries(value)\n\n\t\trunId++\n\n\t\trows = []\n\t\tconst hasPrev = prev.length\n\n\t\tfor (const [index, item] of items) {\n\t\t\tlet row = hasPrev ? cache.get(item) : undefined\n\n\t\t\tif (row === undefined) {\n\t\t\t\t// if the item doesnt exists, create it\n\t\t\t\trow = new Row(item, index, cb, false, reactiveIndex)\n\t\t\t\tcache.set(item, row)\n\t\t\t} else if (row.runId === runId) {\n\t\t\t\t// a map will save only 1 of any primitive duplicates, say: [1, 1, 1, 1]\n\t\t\t\t// if the saved value was already used on this run, create a new one\n\t\t\t\tlet dupes = duplicates.get(item)\n\t\t\t\tif (!dupes) {\n\t\t\t\t\tdupes = []\n\t\t\t\t\tduplicates.set(item, dupes)\n\t\t\t\t}\n\t\t\t\tfor (const dupe of dupes) {\n\t\t\t\t\tif (dupe.runId !== runId) {\n\t\t\t\t\t\trow = dupe\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (row.runId === runId) {\n\t\t\t\t\trow = new Row(item, index, cb, true, reactiveIndex)\n\t\t\t\t\tdupes.push(row)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trow.runId = runId // mark used on this run\n\t\t\trow.updateIndex(index) // Update existing row's index (reactive if needed)\n\t\t\trows.push(row)\n\t\t}\n\n\t\t// fast clear\n\t\tif (rows.length === 0) {\n\t\t\thasPrev && clear()\n\t\t\tprev = rows\n\t\t\treturn fallback ? fn(fallback) : emptyArray\n\t\t}\n\n\t\t// sort\n\t\tif (hasPrev) {\n\t\t\t// remove rows that arent present on the current run\n\t\t\tfor (let i = 0; i < prev.length; i++) {\n\t\t\t\tif (prev[i].runId !== runId) {\n\t\t\t\t\tdispose(prev[i])\n\t\t\t\t\tremoveFromArray(prev, prev[i--])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// reorder elements\n\t\t\t// `rows.length > 1` because no need for sorting when there are no items\n\t\t\t// `prev.length > 0` to skip sorting on creation as its already sorted\n\t\t\tif (!noSort && rows.length > 1 && prev.length) {\n\t\t\t\t// when appending to already created it shouldnt sort\n\t\t\t\t// as its already sorted\n\t\t\t\tconst unsort = []\n\t\t\t\tfor (let i = 0; i < prev.length && i < rows.length; i++) {\n\t\t\t\t\tif (prev[i] !== rows[i]) {\n\t\t\t\t\t\tunsort.push(rows[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (unsort.length) {\n\t\t\t\t\tlet unsorted = unsort.length\n\t\t\t\t\tif (unsorted) {\n\t\t\t\t\t\tconst sorted = []\n\n\t\t\t\t\t\t// handle swap - unsorted rows should move only next to already sorted\n\t\t\t\t\t\tfor (const usort of unsort) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\trows[usort.index - 1] &&\n\t\t\t\t\t\t\t\t(!unsort.includes(rows[usort.index - 1]) ||\n\t\t\t\t\t\t\t\t\tsorted.includes(rows[usort.index - 1]))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\trows[usort.index - 1]\n\t\t\t\t\t\t\t\t\t.end()\n\t\t\t\t\t\t\t\t\t.after(...usort.nodesForRow())\n\t\t\t\t\t\t\t\tsorted.push(usort)\n\t\t\t\t\t\t\t\tunsorted--\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\trows[usort.index + 1] &&\n\t\t\t\t\t\t\t\t(!unsort.includes(rows[usort.index + 1]) ||\n\t\t\t\t\t\t\t\t\tsorted.includes(rows[usort.index - 1]))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\trows[usort.index + 1]\n\t\t\t\t\t\t\t\t\t.begin()\n\t\t\t\t\t\t\t\t\t.before(...usort.nodesForRow())\n\t\t\t\t\t\t\t\tsorted.push(usort)\n\t\t\t\t\t\t\t\tunsorted--\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (unsorted) {\n\t\t\t\t\t\t\t// handles all other cases\n\t\t\t\t\t\t\t// best for any combination of: push/pop/shift/unshift/insertion/deletion\n\t\t\t\t\t\t\t// must check in reverse as on creation stuff is added to the end\n\n\t\t\t\t\t\t\tlet current = rows[rows.length - 1]\n\t\t\t\t\t\t\tfor (let i = rows.length - 1; i > 0; i--) {\n\t\t\t\t\t\t\t\tconst previous = rows[i - 1]\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tcurrent.begin().previousSibling !== previous.end()\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tcurrent.begin().before(...previous.nodesForRow())\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcurrent = previous\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// save sorted list\n\t\tprev = rows\n\n\t\t// return external representation\n\t\treturn rows.map(item => item.nodes)\n\t}\n\tmapper[$isMap] = undefined\n\treturn mapper\n}\n\n/**\n * Resolves and returns `children` in a memo. A memo in a memo, so\n * reactivity on the inner memo doesnt trigger reactivity outside.\n *\n * @template {Children} T\n * @param {T | (() => T)} fn\n * @url https://pota.quack.uy/resolve\n */\nexport function resolve(fn) {\n\tconst children = isFunction(fn) ? memo(fn) : () => fn\n\treturn memo(() => unwrap(children()))\n}\n\n/**\n * Recursively unwrap children functions\n *\n * @param {Children} children\n */\nfunction unwrap(children) {\n\tif (isFunction(children)) {\n\t\treturn unwrap(children())\n\t}\n\n\tif (isArray(children)) {\n\t\tconst childrens = []\n\t\tfor (let child of children) {\n\t\t\tchild = unwrap(child)\n\t\t\tisArray(child)\n\t\t\t\t? childrens.push(...child)\n\t\t\t\t: childrens.push(child)\n\t\t}\n\t\treturn childrens\n\t}\n\n\treturn children\n}\n\n/**\n * Returns true if the `value` is a `Component`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isComponent = value =>\n\tisFunction(value) && $isComponent in value\n\n/**\n * Makes of `children` a function. Reactive children will run as is,\n * non-reactive children will run untracked, regular children will\n * just return.\n *\n * @template {Children | Children[]} T\n * @param {T} children\n * @returns {(...args: unknown[]) => T}\n */\nexport function makeCallback(children) {\n\t/** Shortcut the most used case */\n\tif (isFunction(children)) {\n\t\treturn markComponent(children)\n\t}\n\n\t/**\n\t * When children is an array, as in `>${[0, 1, 2]}<` then children\n\t * will end as `[[0, 1, 2]]`, so flat it\n\t */\n\tconst childrenMaybeArray = flatNoArray(children)\n\n\treturn isArray(childrenMaybeArray)\n\t\t? markComponent((...args) =>\n\t\t\t\tchildrenMaybeArray.map(child =>\n\t\t\t\t\tisFunction(child) ? child(...args) : child,\n\t\t\t\t),\n\t\t\t)\n\t\t: markComponent((...args) =>\n\t\t\t\tisFunction(childrenMaybeArray)\n\t\t\t\t\t? childrenMaybeArray(...args)\n\t\t\t\t\t: childrenMaybeArray,\n\t\t\t)\n}\n\n/**\n * Marks a function as a `Component`.\n *\n * Allows to tell a `signal function` from a `component function`.\n * Signals and user functions go in effects, for reactivity.\n * Components and callbacks are untracked and wont go in effects to\n * avoid re-rendering if signals are used in the components body\n */\nexport function markComponent(fn) {\n\tfn[$isComponent] = undefined\n\treturn fn\n}\n\n/**\n * Adds an event listener to a node\n *\n * @template {Document | typeof window | DOMElement} TargetElement\n * @param {TargetElement} node - Element to add the event listener\n * @param {EventName} type - The name of the event listener\n * @param {EventHandler<Event, TargetElement>} handler - Function to\n *   handle the event\n * @returns {Function} - An `off` function for removing the event\n *   listener\n * @url https://pota.quack.uy/props/EventListener\n */\nexport function addEvent(node, type, handler) {\n\tnode.addEventListener(\n\t\ttype,\n\t\t/** @type {EventListenerOrEventListenerObject} */ (\n\t\t\t/** @type unknown */ handler\n\t\t),\n\t\t!isFunction(handler)\n\t\t\t? /** @type {EventHandlerOptions} */ (handler)\n\t\t\t: undefined,\n\t)\n\n\t/**\n\t * Removes event on tracking scope disposal.\n\t *\n\t * Situation: the event was added to the `document` or `window`\n\t * manually using `addEvent`, say to listen for clicks as a \"click\n\t * outside\". The event needs to be removed when the component that\n\t * added it is disposed.\n\t */\n\n\treturn cleanup(() => removeEvent(node, type, handler))\n}\n\n/**\n * Removes an event listener from a node\n *\n * @template {Document | typeof window | DOMElement} TargetElement\n * @param {TargetElement} node - Element to add the event listener\n * @param {EventName} type - The name of the event listener\n * @param {EventHandler<Event, TargetElement>} handler - Function to\n *   handle the event\n * @returns {Function} - An `on` function for adding back the event\n *   listener\n * @url https://pota.quack.uy/props/EventListener\n */\nexport function removeEvent(node, type, handler) {\n\tnode.removeEventListener(\n\t\ttype,\n\t\t/** @type {EventListenerOrEventListenerObject} */ (\n\t\t\t/** @type unknown */ handler\n\t\t),\n\t\t!isFunction(handler)\n\t\t\t? /** @type {EventHandlerOptions} */ (handler)\n\t\t\t: undefined,\n\t)\n\n\treturn () => addEvent(node, type, handler)\n}\n\n/**\n * It gives a handler an owner, so stuff runs batched on it, and\n * things like context and cleanup work\n *\n * @template {EventHandler<Event, Element>} T\n * @param {T} handler\n */\nexport const ownedEvent = handler =>\n\t'handleEvent' in handler\n\t\t? {\n\t\t\t\t...handler,\n\t\t\t\thandleEvent: owned(e => handler.handleEvent(e)),\n\t\t\t}\n\t\t: owned(handler)\n","import {\n\temptyArray,\n\tgetValueWithArguments,\n\tisArray,\n\twindow,\n} from '../lib/std.js'\n\nexport const document = window.document\n\nexport const head = document?.head\n\n/**\n * Checks whether a node is connected to a document tree.\n *\n * @param {Node} node\n * @returns {boolean}\n */\nexport const isConnected = node => node.isConnected\n\n/** @returns {Element | null} The currently focused element. */\nexport const activeElement = () => document.activeElement\n\n/**\n * @returns {Element | undefined} The root `<html>` element if\n *   available.\n */\nexport const documentElement = document?.documentElement\n\n/** DocumentFragment constructor exposed for convenience. */\nexport const DocumentFragment = window.DocumentFragment\n\n/**\n * Safely binds a document method so it can be called later.\n *\n * @param {string} fn\n * @returns {Function | undefined}\n */\nconst bind = fn => document && document[fn].bind(document)\n\nexport const createElement = bind('createElement')\nexport const createElementNS = bind('createElementNS')\nexport const createTextNode = bind('createTextNode')\nexport const createComment = bind('createComment')\n\nexport const importNode = bind('importNode')\n\nexport const createTreeWalker = bind('createTreeWalker')\n\n// part\n\n/**\n * Adds a part token to an element, enabling ::part styling.\n *\n * @param {Element & { part: DOMTokenList }} node\n * @param {string} partName\n * @returns {void}\n */\nexport const addPart = (node, partName) => node.part.add(partName)\n\n/**\n * Removes a part token from an element.\n *\n * @param {Element & { part: DOMTokenList }} node\n * @param {string} partName\n * @returns {void}\n */\nexport const removePart = (node, partName) =>\n\tnode.part.remove(partName)\n\n// tokenList\n\n/**\n * Splits a string by whitespace into tokens; returns `emptyArray` for\n * falsy input.\n *\n * @param {string | undefined | null} s\n * @returns {string[]}\n */\nexport const tokenList = s =>\n\ts\n\t\t? s.trim().split(/\\s+/)\n\t\t: /** @type string[] */ (/** @type unknown */ emptyArray)\n\n/**\n * Adds CSS classes to an element using either a string or an array.\n *\n * @param {Element} node\n * @param {string | string[]} className\n */\nexport const addClass = (node, className) =>\n\tclassName.length &&\n\tnode.classList.add(\n\t\t...(isArray(className) ? className : tokenList(className)),\n\t)\n\n/**\n * Removes CSS classes from an element using either a string or an\n * array.\n *\n * @param {Element} node\n * @param {string | string[]} className\n */\nexport const removeClass = (node, className) =>\n\tclassName.length &&\n\tnode.classList.remove(\n\t\t...(isArray(className) ? className : tokenList(className)),\n\t)\n\n// attributes\n\n/**\n * Sets an attribute on a node.\n *\n * @param {Element} node\n * @param {string} name\n * @param {string} value\n */\nexport const setAttribute = (node, name, value) =>\n\tnode.setAttribute(name, value)\n\n/**\n * Determines whether an attribute exists on a node.\n *\n * @param {Element} node\n * @param {string} name\n * @returns {boolean}\n */\nexport const hasAttribute = (node, name) => node.hasAttribute(name)\n\n/**\n * Removes an attribute from a node.\n *\n * @param {Element} node\n * @param {string} name\n */\nexport const removeAttribute = (node, name) =>\n\tnode.removeAttribute(name)\n\n// selector\n\n/**\n * Finds the first matching descendant of `node` using a CSS selector.\n *\n * @param {ParentNode} node\n * @param {string} query\n * @returns {Element | null}\n */\nexport const querySelector = (node, query) =>\n\tnode.querySelector(query)\n\n/**\n * Finds all matching descendants of `node` using a CSS selector.\n *\n * @param {ParentNode} node\n * @param {string} query\n * @returns {NodeListOf<Element>}\n */\nexport const querySelectorAll = (node, query) =>\n\tnode.querySelectorAll(query)\n\n/**\n * Returns `document` for element. That could be a `shadowRoot`\n *\n * @template {Element | DocumentFragment} T\n * @param {T} node\n * @returns {Document | ShadowRoot}\n */\nexport const getDocumentForElement = node => {\n\tconst document = /** @type {Document | ShadowRoot} */ (\n\t\tnode.getRootNode()\n\t)\n\tconst { nodeType } = document\n\t// getRootNode returns:\n\t// 1. Node for isConnected = false\n\t// 2. Document for isConnected = true\n\t// 3. ShadowRoot for custom elements\n\n\t// always return a Document-like\n\treturn nodeType === 11 /* DOCUMENT_FRAGMENT_NODE (11) */ ||\n\t\tnodeType === 9 /* DOCUMENT_NODE (9)*/\n\t\t? document\n\t\t: node.ownerDocument\n}\n\n/**\n * Traverses element nodes depth-first collecting up to `max` results.\n *\n * @param {TreeWalker} walk\n * @param {Node} node\n * @param {number} [max=Infinity] Default is `Infinity`\n * @param {Node[]} [nodes=[]] Default is `[]`\n * @returns {Node[]}\n */\nexport const walkElements = function (\n\twalk,\n\tnode,\n\tmax = Infinity,\n\tnodes = [],\n) {\n\t/**\n\t * The first node is not walked by the walker.\n\t *\n\t * Also the first node could be a DocumentFragment\n\t */\n\tnode.nodeType === 1 && nodes.push(node)\n\n\twalk.currentNode = node\n\n\twhile (nodes.length !== max && (node = walk.nextNode())) {\n\t\tnodes.push(node)\n\t}\n\treturn nodes\n}.bind(\n\tnull,\n\tcreateTreeWalker &&\n\t\tcreateTreeWalker(document, 1 /*NodeFilter.SHOW_ELEMENT*/),\n)\n\n/**\n * Unwraps `value` and returns `element` if result is a `Node`, else\n * `undefined` in the case isn't a `Node`\n *\n * @template T\n * @param {T} value - Maybe function\n * @param {...unknown} args? - Arguments\n * @returns {DOMElement | T | undefined}\n */\nexport function getValueElement(value, ...args) {\n\tconst element = getValueWithArguments(value, ...args)\n\treturn element instanceof Node ? element : undefined\n}\n","import {\n\tpromise,\n\tremoveFromArray,\n\twindow,\n\twithCache,\n\twithState,\n} from '../lib/std.js'\n\nimport { document } from './dom.js'\n\nexport const CSSStyleSheet = window.CSSStyleSheet\n\n/**\n * Creates tagged css and returns a CSSStyleSheet. Mostly for css\n * highlighting in js\n *\n * @param {TemplateStringsArray} template\n * @param {...any} values\n * @returns {CSSStyleSheet}\n */\nexport const css = (template, ...values) =>\n\tsheet(String.raw({ raw: template }, ...values))\n\n/**\n * Creates a stylesheet from a css string\n *\n * @param {string} css\n * @returns {CSSStyleSheet}\n */\nexport const sheet = withCache(css => {\n\tconst sheet = new CSSStyleSheet()\n\t/**\n\t * Replace is asynchronous and can accept `@import` statements\n\t * referencing external resources.\n\t */\n\tsheet.replace(css)\n\n\treturn sheet\n})\n\n/**\n * Returns `adoptedStyleSheets` for a document\n *\n * @param {Document | ShadowRoot} document\n */\nexport const getAdoptedStyleSheets = document =>\n\tdocument?.adoptedStyleSheets\n\nexport const adoptedStyleSheets =\n\t/* #__PURE__*/ getAdoptedStyleSheets(document)\n\n/**\n * Adds a style sheet to the document\n *\n * @param {Document | ShadowRoot} document\n * @param {CSSStyleSheet} styleSheet\n */\nexport const addAdoptedStyleSheet = (document, styleSheet) =>\n\tgetAdoptedStyleSheets(document).push(styleSheet)\n\n/**\n * Removes a style sheet from the document\n *\n * @param {Document | ShadowRoot} document\n * @param {CSSStyleSheet} styleSheet\n */\nexport const removeAdoptedStyleSheet = (document, styleSheet) =>\n\tremoveFromArray(getAdoptedStyleSheets(document), styleSheet)\n\n/**\n * Adds multiple stylesheets to a document or shadow root.\n *\n * @param {Document | ShadowRoot} document - The document or shadow\n *   root to add the stylesheets to.\n * @param {(CSSStyleSheet | string)[]} styleSheets - Array of\n *   stylesheets or stylesheet URLs to add.\n */\nexport function addStyleSheets(document, styleSheets = []) {\n\tfor (const sheet of styleSheets) {\n\t\tif (sheet) {\n\t\t\tsheet instanceof CSSStyleSheet\n\t\t\t\t? addAdoptedStyleSheet(document, sheet)\n\t\t\t\t: addStyleSheetExternal(document, sheet)\n\t\t}\n\t}\n}\n\n/**\n * Adds the stylesheet from urls. It uses a cache, to avoid having to\n * fire a request for each external sheet when used in more than one\n * custom element. Also, all reference the same object.\n *\n * @param {Document | ShadowRoot} document\n * @param {string} text\n */\nexport const addStyleSheetExternal = withState(\n\t(state, document, text) => {\n\t\tstate\n\t\t\t.get(text, text =>\n\t\t\t\ttext.startsWith('http')\n\t\t\t\t\t? fetch(text)\n\t\t\t\t\t\t\t.then(r => r.text())\n\t\t\t\t\t\t\t.then(css => sheet(css))\n\t\t\t\t\t: promise(resolve => resolve(sheet(text))),\n\t\t\t)\n\t\t\t.then(styleSheet => addAdoptedStyleSheet(document, styleSheet))\n\t},\n)\n","import { asyncTracking, owned } from '../lib/reactive.js'\nimport { call, queueMicrotask } from '../lib/std.js'\n\n/**\n * The purpose of this file is to guarantee the timing of some\n * callbacks. It queues a microtask, then the callbacks are added to a\n * position in the array. These are run with a priority.\n */\n\n/** @type boolean */\nlet added\n\n/** @type (()=>void)[][] */\nlet queue\n\n/** Initializes the priority queue buckets and clears the pending flag. */\nfunction reset() {\n\tqueue = [[], [], [], [], [], []]\n\tadded = false\n}\n\n// initialization\nreset()\n\n/**\n * Queues a callback at a priority\n *\n * @param {PropertyKey} priority - Priority\n * @param {() => void} fn - Function to run once the callbacks at this\n *   priority run\n */\nfunction add(priority, fn) {\n\tif (!added) {\n\t\tadded = true\n\t\tqueueMicrotask(run)\n\t}\n\tqueue[priority].push(owned(fn))\n}\n\n/** Runs and clears the current queue batch. */\nfunction run() {\n\tconst q = queue\n\treset()\n\n\tfor (const fns of q) {\n\t\tfns.length && call(fns)\n\t}\n}\n\n/**\n * Queue a function to run before everything else (onProps, onRef,\n * onMount, ready) ex focus restoration\n *\n * @param {() => void} fn\n */\nexport const onFixes = fn => add(0, fn)\n\n/**\n * Queue a function to run before (onRef, onMount, ready) ex running\n * user functions on elements via plugins\n *\n * @param {() => void} fn\n */\nexport const onProps = fn => add(1, fn)\n\n/**\n * Queue a function to run onMount (before ready, after onRef)\n *\n * @param {() => void} fn\n */\nexport const onMount = fn => add(2, fn)\n\n/**\n * Queue a function to run on ready (after onMount)\n *\n * @param {() => void} fn\n * @url https://pota.quack.uy/ready\n */\nexport const ready = fn => add(3, fn)\n\n/**\n * Queue a function to run after all user defined processes\n *\n * @param {() => void} fn\n */\nexport const onDone = fn => add(4, fn)\n\n/**\n * Registers a callback that runs when all async tasks complete.\n *\n * @param {() => void} fn\n */\nexport const readyAsync = asyncTracking.ready\n","import { cacheStore, toArray } from '../../lib/std.js'\nimport { onProps } from '../scheduler.js'\n\nexport const plugins = cacheStore()\nexport const pluginsNS = cacheStore()\n\n/** @type {Set<string> & { xmlns?: string }} */\nexport const namespaces = new Set([\n\t'on',\n\t'prop',\n\t'class',\n\t'style',\n\t'use',\n])\n\n/**\n * Updates the xmlns string containing all registered namespaces Used\n * for XML serialization of components\n */\nfunction updateNamespaces() {\n\tnamespaces.xmlns = toArray(namespaces)\n\t\t.map(ns => `xmlns:${ns}=\"/\"`)\n\t\t.join(' ')\n}\nupdateNamespaces()\n\n/**\n * Defines a prop that can be used on any Element\n *\n * @template T\n * @param {string} propName - Name of the prop\n * @param {(node: DOMElement, propValue: T) => void} fn - Function to\n *   run when this prop is found on any Element\n * @param {boolean} [onMicrotask=true] - To avoid the problem of\n *   needed props not being set, or children elements not created yet.\n *   Default is `true`\n * @url https://pota.quack.uy/props/propsPlugin\n */\nexport const propsPlugin = (propName, fn, onMicrotask) => {\n\tplugin(plugins, propName, fn, onMicrotask)\n}\n\n/**\n * Defines a namespaced prop that can be used on any Element\n *\n * @template T\n * @param {string} NSName - Name of the namespace\n * @param {(\n * \tnode: DOMElement,\n * \tlocalName: string,\n * \tpropValue: T,\n * \tns?: string,\n * ) => void} fn\n *   - Function to run when this prop is found on any Element\n *\n * @param {boolean} [onMicrotask=true] - Set to run on a microtask to\n *   avoid the problem of needed props not being set, or children\n *   elements not being created yet. Default is `true`\n */\nexport const propsPluginNS = (NSName, fn, onMicrotask) => {\n\t// update namespace for the `xml` function\n\tnamespaces.add(NSName)\n\tupdateNamespaces()\n\tplugin(pluginsNS, NSName, fn, onMicrotask)\n}\n\n/**\n * Internal helper to register a prop plugin in a plugin store\n *\n * @param {typeof plugins} plugins - Plugin store to register in\n * @param {string} name - Name of the plugin/prop\n * @param {Function} fn - Handler function to run when prop is found\n * @param {boolean} [onMicrotask=true] - Whether to run on microtask.\n *   Default is `true`\n */\nconst plugin = (plugins, name, fn, onMicrotask = true) => {\n\tplugins.set(\n\t\tname,\n\t\t!onMicrotask ? fn : (...args) => onProps(() => fn(...args)),\n\t)\n}\n","import { withValue } from '../../lib/reactive.js'\n\n/**\n * Sets DOM properties while unwrapping reactive accessors.\n *\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @url https://pota.quack.uy/props/setProperty\n */\nexport const setProperty = (node, name, value) => {\n\twithValue(value, value => _setProperty(node, name, value))\n}\n\n/**\n * Sets Namespace-awareDOM properties while unwrapping reactive\n * accessors.\n *\n * @param {Element} node\n * @param {string} localName\n * @param {unknown} value\n */\nexport const setPropertyNS = (node, localName, value) => {\n\tsetProperty(node, localName, value)\n}\n\n/**\n * Writes raw values to DOM properties.\n *\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n */\nexport function _setProperty(node, name, value) {\n\t// if the value is null or undefined it will be set to null\n\tif (value == null) {\n\t\t// defaulting to `undefined` breaks `progress` tag and the whole page\n\t\tnode[name] = null\n\t} else {\n\t\tnode[name] = value\n\t}\n}\n","import { addEvent, ownedEvent } from '../../lib/reactive.js'\nimport { flatForEach } from '../../lib/std.js'\n\n/**\n * Attaches event handlers (singular or array) to an element.\n *\n * @template {DOMElement} T\n * @param {T} node\n * @param {string} name\n * @param {EventHandlers<Event, T>} value\n */\nexport const setEvent = (node, name, value) => {\n\tflatForEach(value, value => {\n\t\taddEvent(\n\t\t\tnode,\n\t\t\tname,\n\t\t\townedEvent(/** @type EventHandler<Event, Element> */ (value)),\n\t\t)\n\t})\n}\n\n/**\n * Attaches namespaced event handlers, (singular or array) to an\n * element.\n *\n * @template {DOMElement} T\n * @param {T} node\n * @param {string} localName\n * @param {EventHandlers<Event, T>} value\n */\nexport const setEventNS = (node, localName, value) => {\n\tflatForEach(value, value => {\n\t\tsetEvent(node, localName, value)\n\t})\n}\n","/** Returns true or false with a `chance` of getting `true` */\nexport const chance = (chance = 50, generator = random) => {\n\treturn generator() < chance / 100\n}\n\n/** Returns random number between 0 and 1 */\nexport const random = () =>\n\tcrypto.getRandomValues(new Uint32Array(1))[0] / (0xffffffff + 1)\n\n/**\n * Returns an integer between `min` and `max` (inclusive) using the\n * provided generator.\n *\n * @param {number} [min=0] Lowest value in the range. Default is `0`\n * @param {number} [max=100] Highest value in the range. Default is\n *   `100`\n * @param {() => number} [generator=random] Source of uniform floats\n *   between 0 and 1. Default is `random`\n * @returns {number}\n */\nexport const randomBetween = (\n\tmin = 0,\n\tmax = 100,\n\tgenerator = random,\n) => Math.floor(generator() * (max - min + 1)) + min\n\n/**\n * Creates an RGB color string by sampling each channel in the\n * [min,max] range.\n *\n * @param {number} [min=0] Lowest channel value. Default is `0`\n * @param {number} [max=255] Highest channel value. Default is `255`\n * @returns {string}\n */\nexport const randomColor = (min = 0, max = 255) =>\n\t'rgb(' +\n\trandomBetween(min, max) +\n\t',' +\n\trandomBetween(min, max) +\n\t',' +\n\trandomBetween(min, max) +\n\t')'\n\n/**\n * Generates a base36 id string by reading 64 bits from `crypto`.\n *\n * @returns {string}\n */\nexport const randomId = () =>\n\tcrypto.getRandomValues(new BigUint64Array(1))[0].toString(36)\n\n/**\n * Returns a random number generator based on a seed that generates\n * numbers between 0 and 1\n *\n * @param {number} seed\n */\nexport function randomSeeded(seed) {\n\tconst m = 2 ** 35 - 31\n\tlet s = seed % m\n\treturn () => (s = (s * 185852) % m) / m\n}\n","import { withState } from '../../lib/std.js'\nimport { addAdoptedStyleSheet, sheet } from '../../use/css.js'\nimport {\n\taddClass,\n\tgetDocumentForElement,\n\tisConnected,\n} from '../../use/dom.js'\n\nimport { randomId } from '../../use/random.js'\nimport { onMount } from '../scheduler.js'\n\n/**\n * @param {Element} node\n * @param {string} value\n */\nexport const setCSS = (node, value) => {\n\tisConnected(node)\n\t\t? setNodeCSS(node, value)\n\t\t: onMount(() => {\n\t\t\t\tsetNodeCSS(node, value)\n\t\t\t})\n}\n\n/** @type {(node: Element, value: string) => void} */\nconst setNodeCSS = withState((state, node, value) => {\n\tif (value) {\n\t\taddClass(\n\t\t\tnode,\n\t\t\tstate.get(value, value => {\n\t\t\t\tconst id = 'c' + randomId()\n\t\t\t\taddAdoptedStyleSheet(\n\t\t\t\t\tgetDocumentForElement(node),\n\t\t\t\t\tsheet(value.replace(/class/g, '.' + id)),\n\t\t\t\t)\n\t\t\t\treturn id\n\t\t\t}),\n\t\t)\n\t}\n})\n","import { cleanup } from '../../lib/reactive.js'\nimport { flatForEach } from '../../lib/std.js'\n\nimport { onMount } from '../scheduler.js'\n\n/**\n * Invokes `ref` callbacks immediately with the element instance.\n *\n * @param {Element} node\n * @param {Function} value\n */\nexport const setRef = (node, value) => {\n\tflatForEach(value, fn => fn(node))\n}\n\n/**\n * Runs callbacks once the node is connected (after mount).\n *\n * @param {Element} node\n * @param {Function} value\n */\nexport const setConnected = (node, value) => {\n\tonMount(() => flatForEach(value, fn => fn(node)))\n}\n\n/**\n * Registers cleanup callbacks that fire when the scope disposes.\n *\n * @param {Element} node\n * @param {Function} value\n */\nexport const setDisconnected = (node, value) => {\n\tcleanup(() => flatForEach(value, fn => fn(node)))\n}\n","// node style\n\nimport { withValue } from '../../lib/reactive.js'\nimport { isFunction, isObject, isString } from '../../lib/std.js'\n\n/**\n * Applies style attributes (string/object/function) to an element.\n *\n * @param {DOMElement} node\n * @param {StyleAttribute} value\n * @url https://pota.quack.uy/props/setStyle\n */\nexport const setStyle = (node, value) => {\n\tsetNodeStyle(node.style, value)\n}\n\n/**\n * Applies styles within a namespace (e.g. `style:color` bindings).\n *\n * @param {DOMElement} node\n * @param {string} localName\n * @param {StyleAttribute} value\n */\nexport const setStyleNS = (node, localName, value) => {\n\tsetNodeStyle(\n\t\tnode.style,\n\t\tisObject(value) ? value : { [localName]: value },\n\t)\n}\n\n/**\n * Normalizes strings/functions/objects into concrete style\n * assignments.\n *\n * @param {CSSStyleDeclaration} style\n * @param {StyleAttribute} value\n */\nfunction setNodeStyle(style, value) {\n\tif (isString(value)) {\n\t\tstyle.cssText = value\n\t} else if (isFunction(value)) {\n\t\twithValue(value, value => setNodeStyle(style, value))\n\t} else if (isObject(value)) {\n\t\tfor (const name in value) {\n\t\t\tsetStyleValue(style, name, value[name])\n\t\t}\n\t}\n}\n\n/**\n * Sets a single style property, unwrapping reactive values.\n *\n * @param {DOMElement} node\n * @param {string} name\n * @param {unknown} value\n */\nexport const setElementStyle = (node, name, value) => {\n\tsetStyleValue(node.style, name, value)\n}\n\n/**\n * Resolves a possibly reactive style binding before delegating.\n *\n * @param {CSSStyleDeclaration} style\n * @param {string} name\n * @param {unknown} value\n */\nconst setStyleValue = (style, name, value) => {\n\twithValue(value, value => _setStyleValue(style, name, value))\n}\n\n/**\n * Writes raw styles, removing properties for falsy/nullish values.\n *\n * @param {CSSStyleDeclaration} style\n * @param {string} name\n * @param {unknown} value\n */\nconst _setStyleValue = (style, name, value) => {\n\t// if the value is null or undefined it will be removed\n\tvalue == null || value === false\n\t\t? style.removeProperty(name)\n\t\t: style.setProperty(name, /** @type string */ (value))\n}\n","// node class / classList\n\nimport { isFunction, isObject, isString } from '../../lib/std.js'\nimport { withPrevValue } from '../../lib/reactive.js'\n\nimport { addClass, removeClass } from '../../use/dom.js'\n\n/**\n * @param {Element} node\n * @param {object | string | ArrayLike<any>} value\n */\nexport const setClass = (node, value) => {\n\tisString(value)\n\t\t? node.setAttribute('class', value)\n\t\t: setClassList(node, value)\n}\n\n/**\n * @param {Element} node\n * @param {object | string | ArrayLike<any>} value\n * @param {string} localName\n */\nexport const setClassNS = (node, localName, value) => {\n\tisFunction(value) || !isObject(value)\n\t\t? setElementClass(node, localName, value)\n\t\t: setClassList(node, value)\n}\n\n/**\n * @param {Element} node\n * @param {object | string | ArrayLike<any>} value\n * @param {object | string | ArrayLike<any>} [prev]\n */\nexport function setClassList(node, value, prev) {\n\tif (isString(value) || value == null) {\n\t\tprev && _setClassListValue(node, prev, false)\n\t\tvalue && _setClassListValue(node, value, true)\n\t} else if (isObject(value)) {\n\t\tfor (let name in value) {\n\t\t\tsetElementClass(node, name, value[name])\n\t\t}\n\t} else if (isFunction(value)) {\n\t\twithPrevValue(value, (value, prev) => {\n\t\t\tsetClassList(node, value, prev)\n\t\t})\n\t}\n}\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n */\nexport const setElementClass = (node, name, value) => {\n\twithPrevValue(value, (value, prev) => {\n\t\tif (!value && !prev) {\n\t\t\t// on initialization do not remove whats not there\n\t\t} else {\n\t\t\t_setClassListValue(node, name, value)\n\t\t}\n\t})\n}\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n */\nconst _setClassListValue = (node, name, value) => {\n\t// null, undefined or false, the class is removed\n\t!value ? removeClass(node, name) : addClass(node, name)\n}\n","import { withValue } from '../../lib/reactive.js'\n\nimport { NS } from '../../constants.js'\n\n// NODE ATTRIBUTES\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {Accessor<string | boolean>} value\n * @url https://pota.quack.uy/props/setAttribute\n */\nexport const setAttribute = (node, name, value) => {\n\twithValue(value, value => _setAttribute(node, name, value))\n}\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {string | boolean} value\n */\nfunction _setAttribute(node, name, value) {\n\t// if the value is false/null/undefined it will be removed\n\tvalue === false || value == null\n\t\t? node.removeAttribute(name)\n\t\t: node.setAttribute(name, value === true ? '' : value)\n}\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {Accessor<string | boolean>} value\n * @param {string} ns\n * @url https://pota.quack.uy/props/setAttribute\n */\nexport const setAttributeNS = (node, name, value, ns) => {\n\twithValue(value, value => _setAttributeNS(node, name, value, ns))\n}\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {string | boolean} value\n * @param {string} ns\n */\nfunction _setAttributeNS(node, name, value, ns) {\n\t// if the value is false/null/undefined it will be removed\n\tvalue === false || value == null\n\t\t? NS[ns]\n\t\t\t? node.removeAttributeNS(NS[ns], name)\n\t\t\t: node.removeAttribute(name)\n\t\t: NS[ns]\n\t\t\t? node.setAttributeNS(NS[ns], name, value === true ? '' : value)\n\t\t\t: node.setAttribute(name, value === true ? '' : value)\n}\n","import { empty } from '../../lib/std.js'\n\nimport {\n\tplugins,\n\tpluginsNS,\n\tpropsPlugin,\n\tpropsPluginNS,\n} from './plugin.js'\n\n// PLUGINS NS\n\n// properties\n\nimport { setPropertyNS } from './property.js'\npropsPluginNS('prop', setPropertyNS, false)\n\n// events\n\nimport { setEventNS } from './event.js'\npropsPluginNS('on', setEventNS, false)\n\n// PLUGIN BOTH\n\n// css\n\nimport { setCSS } from './css.js'\npropsPlugin('use:css', setCSS) // run in microtask\n\n// mount\n\nimport { setConnected } from './lifecycle.js'\npropsPlugin('use:connected', setConnected, false)\n\n// unmount\n\nimport { setDisconnected } from './lifecycle.js'\npropsPlugin('use:disconnected', setDisconnected, false)\n\n// ref\n\nimport { setRef } from './lifecycle.js'\npropsPlugin('use:ref', setRef, false)\n\n// PLUGIN BOTH DIFFERENT\n\n// styles\n\nimport { setStyle, setStyleNS } from './style.js'\npropsPlugin('style', setStyle, false)\npropsPluginNS('style', setStyleNS, false)\n\n// class\n\nimport { setClass, setClassNS } from './class.js'\npropsPlugin('class', setClass, false)\npropsPluginNS('class', setClassNS, false)\n\n// catch all\n\nconst propNS = empty()\n\nimport { setAttribute, setAttributeNS } from './attribute.js'\n\n/**\n * Assigns props to an Element\n *\n * @template T\n * @param {Element} node - Element to which assign props\n * @param {T} props - Props to assign\n */\nexport function assignProps(node, props) {\n\tfor (const name in props) {\n\t\tassignProp(node, name, props[name])\n\t}\n}\n\n/**\n * Assigns a prop to an Element\n *\n * @template T\n * @param {Element} node\n * @param {string} name\n * @param {any} value\n */\nexport function assignProp(node, name, value) {\n\t// run plugins\n\tlet plugin = plugins.get(name)\n\tif (plugin) {\n\t\tplugin(node, value)\n\t} else if (propNS[name] || name.includes(':')) {\n\t\t// with ns\n\t\tpropNS[name] = propNS[name] || name.split(':')\n\n\t\t// run plugins NS\n\t\tplugin = pluginsNS.get(propNS[name][0])\n\t\tplugin\n\t\t\t? plugin(node, propNS[name][1], value)\n\t\t\t: setAttributeNS(node, name, value, propNS[name][0])\n\t} else {\n\t\t// catch all\n\t\tsetAttribute(node, name, value)\n\t}\n}\n\n/**\n * Assigns a prop to an Element\n *\n * @template T\n * @param {DOMElement} node\n * @param {string} name\n * @param {any} value\n * @param {string} localName\n * @param {string} ns\n */\nexport function assignPropNS(node, name, value, localName, ns) {\n\t// run plugins NS\n\tlet plugin = plugins.get(name)\n\tif (plugin) {\n\t\tplugin(node, value)\n\t} else {\n\t\tplugin = pluginsNS.get(ns)\n\t\tplugin\n\t\t\t? plugin(node, localName, value)\n\t\t\t: setAttributeNS(node, name, value, ns)\n\t}\n}\n","// CONSTANTS\n\nimport { $isComponent, $isMap, NS } from '../constants.js'\n\n// LIB\n\nimport {\n\tunwrapArray,\n\tfreeze,\n\tisArray,\n\titerator,\n\tnothing,\n\tresolved,\n\tstringify,\n\ttoArray,\n\tflatToArray,\n\ttoValues,\n\tisFunction,\n} from '../lib/std.js'\n\nimport {\n\tcreateElement,\n\tcreateElementNS,\n\tcreateTextNode,\n\tdocument,\n\tDocumentFragment,\n\tgetDocumentForElement,\n\thead,\n\timportNode,\n\tisConnected,\n\tquerySelector,\n\twalkElements,\n} from '../use/dom.js'\n\nimport {\n\taddAdoptedStyleSheet,\n\tremoveAdoptedStyleSheet,\n} from '../use/css.js'\n\n// REACTIVE\n\nimport {\n\tcleanup,\n\tcontext,\n\teffect,\n\towned,\n\troot,\n\tsignal,\n\tuntrack,\n\tmarkComponent,\n\tuseSuspense,\n} from '../lib/reactive.js'\n\nimport { onFixes } from './scheduler.js'\n\n// PROPERTIES / ATTRIBUTES\n\nimport { assignProps } from './props/@main.js'\nimport { propsPlugin } from './props/plugin.js'\n\n// STATE\n\nconst useXMLNS = context()\n\n// COMPONENTS\n\n/**\n * Used by the regular JSX transform, as `<>...</>` or\n * `<Fragment>...</Fragment>`.\n */\nexport const Fragment = props => props.children\n\n/**\n * Creates components for things. When props argument is given, the\n * props become fixed. When props argument is ommited, it allows you\n * to keep calling the returned function with new props. Returns a\n * function because we need to render from parent to children instead\n * of from children to parent. This allows to properly set the\n * reactivity tree (think of nested effects that clear inner effects,\n * context, etc).\n *\n * @template T\n * @param {string | Function | Element | object | symbol} value -\n *   Component\n * @param {Props<T>} [props] - Props object\n * @returns {(props: Partial<Props<T>>) => Children}\n * @url https://pota.quack.uy/Component\n */\nexport function Component(value, props) {\n\tif (value === Fragment) {\n\t\treturn props.children\n\t}\n\n\t/** Freeze props so isnt directly writable */\n\tfreeze(props)\n\n\t/** Create a callable function to pass `props` */\n\tconst component = Factory(value)\n\n\treturn props === undefined\n\t\t? component\n\t\t: markComponent(propsOverride =>\n\t\t\t\tcomponent(\n\t\t\t\t\tpropsOverride\n\t\t\t\t\t\t? freeze({ ...props, ...propsOverride })\n\t\t\t\t\t\t: props,\n\t\t\t\t),\n\t\t\t)\n}\n\n/**\n * Creates a component that could be called with a props object\n *\n * @template T\n * @param {string | Function | Element | object | symbol} value -\n *   Component value\n * @returns {(props?: Props<T>) => Children}\n */\nfunction Factory(value) {\n\tswitch (typeof value) {\n\t\tcase 'string': {\n\t\t\t// string component, 'div' becomes <div>\n\t\t\treturn markComponent(props => createTag(value, props))\n\t\t}\n\t\tcase 'function': {\n\t\t\treturn $isComponent in value ? value : markComponent(value)\n\t\t}\n\t\tdefault: {\n\t\t\tif (value instanceof Element) {\n\t\t\t\t// node component <div>\n\t\t\t\treturn markComponent(props => createNode(value, props))\n\t\t\t}\n\n\t\t\t// creates anything\n\t\t\treturn markComponent(() => value)\n\t\t}\n\t}\n}\n\n/**\n * Creates a x/html element from a tagName\n *\n * @template {Props<{ xmlns?: string; is?: string }>} P\n * @param {string} tagName\n * @param {P} props\n * @returns {Element} Element\n */\nfunction createTag(tagName, props) {\n\t/**\n\t * Namespace, use props xmlns or special case svg, math, etc in case\n\t * of missing xmlns attribute\n\t */\n\tconst xmlns = props?.xmlns || NS[tagName]\n\n\treturn withXMLNS(\n\t\txmlns,\n\t\txmlns =>\n\t\t\tcreateNode(\n\t\t\t\txmlns\n\t\t\t\t\t? createElementNS(xmlns, tagName, { is: props?.is })\n\t\t\t\t\t: createElement(tagName, { is: props?.is }),\n\t\t\t\tprops,\n\t\t\t),\n\t\ttagName,\n\t)\n}\n\nlet usedXML\n\n/**\n * Ensures children inherit the right namespace as elements are\n * created.\n *\n * @template T\n * @param {string} xmlns\n * @param {(xmlns: string) => T} fn\n * @param {string} [tagName]\n */\nfunction withXMLNS(xmlns, fn, tagName) {\n\tif (!usedXML) {\n\t\tif (!xmlns) {\n\t\t\treturn fn(xmlns)\n\t\t}\n\t\tusedXML = true\n\t}\n\n\tconst nsContext = useXMLNS()\n\n\tif (xmlns && xmlns !== nsContext) {\n\t\t// the xmlns changed, use the new xmlns\n\t\treturn useXMLNS(xmlns, () => fn(xmlns))\n\t}\n\n\t/**\n\t * `foreignObject` children are created with html xmlns (default\n\t * browser behaviour)\n\t */\n\tif (nsContext && tagName === 'foreignObject') {\n\t\treturn useXMLNS(NS.html, () => fn(nsContext))\n\t}\n\n\treturn fn(nsContext)\n}\n\n// PARTIALS\n\n/**\n * Turns string markup into DOM nodes using the provided namespace.\n *\n * @param {string} content\n * @param {string} [xmlns]\n * @returns {Element | DocumentFragment}\n */\nfunction parseXML(content, xmlns) {\n\tconst template = xmlns\n\t\t? createElementNS(xmlns, 'template')\n\t\t: createElement('template')\n\n\ttemplate.innerHTML = content\n\n\t// xml\n\tlet tlpContent = template.content\n\tif (!tlpContent) {\n\t\tconst childNodes = template.childNodes\n\t\tif (childNodes.length === 1) {\n\t\t\treturn template.firstChild\n\t\t}\n\n\t\ttlpContent = new DocumentFragment()\n\t\ttlpContent.append(...childNodes)\n\t\treturn tlpContent\n\t}\n\n\treturn tlpContent.childNodes.length === 1\n\t\t? tlpContent.firstChild\n\t\t: tlpContent\n}\n\n/**\n * Wraps values for JSX runtime helpers, ensuring we always return a\n * component function.\n *\n * @template T\n * @param {string | Function | Element | object | symbol} value\n * @returns {(props?: Props<T>) => Children}\n */\nexport function createComponent(value) {\n\tconst component = Factory(value)\n\n\treturn props => {\n\t\t/** Freeze props so isnt directly writable */\n\t\tfreeze(props)\n\t\treturn markComponent(() => component(props))\n\t}\n}\n\n/**\n * @template T\n * @param {string} content\n * @param {{\n * \tx?: string\n * \t[i: number]: number\n * \tm?: number\n * } & Record<string, unknown>} [propsData]\n * @returns {(props: T[]) => Children}\n */\nexport function createPartial(content, propsData = nothing) {\n\tlet clone = () => {\n\t\tconst node = withXMLNS(propsData.x, xmlns =>\n\t\t\tparseXML(content, xmlns),\n\t\t)\n\n\t\tclone =\n\t\t\t'i' in propsData\n\t\t\t\t? importNode.bind(null, node, true)\n\t\t\t\t: node.cloneNode.bind(node, true)\n\t\treturn clone()\n\t}\n\n\treturn props =>\n\t\tmarkComponent(() => assignPartialProps(clone(), props, propsData))\n}\n\n/**\n * @template T\n * @param {Element} node\n * @param {Children[]} props\n * @param {{\n * \tx?: string\n * \t[i: number]: number\n * \tm?: number\n * } & Record<string, unknown>} propsData\n * @returns {Children}\n */\nfunction assignPartialProps(node, props, propsData) {\n\tif (props) {\n\t\tconst nodes = walkElements(node, propsData.m)\n\n\t\twithXMLNS(propsData.x, xmlns => {\n\t\t\tfor (let i = 0; i < props.length; i++) {\n\t\t\t\tprops[i](nodes[i in propsData ? propsData[i] : i])\n\t\t\t}\n\t\t})\n\t}\n\n\treturn node instanceof DocumentFragment\n\t\t? toArray(node.childNodes)\n\t\t: node\n}\n\n/**\n * Assigns props to an element and creates its children\n *\n * @template T\n * @param {Element} node - Element to assign props to\n * @param {Props<T>} props - Props to assign\n * @returns {Element} The element with props assigned\n */\nfunction createNode(node, props) {\n\tprops && assignProps(node, props)\n\n\treturn node\n}\n\n/**\n * Creates the children for a parent\n *\n * @template T\n * @param {Element | DocumentFragment} parent\n * @param {Children | ((...unknonwn) => T)} child\n * @param {boolean} [relative]\n * @param {Text} [prev]\n * @param {true} [isComponent]\n * @returns {Children}\n */\nexport function createChildren(\n\tparent,\n\tchild,\n\trelative,\n\tprev,\n\tisComponent,\n) {\n\tswitch (typeof child) {\n\t\t// string/number\n\t\tcase 'string':\n\t\tcase 'number': {\n\t\t\tif (prev instanceof Text) {\n\t\t\t\tprev.nodeValue = /** @type string */ (child)\n\t\t\t\treturn prev\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * The text node could be created by just doing\n\t\t\t * `parent.textContent = value` when the parent node has no\n\t\t\t * children.\n\t\t\t */\n\t\t\tif (!relative && parent.childNodes.length === 0) {\n\t\t\t\tparent.textContent = /** @type string */ (child)\n\t\t\t\treturn parent.firstChild\n\t\t\t}\n\n\t\t\treturn insertNode(parent, createTextNode(child), relative)\n\t\t}\n\n\t\tcase 'function': {\n\t\t\t// component\n\t\t\tif ($isComponent in child) {\n\t\t\t\treturn createChildren(\n\t\t\t\t\tparent,\n\t\t\t\t\tuntrack(/** @type {() => Children} */ (child)),\n\t\t\t\t\trelative,\n\t\t\t\t\tundefined,\n\t\t\t\t\ttrue,\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tlet node = []\n\n\t\t\t// signal/memo/external/user provided function\n\t\t\t// needs placeholder to stay in position\n\t\t\tparent = createPlaceholder(parent, relative)\n\n\t\t\t// For - TODO move this to the `For` component\n\t\t\t$isMap in child\n\t\t\t\t? effect(() => {\n\t\t\t\t\t\tnode = toDiff(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tflatToArray(\n\t\t\t\t\t\t\t\tchild(child => createChildren(parent, child, true)),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t)\n\t\t\t\t\t})\n\t\t\t\t: effect(() => {\n\t\t\t\t\t\t// maybe a signal (at least a function) so needs an effect\n\t\t\t\t\t\tnode = toDiff(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tflatToArray(\n\t\t\t\t\t\t\t\tcreateChildren(parent, child(), true, node[0]),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t)\n\t\t\t\t\t})\n\n\t\t\tcleanup(() => {\n\t\t\t\ttoDiff(node)\n\t\t\t\t// @ts-expect-error\n\t\t\t\tparent.remove()\n\t\t\t})\n\n\t\t\t/**\n\t\t\t * A placeholder is created and added to the document but doesnt\n\t\t\t * form part of the children. The placeholder needs to be\n\t\t\t * returned so it forms part of the group of children. If\n\t\t\t * children are moved and the placeholder is not moved with\n\t\t\t * them, then, whenever children update these will be at the\n\t\t\t * wrong place. wrong place: where the placeholder is and not\n\t\t\t * where the children were moved to\n\t\t\t */\n\t\t\treturn parent\n\t\t}\n\n\t\tcase 'object': {\n\t\t\t// Node/DocumentFragment\n\t\t\tif (child instanceof Node) {\n\t\t\t\t/**\n\t\t\t\t * DocumentFragment are special as only the children get added\n\t\t\t\t * to the document and the document becomes empty. If we dont\n\t\t\t\t * insert them 1 by 1 then we wont have a reference to them\n\t\t\t\t * for deletion on cleanup with node.remove()\n\t\t\t\t */\n\t\t\t\tif (child instanceof DocumentFragment) {\n\t\t\t\t\treturn createChildren(\n\t\t\t\t\t\tparent,\n\t\t\t\t\t\ttoArray(child.childNodes),\n\t\t\t\t\t\trelative,\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\treturn insertNode(\n\t\t\t\t\tparent,\n\t\t\t\t\t/** @type Element */ (child),\n\t\t\t\t\trelative,\n\t\t\t\t)\n\t\t\t}\n\n\t\t\t// children/fragments\n\t\t\tif (isArray(child)) {\n\t\t\t\treturn child.length === 1\n\t\t\t\t\t? createChildren(parent, child[0], relative)\n\t\t\t\t\t: child.map(child =>\n\t\t\t\t\t\t\tcreateChildren(parent, child, relative),\n\t\t\t\t\t\t)\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * The value is `null`, as in {null} or like a show returning\n\t\t\t * `null` on the falsy case\n\t\t\t */\n\t\t\tif (child === null || child === nothing) {\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\t// async values\n\t\t\tif ('then' in child) {\n\t\t\t\tconst suspense = useSuspense()\n\t\t\t\tsuspense.add()\n\n\t\t\t\tconst [value, setValue] = signal(undefined)\n\t\t\t\tconst onResult = owned(\n\t\t\t\t\tresult => {\n\t\t\t\t\t\tif (isComponent && isFunction(result)) {\n\t\t\t\t\t\t\tmarkComponent(result)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsetValue(result)\n\t\t\t\t\t\tsuspense.remove()\n\t\t\t\t\t},\n\t\t\t\t\t() => suspense.remove(),\n\t\t\t\t)\n\n\t\t\t\tresolved(child, onResult)\n\n\t\t\t\treturn createChildren(parent, value, relative)\n\t\t\t}\n\n\t\t\t// iterable/Map/Set/NodeList\n\t\t\tif (iterator in child) {\n\t\t\t\t/**\n\t\t\t\t * For some reason this breaks with a node list in the\n\t\t\t\t * `Context` example of the `html` docs section.\n\t\t\t\t *\n\t\t\t\t *     return toArray(child.values(), child =>\n\t\t\t\t *     \tcreateChildren(parent, child, relative),\n\t\t\t\t *     )\n\t\t\t\t */\n\t\t\t\treturn createChildren(parent, toValues(child), relative)\n\t\t\t}\n\n\t\t\t// CSSStyleSheet\n\t\t\tif (child instanceof CSSStyleSheet) {\n\t\t\t\t/**\n\t\t\t\t * Custom elements wont report a document unless is already\n\t\t\t\t * connected. So our stylesheet would end on the main document\n\t\t\t\t * instead of the shadowRoot\n\t\t\t\t */\n\t\t\t\tonFixes(() => {\n\t\t\t\t\tif (isConnected(parent)) {\n\t\t\t\t\t\tconst doc = getDocumentForElement(parent)\n\t\t\t\t\t\taddAdoptedStyleSheet(doc, child)\n\n\t\t\t\t\t\tcleanup(() => removeAdoptedStyleSheet(doc, child))\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\t// object.toString fancy objects\n\t\t\treturn createChildren(\n\t\t\t\tparent,\n\t\t\t\t// Object.create(null) would fail to convert to string\n\t\t\t\t'toString' in child ? child.toString() : stringify(child),\n\t\t\t\trelative,\n\t\t\t)\n\t\t}\n\t\tcase 'undefined': {\n\t\t\treturn undefined\n\t\t}\n\t\tdefault: {\n\t\t\t// boolean/bigint/symbol/catch all\n\t\t\t// toString() is needed for `Symbol`\n\t\t\treturn insertNode(\n\t\t\t\tparent,\n\t\t\t\tcreateTextNode(child.toString()),\n\t\t\t\trelative,\n\t\t\t)\n\t\t}\n\t}\n}\n\npropsPlugin(\n\t'children',\n\t(node, propValue) => {\n\t\tcreateChildren(node, propValue)\n\t},\n\tfalse,\n)\n\n/**\n * Creates placeholder to keep nodes in position\n *\n * @param {Element | DocumentFragment} parent\n * @param {boolean} [relative]\n * @returns {Element} The placeholder element\n */\nconst createPlaceholder = (parent, relative) =>\n\tinsertNode(parent, createTextNode(''), relative)\n\n/**\n * Adds the element to the document\n *\n * @param {Element | DocumentFragment | ChildNode} parent\n * @param {Element} node\n * @param {boolean} [relative]\n * @returns {Element} The inserted node\n */\nfunction insertNode(parent, node, relative) {\n\t// special case `head`\n\tif (parent === head) {\n\t\tconst name = node.tagName\n\n\t\t// search for tags that should be unique\n\t\tlet prev\n\t\tif (name === 'TITLE') {\n\t\t\tprev = querySelector(head, 'title')\n\t\t} else if (name === 'META') {\n\t\t\tprev =\n\t\t\t\tquerySelector(\n\t\t\t\t\thead,\n\t\t\t\t\t'meta[name=\"' + node.getAttribute('name') + '\"]',\n\t\t\t\t) ||\n\t\t\t\tquerySelector(\n\t\t\t\t\thead,\n\t\t\t\t\t'meta[property=\"' + node.getAttribute('property') + '\"]',\n\t\t\t\t)\n\t\t} else if (\n\t\t\tname === 'LINK' &&\n\t\t\t/** @type HTMLLinkElement */ (node).rel === 'canonical'\n\t\t) {\n\t\t\tprev = querySelector(head, 'link[rel=\"canonical\"]')\n\t\t}\n\n\t\t// replace old node if there's any\n\t\tprev ? prev.replaceWith(node) : parent.appendChild(node)\n\t} else {\n\t\trelative\n\t\t\t? parent.parentNode.insertBefore(node, parent)\n\t\t\t: parent.appendChild(node)\n\t}\n\n\treturn node\n}\n\n// RENDERING\n\n/**\n * WARNINGS Removal of the element on where you render/insert into,\n * wont cause disposal of what you render/insert.\n */\n\n/**\n * Inserts children into a parent\n *\n * @param {any} children - Thing to render\n * @param {Element | null} [parent] - Mount point, defaults to\n *   document.body\n * @param {{ clear?: boolean; relative?: boolean }} [options] -\n *   Mounting options\n * @returns {() => void} Disposer\n * @url https://pota.quack.uy/render\n */\nexport function render(children, parent, options = nothing) {\n\tconst dispose = root(dispose => {\n\t\tinsert(children, parent, options)\n\t\treturn dispose\n\t})\n\n\t// run dispose when the parent scope disposes\n\tcleanup(dispose)\n\n\treturn dispose\n}\n\n/**\n * @param {any} children - Thing to render\n * @param {Element | null} [parent] - Mount point, defaults to\n *   `document.body`\n * @param {{ clear?: boolean; relative?: boolean }} [options] -\n *   Mounting options\n */\nexport function insert(\n\tchildren,\n\tparent = document.body,\n\toptions = nothing,\n) {\n\tif (options.clear && parent) parent.textContent = ''\n\n\tconst node = createChildren(\n\t\tparent,\n\t\tFactory(isFunction(children) ? children : () => children),\n\t\toptions.relative,\n\t)\n\n\tcleanup(() => toDiff(flatToArray(node)))\n\n\treturn node\n}\n\n/**\n * Creates and returns HTML Elements for `children`\n *\n * @param {Children} children\n * @returns {Children}\n * @url https://pota.quack.uy/toHTML\n */\nexport function toHTML(children) {\n\t/**\n\t * DocumentFragment is transformed to an `Array` of `Node/Element`,\n\t * that way we can keep a reference to the nodes. Because when the\n\t * DocumentFragment is used, it removes the nodes from the\n\t * DocumentFragment and then we will lose the reference.\n\t */\n\n\treturn unwrapArray(toHTMLFragment(children).childNodes)\n}\n// @ts-ignore-next.error\ncontext.toHTML = toHTML\n\n/**\n * Creates and returns a DocumentFragment for `children`\n *\n * @param {Children} children\n * @returns {DocumentFragment}\n * @url https://pota.quack.uy/toHTML\n */\nexport function toHTMLFragment(children) {\n\tconst fragment = new DocumentFragment()\n\tcreateChildren(fragment, children)\n\n\treturn fragment\n}\n\n/**\n * Removes from the DOM `prev` elements not found in `next`\n *\n * @param {DOMElement[]} [prev=[]] - Array with previous elements.\n *   Default is `[]`\n * @param {DOMElement[]} [next=[]] - Array with next elements. Default\n *   is `[]`\n * @param {boolean} [short=false] - Whether to use fast clear. Default\n *   is `false`\n * @returns {DOMElement[]} The next array of elements\n */\nfunction toDiff(prev = [], next = [], short = false) {\n\t// if theres something to remove\n\tif (prev.length) {\n\t\t// fast clear\n\t\tif (\n\t\t\tshort &&\n\t\t\tnext.length === 0 &&\n\t\t\t// + 1 because of the original placeholder\n\t\t\tprev.length + 1 === prev[0].parentNode.childNodes.length\n\t\t) {\n\t\t\tconst parent = prev[0].parentNode\n\t\t\t// save the placeholder\n\t\t\tconst lastChild = parent.lastChild\n\t\t\tparent.textContent = ''\n\t\t\tparent.appendChild(lastChild)\n\t\t} else if (next.length === 0) {\n\t\t\tfor (const item of prev) {\n\t\t\t\titem && item.remove()\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const item of prev) {\n\t\t\t\tif (item && !next.includes(item)) {\n\t\t\t\t\titem.remove()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn next\n}\n","import {\n\tempty,\n\tisFunction,\n\tpromise,\n\tweakStore,\n\twithState,\n} from '../lib/std.js'\n\n/**\n * @template {Event} T\n * @param {T} e\n */\nexport const preventDefault = e => e.preventDefault()\n\n/**\n * @template {Event} T\n * @param {T} e\n */\nexport const stopPropagation = e => e.stopPropagation()\n\n/**\n * @template {Event} T\n * @param {T} e\n */\nexport const stopImmediatePropagation = e =>\n\te.stopImmediatePropagation()\n\n/**\n * @template {Event} T\n * @param {T} e\n */\nexport function stopEvent(e) {\n\tpreventDefault(e)\n\tstopPropagation(e)\n\tstopImmediatePropagation(e)\n}\n\n/**\n * @param {Element | typeof globalThis} node\n * @param {string} eventName\n * @param {CustomEventInit} [data]\n */\n\nexport const emit = (\n\tnode,\n\teventName,\n\tdata = { bubbles: true, cancelable: true, composed: true },\n) => node.dispatchEvent(new CustomEvent(eventName, data))\n\n/**\n * Waits for an event to be dispatched and runs a callback\n *\n * @param {Element} element\n * @param {string} eventName\n */\nexport const waitEvent = withState(\n\t(state, element, eventName) =>\n\t\tpromise((resolve, reject) => {\n\t\t\t/**\n\t\t\t * To prevent firing `transitionend` twice it needs to stop\n\t\t\t * listening the old one because maybe wasn't dispatched and\n\t\t\t * running a new transition will make it dispatch twice\n\t\t\t */\n\t\t\tconst previous = state.get(element, empty)\n\t\t\tprevious.reject && previous.reject()\n\t\t\telement.removeEventListener(eventName, previous.resolve)\n\t\t\tstate.set(element, { resolve, reject })\n\t\t\telement.addEventListener(eventName, resolve, {\n\t\t\t\tonce: true,\n\t\t\t})\n\t\t}),\n\tweakStore,\n)\n\n/**\n * Adds an event listener using the handler object itself as options.\n *\n * @param {EventTarget} where\n * @param {string} type\n * @param {EventListenerOrEventListenerObject} handler\n * @returns {void}\n */\nexport const addEventNative = (where, type, handler) =>\n\twhere.addEventListener(\n\t\ttype,\n\t\t/** @type {EventListenerOrEventListenerObject} */ (\n\t\t\t/** @type unknown */ handler\n\t\t),\n\t\t!isFunction(handler)\n\t\t\t? /** @type {EventHandlerOptions} */ (handler)\n\t\t\t: undefined,\n\t)\n\n/**\n * Removes an event listener previously registered via\n * `addEventNative`.\n *\n * @param {EventTarget} where\n * @param {string} type\n * @param {EventListenerOrEventListenerObject} handler\n * @returns {void}\n */\nexport const removeEventNative = (where, type, handler) =>\n\twhere.removeEventListener(\n\t\ttype,\n\t\t/** @type {EventListenerOrEventListenerObject} */ (\n\t\t\t/** @type unknown */ handler\n\t\t),\n\t\t!isFunction(handler)\n\t\t\t? /** @type {EventHandlerOptions} */ (handler)\n\t\t\t: undefined,\n\t)\n\n/** @param {EventListener} fn */\nexport const passiveEvent = fn => ({ handleEvent: fn, passive: true })\n","import { isString } from '../lib/std.js'\n\nimport { Component, toHTMLFragment } from '../core/renderer.js'\nimport { addStyleSheets } from '../use/css.js'\nimport {\n\tquerySelector,\n\tremoveAttribute,\n\tsetAttribute,\n} from '../use/dom.js'\nimport { emit } from '../use/event.js'\n\n/**\n * Defines a custom Element (if isnt defined already)\n *\n * @param {string} name - Name for the custom element\n * @param {CustomElementConstructor} constructor - Class for the\n *   custom element\n * @param {ElementDefinitionOptions} [options] - Options passed to\n *   `customElements.define`\n */\nexport function customElement(name, constructor, options) {\n\tif (customElements.get(name) === undefined) {\n\t\tcustomElements.define(name, constructor, options)\n\t}\n}\n\nexport class CustomElement extends HTMLElement {\n\t/**\n\t * Static base stylesheets for the custom element.\n\t *\n\t * @type {(CSSStyleSheet | string)[]}\n\t */\n\tstatic baseStyleSheets = []\n\n\t/**\n\t * Static additional stylesheets for the custom element.\n\t *\n\t * @type {(CSSStyleSheet | string)[]}\n\t */\n\tstatic styleSheets = []\n\tconstructor() {\n\t\tsuper()\n\n\t\tconst shadowRoot = this.attachShadow({\n\t\t\tmode: 'open',\n\t\t})\n\n\t\t// this is needed because `baseStyleSheets/styleSheets` are `static`\n\t\tconst constructor = /** @type {typeof CustomElement} */ (\n\t\t\tthis.constructor\n\t\t)\n\n\t\taddStyleSheets(shadowRoot, constructor.baseStyleSheets)\n\t\taddStyleSheets(shadowRoot, constructor.styleSheets)\n\t}\n\n\t/* DOM API */\n\n\t/**\n\t * Shortcut for querySelector\n\t *\n\t * @param {string} query\n\t */\n\tquery(query) {\n\t\treturn querySelector(this, query)\n\t}\n\t/**\n\t * Shortcut for this.shadowRoot.innerHTML\n\t *\n\t * @param {string | Component} value\n\t */\n\tset html(value) {\n\t\tif (isString(value)) {\n\t\t\tthis.shadowRoot.innerHTML = value\n\t\t} else {\n\t\t\tthis.shadowRoot.replaceChildren(\n\t\t\t\ttoHTMLFragment(Component(value || 'slot')),\n\t\t\t)\n\t\t}\n\t}\n\n\t/**\n\t * Toggles attribute `hidden`\n\t *\n\t * @param {boolean} value\n\t */\n\tset hidden(value) {\n\t\tvalue\n\t\t\t? setAttribute(this, 'hidden', '')\n\t\t\t: removeAttribute(this, 'hidden')\n\t}\n\n\t/* EVENTS API */\n\n\t/**\n\t * Emits an event\n\t *\n\t * @param {string} eventName\n\t * @param {any} [data]\n\t */\n\temit(eventName, data) {\n\t\temit(this, eventName, data)\n\t}\n\n\t/* SLOTS API */\n\n\thasSlot(name) {\n\t\treturn this.query(`:scope [slot=\"${name}\"]`)\n\t}\n}\n","import { Component } from '../core/renderer.js'\nimport { css } from '../use/css.js'\nimport { CustomElement, customElement } from './CustomElement.js'\n\n/**\n * Similar to `Show`, but doesn't remove its children from the\n * document\n *\n * @template T\n * @param {{\n * \twhen: When<any> // Condition to show/hide children\n * \tchildren?: Children // Content to show when condition is true\n * \tfallback?: Children // Content to show when condition is false\n * }} props\n * @returns {Children}\n * @url https://pota.quack.uy/Components/Collapse\n */\nexport function Collapse(props) {\n\t// need to include the class here because else its not treeshaked\n\n\tclass CollapseElement extends CustomElement {\n\t\tstatic styleSheets = [\n\t\t\tcss`\n\t\t\t\t:host {\n\t\t\t\t\tdisplay: contents;\n\t\t\t\t}\n\t\t\t`,\n\t\t]\n\n\t\t/** @param {any} value - To toggle children */\n\t\tset when(value) {\n\t\t\tthis.html = value ? '<slot/>' : this.fb || ''\n\t\t}\n\t\t/** @param {any} fallback - To toggle children */\n\t\tset fallback(fallback) {\n\t\t\t// TODO make this reactive\n\t\t\tthis.fb = fallback\n\t\t}\n\t}\n\n\tconst name = 'pota-collapse'\n\n\tcustomElement(name, CollapseElement)\n\n\treturn Component(name, {\n\t\t'prop:when': props.when,\n\t\t'prop:fallback': props.fallback,\n\t\tchildren: props.children,\n\t})\n}\n","import { Component } from '../core/renderer.js'\n\n/**\n * Creates components dynamically\n *\n * @template T\n * @param {Dynamic<T>} props\n * @url https://pota.quack.uy/Components/Dynamic\n */\n\nexport const Dynamic = props =>\n\t// `component` needs to be deleted else it will end in the tag as an attribute\n\tComponent(props.component, { ...props, component: undefined })\n","import {\n\tactiveElement,\n\tdocumentElement,\n\tisConnected,\n} from '../use/dom.js'\n\nimport { makeCallback, map } from '../lib/reactive.js'\n\nimport { onFixes } from '../core/scheduler.js'\n\n/**\n * Renders reactive values from an signal that returns an Iterable\n * object\n *\n * @template T\n * @param {object} props\n * @param {Each<T>} props.each\n * @param {boolean} [props.restoreFocus] - If the focused element\n *   moves it may lose focus\n * @param {boolean} [props.reactiveIndex] - Make indices reactive\n *   signals\n * @param {(item: T, index: number) => Children} [props.children]\n * @param {Children} [props.fallback]\n * @returns {Children}\n * @url https://pota.quack.uy/Components/For\n */\n\nexport const For = props =>\n\tmap(\n\t\t() => {\n\t\t\tprops.restoreFocus && queue()\n\t\t\treturn props.each\n\t\t},\n\t\tmakeCallback(props.children),\n\t\tfalse,\n\t\tprops.fallback,\n\t\tprops.reactiveIndex,\n\t)\n\n/** @type {boolean} */\nlet queued\n\n// because re-ordering the elements trashes focus\nfunction queue() {\n\tif (!queued) {\n\t\tqueued = true\n\n\t\tconst active = activeElement()\n\t\tconst scroll = documentElement.scrollTop\n\n\t\tonFixes(() => {\n\t\t\tqueued = false\n\t\t\t// re-ordering the elements trashes focus\n\t\t\tactive &&\n\t\t\t\tactive !== activeElement() &&\n\t\t\t\tisConnected(active) &&\n\t\t\t\t// @ts-expect-error\n\t\t\t\tactive.focus()\n\n\t\t\tdocumentElement.scrollTop = scroll\n\t\t})\n\t}\n}\n","import { insert } from '../core/renderer.js'\n\n/**\n * Portals children to a different element while keeping the original\n * scope\n *\n * @param {object} props\n * @param {DOMElement} props.mount\n * @param {Children} [props.children]\n * @url https://pota.quack.uy/Components/Portal\n */\nexport function Portal(props) {\n\tinsert(props.children, props.mount)\n}\n","import { Component } from '../core/renderer.js'\nimport { document } from '../use/dom.js'\nimport { Portal } from './Portal.js'\n\n/**\n * Mounts children on `document.head`\n *\n * @param {Props} props\n * @url https://pota.quack.uy/Components/Head\n */\nexport const Head = props =>\n\tComponent(Portal, {\n\t\tmount: document.head,\n\t\tchildren: props.children,\n\t})\n","import { range, toArray } from '../lib/std.js'\nimport { Component } from '../core/renderer.js'\nimport { For } from './For.js'\n\n/**\n * Renders children based on the `range` function arguments\n *\n * @param {object} props\n * @param {number} props.start\n * @param {number} props.stop\n * @param {number} props.step\n * @param {Children} [props.children]\n * @returns {Children}\n */\n\nexport const Range = props =>\n\tComponent(For, {\n\t\teach: toArray(\n\t\t\trange(props.start ?? 0, props.stop ?? 0, props.step ?? 1),\n\t\t),\n\t\tchildren: props.children,\n\t})\n","import {\n\tSymbol,\n\tgetOwnValues,\n\tisSymbol,\n\twindow,\n\tisGeneratorFunction,\n} from '../std.js'\n\nconst constructorsTracked = [\n\tObject,\n\tArray,\n\tMap,\n\tundefined /** Object.create(null) */,\n]\n\n/**\n * Returns `true` when `object` can't be made mutable.\n *\n * @param {any} target\n */\nexport const isMutationBlacklisted = target =>\n\tconstructorsBlacklist.has(target.constructor) ||\n\tisGeneratorFunction(target)\n\nconst constructorsBlacklist = new Set(\n\tObject.getOwnPropertyNames(window).map(value => window[value]),\n)\n\nconstructorsTracked.forEach(value =>\n\tconstructorsBlacklist.delete(value),\n)\n\nconst prototypeBlacklist = new Set([\n\t...constructorsTracked,\n\t...constructorsBlacklist,\n])\n\n/**\n * Returns `true` when prototype is blacklisted. We won't gather\n * getters/setters from the object.\n *\n * @param {any} target\n */\nexport const isPrototypeBlacklisted = target =>\n\tprototypeBlacklist.has(target.constructor) ||\n\tisGeneratorFunction(target)\n\n/**\n * Returns `true` when `key` is blacklisted. It won't be signalified.\n *\n * @param {PropertyKey} key\n */\nexport const isKeyBlacklisted = key => keyBlacklist.has(key)\n/** @type {Set<PropertyKey>} */\nconst keyBlacklist = new Set([\n\t'constructor',\n\t'__proto__',\n\t/** @ts-ignore-error non-sense */\n\t...getOwnValues(Symbol).filter(isSymbol),\n])\n\n/**\n * Extends the constructor and symbol blacklists with values from a\n * target window.\n *\n * @param {Window & typeof globalThis} window\n */\nexport function updateBlacklist(window) {\n\tnew Set(\n\t\tObject.getOwnPropertyNames(window).map(value => window[value]),\n\t).forEach(x => {\n\t\tconstructorsBlacklist.add(x)\n\t\tprototypeBlacklist.add(x)\n\t})\n\n\tconstructorsTracked.forEach(x =>\n\t\tconstructorsBlacklist.delete(window[x?.name]),\n\t)\n\n\t/** @ts-ignore-error non-sense */\n\tgetOwnValues(window.Symbol)\n\t\t.filter(isSymbol)\n\t\t.forEach(x => keyBlacklist.add(x))\n}\n","import {\n\tassign,\n\tempty,\n\tgetOwnPropertyDescriptors,\n\tgetPrototypeOf,\n\tnothing,\n} from '../std.js'\n\nimport {\n\tisMutationBlacklisted,\n\tisPrototypeBlacklisted,\n} from './blacklist.js'\n\n/**\n * It returns all property descriptors for `target`.\n *\n * It checks for getters/setters of the prototype chain. The idea is\n * that if the prototype provides some getters/setters, then, we\n * should be able to track them too.\n */\nexport function getPropertyDescriptors(target) {\n\t// blacklisted by default\n\tif (isMutationBlacklisted(target)) {\n\t\treturn nothing\n\t}\n\n\tlet proto = getPrototypeOf(target)\n\n\t/** Walk the prototype chain to gather getters/setters */\n\tconst protos = [target]\n\twhile (proto && !isPrototypeBlacklisted(proto)) {\n\t\tprotos.push(proto)\n\t\tproto = getPrototypeOf(proto)\n\t}\n\n\t/** Cocktail */\n\tconst descriptors = empty()\n\tfor (const proto of protos.reverse()) {\n\t\tassign(descriptors, getOwnPropertyDescriptors(proto))\n\t}\n\n\treturn descriptors\n}\n","import { Symbol, create, empty, is, weakStore } from '../std.js'\n\nimport { signal } from '../reactive.js'\n\n/** Tracker */\n\nconst [getTracker] = weakStore()\n\nconst createTracker = () => new Track()\n\n/**\n * Returns a tracker for an object. A tracker is unique per object,\n * always the same tracker for the same object.\n *\n * @template T\n * @param {T} target\n * @returns {Track}\n */\nexport const tracker = target => getTracker(target, createTracker)\n\n/** Track Class */\n\nconst equalsIs = { equals: is }\nconst equalsNope = { equals: false }\nconst equalsDefault = undefined\n\nconst Values = Symbol('Values')\nconst Keys = Symbol('Keys')\n\nconst Value = 'Value'\nconst Key = 'Key'\nconst isUndefined = 'isUndefined'\n\nconst kinds = {\n\t__proto__: null,\n\t[Value]: undefined,\n\t[Key]: undefined,\n\t[isUndefined]: undefined,\n}\n\nexport class Track {\n\t// id = Date.now()\n\n\t#props = empty()\n\n\t#prop(kind, key, value, equalsType) {\n\t\tif (!(key in this.#props)) {\n\t\t\tthis.#props[key] = create(kinds)\n\t\t}\n\t\tif (this.#props[key][kind] === undefined) {\n\t\t\tthis.#props[key][kind] = signal(value, equalsType)\n\t\t}\n\t\treturn this.#props[key][kind]\n\t}\n\n\t/**\n\t * Keeps track of: a value for a `key`\n\t *\n\t * @param {PropertyKey} key\n\t * @param {any} value\n\t * @returns {any} Value\n\t */\n\tvalueRead(key, value) {\n\t\t/** Do not write to the signal here it will cause a loop */\n\t\tthis.#prop(Value, key, value, equalsIs).read()\n\n\t\treturn value\n\t}\n\t/**\n\t * Keeps track of: a value for a `key`\n\t *\n\t * @param {PropertyKey} key\n\t * @param {any} value\n\t * @returns {boolean} Indicating if the value changed\n\t */\n\tvalueWrite(key, value) {\n\t\t/**\n\t\t * Write the value because tracking will re-execute when this\n\t\t * value changes\n\t\t */\n\t\treturn this.#prop(Value, key, undefined, equalsIs).write(value)\n\t}\n\n\t/**\n\t * Keeps track of: if a `key` is in an object.\n\t *\n\t * @param {PropertyKey} key\n\t * @param {boolean} value - Indicating if the property is `in`\n\t */\n\tkeyRead(key, value) {\n\t\tthis.#prop(Key, key, value, equalsDefault).read()\n\t}\n\t/**\n\t * Keeps track of: if a `key` is in an object.\n\t *\n\t * @param {PropertyKey} key\n\t * @param {boolean} value - Indicating if the property is `in`\n\t */\n\tkeyWrite(key, value) {\n\t\tthis.#prop(Key, key, value, equalsDefault).write(value)\n\t}\n\n\t/**\n\t * Keeps track of: if value is undefined, regardless if the `key`\n\t * exists in the object or not.\n\t *\n\t * @param {PropertyKey} key\n\t * @param {boolean} value\n\t */\n\tisUndefinedRead(key, value) {\n\t\tthis.#prop(isUndefined, key, value, equalsDefault).read()\n\t}\n\t/**\n\t * Keeps track of: if value is undefined, regardless if the `key`\n\t * exists in the object or not.\n\t *\n\t * @param {PropertyKey} key\n\t * @param {any} value\n\t */\n\tisUndefinedWrite(key, value) {\n\t\tthis.#prop(\n\t\t\tisUndefined,\n\t\t\tkey,\n\t\t\tvalue === undefined,\n\t\t\tequalsDefault,\n\t\t).write(value === undefined)\n\t}\n\n\t/**\n\t * Adds a key.\n\t *\n\t * 1. Sets `has` state to `true`\n\t * 2. Sets `undefined` state\n\t * 3. Sets `value`\n\t *\n\t * @param {PropertyKey} key\n\t * @param {any} value\n\t */\n\tadd(key, value) {\n\t\tthis.keyWrite(key, true) // change has\n\t\tthis.isUndefinedWrite(key, value) // track when is undefined\n\t\tthis.valueWrite(key, value) // change value\n\t}\n\n\t/**\n\t * Modifies a key.\n\t *\n\t * 1. Sets `value`\n\t * 2. Sets `undefined` state\n\t *\n\t * @param {PropertyKey} key\n\t * @param {any} value\n\t */\n\tmodify(key, value) {\n\t\tthis.isUndefinedWrite(key, value) // track when is undefined\n\n\t\treturn this.valueWrite(key, value) // change value\n\t}\n\n\t/**\n\t * Deletes a key.\n\t *\n\t * 1. Sets `has` state to `false`\n\t * 2. Sets `undefined` state to true\n\t * 3. Sets `value` to `undefined`\n\t *\n\t * @param {PropertyKey} key\n\t */\n\tdelete(key) {\n\t\tthis.keyWrite(key, false) // change has\n\t\tthis.isUndefinedWrite(key, undefined) // track when is undefined\n\t\tthis.valueWrite(key, undefined) // change value\n\t}\n\n\t/** To indicate keys have been read */\n\tkeysRead() {\n\t\tthis.#read(Keys)\n\t}\n\t/** To indicate keys have changed */\n\tkeysWrite() {\n\t\tthis.#write(Keys)\n\t}\n\n\t/** To indicate values have been read */\n\tvaluesRead() {\n\t\tthis.#read(Values)\n\t}\n\t/** To indicate values have changed */\n\tvaluesWrite() {\n\t\tthis.#write(Values)\n\t}\n\n\t/**\n\t * To indicate all values have been read\n\t *\n\t * @param {symbol} [key]\n\t */\n\t#read(key) {\n\t\tthis.#prop(Value, key, undefined, equalsNope).read()\n\t}\n\t/**\n\t * To indicate all values have changed\n\t *\n\t * @param {symbol} [key]\n\t */\n\t#write(key) {\n\t\tthis.#prop(Value, key, undefined, equalsNope).write()\n\t}\n}\n","import {\n\tdefineProperty,\n\tentriesIncludingSymbols,\n\tidentity,\n\tisExtensible,\n\tisFunction,\n\tredefineProperty,\n} from '../std.js'\n\nimport { batch, untrack } from '../reactive.js'\n\nimport { isKeyBlacklisted } from './blacklist.js'\nimport { getPropertyDescriptors } from './descriptors.js'\nimport { tracker } from './tracker.js'\n\n/**\n * Transforms in place properties of an object into signals via\n * get/set. Is not recursive. Works with inherited getters/setters. It\n * doesn't track functions.\n *\n * @template T\n * @param {T} target\n * @param {PropertyKey[]} [keys] - To transform specific keys. It is\n *   possible to signalify keys that don't exists yet.\n * @returns {T}\n */\nexport function signalify(target, keys) {\n\tkeys ? signalifyKeys(target, keys) : signalifyObject(target)\n\treturn target\n}\n\n/**\n * Signalify object properties\n *\n * @template T\n * @param {T} target\n * @param {Function} [wrapper] To wrap values\n */\nexport function signalifyObject(target, wrapper) {\n\tuntrack(() => {\n\t\tconst descriptors = getPropertyDescriptors(target)\n\t\tconst track = tracker(target)\n\n\t\tfor (const [key, descriptor] of entriesIncludingSymbols(\n\t\t\tdescriptors,\n\t\t)) {\n\t\t\tsignalifyKey(target, key, descriptor, wrapper, track)\n\t\t}\n\t})\n}\n\n/**\n * Signalify specific object properties\n *\n * @template T\n * @param {T} target\n * @param {PropertyKey[]} keys - To transform specific keys. It is\n *   possible to signalify keys that don't exists yet.\n * @param {Function} [wrapper] To wrap values\n */\nfunction signalifyKeys(target, keys, wrapper) {\n\tuntrack(() => {\n\t\tconst descriptors = getPropertyDescriptors(target)\n\t\tconst track = tracker(target)\n\n\t\tfor (const key of keys) {\n\t\t\tsignalifyKey(target, key, descriptors[key], wrapper, track)\n\t\t}\n\t})\n}\n\n/**\n * Signalify a specific property\n *\n * @template T\n * @param {T} target\n * @param {PropertyKey} key\n * @param {PropertyDescriptor} descriptor\n * @param {Function} [wrapper] To wrap values\n * @param {import('./tracker.js').Track} [track] Tracker\n */\nfunction signalifyKey(\n\ttarget,\n\tkey,\n\tdescriptor,\n\twrapper = identity,\n\ttrack,\n) {\n\tif (isKeyBlacklisted(key)) {\n\t\treturn\n\t}\n\n\t/** Happens when they are signalifying a key that doesn't exists */\n\tif (!descriptor) {\n\t\treturn signalifyUndefinedKey(target, key, wrapper, track)\n\t}\n\n\t/** Avoid keys that cannot be redefined */\n\tif (!descriptor.configurable) {\n\t\t/** Proxy nested configurable objects */\n\t\twrapper(descriptor.value)\n\t\treturn\n\t}\n\n\t/**\n\t * As getters shouldn't be invoked till used, we dont know the\n\t * value. Assume `descriptor.value` and then check for getters once\n\t * read.\n\t */\n\n\tlet value = descriptor.value\n\n\t/**\n\t * Avoid functions when using `signalify` as it's meant to be used\n\t * in classes. But do not avoid functions when it has a `wrapper`,\n\t * like `mutable`.\n\t */\n\tif (isFunction(value) && wrapper === identity) {\n\t\treturn\n\t}\n\n\tconst getter = descriptor.get?.bind(target)\n\tconst setter = descriptor.set?.bind(target)\n\n\t/** Needs to wrap to recurse the object */\n\tif (!setter && wrapper) {\n\t\tvalue = wrapper(value)\n\t}\n\n\tdefineProperty(target, key, {\n\t\tget:\n\t\t\t/**\n\t\t\t * 1. We cannot know if the getter will return the same thing that\n\t\t\t *    has been set. For this reason we cant rely on the return\n\t\t\t *    value of the signal.\n\t\t\t * 2. We need to ensure the return value is always wrapped (for in\n\t\t\t *    case of being used as a mutable).\n\t\t\t */\n\t\t\tgetter\n\t\t\t\t? () => {\n\t\t\t\t\t\tvalue = wrapper(getter())\n\t\t\t\t\t\treturn track.valueRead(key, value)\n\t\t\t\t\t}\n\t\t\t\t: () => {\n\t\t\t\t\t\tvalue = wrapper(value)\n\t\t\t\t\t\treturn track.valueRead(key, value)\n\t\t\t\t\t},\n\n\t\tset:\n\t\t\t/** When it's only a getter it shouldn't have a setter */\n\t\t\tgetter && !setter\n\t\t\t\t? undefined\n\t\t\t\t: setter\n\t\t\t\t\t? val => {\n\t\t\t\t\t\t\tbatch(() => {\n\t\t\t\t\t\t\t\tvalue = wrapper(val)\n\t\t\t\t\t\t\t\tsetter(value)\n\t\t\t\t\t\t\t\ttrack.valueWrite(key, value)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t: val => {\n\t\t\t\t\t\t\tbatch(() => {\n\t\t\t\t\t\t\t\tvalue = wrapper(val)\n\t\t\t\t\t\t\t\ttrack.valueWrite(key, value)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t},\n\t\tenumerable: descriptor.enumerable,\n\t\tconfigurable: true,\n\t})\n}\n\n/**\n * Signalify an undefined property\n *\n * @template T\n * @param {T} target\n * @param {PropertyKey} key\n * @param {Function} [wrapper] To wrap values\n * @param {import('./tracker.js').Track} [track] Tracker\n * @param {any} [value] Default value\n */\nexport function signalifyUndefinedKey(\n\ttarget,\n\tkey,\n\twrapper = identity,\n\ttrack,\n\tvalue = undefined,\n) {\n\tif (isKeyBlacklisted(key)) {\n\t\treturn\n\t}\n\n\tif (isExtensible(target)) {\n\t\tredefineProperty(target, key, {\n\t\t\tget() {\n\t\t\t\treturn track.valueRead(key, value)\n\t\t\t},\n\t\t\tset(val) {\n\t\t\t\tbatch(() => {\n\t\t\t\t\tvalue = wrapper(val)\n\t\t\t\t\ttrack.valueWrite(key, value)\n\t\t\t\t})\n\t\t\t},\n\t\t})\n\t}\n}\n","import { batch } from '../../reactive.js'\nimport {\n\tisProxyValueReturnInvariant,\n\treflectApply,\n\treflectGetOwnPropertyDescriptor,\n\treflectHas,\n\treflectOwnKeys,\n} from '../../std.js'\n\nimport { mutable } from '../mutable.js'\nimport { tracker } from '../tracker.js'\n\nexport class ProxyHandlerBase {\n\t// type = 'Base'\n\n\tconstructor(value) {\n\t\tthis.track = tracker(value)\n\t}\n\n\townKeys(target) {\n\t\tthis.track.keysRead()\n\t\treturn reflectOwnKeys(target)\n\t}\n\thas(target, key) {\n\t\tconst r = reflectHas(target, key)\n\t\tthis.track.keyRead(key, r)\n\t\treturn r\n\t}\n\tdeleteProperty(target, key) {\n\t\t/** To not trigger effects when the property isn't in the object */\n\t\tif (!(key in target)) {\n\t\t\treturn true\n\t\t}\n\n\t\treturn batch(() => {\n\t\t\tthis.track.keysWrite()\n\t\t\tthis.track.delete(key)\n\n\t\t\t/**\n\t\t\t * Use `delete` instead of `reflectDeleteProperty` so it throws\n\t\t\t * when not permitted\n\t\t\t */\n\t\t\treturn delete target[key]\n\t\t})\n\t}\n\tgetOwnPropertyDescriptor(target, key) {\n\t\tthis.has(target, key)\n\t\treturn reflectGetOwnPropertyDescriptor(target, key)\n\t}\n\treturnValue(target, key, value) {\n\t\treturn isProxyValueReturnInvariant(target, key, value)\n\t\t\t? (mutable(value), value)\n\t\t\t: mutable(value)\n\t}\n\treturnFunction(target, key, value, proxy) {\n\t\t/**\n\t\t * 1. `Reflect.apply` to correct `receiver`. `TypeError: Method\n\t\t *    Set.prototype.add called on incompatible receiver #<Set>`\n\t\t * 2. Run in a batch to react to all changes at the same time.\n\t\t */\n\t\treturn (...args) =>\n\t\t\tbatch(() =>\n\t\t\t\tmutable(\n\t\t\t\t\tkey in objectMethods\n\t\t\t\t\t\t? objectMethods[key](this, target, value, args, proxy)\n\t\t\t\t\t\t: reflectApply(value, target, args),\n\t\t\t\t),\n\t\t\t)\n\t}\n}\n\nconst objectMethods = {\n\t__proto__: null,\n\n\thasOwnProperty(track, target, value, args, proxy) {\n\t\ttrack.has(target, args[0])\n\t\treturn reflectApply(value, target, args)\n\t},\n}\n","import { $isMutable } from '../../../constants.js'\nimport { batch } from '../../reactive.js'\nimport {\n\tisFunction,\n\treflectGet,\n\treflectSet,\n\titerator,\n\treflectApply,\n} from '../../std.js'\n\nimport { mutable } from '../mutable.js'\n\nimport { ProxyHandlerBase } from './base.js'\n\n/** Proxy for Arrays. In Arrays, values are tracked by the proxy. */\n\nexport class ProxyHandlerArray extends ProxyHandlerBase {\n\t// type = 'Array'\n\n\tget(target, key, proxy) {\n\t\tif (key === $isMutable) {\n\t\t\treturn true\n\t\t}\n\n\t\t/** To be able to track properties not yet set */\n\t\tif (!(key in target)) {\n\t\t\tthis.track.isUndefinedRead(key, true)\n\t\t}\n\n\t\tconst value = reflectGet(target, key, proxy)\n\n\t\treturn isFunction(value)\n\t\t\t? this.returnFunction(target, key, value, proxy)\n\t\t\t: this.track.valueRead(\n\t\t\t\t\tkey,\n\t\t\t\t\tthis.returnValue(target, key, value),\n\t\t\t\t)\n\t}\n\tset(target, key, value, proxy) {\n\t\treturn batch(() => {\n\t\t\t/** Always work with mutables */\n\t\t\tvalue = mutable(value)\n\n\t\t\t/** New key */\n\t\t\tif (!(key in target)) {\n\t\t\t\tthis.track.keysWrite() // change ownKeys\n\t\t\t\tthis.track.keyWrite(key, true) // change has\n\t\t\t\tthis.track.valuesWrite()\n\t\t\t}\n\n\t\t\tif (this.track.modify(key, value)) {\n\t\t\t\t/**\n\t\t\t\t * Dispatch that \"something\" changed, for these listening for\n\t\t\t\t * every change\n\t\t\t\t */\n\t\t\t\tthis.track.valuesWrite()\n\n\t\t\t\t/**\n\t\t\t\t * When explicit setting `length` it needs to mark anything\n\t\t\t\t * deleted as deleted\n\t\t\t\t */\n\t\t\t\tif (key === 'length') {\n\t\t\t\t\tthis.track.keysWrite() // change ownKeys\n\n\t\t\t\t\tif (value < target.length) {\n\t\t\t\t\t\tfor (let k = value; k < target.length; k++) {\n\t\t\t\t\t\t\tthis.track.delete(k)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst r = reflectSet(target, key, value, proxy)\n\n\t\t\t/**\n\t\t\t * Always update length. `arr = [], arr[0] = true` length\n\t\t\t * changed, so it needs to be updated to 1.\n\t\t\t */\n\t\t\tthis.track.valueWrite('length', target.length)\n\n\t\t\treturn r\n\t\t})\n\t}\n\n\treturnFunction(target, key, value, proxy) {\n\t\t/**\n\t\t * 1. `Reflect.apply` to correct `receiver`. `TypeError: Method\n\t\t *    Set.prototype.add called on incompatible receiver #<Set>`\n\t\t * 2. Run in a batch to react to all changes at the same time.\n\t\t */\n\t\treturn (...args) =>\n\t\t\tbatch(() =>\n\t\t\t\tmutable(\n\t\t\t\t\tkey in arrayMethods\n\t\t\t\t\t\t? arrayMethods[key](this, target, value, args, proxy)\n\t\t\t\t\t\t: reflectApply(value, target, args),\n\t\t\t\t),\n\t\t\t)\n\t}\n\n\t/** Special track methods for array */\n\n\t/** Dispatch read to specific key */\n\ttrackKey(target, key) {\n\t\tif (key in target) {\n\t\t\tthis.track.valueRead(key, target[key])\n\t\t}\n\t}\n\n\t/** Dispatch reads to a keys range */\n\ttrackKeysRange(target, start = 0, end = target.length) {\n\t\tstart = start < 0 ? 0 : start\n\t\tend = end > target.length ? target.length : end\n\n\t\tfor (let key = start; key < end; key++) {\n\t\t\tthis.track.valueRead(key, target[key])\n\t\t}\n\t}\n\n\t/** Dispatch writes to values that changed */\n\ttrackDiff(target, oldLength = target.length) {\n\t\tlet changed = false\n\n\t\tlet key = 0\n\t\tfor (let length = target.length; key < length; key++) {\n\t\t\tif (key > oldLength) {\n\t\t\t\t// it's new\n\t\t\t\tthis.track.add(key, target[key])\n\t\t\t\tchanged = true\n\t\t\t} else {\n\t\t\t\t// modify existing\n\t\t\t\tif (this.track.modify(key, target[key])) {\n\t\t\t\t\tchanged = true\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// delete deleted\n\t\tfor (; key < oldLength; key++) {\n\t\t\tthis.track.delete(key)\n\t\t\tchanged = true\n\t\t}\n\n\t\tif (oldLength != target.length) {\n\t\t\tthis.track.keysWrite()\n\n\t\t\t// change length\n\t\t\tthis.track.valueWrite('length', target.length)\n\n\t\t\tchanged = true\n\t\t}\n\n\t\tif (changed) {\n\t\t\tthis.track.valuesWrite()\n\t\t}\n\t}\n}\n\n/**\n * Like Array but tracks.\n *\n * 1. Instances are supposed to be used Proxied, so theres no need for\n *    batching, because the proxy already batches the functions.\n * 2. This is an internal Class and is not meant to be used outside\n *    `mutable`.\n */\n\nconst arrayMethods = {\n\t__proto__: null,\n\n\thasOwnProperty(handler, target, value, args, proxy) {\n\t\thandler.has(target, args[0])\n\t\treturn reflectApply(value, target, args)\n\t},\n\n\t/** WRITE METHODS */\n\n\tpop(handler, target, value, args, proxy) {\n\t\tif (target.length) {\n\t\t\t// \"something\" changed\n\t\t\thandler.track.valuesWrite()\n\n\t\t\t// ownKeys changed\n\t\t\thandler.track.keysWrite()\n\n\t\t\t// has, undefined state, value\n\t\t\thandler.track.delete(target.length - 1)\n\n\t\t\t// length changed\n\t\t\thandler.track.valueWrite('length', target.length - 1)\n\t\t}\n\t\treturn reflectApply(value, target, args)\n\t},\n\n\t// lib.es5.d.ts\n\n\tpush(handler, target, value, args, proxy) {\n\t\targs = args.map(value => mutable(value))\n\n\t\t// \"something\" changed\n\t\thandler.track.valuesWrite()\n\n\t\t// ownKeys changed\n\t\thandler.track.keysWrite()\n\n\t\t// add keys\n\t\tfor (\n\t\t\tlet key = target.length, item = 0;\n\t\t\tkey < target.length + args.length;\n\t\t\tkey++, item++\n\t\t) {\n\t\t\thandler.track.add(key, args[item])\n\t\t}\n\n\t\t// change length\n\t\thandler.track.valueWrite('length', target.length + args.length)\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\n\t/** Removes the first element from an array and returns it. */\n\tshift(handler, target, value, args, proxy) {\n\t\tif (target.length) {\n\t\t\tconst r = reflectApply(value, target, args)\n\t\t\thandler.trackDiff(target, target.length + 1)\n\t\t\treturn r\n\t\t}\n\t},\n\t/**\n\t * Inserts new elements at the start of an array, and returns the\n\t * new length of the array.\n\t */\n\tunshift(handler, target, value, args, proxy) {\n\t\targs = args.map(value => mutable(value))\n\n\t\tconst r = reflectApply(value, target, args)\n\n\t\thandler.trackDiff(target, target.length - args.length)\n\n\t\treturn r\n\t},\n\n\tsplice(handler, target, value, args, proxy) {\n\t\tlet items = args.slice(2)\n\n\t\titems = items.map(value => mutable(value))\n\n\t\tconst oldLength = target.length\n\n\t\tconst r = reflectApply(value, target, args)\n\n\t\thandler.trackDiff(target, oldLength)\n\n\t\treturn r\n\t},\n\n\tsort(handler, target, value, args, proxy) {\n\t\tconst r = reflectApply(value, target, args)\n\n\t\thandler.trackDiff(target)\n\n\t\treturn r\n\t},\n\treverse(handler, target, value, args, proxy) {\n\t\tconst r = reflectApply(value, target, args)\n\n\t\thandler.trackDiff(target)\n\n\t\treturn r\n\t},\n\n\tforEach(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treflectApply(value, target, args)\n\t},\n\tmap(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\n\tevery(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\tsome(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\n\t// lib.es2015.core.d.ts\n\n\tfill(handler, target, value, args, proxy) {\n\t\targs[0] = mutable(args[0])\n\n\t\tconst r = reflectApply(value, target, args)\n\n\t\thandler.trackDiff(target)\n\n\t\treturn r\n\t},\n\n\tcopyWithin(handler, target, value, args, proxy) {\n\t\tconst r = reflectApply(value, target, args)\n\n\t\thandler.trackDiff(target)\n\n\t\treturn r\n\t},\n\n\t/** READ METHODS */\n\n\t// lib.es5.d.ts\n\n\ttoString(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\t\treturn reflectApply(value, target, args)\n\t},\n\n\ttoLocaleString(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\t\treturn reflectApply(value, target, args)\n\t},\n\n\tslice(handler, target, value, args, proxy) {\n\t\tlet start = args[0]\n\t\tlet end = args[1]\n\n\t\tstart = start > 0 ? start : start < 0 ? start + target.length : 0\n\t\tend =\n\t\t\tend > 0 ? end : end < 0 ? end + target.length : target.length\n\n\t\tconst r = reflectApply(value, target, args)\n\n\t\thandler.trackKeysRange(target, start, end)\n\n\t\treturn r\n\t},\n\n\tjoin(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\tconcat(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\targs = args.map(value => mutable(value))\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\n\tindexOf(handler, target, value, args, proxy) {\n\t\tconst searchElement = args[0]\n\t\tconst fromIndex = args[1]\n\n\t\tconst key = target.indexOf(mutable(searchElement), fromIndex)\n\n\t\thandler.trackKey(target, key)\n\n\t\treturn key\n\t},\n\tlastIndexOf(handler, target, value, args, proxy) {\n\t\tconst searchElement = args[0]\n\t\tconst fromIndex = args[1]\n\n\t\tconst key = target.lastIndexOf(\n\t\t\tmutable(searchElement),\n\t\t\tfromIndex === undefined ? target.length - 1 : fromIndex,\n\t\t)\n\n\t\thandler.trackKey(target, key)\n\n\t\treturn key\n\t},\n\n\tfilter(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\treduce(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\treduceRight(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\n\t// lib.es2015.core.d.ts\n\n\tfind(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\tfindIndex(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\n\t// lib.es2015.iterable.d.ts\n\n\t*entries(handler, target, value, args, proxy) {\n\t\tfor (const entry of target.entries()) {\n\t\t\thandler.track.valueRead(entry[0], entry[1])\n\t\t\tyield entry\n\t\t}\n\n\t\t// for when empty and for when iterating all\n\t\thandler.track.valuesRead()\n\t\thandler.track.keysRead()\n\t},\n\t*keys(handler, target, value, args, proxy) {\n\t\tfor (const key of target.keys()) {\n\t\t\thandler.track.keyRead(key, true)\n\t\t\tyield key\n\t\t}\n\n\t\t// for when empty and for when iterating all\n\t\thandler.track.keysRead()\n\t},\n\t*values(handler, target, value, args, proxy) {\n\t\tfor (const [key, _value] of target.entries()) {\n\t\t\thandler.track.valueRead(key, _value)\n\t\t\tyield _value\n\t\t}\n\n\t\t// for when empty and for when iterating all\n\t\thandler.track.valuesRead()\n\t\thandler.track.keysRead()\n\t},\n\t[iterator](handler, target, value, args, proxy) {\n\t\treturn this.values(handler, target, value, args, proxy)\n\t},\n\n\t// lib.es2016.array.include.d.ts\n\n\tincludes(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\t\targs[0] = mutable(args[0])\n\t\treturn reflectApply(value, target, args)\n\t},\n\n\t// lib.es2019.array.d.ts\n\n\tflat(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\tflatMap(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\n\t// lib.es2022.array.d.ts\n\n\tat(handler, target, value, args, proxy) {\n\t\tlet key = args[0]\n\n\t\tkey = key < 0 ? key + target.length : key\n\n\t\thandler.trackKey(target, key)\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\n\t// lib.es2023.array.d.ts\n\n\tfindLast(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\tfindLastIndex(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\n\ttoReversed(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\ttoSorted(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\ttoSpliced(handler, target, value, args, proxy) {\n\t\thandler.track.valuesRead()\n\n\t\tfor (let i = 2; i < args.length; i++) {\n\t\t\targs[i] = mutable(args[i])\n\t\t}\n\n\t\treturn reflectApply(value, target, args)\n\t},\n\twith(handler, target, value, args, proxy) {\n\t\tlet key = args[0]\n\n\t\tkey = key < 0 ? key + target.length : key\n\n\t\thandler.trackKey(target, key)\n\n\t\treturn reflectApply(value, target, args)\n\t},\n}\n","import { $isMutable } from '../../../constants.js'\nimport { batch } from '../../reactive.js'\nimport { isFunction, reflectGet, reflectSet } from '../../std.js'\n\nimport { mutable } from '../mutable.js'\nimport { signalifyUndefinedKey } from '../signalify.js'\n\nimport { ProxyHandlerBase } from './base.js'\n\n/**\n * Proxy for objects. In objects, values are tracked by the\n * setter/getters in the properties.\n */\nexport class ProxyHandlerObject extends ProxyHandlerBase {\n\t// type = 'Object'\n\n\tget(target, key, proxy) {\n\t\tif (key === $isMutable) {\n\t\t\treturn true\n\t\t}\n\n\t\t/** To be able to track properties not yet set */\n\t\tif (!(key in target)) {\n\t\t\tthis.track.isUndefinedRead(key, true)\n\t\t}\n\n\t\tconst value = reflectGet(target, key, proxy)\n\n\t\treturn isFunction(value)\n\t\t\t? this.returnFunction(target, key, value, proxy)\n\t\t\t: this.returnValue(target, key, value)\n\t}\n\tset(target, key, value, proxy) {\n\t\treturn batch(() => {\n\t\t\t/** Always work with mutables */\n\t\t\tvalue = mutable(value)\n\n\t\t\t/** New key */\n\t\t\tif (!(key in target)) {\n\t\t\t\tthis.track.keysWrite() // change ownKeys\n\t\t\t\tthis.track.keyWrite(key, true) // change has\n\t\t\t\tsignalifyUndefinedKey(target, key, mutable, this.track, value) // track value\n\t\t\t}\n\t\t\t/**\n\t\t\t * To trigger the change when was read but not yet defined. It\n\t\t\t * handles the cases: deleting an undefined property, setting to\n\t\t\t * undefined a property that was deleted.\n\t\t\t */\n\t\t\tthis.track.isUndefinedWrite(key, value)\n\n\t\t\treturn reflectSet(target, key, value, proxy)\n\t\t})\n\t}\n}\n","import { $isMutable } from '../../../constants.js'\nimport { batch } from '../../reactive.js'\nimport {\n\tempty,\n\tisFunction,\n\titerator,\n\treflectApply,\n\treflectGet,\n} from '../../std.js'\nimport { mutable } from '../mutable.js'\nimport { tracker } from '../tracker.js'\n\nimport { ProxyHandlerObject } from './object.js'\n\n/**\n * Proxy for objects. In objects, values are tracked by the\n * setter/getters in the properties.\n */\nexport class ProxyHandlerMap extends ProxyHandlerObject {\n\t// type = 'Map'\n\n\tconstructor(value) {\n\t\tsuper(value)\n\t\tthis.trackSlot = tracker(empty())\n\t}\n\n\tget(target, key, proxy) {\n\t\tif (key === $isMutable) {\n\t\t\treturn true\n\t\t}\n\n\t\t/** To be able to track properties not yet set */\n\t\tif (!(key in target)) {\n\t\t\tthis.track.isUndefinedRead(key, true)\n\t\t}\n\n\t\t/**\n\t\t * Tracking + value For whatever reason `size` is special for\n\t\t * `Map`\n\t\t */\n\n\t\tconst value =\n\t\t\tkey === 'size'\n\t\t\t\t? this.track.valueRead(key, reflectGet(target, key, target))\n\t\t\t\t: reflectGet(target, key, proxy)\n\n\t\treturn isFunction(value)\n\t\t\t? this.returnFunction(target, key, value, proxy)\n\t\t\t: this.returnValue(target, key, value)\n\t}\n\treturnFunction(target, key, value, proxy) {\n\t\t/**\n\t\t * 1. `Reflect.apply` to correct `receiver`. `TypeError: Method\n\t\t *    Set.prototype.add called on incompatible receiver #<Set>`\n\t\t * 2. Run in a batch to react to all changes at the same time.\n\t\t */\n\t\treturn (...args) =>\n\t\t\tbatch(() =>\n\t\t\t\tmutable(\n\t\t\t\t\tkey in mapMethods\n\t\t\t\t\t\t? mapMethods[key](\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\tthis.trackSlot,\n\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\targs,\n\t\t\t\t\t\t\t\tproxy,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t: reflectApply(value, target, args),\n\t\t\t\t),\n\t\t\t)\n\t}\n}\n\n/**\n * Like Map but tracks.\n *\n * 1. Instances are supposed to be used Proxied, so theres no need for\n *    batching, because the proxy already batches the functions.\n * 2. This is an internal Class and is not meant to be used outside\n *    `mutable`.\n */\n\nconst mapMethods = {\n\t__proto__: null,\n\n\thas(handler, trackSlot, target, value, args, proxy) {\n\t\tconst key = args[0]\n\n\t\tconst r = reflectApply(value, target, args)\n\t\ttrackSlot.keyRead(key, r)\n\t\treturn r\n\t},\n\tget(handler, trackSlot, target, value, args, proxy) {\n\t\tconst key = args[0]\n\n\t\tconst r = reflectApply(value, target, args)\n\t\ttrackSlot.valueRead(key, r)\n\t\treturn r\n\t},\n\n\tset(handler, trackSlot, target, value, args, proxy) {\n\t\tconst key = args[0]\n\t\tconst val = mutable(args[1])\n\n\t\tif (target.has(key)) {\n\t\t\tif (target.get(key) === val) {\n\t\t\t\treturn reflectApply(value, target, args)\n\t\t\t}\n\t\t} else {\n\t\t\ttrackSlot.keysWrite()\n\t\t}\n\n\t\ttrackSlot.valuesWrite()\n\n\t\ttrackSlot.keyWrite(key, true)\n\t\ttrackSlot.valueWrite(key, val)\n\n\t\tconst r = reflectApply(value, target, args)\n\n\t\thandler.track.valueWrite('size', target.size)\n\n\t\treturn r\n\t},\n\tdelete(handler, trackSlot, target, value, args, proxy) {\n\t\tconst key = args[0]\n\n\t\tconst r = reflectApply(value, target, args)\n\t\tif (r) {\n\t\t\ttrackSlot.keysWrite()\n\t\t\ttrackSlot.valuesWrite()\n\n\t\t\ttrackSlot.keyWrite(key, false)\n\t\t\ttrackSlot.valueWrite(key, undefined)\n\n\t\t\thandler.track.valueWrite('size', target.size)\n\t\t}\n\t\treturn r\n\t},\n\tclear(handler, trackSlot, target, value, args, proxy) {\n\t\tif (target.size) {\n\t\t\ttrackSlot.keysWrite()\n\t\t\ttrackSlot.valuesWrite()\n\n\t\t\tfor (const key of target.keys()) {\n\t\t\t\ttrackSlot.keyWrite(key, false)\n\t\t\t\ttrackSlot.valueWrite(key, undefined)\n\t\t\t}\n\n\t\t\treflectApply(value, target, args)\n\n\t\t\thandler.track.valueWrite('size', 0)\n\t\t}\n\t},\n\n\tforEach(handler, trackSlot, target, value, args, proxy) {\n\t\tconst cb = args[0]\n\n\t\ttrackSlot.valuesRead()\n\t\ttrackSlot.keysRead()\n\n\t\tfor (const [key, value] of target.entries()) {\n\t\t\ttrackSlot.valueRead(key, value)\n\t\t\tcb(value, key, proxy)\n\t\t}\n\t},\n\t*keys(handler, trackSlot, target, value, args, proxy) {\n\t\tfor (const key of target.keys()) {\n\t\t\ttrackSlot.keyRead(key, true)\n\t\t\tyield key\n\t\t}\n\n\t\t// for when empty and for when iterating all\n\t\ttrackSlot.keysRead()\n\t},\n\t*values(handler, trackSlot, target, value, args, proxy) {\n\t\tfor (const [key, value] of target.entries()) {\n\t\t\ttrackSlot.valueRead(key, value)\n\t\t\tyield value\n\t\t}\n\n\t\t// for when empty and for when iterating all\n\t\ttrackSlot.valuesRead()\n\t\ttrackSlot.keysRead()\n\t},\n\t*entries(handler, trackSlot, target, value, args, proxy) {\n\t\tfor (const entry of target.entries()) {\n\t\t\ttrackSlot.valueRead(entry[0], entry[1])\n\t\t\tyield entry\n\t\t}\n\n\t\t// for when empty and for when iterating all\n\t\ttrackSlot.valuesRead()\n\t\ttrackSlot.keysRead()\n\t},\n\t[iterator](handler, trackSlot, target, value, args, proxy) {\n\t\treturn this.entries(\n\t\t\thandler,\n\t\t\ttrackSlot,\n\t\t\ttarget,\n\t\t\tvalue,\n\t\t\targs,\n\t\t\tproxy,\n\t\t)\n\t},\n}\n","import { isArray, isObject } from '../std.js'\nimport { isMutationBlacklisted } from './blacklist.js'\n\n/**\n * Copies an object leaving native/built-ins intact\n *\n * @template T\n * @param {T} o\n * @returns {T}\n */\nexport function copy(o, seen = new Map()) {\n\tif (!isObject(o)) {\n\t\treturn o\n\t}\n\n\tif (isMutationBlacklisted(o)) {\n\t\treturn o\n\t}\n\n\tif (seen.has(o)) {\n\t\treturn /** @type {T} */ (seen.get(o))\n\t}\n\n\tconst c = /** @type {T} */ isArray(o)\n\t\t? []\n\t\t: /** @type {{ [key: string]: unknown }} */ ({})\n\n\tseen.set(o, c)\n\n\tfor (const k in o) {\n\t\t// @ts-expect-error\n\t\tc[k] = copy(o[k], seen)\n\t}\n\t// @ts-expect-error\n\treturn c\n}\n","import { isArray, isObject, weakStore } from '../std.js'\n\nimport { untrack } from '../reactive.js'\n\nimport { ProxyHandlerArray } from './proxies/array.js'\nimport { ProxyHandlerObject } from './proxies/object.js'\nimport { ProxyHandlerMap } from './proxies/map.js'\n\nimport { isMutationBlacklisted } from './blacklist.js'\n\nimport { signalifyObject } from './signalify.js'\nimport { copy } from './copy.js'\nimport { $isMutable } from '../../constants.js'\n\n/** Keeps track of what objects have already been made into a proxy */\nconst [getProxy, setProxy] = weakStore()\n\n/**\n * Wraps a value with the provided proxy handler and caches the proxy.\n *\n * @template {object} T\n * @returns {T}\n */\nfunction createProxy(target, Handler) {\n\tconst proxy = new Proxy(target, new Handler(target))\n\t/**\n\t * Before mutating the content of it (for example calling\n\t * `signalifyObject` or making the content of an array mutable),\n\t * save it. In case the mutation triggers `mutable` on the same\n\t * object, before we have a chance to save it as a proxy. To avoid\n\t * the posible situation of having 2 different proxies for the same\n\t * value.\n\t */\n\tsetProxy(target, proxy)\n\treturn proxy\n}\n\n/**\n * Makes a recursive modifiable and trackeable object. Transforms in\n * place properties into signals via get/set. Works with inherited\n * getters/setters.\n *\n * @template T\n * @param {T} value\n * @param {boolean} [clone] - If to `copy` the value first\n * @returns {T}\n */\nexport function mutable(value, clone) {\n\t/** Return value as is when is not an object */\n\tif (!isObject(value)) {\n\t\treturn value\n\t}\n\n\t/** Make a copy to avoid modifying original data (optional) */\n\tvalue = clone ? copy(value) : value\n\n\t/** Avoid unwrapping external proxies */\n\tif (value[$isMutable]) {\n\t\treturn value\n\t}\n\n\t/**\n\t * Return `proxy` if already exists for `value`. It could be\n\t * possible that `value` is a `proxy`, which is already saved, so it\n\t * will return the same thing.\n\t */\n\tlet proxy = getProxy(value)\n\tif (proxy) {\n\t\treturn proxy\n\t}\n\n\t/**\n\t * Values like Date, RegExp, HTMLElement are not proxied. The\n\t * blacklist can be customized by editing the set from blacklist.js\n\t */\n\tif (isMutationBlacklisted(value)) {\n\t\tsetProxy(value, value)\n\t\treturn value\n\t}\n\n\t/** Array methods are proxied by ProxyHandlerArray */\n\tif (isArray(value)) {\n\t\tproxy = createProxy(value, ProxyHandlerArray)\n\n\t\t/** Make the content of the array mutable. */\n\t\tuntrack(() =>\n\t\t\tvalue.forEach((value, key, array) => {\n\t\t\t\tarray[key] = mutable(value)\n\t\t\t}),\n\t\t)\n\n\t\treturn proxy\n\t}\n\n\t/** Map methods are proxied by ProxyHandlerMap */\n\tif (value instanceof Map) {\n\t\tproxy = createProxy(value, ProxyHandlerMap)\n\n\t\t/** Make the content mutable. */\n\t\tuntrack(() =>\n\t\t\tvalue.forEach((value, key, map) => {\n\t\t\t\tmap.set(key, mutable(value))\n\t\t\t}),\n\t\t)\n\n\t\treturn proxy\n\t}\n\n\t/** An intance of something we dont have a special handler for it */\n\tproxy = createProxy(value, ProxyHandlerObject)\n\n\tsignalifyObject(value, mutable)\n\n\treturn proxy\n}\n","// https://github.com/mobxjs/mobx/issues/1590\n\nimport { batch, untrack } from '../../reactive.js'\nimport {\n\tindexByKey,\n\tisArray,\n\tisObject,\n\tisString,\n\tmorphedBetweenArrayAndObject,\n\tremoveFromArrayConditionally,\n\tvalues,\n} from '../../std.js'\nimport { copy } from '../copy.js'\n\n/**\n * Merge `source` into `target` and removes from `target` keys not\n * present in `source`\n *\n * ```js\n * import { replace } from 'pota/store'\n *\n * const target = { a: true, q: [1, 2] }\n * const source = { b: true, q: [3] }\n *\n * replace(target, source)\n *\n * // target === { b: true, q: [3] }\n * ```\n *\n * ```js\n * import { replace } from 'pota/store'\n *\n * // replacing using keys keeps the references\n *\n * const target = {\n * \ta: true,\n * \tq: [{ id: 0 }, { id: 1, name: 'Quack' }],\n * }\n *\n * const source = {\n * \tb: true,\n * \tq: [{ id: 1, lastName: 'Murci' }],\n * }\n *\n * const ref = target.q[1]\n *\n * // replace moving target.q[1] to target.q[0]\n *\n * replace(target, source, { q: { key: 'id' } })\n *\n * console.log(ref === target.q[0])\n *\n * // target === { \"q\": [{ \"id\": 1, \"lastName\": \"Murci\" }], \"b\": true }\n * ```\n *\n * @template T\n * @param {T} target\n * @param {object} source\n * @param {object} [keys] Keep references on objects with the same key\n */\nexport const replace = (target, source, keys) =>\n\tbatch(() =>\n\t\tuntrack(() => reconcile(target, copy(source), keys, '')),\n\t)\n\nfunction reconcile(target, source, keys, id, inArray) {\n\tfor (id in source) {\n\t\tif (!(id in target)) {\n\t\t\ttarget[id] = source[id]\n\t\t} else {\n\t\t\tconst prev = target[id]\n\t\t\tconst next = source[id]\n\n\t\t\tif (isObject(next)) {\n\t\t\t\tif (morphedBetweenArrayAndObject(prev, next)) {\n\t\t\t\t\t// Morphed from object/array to the opposite array/object.\n\t\t\t\t\ttarget[id] = next\n\t\t\t\t} else if (isArray(next)) {\n\t\t\t\t\tconst _keys = getKeys(keys, id)\n\t\t\t\t\tconst key =\n\t\t\t\t\t\t_keys && values(_keys).find(item => isString(item))\n\n\t\t\t\t\t// merge or add by key\n\t\t\t\t\tif (_keys && key) {\n\t\t\t\t\t\tlet byKey\n\n\t\t\t\t\t\t// in replace mode first remove `prevs` not found in `next`\n\n\t\t\t\t\t\t// index array next\n\t\t\t\t\t\tbyKey = indexByKey(next, key)\n\t\t\t\t\t\t// remove\n\t\t\t\t\t\tremoveFromArrayConditionally(\n\t\t\t\t\t\t\tprev,\n\t\t\t\t\t\t\t(i, item) => !byKey[item[key]],\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\t// index array prev\n\t\t\t\t\t\tbyKey = indexByKey(prev, key)\n\n\t\t\t\t\t\t// merge or push\n\t\t\t\t\t\tfor (const item of next) {\n\t\t\t\t\t\t\tconst has = byKey[item[key]]\n\t\t\t\t\t\t\t!has ? prev.push(item) : reconcile(has, item, _keys, id)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treconcile(prev, next, _keys, id, true)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// simple object\n\t\t\t\t\treconcile(\n\t\t\t\t\t\tprev,\n\t\t\t\t\t\tnext,\n\t\t\t\t\t\tinArray ? keys : getKeys(keys, id),\n\t\t\t\t\t\tid,\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t} else if (prev !== next) {\n\t\t\t\t// simple primitive value\n\t\t\t\ttarget[id] = next\n\t\t\t}\n\t\t}\n\t}\n\n\t// remove\n\n\tif (isArray(target)) {\n\t\ttarget.length = source.length\n\t} else {\n\t\tfor (id in target) {\n\t\t\tif (!(id in source)) {\n\t\t\t\tdelete target[id]\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst getKeys = (keys, id) =>\n\tkeys && id in keys ? keys[id] : undefined\n","import { signal, cleanup, syncEffect } from '../lib/reactive.js'\nimport { isIterable, toArray } from '../lib/std.js'\n\n/**\n * Returns a `function` that receives as a second argument whats\n * returned from it.\n *\n * @template T\n * @param {(next: T, previous: T) => T} fn\n */\nexport function usePrevious(fn) {\n\tlet previous\n\n\t/** @param {T} [next] */\n\treturn next => {\n\t\tprevious = fn(next, previous)\n\t}\n}\n\n/**\n * Returns a `isSelected` function that will return `true` when the\n * argument for it matches the original signal `value`.\n *\n * @param {SignalAccessor<unknown>} value - Signal with the current\n *   value\n */\nexport function useSelector(value) {\n\tconst map = new Map()\n\n\tlet prev = []\n\n\tsyncEffect(() => {\n\t\tconst val = value()\n\n\t\tconst selected = isIterable(val)\n\t\t\t? toArray(\n\t\t\t\t\t// @ts-expect-error, no idea how to type this\n\t\t\t\t\tval.values(),\n\t\t\t\t)\n\t\t\t: val === undefined\n\t\t\t\t? []\n\t\t\t\t: [val]\n\n\t\t// unselect\n\t\tfor (const value of prev) {\n\t\t\tif (!selected.includes(value)) {\n\t\t\t\tconst current = map.get(value)\n\t\t\t\tcurrent && current.write(false)\n\t\t\t}\n\t\t}\n\n\t\t// select\n\t\tfor (const value of selected) {\n\t\t\tif (!prev.includes(value)) {\n\t\t\t\tconst current = map.get(value)\n\t\t\t\tcurrent && current.write(true)\n\t\t\t}\n\t\t}\n\t\tprev = selected\n\t})\n\n\t/**\n\t * Is selected function, it will return `true` when the value\n\t * matches the current signal.\n\t *\n\t * @template T\n\t * @param {T} item - Values to compare with current\n\t * @returns {SignalAccessor<T>} A signal with a boolean value\n\t */\n\treturn function isSelected(item) {\n\t\tlet selected = map.get(item)\n\t\tif (!selected) {\n\t\t\tselected = signal(prev.includes(item))\n\t\t\tselected.counter = 1\n\t\t\tmap.set(item, selected)\n\t\t} else {\n\t\t\tselected.counter++\n\t\t}\n\n\t\tcleanup(() => {\n\t\t\tif (--selected.counter === 0) {\n\t\t\t\tmap.delete(item)\n\t\t\t}\n\t\t})\n\n\t\treturn selected.read\n\t}\n}\n","import { location, window } from '../lib/std.js'\nimport { document, querySelector } from './dom.js'\n\n/**\n * Scrolls to an element\n *\n * @param {Element} item - Element to scroll to\n */\nexport function scrollToElement(item) {\n\t/** Scroll children of element to the top */\n\titem.scrollTop = 0\n\n\t/** Scroll to element */\n\titem.scrollIntoView(true)\n}\n\n/** Scrolls to `window.location.hash` */\nexport const scrollToLocationHash = () =>\n\tscrollToSelector(location.hash)\n\n/**\n * Scrolls to element that matches the hash\n *\n * @param {string} selector - Hash to scroll to\n * @returns {boolean} True on success\n */\nexport function scrollToSelector(selector) {\n\tif (selector) {\n\t\ttry {\n\t\t\t// selector could be invalid\n\t\t\tconst item = querySelector(document, selector)\n\t\t\tif (item) {\n\t\t\t\tscrollToElement(item)\n\t\t\t\treturn true\n\t\t\t}\n\t\t} catch (e) {}\n\t}\n\treturn false\n}\n\n/**\n * Scrolls to hash and in case isnt found it scrolls to the top\n *\n * @param {string} selector - Hash to scroll to\n */\nexport function scrollToSelectorWithFallback(selector) {\n\tif (!scrollToSelector(selector)) scrollToTop()\n}\n\n/** Scrolls to the top of the window */\nexport const scrollToTop = () =>\n\twindow.scrollTo({ top: 0, behavior: 'auto' })\n","import { window, origin } from '../lib/std.js'\n\n/**\n * Trims trailing punctuation that often appears in copied links.\n *\n * @param {string} v\n * @returns {string}\n */\nexport const cleanLink = v => v.replace(/[\\.,\"]$/, '')\n\n/** Re-export of the platform `encodeURIComponent`. */\nexport const encodeURIComponent = window.encodeURIComponent\n\n/**\n * Safe guard. `decodeURIComponent` will fail with malformed strings:\n * links are copied, pasted, manipulated by people, software etc\n *\n * @param {string} string - String to decode\n * @returns {string} Returns decoded string or original string on\n *   error\n */\nfunction _decodeURIComponent(string) {\n\ttry {\n\t\treturn decodeURIComponent(string)\n\t} catch (e) {\n\t\treturn string\n\t}\n}\nexport { _decodeURIComponent as decodeURIComponent }\n\nconst nestedProtocol = /^[a-z]+:([a-z]+:)\\/\\//\nconst nestedProtocolOptional = /^[a-z]+:([a-z]+:)?\\/\\//\n\n/**\n * Returns `true` if the link uses the `file:` protocol\n *\n * @param {string} href - URL\n * @returns {boolean}\n */\nexport const isFileProtocol = href => href.startsWith('file://')\n\n/**\n * Returns `true` if the link comes with a protocol as `http://local/`\n * or `blob:http://local/`\n *\n * @param {string} href - URL\n * @returns {boolean}\n */\nexport const hasProtocol = href => nestedProtocolOptional.test(href)\n\n/**\n * Removes nested protocol as in `blob:` from `blob:http://local/`\n *\n * @param {string} href - URL\n * @returns {string}\n */\nexport const removeNestedProtocol = href =>\n\thref.replace(nestedProtocol, '$1//')\n\n/**\n * Returns `true` if the link is absolute: starts with `/` or has a\n * protocol\n *\n * @param {string} href - URL\n * @returns {boolean} Returns true if the link is absolute\n */\nexport const isAbsolute = href => href[0] === '/' || hasProtocol(href)\n\n/**\n * Returns `true` if the link is relative\n *\n * @param {string} href - URL\n * @returns {boolean} Returns `true` if the link relative\n */\nexport const isRelative = href => !isAbsolute(href)\n\n/**\n * Returns `true` if the link starts with a `#`\n *\n * @param {string} url - URL\n * @returns {boolean} Returns `true` if the link relative\n */\nexport const isHash = url => url[0] === '#'\n\n/**\n * Returns `true` if the link is external. It does so by checking that\n * `window.location.origin` is present at the beginning of the url\n *\n * @param {string} href - URL\n * @returns {boolean} Returns true if the link is external\n */\nexport const isExternal = href =>\n\t// origin could be http://example.net and link could be http://example.net.ha.com, so add \"/\"\n\t!(href + '/').startsWith(origin + '/')\n\nexport const paramsRegExp = /\\:([a-z0-9_\\-]+)/gi\n\n/**\n * Replace `params` in an `url` for the encoded equivalent\n *\n * @param {string} href - URL\n * @param {object} [params] - Key-value pair to replace\n * @returns {string} URL with the params replaced\n */\nexport const replaceParams = (href, params) =>\n\tparams\n\t\t? href.replace(paramsRegExp, (a, b) =>\n\t\t\t\t// only replace the ones defined on params\n\t\t\t\tparams[b] !== undefined ? encodeURIComponent(params[b]) : a,\n\t\t\t)\n\t\t: href\n","import { cleanup, owned, withValue } from '../lib/reactive.js'\n\n/**\n * Native `Date.now()`.\n *\n * @returns {number}\n */\nexport const now = () => Date.now()\n\n/**\n * Formats a timestamp as YYYY-MM-DD.\n *\n * @param {number} [timestamp=now()] Default is `now()`\n * @returns {string}\n */\nexport function date(timestamp = now()) {\n\tconst o = new Date(timestamp)\n\n\treturn (\n\t\to.getFullYear() +\n\t\t'-' +\n\t\t(o.getMonth() + 1 < 10 ? '0' : '') +\n\t\t(o.getMonth() + 1) +\n\t\t'-' +\n\t\t(o.getDate() < 10 ? '0' : '') +\n\t\to.getDate()\n\t)\n}\n\n/**\n * Formats a timestamp as YYYY-MM-DD HH:MM.\n *\n * @param {number} [timestamp=now()] Default is `now()`\n * @returns {string}\n */\nexport function datetime(timestamp = now()) {\n\treturn date(timestamp) + ' ' + time(timestamp)\n}\n\n/**\n * Formats a timestamp as HH:MM.\n *\n * @param {number} [timestamp=now()] Default is `now()`\n * @returns {string}\n */\nexport function time(timestamp = now()) {\n\treturn timeWithSeconds(timestamp).slice(0, -3)\n}\n\n/**\n * Formats a timestamp as HH:MM:SS.\n *\n * @param {number} [timestamp=now()] Default is `now()`\n * @returns {string}\n */\nexport function timeWithSeconds(timestamp = now()) {\n\tconst o = new Date(timestamp)\n\n\treturn (\n\t\t(o.getHours() < 10 ? '0' : '') +\n\t\to.getHours() +\n\t\t':' +\n\t\t(o.getMinutes() < 10 ? '0' : '') +\n\t\to.getMinutes() +\n\t\t':' +\n\t\t(o.getSeconds() < 10 ? '0' : '') +\n\t\to.getSeconds()\n\t)\n}\n\n/**\n * Formats a timestamp using locale-aware weekday and date components.\n *\n * @param {number} [timestamp=now()] Default is `now()`\n * @param {Intl.LocalesArgument} [lang='en'] Default is `'en'`\n * @returns {string}\n */\nexport function day(timestamp = now(), lang = 'en') {\n\tconst o = new Date(timestamp)\n\n\t// saturday, September 17, 2016\n\treturn o.toLocaleDateString(lang, {\n\t\tweekday: 'long',\n\t\tyear: 'numeric',\n\t\tmonth: 'long',\n\t\tday: 'numeric',\n\t})\n}\n\n/**\n * Runs a function while reporting execution time via\n * console/timeReport.\n *\n * @template T\n * @param {string} name\n * @param {() => T} cb\n * @param {(duration: number) => void} [timeReport]\n * @returns {T}\n */\nexport function measure(name, cb, timeReport) {\n\tconsole.time(name)\n\tconst start = performance.now()\n\tconst r = cb()\n\ttimeReport && timeReport(performance.now() - start)\n\tconsole.timeEnd(name)\n\treturn r\n}\n\n/**\n * Measures the execution time of a function.\n *\n * @param {() => void} fn\n * @returns {number} Duration in milliseconds.\n */\nexport function timing(fn) {\n\tconst start = performance.now()\n\tfn()\n\treturn performance.now() - start\n}\n\n/**\n * Creates a `setTimeout` that autodisposes. The `delay` could be\n * reactive. The timeout is NOT started automatically.\n *\n * @template T\n * @param {(...args: unknown[]) => void} callback - Callback to run\n *   once delay completes\n * @param {Accessor<number>} delay - Delay number or signal\n * @param {unknown[]} args - Arguments to pass to the callback\n * @returns {{ start: Function; stop: Function }}\n */\nexport function useTimeout(callback, delay, ...args) {\n\tlet id\n\tconst fn = {\n\t\tstart: () => {\n\t\t\twithValue(delay, delay => {\n\t\t\t\tfn.stop()\n\t\t\t\tif (delay < Infinity)\n\t\t\t\t\tid = setTimeout(owned(callback), delay, ...args)\n\t\t\t})\n\t\t\treturn fn\n\t\t},\n\n\t\tstop: () => clearTimeout(id),\n\t}\n\n\tcleanup(fn.stop)\n\n\treturn fn\n}\n","/// <Reference path=\"./context.js.d.ts\"/>\n\nimport { cleanup, memo, signal, context } from '../../lib/reactive.js'\nimport { nothing, removeFromArray } from '../../lib/std.js'\n\nimport { isAbsolute } from '../../use/url.js'\n\n/**\n * @param {Partial<RouteContext>} props\n * @returns {RouteContext}\n */\nexport function create(props) {\n\t/** @type SignalObject<RouteContext[]> */\n\tconst [children, _, updateChildren] = signal(\n\t\t/** @type {RouteContext[]} */ ([]),\n\t)\n\n\treturn {\n\t\t// the composed base route\n\t\tbase: undefined,\n\t\thref: () => '', // the url of the route\n\t\tparent: undefined, // parent context\n\t\tshow: () => undefined, // if the route is shown\n\t\tparams: () => () => nothing, // params of the route\n\t\tscroll: undefined, // elements to scroll\n\t\t// the children routes\n\t\taddChild(child) {\n\t\t\tupdateChildren(children => {\n\t\t\t\tchildren.push(child)\n\t\t\t\treturn [...children]\n\t\t\t})\n\t\t\tcleanup(() =>\n\t\t\t\tupdateChildren(children => {\n\t\t\t\t\tremoveFromArray(children, child)\n\t\t\t\t\treturn [...children]\n\t\t\t\t}),\n\t\t\t)\n\t\t},\n\t\tshouldShowDefault: memo(() => {\n\t\t\tconst child = children()\n\t\t\treturn (\n\t\t\t\t// when it has siblings, check if at least 1 rendered\n\t\t\t\t// `every` instead of `some`, needs to read the signal for tracking\n\t\t\t\tchild.length && child.every(child => !child.show())\n\t\t\t)\n\t\t}),\n\t\tresolve(href) {\n\t\t\t// link is relative to the `<Route>`\n\t\t\tconst base = this.href() || location.href\n\t\t\treturn isAbsolute(href)\n\t\t\t\t? href\n\t\t\t\t: // making link dos/ relative to http://localhost:11433/#uno/\n\t\t\t\t\t// becomes http://localhost:11433/#uno/dos/\n\t\t\t\t\t// this should be window.location.protocol\n\t\t\t\t\t(location.protocol === 'blob:' ? 'blob:' : '') +\n\t\t\t\t\t\t(base.includes('#')\n\t\t\t\t\t\t\t? base + href\n\t\t\t\t\t\t\t: new URL(href, base).href)\n\t\t},\n\t\t// override\n\t\t...props,\n\t}\n}\n\nexport const useRoute = context(create(nothing))\n","import { memo, signal } from '../lib/reactive.js'\nimport { mutable, replace } from '../lib/store.js'\nimport {\n\tempty,\n\tentries,\n\tfreeze,\n\tfromEntries,\n\thistory,\n\tnothing,\n\toptional,\n\tlocation as wLocation,\n} from '../lib/std.js'\n\nimport { scrollToSelectorWithFallback } from './scroll.js'\nimport {\n\tdecodeURIComponent,\n\tisAbsolute,\n\tisExternal,\n\tremoveNestedProtocol,\n\treplaceParams,\n} from './url.js'\nimport { useTimeout } from './time.js'\n\nimport { useRoute } from '../components/route/context.js'\nimport { document } from './dom.js'\nimport { preventDefault } from './event.js'\n\n// window.location signal\n\nconst [getLocation, setLocation] = signal(wLocation.href)\n\n// only trigger on what changed\nconst locationObject = memo(\n\t() => new URL(removeNestedProtocol(getLocation())),\n)\nconst href = memo(() => locationObject().href)\nconst pathname = memo(() => locationObject().pathname)\n// http://location/# reports hash to be empty\n// http://location/ reports hash to be empty\nconst hash = memo(() => locationObject().hash || '#')\nconst path = memo(() => pathname() + hash())\nconst search = memo(() => locationObject().search)\n\nconst searchParams = mutable(\n\t/** @type {Record<PropertyKey, string>} */ ({}),\n)\nconst searchParamsMemo = memo(() => {\n\tconst entries = fromEntries(locationObject().searchParams.entries())\n\n\treplace(searchParams, entries)\n\n\treturn entries\n})\nsearchParamsMemo()\n\nconst params = mutable(\n\t/** @type {Record<PropertyKey, string>} */ ({}),\n)\nconst paramsMemo = memo(() => {\n\tconst values = empty()\n\n\tuseRoute.walk(context => {\n\t\tfor (const [key, value] of entries(context.params()())) {\n\t\t\tvalues[key] =\n\t\t\t\tvalue !== undefined\n\t\t\t\t\t? decodeURIComponent(/** @type {string} */ (value))\n\t\t\t\t\t: value\n\t\t}\n\t})\n\n\treplace(params, values)\n\n\treturn values\n})\nparamsMemo()\n\nexport const location = freeze({\n\tprotocol: locationObject().protocol,\n\torigin: locationObject().origin,\n\t//\n\thref,\n\tpathname,\n\tpath,\n\thash,\n\tsearch,\n\tsearchParams,\n\t// searchParamsMemo,\n\tparams,\n\t// paramsMemo,\n})\n\nlet BeforeLeave = []\n\n/**\n * Run code before leaving the route, return or resolve to false to\n * reject, return true to continue\n *\n * @param {Function | Promise<unknown>} cb - Run before leaving the\n *   route\n * @url https://pota.quack.uy/Components/Route/useBeforeLeave\n */\nexport const useBeforeLeave = cb => {\n\taddListeners()\n\n\tBeforeLeave.push({\n\t\thref: useRoute().href() || wLocation.href,\n\t\tcb,\n\t})\n}\n\n/**\n * Returns a boolean telling if navigation is allowed\n *\n * @param {string} href\n * @returns {Promise<boolean>}\n */\nasync function canNavigate(href) {\n\tconst newBeforeLeave = []\n\tfor (const beforeLeave of BeforeLeave) {\n\t\tif (href.indexOf(beforeLeave.href) !== 0) {\n\t\t\tif (!(await beforeLeave.cb().catch(() => false))) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t} else {\n\t\t\tnewBeforeLeave.push(beforeLeave)\n\t\t}\n\t}\n\tBeforeLeave = newBeforeLeave\n\treturn true\n}\n\n/**\n * Navigates to a new location\n *\n * @param {string} href\n * @param {{\n * \tscroll?: boolean\n * \treplace?: boolean\n * }} options\n * @url https://pota.quack.uy/Components/Route/Navigate\n */\nasync function navigate(href, options = nothing) {\n\tif (wLocation.href !== href) {\n\t\tif (await canNavigate(href)) {\n\t\t\tconst fn = () => navigateInternal(href, options)\n\t\t\tconst transition =\n\t\t\t\tdocument.startViewTransition &&\n\t\t\t\tdocument.startViewTransition.bind(document)\n\t\t\t// navigate with transition if available\n\t\t\ttransition &&\n\t\t\twLocation.href.replace(/#.*/, '') !== href.replace(/#.*/, '')\n\t\t\t\t? transition(fn)\n\t\t\t\t: fn()\n\t\t}\n\t}\n}\n\n/**\n * Internal navigation function that updates history and location\n *\n * @param {string} href - The URL to navigate to\n * @param {{ replace?: boolean; scroll?: boolean }} options -\n *   Navigation options\n */\nfunction navigateInternal(href, options) {\n\toptions.replace\n\t\t? history.replaceState(null, '', href)\n\t\t: history.pushState(null, '', href)\n\n\tsetLocation(wLocation.href)\n\n\tif (optional(options.scroll)) {\n\t\tscrollToSelectorWithFallback(wLocation.hash)\n\t}\n}\n\n/**\n * Navigates to a new location programmatically\n *\n * @param {string} href\n * @param {{\n * \tparams?: object\n * \tscroll?: boolean\n * \treplace?: boolean\n * \tdelay?: number\n * }} options\n * @url https://pota.quack.uy/Components/Route/Navigate\n */\nfunction navigateUser(href, options = nothing) {\n\taddListeners()\n\n\thref = replaceParams(href, options.params)\n\n\t/**\n\t * When the user provides the url, it may pass a relative path, this\n\t * makes it absolute\n\t */\n\thref = isAbsolute(href) ? href : new URL(href, wLocation.href).href\n\n\tconst nav = () => navigate(href, options)\n\n\toptions.delay ? useTimeout(nav, options.delay).start() : nav()\n}\nexport { navigateUser as navigate }\n\n// listeners\n\nlet addListenersAdded = false\n\n/**\n * Adds event listeners for client-side navigation. Only adds\n * listeners once to prevent duplicate handlers\n */\nexport function addListeners() {\n\tif (!addListenersAdded) {\n\t\taddListenersAdded = true\n\n\t\tdocument.addEventListener('click', onLinkClick)\n\n\t\taddEventListener('hashchange', onLocationChange)\n\t\taddEventListener('popstate', onLocationChange)\n\t}\n}\n\n/**\n * Handles browser history changes (back/forward buttons) Fixes Chrome\n * title bug and ensures navigation is allowed\n *\n * @returns {Promise<void>}\n */\nasync function onLocationChange() {\n\t// chrome has a bug on which if you use the back/forward button\n\t// it will change the title of the tab to whatever it was before\n\t// if the navigation is prevented (therefore the title/page wont change)\n\t// it will still use the old title even if the title tag didn't change at all\n\tconst title = document.title\n\tdocument.title = title + ' '\n\tdocument.title = title\n\n\tif (await canNavigate(wLocation.href)) {\n\t\tsetLocation(wLocation.href)\n\t} else {\n\t\thistory.pushState(null, '', location.href())\n\t}\n}\n\n/**\n * Handles click events on anchor elements to enable client-side\n * navigation\n *\n * @param {MouseEvent} e - The click event\n */\nfunction onLinkClick(e) {\n\tif (\n\t\te.defaultPrevented ||\n\t\te.button !== 0 ||\n\t\te.metaKey ||\n\t\te.altKey ||\n\t\te.ctrlKey ||\n\t\te.shiftKey\n\t)\n\t\treturn\n\n\t// find link\n\tconst node = e\n\t\t.composedPath()\n\t\t.find(item => item instanceof HTMLAnchorElement)\n\n\t// validate\n\tif (\n\t\t!node ||\n\t\t!node.href ||\n\t\tnode.download ||\n\t\tnode.target ||\n\t\tisExternal(node.href) ||\n\t\tnode.rel.includes('external')\n\t) {\n\t\treturn\n\t}\n\n\tpreventDefault(e)\n\n\tnavigate(node.href, {\n\t\treplace: node.hasAttribute('replace'),\n\t})\n}\n","import { makeCallback, memo } from '../lib/reactive.js'\n\nimport { getValue, isFunction } from '../lib/std.js'\n\n/**\n * Renders its children based on a condition\n *\n * @template T\n * @param {object} props\n * @param {When<T>} props.when\n * @param {Children} [props.fallback]\n * @param {(arg: T) => Children} [props.children]\n * @returns {Children}\n * @url https://pota.quack.uy/Components/Show\n */\nexport function Show(props) {\n\t// callback\n\tconst callback = makeCallback(props.children)\n\n\t// shortcircuit non-functions\n\tif (!isFunction(props.when)) {\n\t\treturn props.when ? callback(() => props.when) : props.fallback\n\t}\n\t// signals/functions\n\tconst value = memo(() => getValue(props.when))\n\tconst condition = memo(() => !!value())\n\n\treturn memo(() => (condition() ? callback(value) : props.fallback))\n}\n","import { isArray } from '../../lib/std.js'\nimport {\n\tscrollToLocationHash,\n\tscrollToSelector,\n\tscrollToTop,\n} from '../../use/scroll.js'\nimport { useRoute } from './context.js'\n\n/**\n * Scroll to hash first, if doesnt, scroll to positions defined by the\n * Routes.\n *\n * @param {RouteContext} context\n */\nexport function scroll(context) {\n\tif (\n\t\t!scrollToLocationHash() &&\n\t\t!useRoute.walk(context => {\n\t\t\tif (context.scroll) {\n\t\t\t\tfor (const item of isArray(context.scroll)\n\t\t\t\t\t? context.scroll\n\t\t\t\t\t: [context.scroll]) {\n\t\t\t\t\tif (scrollToSelector(item)) {\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, context)\n\t) {\n\t\tscrollToTop()\n\t}\n}\n","import { memo, signal } from '../../lib/reactive.js'\nimport { nothing, optional } from '../../lib/std.js'\n\nimport { addListeners, location } from '../../use/location.js'\nimport { paramsRegExp, replaceParams } from '../../use/url.js'\n\nimport { Collapse } from '../Collapse.js'\nimport { Dynamic } from '../Dynamic.js'\nimport { Show } from '../Show.js'\n\nimport { Component } from '../../core/renderer.js'\nimport { onDone } from '../../core/scheduler.js'\n\nimport { useRoute, create } from './context.js'\nimport { scroll } from './scroll.js'\n\n/**\n * @typedef {Object} RouteProps\n * @property {string} path - Path to match relative to the parent\n *   Route. When `path` is missing, it will render only when the\n *   parent's route path is matched exactly.\n * @property {string[] | string} scroll - Elements to scroll when the\n *   route matches.\n * @property {Record<string, string>} params - Key-value pairs params\n *   to encode and replace on the path.\n * @property {When<any>} collapse - To hide the route instead of\n *   removing it from the document.\n * @property {When<any>} when - To stop rendering the route even if\n *   the path matches.\n * @property {Children} fallback - Fallback children.\n * @property {Children} children - Children to render.\n */\n\n/**\n * Renders children if the path matches the current location\n *\n * @param {Partial<RouteProps>} props\n * @returns {Children}\n * @url https://pota.quack.uy/Components/Route/Route\n */\nexport function Route(props) {\n\taddListeners()\n\n\tconst parent = useRoute()\n\n\tconst path = props.path\n\n\t// this concatenates our route to the parent route\n\tconst base =\n\t\t// base +\n\t\t(parent.base === undefined\n\t\t\t? location.protocol === 'file:'\n\t\t\t\t? location.pathname() // when is `file:` protocol, it defaults to `pathname`\n\t\t\t\t: ''\n\t\t\t: parent.base) +\n\t\t// path +\n\t\treplaceParams(\n\t\t\t/**\n\t\t\t * 1. When `<Route>` lacks a `path` prop, is treated as the final\n\t\t\t *    route\n\t\t\t * 2. Ends with nothing or has a hash followed of stuff\n\t\t\t * 3. Allow hash so people can scroll to stuff\n\t\t\t */\n\t\t\tpath === undefined ? '(|#.*)$' : path.replace(/\\$$/, '(|#.*)$'),\n\t\t\tprops.params,\n\t\t)\n\n\tconst route = new RegExp(\n\t\t'^' + base.replace(paramsRegExp, '(?<$1>[^/#]+)'),\n\t)\n\n\tlet href = ''\n\tconst [params, setParams] = signal(() => nothing)\n\n\tconst show = memo(() => {\n\t\tconst path = location.path()\n\n\t\t// console.log(path, route)\n\n\t\tif (route.test(path)) {\n\t\t\tsetParams(() => route.exec(path)?.groups || nothing)\n\n\t\t\tif (href === '') {\n\t\t\t\thref =\n\t\t\t\t\tlocation.origin + path.replace(path.replace(route, ''), '')\n\t\t\t}\n\n\t\t\tonDone(() => scroll(context))\n\n\t\t\treturn true\n\t\t}\n\t})\n\n\tconst context = create({\n\t\tbase,\n\t\thref: () => href,\n\t\tparams,\n\t\tscroll: props.scroll,\n\t\tparent,\n\t\tshow,\n\t})\n\n\tparent.addChild(context)\n\n\treturn Component(useRoute.Provider, {\n\t\tvalue: context,\n\t\tchildren: Component(Dynamic, {\n\t\t\tcomponent: props.collapse ? Collapse : Show,\n\t\t\twhen: () => show() && optional(props.when),\n\t\t\tfallback: props.fallback,\n\t\t\tchildren: props.children,\n\t\t}),\n\t})\n}\n\n/**\n * Renders children when no sibling `Route` matches\n *\n * @param {object} props\n * @param {Children} [props.children]\n * @returns {Children}\n */\nRoute.Default = props => {\n\treturn Component(Show, {\n\t\twhen: useRoute().shouldShowDefault,\n\t\tchildren: props.children,\n\t})\n}\n","import { addListeners, navigate } from '../../use/location.js'\n\n/**\n * Navigates to a new location from JSX\n *\n * @param {{\n * \tpath: string\n * \tscroll?: boolean\n * \treplace?: boolean\n * \tparams?: object\n * \tdelay?: number\n * \tchildren?: Children\n * }} props\n * @url https://pota.quack.uy/Components/Route/Navigate\n */\nexport function Navigate(props) {\n\taddListeners()\n\tnavigate(props.path, props)\n\treturn props.children\n}\n","import { addListeners } from '../../use/location.js'\nimport { replaceParams } from '../../use/url.js'\n\nimport { Component } from '../../core/renderer.js'\n\nimport { useRoute } from './context.js'\n\n/**\n * Creates a link with Route features\n *\n * @param {{\n * \thref: string\n * \tparams?: Record<string, string>\n * \treplace?: boolean\n * } & Elements['a']} props\n *\n * @returns {Children}\n * @url https://pota.quack.uy/Components/Route/A\n */\n\nexport function A(props) {\n\taddListeners()\n\n\tconst href = useRoute().resolve(\n\t\treplaceParams(props.href, props.params),\n\t)\n\n\treturn Component('a', { ...props, href, params: undefined })\n}\n","import { toHTMLFragment } from '../core/renderer.js'\nimport {\n\tmemo,\n\tcreateSuspenseContext,\n\tuseSuspense,\n} from '../lib/reactive.js'\n\n/**\n * Provides a fallback till children promises resolve (recursively)\n *\n * @template T\n * @param {object} props\n * @param {Children} [props.fallback]\n * @param {Children} [props.children]\n * @returns {Children}\n * @url https://pota.quack.uy/Components/Suspense\n */\nexport const Suspense = props =>\n\tuseSuspense(new createSuspenseContext(), () => {\n\t\tconst children = toHTMLFragment(props.children)\n\t\tconst context = useSuspense()\n\t\t// for when `Suspense` was used with children that dont have promises\n\t\treturn context.isEmpty()\n\t\t\t? children\n\t\t\t: memo(() => (context.s.read() ? children : props.fallback))\n\t})\n","import { makeCallback, memo, resolve } from '../lib/reactive.js'\nimport {\n\tgetValue,\n\tidentity,\n\tisArray,\n\tisNullUndefined,\n} from '../lib/std.js'\n\n/**\n * Renders the first child that matches the given `when` condition, or\n * a fallback in case of no match\n *\n * @param {object} props\n * @param {Children} [props.children]\n * @param {Children} [props.fallback]\n * @returns {Children}\n * @url https://pota.quack.uy/Components/Switch\n */\nexport function Switch(props) {\n\tconst matches = resolve(() =>\n\t\tisArray(props.children) ? props.children : [props.children],\n\t)\n\n\tconst fallback = isNullUndefined(props.fallback)\n\t\t? memo(() => {\n\t\t\t\tconst r = matches().find(match => !('when' in match))\n\t\t\t\treturn r && r.children\n\t\t\t})\n\t\t: memo(() => resolve(props.fallback))\n\n\tconst match = memo(() =>\n\t\tmatches().find(match => !!getValue(match.when)),\n\t)\n\n\tconst value = memo(() => match() && getValue(match().when))\n\n\tconst callback = memo(\n\t\t() => match() && makeCallback(match().children),\n\t)\n\treturn memo(() => (match() ? callback()(value) : fallback))\n}\n\n/**\n * Renders the content if the `when` condition is true\n *\n * @template T\n * @param {object} props\n * @param {When<any>} props.when\n * @param {Children} [props.children]\n * @returns {Children}\n */\nexport const Match = identity\n","import {\n\tempty,\n\terror,\n\tunwrapArray,\n\tgetValue,\n\ttoArray,\n\twarn,\n\twithWeakCache,\n} from '../lib/std.js'\n\nimport { namespaces } from './props/plugin.js'\n\nimport { Component } from './renderer.js'\n\nimport {\n\tA,\n\tCollapse,\n\tDynamic,\n\tFor,\n\tHead,\n\tMatch,\n\tNavigate,\n\tPortal,\n\tRange,\n\tRoute,\n\tShow,\n\tSuspense,\n\tSwitch,\n} from '../components/@main.js'\nimport { createComment, createTextNode } from '../use/dom.js'\n\n/** @type {Record<string, Component>} */\nconst defaultRegistry = {\n\tA,\n\tCollapse,\n\tDynamic,\n\tFor,\n\tHead,\n\tMatch,\n\tNavigate,\n\tPortal,\n\tRange,\n\tRoute,\n\tShow,\n\tSuspense,\n\tSwitch,\n}\n\n// parseXML\n\nconst id = 'rosa19611227'\nconst splitId = /(rosa19611227)/\n\n/**\n * Makes Nodes from TemplateStringsArray\n *\n * @param {TemplateStringsArray} content\n * @returns {DOMElement[]}\n */\nconst parseXML = withWeakCache(\n\t(/** @type TemplateStringsArray */ content) => {\n\t\tconst html = /** @type {DOMElement[]} */ (\n\t\t\t/** @type unknown */ (\n\t\t\t\tnew DOMParser().parseFromString(\n\t\t\t\t\t`<xml ${namespaces.xmlns}>${content.join(id)}</xml>`,\n\t\t\t\t\t'text/xml',\n\t\t\t\t).firstChild.childNodes\n\t\t\t)\n\t\t)\n\n\t\tif (html[0].tagName === 'parsererror') {\n\t\t\tconst err = html[0]\n\t\t\terr.style.padding = '1em'\n\t\t\terr.firstChild.textContent = 'HTML Syntax Error:'\n\t\t\t// @ts-expect-error typescript doesnt understand dom walking\n\t\t\terr.firstChild.nextSibling.style.cssText = ''\n\t\t\terr.lastChild.replaceWith(createTextNode(content))\n\t\t}\n\t\treturn html\n\t},\n)\n\n/**\n * Recursively walks a template and transforms it to `h` calls.\n *\n * @param {typeof xml} xml\n * @param {DOMElement[]} cached\n * @param {...unknown} values\n * @returns {Children}\n */\nfunction toH(xml, cached, values) {\n\tlet index = 0\n\t/**\n\t * Recursively transforms DOM nodes into Component calls.\n\t *\n\t * @param {ChildNode} node\n\t * @returns {Children}\n\t */\n\tfunction nodes(node) {\n\t\tconst { nodeType } = node\n\t\tif (nodeType === 1) {\n\t\t\t// element\n\t\t\tconst { tagName, attributes, childNodes } =\n\t\t\t\t/** @type {DOMElement} */ (node)\n\n\t\t\t// gather props\n\t\t\t/** @type {Record<string, Accessor<unknown>>} */\n\t\t\tconst props = empty()\n\t\t\tfor (let { name, value } of attributes) {\n\t\t\t\tif (value === id) {\n\t\t\t\t\tprops[name] = values[index++]\n\t\t\t\t} else if (value.includes(id)) {\n\t\t\t\t\tconst val = value\n\t\t\t\t\t\t.split(splitId)\n\t\t\t\t\t\t.map(x => (x === id ? values[index++] : x))\n\t\t\t\t\tprops[name] = () => val.map(getValue).join('')\n\t\t\t\t} else {\n\t\t\t\t\tprops[name] = value\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// gather children\n\t\t\tif (childNodes.length) {\n\t\t\t\tprops.children = unwrapArray(toArray(childNodes).map(nodes))\n\t\t\t}\n\n\t\t\t;/[A-Z]/.test(tagName) &&\n\t\t\t\t!xml.components[tagName] &&\n\t\t\t\twarn(`xml: Forgot to xml.define({ ${tagName} })?`)\n\n\t\t\treturn Component(xml.components[tagName] || tagName, props)\n\t\t} else if (nodeType === 3) {\n\t\t\t// text\n\t\t\tconst value = node.nodeValue\n\t\t\treturn value.includes(id)\n\t\t\t\t? value\n\t\t\t\t\t\t.split(splitId)\n\t\t\t\t\t\t.map(x => (x === id ? values[index++] : x))\n\t\t\t\t: value\n\t\t} else if (nodeType === 8) {\n\t\t\t// comment\n\t\t\tconst value = node.nodeValue\n\t\t\tif (value.includes(id)) {\n\t\t\t\tconst val = value\n\t\t\t\t\t.split(splitId)\n\t\t\t\t\t.map(x => (x === id ? values[index++] : x))\n\t\t\t\treturn () => createComment(val.map(getValue).join(''))\n\t\t\t} else {\n\t\t\t\treturn createComment(value)\n\t\t\t}\n\t\t} else {\n\t\t\terror(`xml: nodeType not supported ${nodeType}`)\n\t\t}\n\t}\n\n\treturn unwrapArray(toArray(cached).map(nodes))\n}\n\n/**\n * Function to create cached tagged template components.\n *\n * @returns {((\n * \ttemplate: TemplateStringsArray,\n * \t...values: unknown[]\n * ) => Children) & {\n * \tcomponents: Record<string, Component>\n * \tdefine: (userComponents: Record<string, Component>) => void\n * }}\n * @url https://pota.quack.uy/XML\n */\nexport function XML() {\n\t/**\n\t * Creates tagged template components\n\t *\n\t * @param {TemplateStringsArray} template\n\t * @param {...unknown} values\n\t * @url https://pota.quack.uy/XML\n\t */\n\tfunction xml(template, ...values) {\n\t\treturn toH(xml, parseXML(template), values)\n\t}\n\n\txml.components = { ...defaultRegistry }\n\t/**\n\t * Registers custom components that can be referenced by tag name.\n\t *\n\t * @param {Record<string, Component>} userComponents\n\t */\n\txml.define = userComponents => {\n\t\tfor (const name in userComponents) {\n\t\t\txml.components[name] = userComponents[name]\n\t\t}\n\t}\n\n\treturn xml\n}\n\nexport const xml = XML()\n","import { batch, render, signal } from 'pota'\nimport { xml } from 'pota/xml'\nimport { useSelector } from 'pota/use/selector'\n\nimport { timing } from 'pota/use/time'\n\nlet idCounter = 1\nconst adjectives = [\n    'pretty',\n    'large',\n    'big',\n    'small',\n    'tall',\n    'short',\n    'long',\n    'handsome',\n    'plain',\n    'quaint',\n    'clean',\n    'elegant',\n    'easy',\n    'angry',\n    'crazy',\n    'helpful',\n    'mushy',\n    'odd',\n    'unsightly',\n    'adorable',\n    'important',\n    'inexpensive',\n    'cheap',\n    'expensive',\n    'fancy',\n  ],\n  colours = [\n    'red',\n    'yellow',\n    'blue',\n    'green',\n    'pink',\n    'brown',\n    'purple',\n    'brown',\n    'white',\n    'black',\n    'orange',\n  ],\n  nouns = [\n    'table',\n    'chair',\n    'house',\n    'bbq',\n    'desk',\n    'car',\n    'pony',\n    'cookie',\n    'sandwich',\n    'burger',\n    'pizza',\n    'mouse',\n    'keyboard',\n  ]\n\nfunction _random(max) {\n  return Math.round(Math.random() * 1000) % max\n}\n\nfunction buildData(count) {\n  let data = new Array(count)\n  for (let i = 0; i < count; i++) {\n    const [label, setLabel] = signal(\n      `${adjectives[_random(adjectives.length)]} ${\n        colours[_random(colours.length)]\n      } ${nouns[_random(nouns.length)]}`,\n    )\n    data[i] = {\n      id: idCounter++,\n      label,\n      setLabel,\n    }\n  }\n  return data\n}\n\nconst bbutton = ({ id, text, fn }) =>\n  xml`<div class=\"col-sm-6 smallpad\">\n    <button\n      id=\"${id}\"\n      class=\"btn btn-primary btn-block\"\n      type=\"button\"\n      on:click=\"${fn}\"\n    >\n      ${text}\n    </button>\n  </div>`\n\nconst App = () => {\n  const [data, setData, updateData] = signal([])\n  const [selected, setSelected] = signal([])\n  const run = () => setData(buildData(1000))\n  const runLots = () => {\n    setData(buildData(10000))\n  }\n  const bench = () => {\n    //  console.clear()\n    // warm\n    for (let k = 0; k < 5; k++) {\n      setData(buildData(10000))\n      setData([])\n    }\n\n    let createLarge = 0\n    let clearLarge = 0\n    let createSmall = 0\n    let clearSmall = 0\n    for (let k = 0; k < 10; k++) {\n      createLarge += timing(() => setData(buildData(10000)))\n      clearLarge += timing(() => setData([]))\n      console.log(\n        k + ' createLarge',\n        createLarge / (k + 1),\n        k + ' clearLarge',\n        clearLarge / (k + 1),\n      )\n    }\n    console.log('------------')\n    for (let k = 0; k < 10; k++) {\n      createSmall += timing(() => setData(buildData(1000)))\n      clearSmall += timing(() => setData([]))\n      console.log(\n        k + ' createSmall',\n        createSmall / (k + 1),\n        k + ' clearSmall',\n        clearSmall / (k + 1),\n      )\n    }\n  }\n  const add = () => updateData(d => [...d, ...buildData(1000)])\n  const update = () =>\n    batch(() => {\n      for (let i = 0, d = data(), len = d.length; i < len; i += 10)\n        d[i].setLabel(l => l + ' !!!')\n    })\n  const swapRows = () => {\n    const d = data().slice()\n    if (d.length > 998) {\n      let tmp = d[1]\n      d[1] = d[998]\n      d[998] = tmp\n      setData(d)\n    }\n  }\n  const clear = () => setData([])\n  const remove = id =>\n    updateData(d => {\n      const idx = d.findIndex(datum => datum.id === id)\n      d.splice(idx, 1)\n      return [...d]\n    })\n  const isSelected = useSelector(selected)\n\n  xml.define({ bbutton })\n\n  return xml`<div class=\"container\">\n    <div class=\"jumbotron\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <h1>pota Keyed</h1>\n        </div>\n        <div class=\"col-md-6\">\n          <div class=\"row\">\n            <bbutton\n              id=\"run\"\n              text=\"Create 1,000 rows\"\n              fn=\"${run}\"\n            />\n            <bbutton\n              id=\"runlots\"\n              text=\"Create 10,000 rows\"\n              fn=\"${runLots}\"\n            />\n            <bbutton\n              id=\"add\"\n              text=\"Append 1,000 rows\"\n              fn=\"${add}\"\n            />\n            <bbutton\n              id=\"update\"\n              text=\"Update every 10th row\"\n              fn=\"${update}\"\n            />\n            <bbutton\n              id=\"clear\"\n              text=\"Clear\"\n              fn=\"${clear}\"\n            />\n            <bbutton\n              id=\"swaprows\"\n              text=\"Swap Rows\"\n              fn=\"${swapRows}\"\n            />\n            <bbutton\n              id=\"bench\"\n              text=\"bench\"\n              fn=\"${bench}\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n    <table\n      class=\"table table-hover table-striped test-data\"\n      on:click=\"${e => {\n        const element = e.target\n        if (element.setSelected !== undefined) {\n          setSelected(element.setSelected)\n        } else if (element.removeRow !== undefined) {\n          remove(element.removeRow)\n        }\n      }}\"\n    >\n      <tbody>\n        <For each=\"${data}\">\n          ${row => {\n            const { id, label } = row\n\n            return xml`<tr class:danger=\"${isSelected(id)}\">\n              <td class=\"col-md-1\">${id}</td>\n              <td class=\"col-md-4\">\n                <a prop:setSelected=\"${id}\">${label}</a>\n              </td>\n              <td class=\"col-md-1\">\n                <a>\n                  <span\n                    class=\"glyphicon glyphicon-remove\"\n                    aria-hidden=\"true\"\n                    prop:removeRow=\"${id}\"\n                  />\n                </a>\n              </td>\n              <td class=\"col-md-6\" />\n            </tr>`\n          }}\n        </For>\n      </tbody>\n    </table>\n    <span\n      class=\"preloadicon glyphicon glyphicon-remove\"\n      aria-hidden=\"true\"\n    />\n  </div>`\n}\n\nrender(App, document.getElementById('main'))\n"],"names":["window","globalThis","queueMicrotask","history","location","origin","Object","Array","Promise","Symbol","assign","create","defineProperty","entries","freeze","fromEntries","getOwnPropertyDescriptors","getOwnPropertyNames","getOwnPropertySymbols","getPrototypeOf","is","isExtensible","toArray","from","toValues","value","isArray","isObject","values","toEntries","iterator","stringify","JSON","promise","fn","resolved","onDone","then","catch","e","error","toString","call","fns","flatForEach","arr","flat","Infinity","forEach","nothing","redefineProperty","target","key","descriptor","redefinePropertyDefailts","__proto__","configurable","enumerable","empty","bind","emptyArray","entriesIncludingSymbols","item","unwrapArray","length","flatToArray","flatNoArray","withState","state","cacheStore","withCache","cache","thing","get","withWeakCache","weakStore","getOwnValues","o","map","getValue","identity","x","isFunction","isIterable","isNullUndefined","isString","isSymbol","isPromise","morphedBetweenArrayAndObject","a","b","GeneratorFunction","constructor","isGeneratorFunction","noop","optional","undefined","range","start","stop","step","Math","abs","ownKeys","reflectOwnKeys","has","reflectHas","deleteProperty","getOwnPropertyDescriptor","reflectGetOwnPropertyDescriptor","reflectGet","apply","reflectApply","set","reflectSet","reflectIsExtensible","Reflect","removeFromArray","array","index","indexOf","splice","walkParents","context","propertyName","cb","DataStore","kind","store","del","delete","defaults","WeakMap","Map","warn","args","console","isProxyValueReturnInvariant","$isComponent","$isMap","$isMutable","prefix","NS","svg","math","html","xlink","xmlns","xml","createReactiveSystem","Owner","Listener","Updates","Effects","Time","Root","owner","owned","cleanups","options","addCleanups","push","cleanupCancel","addOwned","dispose","disposeOwned","doCleanups","i","Computation","updatedAt","sources","sourceSlots","update","time","runWith","source","observers","observer","slot","pop","observerSlots","queue","Effect","user","batch","SyncEffect","Memo","equals","equalsFalse","read","updates","runUpdates","upstream","sourceSlot","observerSlot","write","downstream","nextValue","Derived","isResolved","initialValue","self","run","withValue","writeNextValue","resolve","thenRestore","reject","_then","Signal","root","runWithOwner","signal","effect","track","ran","syncEffect","on","depend","untrack","memo","derived","listener","prevOwner","prevListener","cleanup","runTop","node","ancestors","init","wait","res","effects","runEffects","err","userLength","ignore","defaultValue","id","useContext","newValue","ret","Provider","props","toHTML","children","walk","callback","onCancel","cleaned","clean","writeDefaultValue","asyncTracking","add","remove","action","added","count","ready","cbs","slice","createSuspenseContext","s","c","isEmpty","useSuspense","withPrevValue","prev","val","Row","runId","isDupe","disposer","nodes","indexSignal","_begin","_end","reactiveIndex","updateIndex","begin","getBegin","end","getEnd","nodesForRow","nextSibling","list","noSort","fallback","duplicates","rows","clear","row","mapper","items","hasPrev","dupes","dupe","unsort","unsorted","sorted","usort","includes","after","before","current","previous","previousSibling","unwrap","childrens","child","makeCallback","markComponent","childrenMaybeArray","addEvent","type","handler","addEventListener","removeEvent","removeEventListener","ownedEvent","handleEvent","document","head","isConnected","activeElement","documentElement","DocumentFragment","createElement","createElementNS","createTextNode","createComment","createTreeWalker","tokenList","trim","split","addClass","className","classList","removeClass","setAttribute","name","removeAttribute","querySelector","query","getDocumentForElement","getRootNode","nodeType","ownerDocument","max","currentNode","nextNode","CSSStyleSheet","css","template","sheet","String","raw","replace","getAdoptedStyleSheets","adoptedStyleSheets","addAdoptedStyleSheet","styleSheet","removeAdoptedStyleSheet","addStyleSheets","styleSheets","addStyleSheetExternal","text","startsWith","fetch","r","reset","priority","q","onFixes","onProps","onMount","plugins","pluginsNS","namespaces","Set","updateNamespaces","ns","join","propsPlugin","propName","onMicrotask","plugin","propsPluginNS","NSName","setProperty","_setProperty","setPropertyNS","localName","setEvent","setEventNS","randomId","crypto","getRandomValues","BigUint64Array","setCSS","setNodeCSS","setRef","setConnected","setDisconnected","setStyle","setNodeStyle","style","setStyleNS","cssText","setStyleValue","_setStyleValue","removeProperty","setClass","setClassList","setClassNS","setElementClass","_setClassListValue","_setAttribute","setAttributeNS","_setAttributeNS","removeAttributeNS","propNS","assignProps","assignProp","useXMLNS","Fragment","Component","component","Factory","propsOverride","createTag","Element","createNode","tagName","withXMLNS","usedXML","nsContext","createChildren","parent","relative","isComponent","Text","nodeValue","childNodes","textContent","firstChild","insertNode","createPlaceholder","toDiff","Node","suspense","setValue","onResult","result","doc","propValue","getAttribute","rel","replaceWith","appendChild","parentNode","insertBefore","render","insert","body","toHTMLFragment","fragment","next","short","lastChild","preventDefault","emit","eventName","data","bubbles","cancelable","composed","dispatchEvent","CustomEvent","customElement","customElements","define","CustomElement","HTMLElement","baseStyleSheets","shadowRoot","attachShadow","mode","innerHTML","replaceChildren","hidden","hasSlot","Collapse","CollapseElement","when","fb","Dynamic","For","restoreFocus","each","queued","active","scroll","scrollTop","focus","Portal","mount","Head","Range","constructorsTracked","isMutationBlacklisted","constructorsBlacklist","prototypeBlacklist","isPrototypeBlacklisted","isKeyBlacklisted","keyBlacklist","filter","getPropertyDescriptors","proto","protos","descriptors","reverse","getTracker","createTracker","Track","tracker","equalsIs","equalsNope","equalsDefault","Values","Keys","Value","Key","isUndefined","kinds","#prop","equalsType","valueRead","valueWrite","keyRead","keyWrite","isUndefinedRead","isUndefinedWrite","modify","keysRead","keysWrite","valuesRead","valuesWrite","#read","#write","signalifyObject","wrapper","signalifyKey","signalifyUndefinedKey","getter","setter","ProxyHandlerBase","returnValue","mutable","returnFunction","proxy","objectMethods","hasOwnProperty","ProxyHandlerArray","k","arrayMethods","trackKey","trackKeysRange","trackDiff","oldLength","changed","shift","unshift","sort","every","some","fill","copyWithin","toLocaleString","concat","searchElement","fromIndex","lastIndexOf","reduce","reduceRight","find","findIndex","entry","keys","_value","flatMap","at","findLast","findLastIndex","toReversed","toSorted","toSpliced","with","ProxyHandlerObject","ProxyHandlerMap","trackSlot","mapMethods","size","copy","seen","getProxy","setProxy","createProxy","Handler","Proxy","clone","reconcile","inArray","_keys","getKeys","useSelector","selected","isSelected","counter","scrollToElement","scrollIntoView","scrollToLocationHash","scrollToSelector","hash","selector","scrollToSelectorWithFallback","scrollToTop","scrollTo","top","behavior","encodeURIComponent","_decodeURIComponent","string","decodeURIComponent","nestedProtocol","nestedProtocolOptional","hasProtocol","href","test","removeNestedProtocol","isAbsolute","isExternal","paramsRegExp","replaceParams","params","timing","performance","now","useTimeout","delay","setTimeout","clearTimeout","_","updateChildren","base","show","addChild","shouldShowDefault","protocol","URL","useRoute","getLocation","setLocation","wLocation","locationObject","pathname","path","search","searchParams","searchParamsMemo","paramsMemo","BeforeLeave","canNavigate","newBeforeLeave","beforeLeave","navigate","navigateInternal","transition","startViewTransition","replaceState","pushState","navigateUser","addListeners","nav","addListenersAdded","onLinkClick","onLocationChange","title","defaultPrevented","button","metaKey","altKey","ctrlKey","shiftKey","composedPath","HTMLAnchorElement","download","hasAttribute","Show","condition","Route","route","RegExp","setParams","exec","groups","collapse","Default","Navigate","A","Suspense","Switch","matches","match","Match","defaultRegistry","splitId","parseXML","content","DOMParser","parseFromString","padding","toH","cached","attributes","components","XML","userComponents","idCounter","adjectives","colours","nouns","_random","round","random","buildData","label","setLabel","bbutton","App","setData","updateData","setSelected","runLots","bench","createLarge","clearLarge","createSmall","clearSmall","log","d","len","l","swapRows","tmp","idx","datum","element","removeRow","getElementById"],"mappings":"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"}