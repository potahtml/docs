{"version":3,"file":"main.js","sources":["../../../../../pota/src/lib/std.js","../../../../../pota/src/constants.js","../../../../../pota/src/lib/reactive.js","../../../../../pota/src/scheduler.js","../../../../../pota/src/props/event.js","../../../../../pota/src/props/plugin.js","../../../../../pota/src/props/attribute.js","../../../../../pota/src/props/property.js","../../../../../pota/src/props/unknown.js","../../../../../pota/src/props/bool.js","../../../../../pota/src/props/style.js","../../../../../pota/src/props/class.js","../../../../../pota/src/props/value.js","../../../../../pota/src/plugin/useRandom.js","../../../../../pota/src/props/css.js","../../../../../pota/src/props/lifecycle.js","../../../../../pota/src/props/@main.js","../../../../../pota/src/renderer.js","../../../../../pota/src/web/For.js","../../../../../pota/src/plugin/useSelector.js","index.jsx"],"sourcesContent":["export const global = globalThis\nexport const window = global\n\nexport const CSSStyleSheet = global.CSSStyleSheet\nexport const document = global.document\nexport const DocumentFragment = global.DocumentFragment\nexport const Object = global.Object\nexport const Promise = global.Promise\nexport const requestAnimationFrame = global.requestAnimationFrame\nexport const Symbol = global.Symbol\nexport const queueMicrotask = global.queueMicrotask\n\nexport const assign = Object.assign\nexport const create = Object.create\nexport const defineProperties = Object.defineProperties\nexport const defineProperty = Object.defineProperty\nexport const entries = Object.entries\nexport const freeze = Object.freeze\nexport const fromEntries = Object.fromEntries\nexport const getOwnPropertyDescriptor =\n\tObject.getOwnPropertyDescriptor\nexport const getOwnPropertyDescriptors =\n\tObject.getOwnPropertyDescriptors\nexport const getOwnPropertyNames = Object.getOwnPropertyNames\nexport const getOwnPropertySymbols = Object.getOwnPropertySymbols\nexport const getPrototypeOf = Object.getPrototypeOf\nexport const groupBy = Object.groupBy\nexport const hasOwnProperty = Object.hasOwn\nexport const is = Object.is\nexport const isExtensible = Object.isExtensible\nexport const keys = Object.keys\nexport const values = Object.values\nexport const setPrototypeOf = Object.setPrototypeOf\n\nexport const isArray = Array.isArray\nexport const toArray = Array.from\n\nexport const isNaN = Number.isNaN\n\nexport const iterator = Symbol.iterator\n\nexport const stringify = JSON.stringify\nexport const stringifyReadable = o => stringify(o, null, 2)\n\nexport const stringifySorted = o => {\n\tfunction sort(o) {\n\t\tif (!isObject(o)) {\n\t\t\treturn o\n\t\t}\n\t\tconst tmp = isArray(o) ? [] : {}\n\t\tkeys(o)\n\t\t\t.sort()\n\t\t\t.map(k => (tmp[k] = sort(o[k])))\n\n\t\tif (isArray(tmp)) {\n\t\t\ttmp.sort((a, b) => stringify(a).localeCompare(stringify(b)))\n\t\t}\n\t\treturn tmp\n\t}\n\treturn stringifyReadable(sort(o))\n}\n\nexport const PrototypeArray = Array.prototype\nexport const PrototypeMap = Map.prototype\n\nexport const history = global.history\nexport const location = global.location\nexport const navigator = global.navigator\n\nexport const origin = location.origin\n\nexport const promise = fn => new Promise(fn)\n\nexport const withResolvers = () => Promise.withResolvers()\n\n/**\n * Given a promise it adds `onDone` to `then` and `catch`\n *\n * ```js\n * resolved(promise, onDone)\n * // is same as\n * promise.then(onDone).catch(onDone)\n * ```\n */\nexport const resolved = (promise, onDone) =>\n\tpromise.then(onDone).catch(onDone)\n\nexport const setAttribute = (node, name, value) =>\n\tnode.setAttribute(name, value)\n\nexport const hasAttribute = (node, name) => node.hasAttribute(name)\n\nexport const removeAttribute = (node, name) =>\n\tnode.removeAttribute(name)\n\nexport const setAttributeNS = (node, name, value) =>\n\tnode.setAttributeNS(name, value)\n\nexport const hasAttributeNS = (node, name) =>\n\tnode.hasAttributeNS(name)\n\nexport const removeAttributeNS = (node, name) =>\n\tnode.removeAttributeNS(name)\n\nexport const isConnected = node => node.isConnected\n\nexport const activeElement = () => document.activeElement\n\nexport const documentElement = document.documentElement\n\n/**\n * Runs an array of functions\n *\n * @param {Iterable<Function>} fns\n */\nexport const call = fns => {\n\tfor (const fn of fns) fn()\n}\n\nexport function copy(o) {\n\tconst seen = new Map()\n\tfunction copy(o) {\n\t\tif (!isObject(o)) {\n\t\t\treturn o\n\t\t}\n\n\t\tif (\n\t\t\to instanceof Node ||\n\t\t\to instanceof Date ||\n\t\t\to instanceof Set ||\n\t\t\to instanceof Map ||\n\t\t\to instanceof WeakSet ||\n\t\t\to instanceof WeakMap ||\n\t\t\to instanceof Promise ||\n\t\t\to instanceof RegExp\n\t\t) {\n\t\t\treturn o\n\t\t}\n\n\t\tif (seen.has(o)) {\n\t\t\treturn seen.get(o)\n\t\t}\n\n\t\tconst c = isArray(o) ? [] : {}\n\n\t\tseen.set(o, c)\n\n\t\tfor (const k in o) {\n\t\t\tc[k] = copy(o[k])\n\t\t}\n\t\treturn c\n\t}\n\treturn copy(o)\n}\n\n/**\n * Object.defineProperty with `enumerable` and `configurable` set to\n * `true` unless overwriten by `descriptor` argument\n *\n * @param {object} target\n * @param {PropertyKey} key\n * @param {PropertyDescriptor} descriptor\n */\nexport const redefineProperty = (target, key, descriptor) =>\n\tdefineProperty(target, key, assign(create(defaults), descriptor))\n\nconst defaults = {\n\t__proto__: null,\n\tconfigurable: true,\n\tenumerable: true,\n}\n\n/**\n * Object.defineProperty with `configurable`, `writable` and\n * `enumerable` as `false`\n *\n * @param {object} target\n * @param {PropertyKey} key\n * @param {any} value\n */\nexport const definePropertyReadOnly = (target, key, value) => {\n\tconst descriptor = create(defaultsReadOnly)\n\tdescriptor.value = value\n\tdefineProperty(target, key, descriptor)\n}\n\nconst defaultsReadOnly = {\n\t__proto__: null,\n\tconfigurable: false,\n\tenumerable: false,\n\twritable: false,\n\tvalue: undefined,\n}\n\nconst bind = fn => document[fn].bind(document)\n\nexport const createElement = bind('createElement')\n\nexport const createElementNS = bind('createElementNS')\n\nexport const createTextNode = bind('createTextNode')\n\nexport const importNode = bind('importNode')\n\nexport const createTreeWalker = bind('createTreeWalker')\n\n/**\n * Returns an object without a prototype\n *\n * @type {Function}\n * @returns {Props} Empty object\n */\nexport const empty = Object.create.bind(null, null)\n\nexport function* entriesIncludingSymbols(target) {\n\tfor (const item of entries(target)) {\n\t\tyield item\n\t}\n\n\tfor (const item of getOwnPropertySymbols(target)) {\n\t\t// todo: causes access!\n\t\tyield [item, target[item]]\n\t}\n}\n\n// modified version of https://github.com/epoberezkin/fast-deep-equal\n\nexport function equals(a, b) {\n\tif (a === b) {\n\t\treturn true\n\t}\n\n\tif (a && b && typeof a == 'object' && typeof b == 'object') {\n\t\tif (a.constructor !== b.constructor) {\n\t\t\treturn false\n\t\t}\n\n\t\tlet length, i, k\n\t\tif (isArray(a)) {\n\t\t\tlength = a.length\n\t\t\tif (length != b.length) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tfor (i = length; i-- !== 0; ) {\n\t\t\t\tif (!equals(a[i], b[i])) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true\n\t\t}\n\n\t\tif (a.constructor === RegExp)\n\t\t\treturn a.source === b.source && a.flags === b.flags\n\t\tif (a.valueOf !== Object.prototype.valueOf)\n\t\t\treturn a.valueOf() === b.valueOf()\n\t\tif (a.toString !== Object.prototype.toString)\n\t\t\treturn a.toString() === b.toString()\n\n\t\tk = keys(a)\n\t\tlength = k.length\n\t\tif (length !== keys(b).length) {\n\t\t\treturn false\n\t\t}\n\n\t\tfor (i = length; i-- !== 0; ) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(b, k[i])) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\tfor (i = length; i-- !== 0; ) {\n\t\t\tvar key = k[i]\n\n\t\t\tif (!equals(a[key], b[key])) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\treturn true\n\t}\n\n\t// true if both NaN, false otherwise\n\treturn a !== a && b !== b\n}\n\n/**\n * Flats an array/childNodes to the first children if the length is 1\n *\n * @param {any[] | NodeListOf<ChildNode>} arr\n * @returns {any}\n */\nexport const flat = arr => (arr.length === 1 ? arr[0] : arr)\n\n/**\n * Keeps state in the function as the first param\n *\n * @template T\n * @param {T} fn - Function to which add state to it\n * @param {DataStore<Map> | DataStore<WeakMap>} [state] - Passed to\n *   `fn` as first param\n * @returns {T} A copy of the function with the state\n */\nexport const withState = /* #__NO_SIDE_EFFECTS__ */ (\n\tfn,\n\tstate = cacheStore,\n) => fn.bind(null, state())\n\n/** Memoize functions with a map cache */\nexport const withCache = fn =>\n\twithState(\n\t\t(cache, thing) => cache.get(thing, thing => fn(thing)),\n\t\tcacheStore,\n\t)\n/** Memoize functions with a weak cache */\nexport const withWeakCache = fn =>\n\twithState(\n\t\t(cache, thing) => cache.get(thing, thing => fn(thing)),\n\t\tweakStore,\n\t)\n\nexport const walkElements = withState(\n\t(walk, node, fn) => {\n\t\twalk.currentNode = node\n\n\t\t/**\n\t\t * The first node is not walked by the walker.\n\t\t *\n\t\t * Also the first node could be a DocumentFragment\n\t\t */\n\t\tif (node.nodeType === 1) {\n\t\t\tif (fn(node)) return\n\t\t}\n\n\t\twhile ((node = walk.nextNode())) {\n\t\t\tif (fn(node)) break\n\t\t}\n\t},\n\t() => createTreeWalker(document, 1 /*NodeFilter.SHOW_ELEMENT*/),\n)\n\n/**\n * Returns `document` for element. That could be a `shadowRoot`\n *\n * @param {Element} node\n * @returns {Document | ShadowRoot}\n */\n\nexport const getDocumentForElement = node => {\n\tconst document = node.getRootNode()\n\tconst { nodeType } = document\n\t// getRootNode returns:\n\t// 1. Node for isConnected = false\n\t// 2. Document for isConnected = true\n\t// 3. shadowRoot for custom elements\n\n\t// always return a Document-like\n\treturn nodeType === 11 || nodeType === 9\n\t\t? document\n\t\t: node.ownerDocument\n}\n\nexport const getOwnValues = o =>\n\tgetOwnPropertyNames(o).map(key => {\n\t\ttry {\n\t\t\treturn o[key]\n\t\t} catch (e) {}\n\t})\n\nexport function getSetterNamesFromPrototype(object, set = new Set()) {\n\tconst descriptors = getOwnPropertyDescriptors(object)\n\n\tfor (const key in descriptors) {\n\t\tif (descriptors[key].set) {\n\t\t\tset.add(key)\n\t\t}\n\t}\n\n\treturn set\n}\n\n/**\n * Unwraps values. If the argument is a function then it runs it\n * recursively and returns the value\n *\n * @param {Function | any} value - Maybe function\n * @returns {any}\n */\nexport function getValue(value) {\n\twhile (typeof value === 'function') value = value()\n\treturn value\n}\n\n/**\n * Unwraps `value` and returns `element` if result is a `Node`, else\n * `undefined` in the case isn't a `Node`\n *\n * @param {Function | any} value - Maybe function\n * @param {...any} args? - Arguments\n * @returns {Node | undefined}\n */\nexport function getValueElement(value, ...args) {\n\tconst element = getValueWithArguments(value, ...args)\n\treturn element instanceof Node ? element : undefined\n}\n\nexport const getValueWithArguments = (value, ...args) =>\n\ttypeof value === 'function'\n\t\t? args.length\n\t\t\t? getValue(value(...args))\n\t\t\t: getValue(value())\n\t\t: value\n\n/**\n * Identity function, given `x` returns `x`\n *\n * @template T\n * @param {T} x\n * @returns {T}\n */\nexport const identity = x => x\n\n/**\n * When `value` is an object, it will check if the `key` on `target`\n * is `configurable`\n *\n * @param {object} target\n * @param {PropertyKey} key\n * @param {boolean | undefined} value\n */\nexport const isConfigurable = (target, key, value) => {\n\tif (isObject(value)) {\n\t\tconst descriptor = getOwnPropertyDescriptor(target, key)\n\t\tif (descriptor) {\n\t\t\treturn descriptor.configurable\n\t\t}\n\t}\n\treturn true\n}\n\n/**\n * Returns `true` when `typeof` of `value` is `function`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isFunction = value => typeof value === 'function'\n\n/**\n * Returns `true` when value is Iterable\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isIterable = value =>\n\tisObject(value) && 'values' in value\n\n/**\n * Returns `true` if the value is `null` or `undefined`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isNullUndefined = value =>\n\tvalue === undefined || value === null\n\n/**\n * Returns `true` when typeof of value is object and not null\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isObject = value =>\n\tvalue !== null && typeof value === 'object'\n\n/**\n * Returns `true` when object morphed between array/object\n *\n * @param {any} a\n * @param {any} b\n * @returns {boolean}\n */\nexport const morphedBetweenArrayAndObject = (a, b) =>\n\t(isObject(a) && !isObject(b)) ||\n\t(isObject(b) && !isObject(a)) ||\n\t(isArray(a) && !isArray(b)) ||\n\t(isArray(b) && !isArray(a))\n\n/**\n * Returns `true` if the property is defined in the `prototype` and\n * absent in the `object`\n *\n * @param {object} target\n * @param {PropertyKey} key\n */\nexport const isPrototypeProperty = (target, key) =>\n\t// must do `key in target` to check that it DOES have it somewhere\n\t// must do !hasOwnProperty to check that isnt an own property\n\tkey in target && !hasOwnProperty(target, key)\n\n/**\n * Returns `true` when `typeof` of `value` is `string`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isString = value => typeof value === 'string'\n\n/**\n * Returns `true` when `typeof` of `value` is `number`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isNumber = value => typeof value === 'number'\n\n/**\n * Returns `true` when `typeof` of `value` is `symbol`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isSymbol = value => typeof value === 'symbol'\n\n/**\n * Returns `true` when `typeof` of `value` is `boolean`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isBoolean = value => typeof value === 'boolean'\n\n/**\n * Returns `true` when `value` may be a promise\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isPromise = value => isObject(value) && 'then' in value\n\nexport const noop = () => {}\n\n/**\n * An empty frozen object\n *\n * @type object\n */\nexport const nothing = freeze(empty())\n\n// an optional value is `true` by default, so most of the time is undefined which means is `true`\n// to avoid having conditions like `if(something.bla === undefined || something.bla)`\n// this function will short it to `if(optional(something.bla))`\n// additionally the value is resolved, for cases like `when={() => show() && optional(props.when)}`\n\n/**\n * Returns `true` when value is true or undefined\n *\n * @param {Function | boolean | undefined} value\n * @returns {boolean} True when value is true or undefined\n */\nexport const optional = value =>\n\tvalue === undefined || getValue(value)\n\nexport const partAdd = (node, className) => node.part.add(className)\n\nexport const partRemove = (node, className) =>\n\tnode.part.remove(className)\n\nexport const querySelector = (node, query) =>\n\tnode.querySelector(query)\n\nexport const querySelectorAll = (node, query) =>\n\tnode.querySelectorAll(query)\n\nexport function* range(start, stop, step = 1) {\n\tyield start\n\twhile (start < stop) {\n\t\tyield (start += step)\n\t}\n}\n\nexport const {\n\townKeys: reflectOwnKeys,\n\thas: reflectHas,\n\tdeleteProperty: reflectDeleteProperty,\n\tgetOwnPropertyDescriptor: reflectGetOwnPropertyDescriptor,\n\tget: reflectGet,\n\tapply: reflectApply,\n\tset: reflectSet,\n} = Reflect\n\n/**\n * Removes a value from an array\n *\n * @template T\n * @param {T[]} array\n * @param {T} value To remove from the array\n * @returns {T[]}\n */\nexport function removeFromArray(array, value) {\n\tconst index = array.indexOf(value)\n\tif (index !== -1) array.splice(index, 1)\n\treturn array\n}\n/**\n * Removes values from an array based on a condition\n *\n * @template T\n * @param {T[]} array\n * @param {(value: T, index: number) => boolean} cb Function with\n *   condition\n */\nexport function removeFromArrayConditionally(array, cb) {\n\tlet i = array.length\n\twhile (i--) {\n\t\tif (cb(array[i], i)) {\n\t\t\tarray.splice(i, 1)\n\t\t}\n\t}\n}\n/**\n * Removes values from an array based on a condition\n *\n * @param {Iterable<object | any[]>} iterable\n * @param {PropertyKey} key Function with condition\n */\nexport function indexByKey(iterable, key) {\n\tconst byKey = empty()\n\tfor (const item of iterable) {\n\t\tbyKey[item[key]] = item\n\t}\n\treturn byKey\n}\n\n/**\n * Replace a prototype in the prototype chain with another prototype\n *\n * @param {object} target - Target object\n * @param {object} search - The prototype to replace\n * @param {object} replacement - The replacement prototype\n */\nexport function replacePrototypeWith(target, search, replacement) {\n\tlet prototype = target\n\twhile (getPrototypeOf(prototype) !== search) {\n\t\tprototype = getPrototypeOf(prototype)\n\t}\n\n\tsetPrototypeOf(prototype, replacement)\n}\n\nexport const typeString = obj =>\n\tObject.prototype.toString.call(obj).slice(8, -1)\n\nexport function walkParents(context, propertyName, cb) {\n\twhile (context) {\n\t\tif (cb(context)) return true\n\t\tcontext = context[propertyName]\n\t}\n}\n\n/**\n * Store template\n *\n * @typedef {(\n * \treference: any,\n * \tcreateIfNotExistsAs?: ((target: any) => any) | Function,\n * ) => any} DataStoreGet\n *\n *\n * @typedef {(key: any, value: any) => void} DataStoreSet\n *\n * @typedef {(key: any) => boolean} DataStoreHas\n *\n * @typedef {(key: any) => boolean} DataStoreDelete\n */\n\nclass DataStore {\n\tconstructor(kind) {\n\t\tconst store = new kind()\n\n\t\tconst get = k => store.get(k)\n\t\tconst set = (k, v) => store.set(k, v)\n\t\tconst has = k => store.has(k)\n\n\t\tthis.get = (target, defaults = undefined) => {\n\t\t\tconst o = get(target)\n\n\t\t\tif (o !== undefined) {\n\t\t\t\treturn o\n\t\t\t}\n\n\t\t\tif (defaults !== undefined) {\n\t\t\t\t/**\n\t\t\t\t * Default values should be passed as a function, so we dont\n\t\t\t\t * constantly initialize values when giving them\n\t\t\t\t */\n\t\t\t\tdefaults = defaults(target)\n\t\t\t\tset(target, defaults)\n\t\t\t\treturn defaults\n\t\t\t}\n\t\t}\n\n\t\tthis.set = set\n\t\tthis.has = has\n\t\tthis.delete = k => store.delete(k)\n\t}\n\n\t*[Symbol.iterator]() {\n\t\tyield this.get\n\t\tyield this.set\n\t\tyield this.has\n\t\tyield this.delete\n\t}\n}\n\n/**\n * Creates a WeakMap to store data\n *\n * @returns {[\n * \tDataStoreGet,\n * \tDataStoreSet,\n * \tDataStoreHas,\n * \tDataStoreDelete,\n * ] & {\n * \tget: DataStoreGet\n * \tset: DataStoreSet\n * \thas: DataStoreHas\n * \tdelete: DataStoreDelete\n * }}\n */\nexport const weakStore = () => new DataStore(WeakMap)\n\n/**\n * Creates a Map to store data\n *\n * @returns {[\n * \tDataStoreGet,\n * \tDataStoreSet,\n * \tDataStoreHas,\n * \tDataStoreDelete,\n * ] & {\n * \tget: DataStoreGet\n * \tset: DataStoreSet\n * \thas: DataStoreHas\n * \tdel: DataStoreDelete\n * }}\n */\nexport const cacheStore = () => new DataStore(Map)\n\nexport const classListAdd = (node, className) =>\n\tnode.classList.add(className)\n\nexport const classListRemove = (node, className) =>\n\tnode.classList.remove(className)\n\n/**\n * - Returns `adoptedStyleSheets` for a document\n *\n * @param {Document | ShadowRoot} document\n */\nexport const adoptedStyleSheetsGet = document =>\n\tdocument.adoptedStyleSheets\n\nexport const adoptedStyleSheets =\n\t/* #__PURE__*/ adoptedStyleSheetsGet(document)\n\n/**\n * Adds a style sheet to the document\n *\n * @param {Document | ShadowRoot} document\n * @param {CSSStyleSheet} styleSheet\n */\nexport const adoptedStyleSheetsAdd = (document, styleSheet) =>\n\tadoptedStyleSheetsGet(document).push(styleSheet)\n\n/**\n * Removes a style sheet from the document\n *\n * @param {Document | ShadowRoot} document\n * @param {CSSStyleSheet} styleSheet\n */\nexport const adoptedStyleSheetsRemove = (document, styleSheet) =>\n\tremoveFromArray(adoptedStyleSheetsGet(document), styleSheet)\n\n/**\n * Adds a style sheet to the custom element\n *\n * @param {Document | ShadowRoot} document\n * @param {(CSSStyleSheet | string)[]} styleSheets\n */\nexport function addStyleSheets(document, styleSheets = []) {\n\tfor (const sheet of styleSheets) {\n\t\tif (sheet) {\n\t\t\tsheet instanceof CSSStyleSheet\n\t\t\t\t? adoptedStyleSheetsAdd(document, sheet)\n\t\t\t\t: addStyleSheetExternal(document, sheet)\n\t\t}\n\t}\n}\n\n/**\n * Adds the stylesheet from urls. It uses a cache, to avoid having to\n * fire a request for each external sheet when used in more than one\n * custom element. Also, all reference the same object.\n *\n * @param {Document | ShadowRoot} document\n * @param {string} text\n */\nexport const addStyleSheetExternal = withState(\n\t(state, document, text) => {\n\t\tstate\n\t\t\t.get(text, text =>\n\t\t\t\ttext.startsWith('http')\n\t\t\t\t\t? fetch(text)\n\t\t\t\t\t\t\t.then(r => r.text())\n\t\t\t\t\t\t\t.then(css => sheet(css))\n\t\t\t\t\t: promise(resolve => resolve(sheet(text))),\n\t\t\t)\n\t\t\t.then(styleSheet => adoptedStyleSheetsAdd(document, styleSheet))\n\t},\n)\n\n/**\n * Swaps classNames and waits for the animation to end\n *\n * @param {Element} element\n * @param {string} oldClass - `class` with the old animation\n * @param {string} newClass - `class` with the new animation\n */\nexport const animateClassTo = (element, oldClass, newClass) =>\n\tpromise(resolve =>\n\t\trequestAnimationFrame(() => {\n\t\t\tclassListRemove(element, oldClass)\n\t\t\tclassListAdd(element, newClass)\n\t\t\telement.getAnimations().length\n\t\t\t\t? resolved(waitEvent(element, 'animationend'), resolve)\n\t\t\t\t: resolve()\n\t\t}),\n\t)\n\n/**\n * Swaps parts and waits for the animation to end\n *\n * @param {Element} element\n * @param {string} oldPart - `part` with the old animation\n * @param {string} newPart - `part` with the new animation\n */\nexport const animatePartTo = (element, oldPart, newPart) =>\n\tpromise(resolve =>\n\t\trequestAnimationFrame(() => {\n\t\t\tpartRemove(element, oldPart)\n\t\t\tpartAdd(element, newPart)\n\t\t\telement.getAnimations().length\n\t\t\t\t? resolved(waitEvent(element, 'animationend'), resolve)\n\t\t\t\t: resolve()\n\t\t}),\n\t)\n\n/**\n * Creates tagged css and returns a CSSStyleSheet. Mostly for css\n * highlighting in js\n *\n * @param {TemplateStringsArray} template\n * @param {...any} values\n * @returns {CSSStyleSheet}\n */\nexport const css = (template, ...values) =>\n\tsheet(String.raw({ raw: template }, ...values))\n\n/**\n * Creates a stylesheet from a css string\n *\n * @param {string} css\n * @returns {CSSStyleSheet}\n */\nexport const sheet = withCache(css => {\n\tconst sheet = new CSSStyleSheet()\n\t/**\n\t * Replace is asynchronous and can accept @import statements\n\t * referencing external resources.\n\t */\n\tsheet.replace(css)\n\n\treturn sheet\n})\n\n/**\n * @param {Element} node\n * @param {string} eventName\n * @param {any} [data]\n */\n\nexport const emit = (\n\tnode,\n\teventName,\n\tdata = { bubbles: true, cancelable: true, composed: true },\n) => node.dispatchEvent(new CustomEvent(eventName, data))\n\nexport function stopEvent(e) {\n\tpreventDefault(e)\n\tstopPropagation(e)\n\tstopImmediatePropagation(e)\n}\n\nexport const preventDefault = e => e.preventDefault()\nexport const stopPropagation = e => e.stopPropagation()\nexport const stopImmediatePropagation = e =>\n\te.stopImmediatePropagation()\n\n/**\n * Waits for an event to be dispatched and runs a callback\n *\n * @param {Element} element\n * @param {string} eventName\n */\nexport const waitEvent = withState(\n\t(state, element, eventName) =>\n\t\tpromise((resolve, reject) => {\n\t\t\t/**\n\t\t\t * To prevent firing `transitionend` twice it needs to stop\n\t\t\t * listening the old one because maybe wasn't dispatched and\n\t\t\t * running a new transition will make it dispatch twice\n\t\t\t */\n\t\t\tconst previous = state.get(element, empty)\n\t\t\tprevious.reject && previous.reject()\n\t\t\telement.removeEventListener(eventName, previous.resolve)\n\t\t\tstate.set(element, { resolve, reject })\n\t\t\telement.addEventListener(eventName, resolve, {\n\t\t\t\tonce: true,\n\t\t\t})\n\t\t}),\n\tweakStore,\n)\n\nexport const addEventListenerObject = (where, type, handler) =>\n\twhere.addEventListener(type, handler, handler)\n\nexport const removeEventListenerObject = (where, type, handler) =>\n\twhere.removeEventListener(type, handler, handler)\n\n/** @param {EventListener} fn */\nexport const passiveEvent = fn => ({ handleEvent: fn, passive: true })\n","// symbols\n\nimport { Symbol } from './lib/std.js'\n\nexport const $isComponent = Symbol()\nexport const $isClass = Symbol()\nexport const $isReactive = Symbol()\nexport const $isMap = Symbol()\n\n// supported namespaces\n\nconst prefix = 'http://www.w3.org/'\n\n// when a tag/attribute is missing the namespace this puts it back in\n\nexport const NS = {\n\t__proto__: null,\n\tsvg: prefix + '2000/svg',\n\tmath: prefix + '1998/Math/MathML',\n\thtml: prefix + '1999/xhtml',\n\txlink: prefix + '1999/xlink',\n}\n","/**\n * This is so far the core of Solid JS Reactivity, this may change.\n *\n * Adaptation for potas needs have been made:\n *\n * - Ported to Classes what does fit\n * - Signal has more options: `label` and `save` previous value\n * - Writing to a signal returns `true` when the value changes\n * - Signal is an object that could be used as signal.read/write or\n *   destructured as an array.\n * - Signals can save and wont run functions\n * - `update` function on Signal that could be used to use the old value\n */\n\nimport {\n\t$isClass,\n\t$isComponent,\n\t$isMap,\n\t$isReactive,\n} from '../constants.js'\n\nimport {\n\tassign,\n\tentries,\n\tflat,\n\tgetValue,\n\tgroupBy,\n\tisArray,\n\tisFunction,\n\tisIterable,\n\tisObject,\n\tisPromise,\n\tkeys,\n\tnothing,\n\tqueueMicrotask,\n\tremoveFromArray,\n\tresolved,\n\tSymbol,\n\twithResolvers,\n} from './std.js'\n\nconst CLEAN = 0\nconst STALE = 1\nconst CHECK = 2\n\nlet Owner\nlet Listener\n\nlet Updates = null\nlet Effects = null\n\nlet Time = 0\n\n// ROOT\n\nclass Root {\n\towner\n\towned\n\n\tcleanups\n\n\tcontext\n\n\tconstructor(owner, options) {\n\t\tthis.owner = owner\n\t\tthis.context = owner?.context\n\n\t\tif (options) {\n\t\t\tassign(this, options)\n\t\t}\n\t}\n\n\tdispose() {\n\t\tlet i\n\n\t\tconst { owned, cleanups } = this\n\n\t\tif (owned) {\n\t\t\tfor (i = owned.length - 1; i >= 0; i--) {\n\t\t\t\towned[i].dispose()\n\t\t\t}\n\t\t\towned.length = 0\n\t\t}\n\t\tif (cleanups) {\n\t\t\tfor (i = cleanups.length - 1; i >= 0; i--) {\n\t\t\t\tcleanups[i]()\n\t\t\t}\n\t\t\tcleanups.length = 0\n\t\t}\n\t}\n}\n\n// COMPUTATION\n\nclass Computation extends Root {\n\tstate = STALE\n\n\tupdatedAt = 0\n\n\tfn\n\n\tsources\n\tsourceSlots\n\n\tconstructor(owner, fn, options) {\n\t\tsuper(owner, options)\n\n\t\tthis.fn = fn\n\n\t\tif (owner) {\n\t\t\tif (owner.owned) {\n\t\t\t\towner.owned.push(this)\n\t\t\t} else {\n\t\t\t\towner.owned = [this]\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate() {\n\t\tthis.dispose()\n\n\t\tconst time = Time\n\n\t\tconst prevOwner = Owner\n\t\tconst prevListener = Listener\n\n\t\tListener = Owner = this\n\t\ttry {\n\t\t\tthis.fn()\n\t\t} catch (err) {\n\t\t\tthis.updatedAt = time + 1\n\n\t\t\tthrow err\n\t\t} finally {\n\t\t\tOwner = prevOwner\n\t\t\tListener = prevListener\n\t\t}\n\n\t\tif (this.updatedAt <= time) {\n\t\t\tthis.updatedAt = time\n\t\t}\n\t}\n\n\tdispose() {\n\t\tconst { sources, sourceSlots } = this\n\n\t\tif (sources) {\n\t\t\tlet source\n\t\t\tlet observers\n\t\t\tlet index\n\n\t\t\tlet observer\n\t\t\tlet slot\n\t\t\twhile (sources.length) {\n\t\t\t\tsource = sources.pop()\n\t\t\t\tobservers = source.observers\n\n\t\t\t\tindex = sourceSlots.pop()\n\n\t\t\t\tif (observers && observers.length) {\n\t\t\t\t\tobserver = observers.pop()\n\t\t\t\t\tslot = source.observerSlots.pop()\n\n\t\t\t\t\tif (index < observers.length) {\n\t\t\t\t\t\tobserver.sourceSlots[slot] = index\n\t\t\t\t\t\tobservers[index] = observer\n\t\t\t\t\t\tsource.observerSlots[index] = slot\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsuper.dispose()\n\n\t\tthis.state = CLEAN\n\t}\n}\n\nclass Effect extends Computation {\n\tuser = true\n\n\tconstructor(owner, fn, options) {\n\t\tsuper(owner, fn, options)\n\n\t\tEffects ? Effects.push(this) : batch(() => this.update())\n\t}\n}\n\nclass SyncEffect extends Computation {\n\tconstructor(owner, fn, options) {\n\t\tsuper(owner, fn, options)\n\n\t\tbatch(() => this.update())\n\t}\n}\n\n// SIGNALS\n\nclass Memo extends Computation {\n\tstate = STALE\n\n\tpure = true\n\n\tvalue\n\n\tobservers\n\tobserverSlots\n\n\t// options:\n\t// equals\n\n\tconstructor(owner, fn, options) {\n\t\tsuper(owner, fn, options)\n\n\t\treturn markReactive(this.read.bind(this))\n\t}\n\n\tread() {\n\t\t// checkReadForbidden()\n\n\t\tif (this.state) {\n\t\t\tif (this.state === STALE) {\n\t\t\t\tthis.update()\n\t\t\t} else {\n\t\t\t\tconst updates = Updates\n\t\t\t\tUpdates = null\n\t\t\t\trunUpdates(() => upstream(this))\n\t\t\t\tUpdates = updates\n\t\t\t}\n\t\t}\n\n\t\tif (Listener) {\n\t\t\tconst sourceSlot = this.observers ? this.observers.length : 0\n\n\t\t\tif (Listener.sources) {\n\t\t\t\tListener.sources.push(this)\n\t\t\t\tListener.sourceSlots.push(sourceSlot)\n\t\t\t} else {\n\t\t\t\tListener.sources = [this]\n\t\t\t\tListener.sourceSlots = [sourceSlot]\n\t\t\t}\n\n\t\t\tif (this.observers) {\n\t\t\t\tthis.observers.push(Listener)\n\t\t\t\tthis.observerSlots.push(Listener.sources.length - 1)\n\t\t\t} else {\n\t\t\t\tthis.observers = [Listener]\n\t\t\t\tthis.observerSlots = [Listener.sources.length - 1]\n\t\t\t}\n\t\t}\n\n\t\treturn this.value\n\t}\n\n\twrite(value) {\n\t\tif (this.equals === false || !this.equals(this.value, value)) {\n\t\t\tthis.value = value\n\t\t\tif (this.observers && this.observers.length) {\n\t\t\t\trunUpdates(() => {\n\t\t\t\t\tfor (let i = 0, observer; i < this.observers.length; i++) {\n\t\t\t\t\t\tobserver = this.observers[i]\n\n\t\t\t\t\t\tif (observer.state === CLEAN) {\n\t\t\t\t\t\t\tif (observer.pure) {\n\t\t\t\t\t\t\t\tUpdates.push(observer)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tEffects.push(observer)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (observer.observers) {\n\t\t\t\t\t\t\t\tdownstream(observer)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tobserver.state = STALE\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\tequals(a, b) {\n\t\treturn a === b\n\t}\n\n\tupdate() {\n\t\tthis.dispose()\n\n\t\tlet nextValue\n\n\t\tconst time = Time\n\n\t\tconst prevOwner = Owner\n\t\tconst prevListener = Listener\n\n\t\tListener = Owner = this\n\t\ttry {\n\t\t\tnextValue = this.fn()\n\t\t} catch (err) {\n\t\t\tthis.state = STALE\n\t\t\tif (this.owned) {\n\t\t\t\tthis.owned.forEach(node => node.dispose())\n\t\t\t\tthis.owned.length = 0\n\t\t\t}\n\t\t\tthis.updatedAt = time + 1\n\n\t\t\tthrow err\n\t\t} finally {\n\t\t\tOwner = prevOwner\n\t\t\tListener = prevListener\n\t\t}\n\t\tif (this.updatedAt <= time) {\n\t\t\tif (this.updatedAt !== 0) {\n\t\t\t\tthis.write(nextValue)\n\t\t\t} else {\n\t\t\t\tthis.value = nextValue\n\t\t\t}\n\t\t\tthis.updatedAt = time\n\t\t}\n\t}\n}\n\n// SIGNAL\n\nclass Signal {\n\tvalue\n\n\tobservers\n\tobserverSlots\n\n\t// options:\n\t// equals\n\t// save\n\n\t// `prev` if option save was given\n\n\tconstructor(value, options) {\n\t\tthis.value = value\n\t\tif (options) {\n\t\t\tassign(this, options)\n\t\t\tif (this.save) {\n\t\t\t\tthis.prev = value\n\t\t\t}\n\t\t}\n\n\t\tthis.read = markReactive(this.read)\n\t}\n\n\tread = () => {\n\t\t// checkReadForbidden()\n\n\t\tif (Listener) {\n\t\t\tconst sourceSlot = this.observers ? this.observers.length : 0\n\n\t\t\tif (Listener.sources) {\n\t\t\t\tListener.sources.push(this)\n\t\t\t\tListener.sourceSlots.push(sourceSlot)\n\t\t\t} else {\n\t\t\t\tListener.sources = [this]\n\t\t\t\tListener.sourceSlots = [sourceSlot]\n\t\t\t}\n\n\t\t\tif (this.observers) {\n\t\t\t\tthis.observers.push(Listener)\n\t\t\t\tthis.observerSlots.push(Listener.sources.length - 1)\n\t\t\t} else {\n\t\t\t\tthis.observers = [Listener]\n\t\t\t\tthis.observerSlots = [Listener.sources.length - 1]\n\t\t\t}\n\t\t}\n\n\t\treturn this.value\n\t}\n\n\twrite = value => {\n\t\tif (this.equals === false || !this.equals(this.value, value)) {\n\t\t\tif (this.save) {\n\t\t\t\tthis.prev = this.value\n\t\t\t}\n\t\t\tthis.value = value\n\t\t\tif (this.observers && this.observers.length) {\n\t\t\t\trunUpdates(() => {\n\t\t\t\t\tfor (let i = 0, observer; i < this.observers.length; i++) {\n\t\t\t\t\t\tobserver = this.observers[i]\n\n\t\t\t\t\t\tif (observer.state === CLEAN) {\n\t\t\t\t\t\t\tif (observer.pure) {\n\t\t\t\t\t\t\t\tUpdates.push(observer)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tEffects.push(observer)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (observer.observers) {\n\t\t\t\t\t\t\t\tdownstream(observer)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tobserver.state = STALE\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\n\tupdate = value => {\n\t\tif (isFunction(value)) {\n\t\t\tvalue = value(this.value)\n\t\t}\n\t\treturn this.write(value)\n\t}\n\n\tequals(a, b) {\n\t\treturn a === b\n\t}\n\n\t*[Symbol.iterator]() {\n\t\tyield this.read\n\t\tyield this.write\n\t\tyield this.update\n\t}\n}\n\n// API\n\n/**\n * Creates a new root\n *\n * @param {(dispose: Function) => any} fn\n * @param {object} [options]\n * @returns {any}\n */\nexport function root(fn, options = undefined) {\n\tconst prevOwner = Owner\n\tconst prevListener = Listener\n\n\tconst root = new Root(Owner, options)\n\n\tOwner = root\n\tListener = undefined\n\n\ttry {\n\t\treturn runUpdates(() => fn(() => root.dispose()), true)\n\t} finally {\n\t\tOwner = prevOwner\n\t\tListener = prevListener\n\t}\n}\n\n/**\n * Creates a signal\n *\n * @template const T\n * @param {T} [initialValue] - Initial value of the signal\n * @param {SignalOptions} [options] - Signal options\n * @returns {SignalObject<T>}\n */\n/* #__NO_SIDE_EFFECTS__ */\nexport function signal(initialValue, options = undefined) {\n\treturn new Signal(initialValue, options)\n}\n\n/**\n * Creates an effect\n *\n * @param {Function} fn\n * @param {object} [options]\n */\nexport function effect(fn, options = undefined) {\n\tnew Effect(Owner, fn, options)\n}\n\n/**\n * Creates an effect with explicit dependencies\n *\n * @param {Function} depend - Function that causes tracking\n * @param {Function} fn - Function that wont cause tracking\n * @param {object} [options]\n */\nexport function on(depend, fn, options = undefined) {\n\teffect(() => {\n\t\tdepend()\n\t\tuntrack(fn)\n\t}, options)\n}\n\n/**\n * Creates a syncEffect\n *\n * @param {Function} fn\n * @param {object} [options]\n */\nexport function syncEffect(fn, options = undefined) {\n\treturn new SyncEffect(Owner, fn, options)\n}\n\n/**\n * Creates a read-only signal from the return value of a function that\n * automatically updates\n *\n * @template T\n * @param {() => T} fn - Function to re-run when dependencies change\n * @param {SignalOptions} [options]\n * @returns {SignalAccessor<T>} - Read only signal\n */\n\n/* #__NO_SIDE_EFFECTS__ */ export function memo(\n\tfn,\n\toptions = undefined,\n) {\n\treturn new Memo(Owner, fn, options)\n}\n\n/**\n * Batches changes to signals\n *\n * @param {Function} fn\n * @returns {any}\n */\nexport const batch = runUpdates\n\n/**\n * Returns current owner\n *\n * @returns {typeof Owner}\n */\nexport function owner() {\n\treturn Owner\n}\n\nfunction runWithOwner(owner, fn) {\n\tconst prevOwner = Owner\n\tconst prevListener = Listener\n\n\tOwner = owner\n\tListener = undefined\n\n\ttry {\n\t\treturn runUpdates(fn, true)\n\t} catch (err) {\n\t\tthrow err\n\t} finally {\n\t\tOwner = prevOwner\n\t\tListener = prevListener\n\t}\n}\n\n/**\n * Disables tracking for a function\n *\n * @param {Function} fn - Function to run with tracking disabled\n * @returns {any}\n */\nexport function untrack(fn) {\n\tif (Listener === undefined) {\n\t\treturn fn()\n\t}\n\n\tconst prevListener = Listener\n\tListener = undefined\n\ttry {\n\t\treturn fn()\n\t} finally {\n\t\tListener = prevListener\n\t}\n}\n\n/**\n * Runs a callback on cleanup, returns callback\n *\n * @template T\n * @param {T} fn\n * @returns {T}\n */\nexport function cleanup(fn) {\n\tif (Owner) {\n\t\tif (Owner.cleanups) {\n\t\t\tOwner.cleanups.push(fn)\n\t\t} else {\n\t\t\tOwner.cleanups = [fn]\n\t\t}\n\t}\n\treturn fn\n}\n\n// UPDATES\n\nfunction runTop(node) {\n\tswitch (node.state) {\n\t\tcase CLEAN: {\n\t\t\treturn\n\t\t}\n\t\tcase CHECK: {\n\t\t\treturn upstream(node)\n\t\t}\n\t}\n\n\tconst ancestors = []\n\n\tdo {\n\t\tif (node.state) {\n\t\t\tancestors.push(node)\n\t\t}\n\t\tnode = node.owner\n\t} while (node && node.updatedAt < Time)\n\n\tfor (let i = ancestors.length - 1, updates; i >= 0; i--) {\n\t\tnode = ancestors[i]\n\n\t\tswitch (node.state) {\n\t\t\tcase STALE: {\n\t\t\t\tnode.update()\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase CHECK: {\n\t\t\t\tupdates = Updates\n\t\t\t\tUpdates = null\n\t\t\t\trunUpdates(() => upstream(node, ancestors[0]))\n\t\t\t\tUpdates = updates\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction runUpdates(fn, init = false) {\n\tif (Updates) {\n\t\treturn fn()\n\t}\n\n\tlet wait = false\n\n\tif (!init) {\n\t\tUpdates = []\n\t}\n\n\tif (Effects) {\n\t\twait = true\n\t} else {\n\t\tEffects = []\n\t}\n\n\tTime++\n\n\ttry {\n\t\tconst res = fn()\n\n\t\tif (Updates) {\n\t\t\trunQueue(Updates)\n\t\t\tUpdates = null\n\t\t}\n\t\tif (!wait) {\n\t\t\tconst effects = Effects\n\t\t\tEffects = null\n\t\t\tif (effects.length) {\n\t\t\t\trunUpdates(() => runEffects(effects))\n\t\t\t}\n\t\t}\n\n\t\treturn res\n\t} catch (err) {\n\t\tif (!wait) {\n\t\t\tEffects = null\n\t\t}\n\t\tUpdates = null\n\n\t\tthrow err\n\t}\n}\n\nfunction runQueue(queue) {\n\tfor (let i = 0; i < queue.length; i++) {\n\t\trunTop(queue[i])\n\t}\n}\n\nfunction runEffects(queue) {\n\tlet i\n\n\tlet effect\n\tlet userLength = 0\n\tfor (i = 0; i < queue.length; i++) {\n\t\teffect = queue[i]\n\n\t\tif (!effect.user) {\n\t\t\trunTop(effect)\n\t\t} else {\n\t\t\tqueue[userLength++] = effect\n\t\t}\n\t}\n\n\tfor (i = 0; i < userLength; i++) {\n\t\trunTop(queue[i])\n\t}\n}\n\nfunction upstream(node, ignore) {\n\tnode.state = CLEAN\n\n\tfor (let i = 0, source; i < node.sources.length; i++) {\n\t\tsource = node.sources[i]\n\n\t\tif (source.sources) {\n\t\t\tswitch (source.state) {\n\t\t\t\tcase STALE: {\n\t\t\t\t\tif (source !== ignore && source.updatedAt < Time) {\n\t\t\t\t\t\trunTop(source)\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tcase CHECK: {\n\t\t\t\t\tupstream(source, ignore)\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction downstream(node) {\n\tfor (let i = 0, observer; i < node.observers.length; i++) {\n\t\tobserver = node.observers[i]\n\n\t\tif (observer.state === CLEAN) {\n\t\t\tobserver.state = CHECK\n\t\t\tif (observer.pure) {\n\t\t\t\tUpdates.push(observer)\n\t\t\t} else {\n\t\t\t\tEffects.push(observer)\n\t\t\t}\n\t\t\tobserver.observers && downstream(observer)\n\t\t}\n\t}\n}\n\nlet readForbid = false\n\nfunction checkReadForbidden() {\n\tif (readForbid) {\n\t\tconsole.trace('Signal Read!')\n\t}\n}\nexport function readForbidden(fn, value) {\n\tconst prev = readForbid\n\ttry {\n\t\treadForbid = value\n\t\treturn fn()\n\t} finally {\n\t\treadForbid = prev\n\t}\n}\n\n/**\n * Creates a context and returns a function to get or set the value\n *\n * @param {any} [defaultValue] - Default value for the context\n * @returns {typeof Context} Context\n */\nexport function Context(defaultValue = undefined) {\n\tconst id = Symbol()\n\n\treturn useContext.bind(null, id, defaultValue)\n}\n\n/**\n * @overload Gets the context value\n * @returns {any} Context value\n */\n/**\n * @overload Runs `fn` with a new value as context\n * @param {any} newValue - New value for the context\n * @param {Function} fn - Callback to run with the new context value\n * @returns {Children} Children\n */\n/**\n * @param {any} newValue\n * @param {Function} fn\n */\nfunction useContext(id, defaultValue, newValue, fn) {\n\tif (newValue === undefined) {\n\t\treturn Owner?.context && Owner.context[id] !== undefined\n\t\t\t? Owner.context[id]\n\t\t\t: defaultValue\n\t} else {\n\t\tlet res\n\n\t\tsyncEffect(() => {\n\t\t\tOwner.context = {\n\t\t\t\t...Owner.context,\n\t\t\t\t[id]: newValue,\n\t\t\t}\n\t\t\tres = untrack(fn)\n\t\t})\n\n\t\treturn res\n\t}\n}\n\n/**\n * Returns an owned function\n *\n * @param {function | undefined} cb\n * @returns {() => any}\n */\nexport const owned = cb => {\n\tconst o = Owner\n\treturn (...args) => cb && runWithOwner(o, () => cb(...args))\n}\n\n/**\n * Returns true when value is reactive (a signal)\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isReactive = value =>\n\tisFunction(value) && $isReactive in value\n\n/**\n * Marks a function as reactive. Reactive functions are ran inside\n * effects.\n *\n * @param {Function} fn - Function to mark as reactive\n * @returns {Function}\n */\nexport function markReactive(fn) {\n\tfn[$isReactive] = undefined\n\treturn fn\n}\n\n/**\n * Proxies a signals property access so you dont have to call the\n * function\n *\n * @param {Signal} snigal - Signal to proxy\n * @param {object} [target] - Target object for the proxy\n * @returns {object} An object that will read the properties from the\n *   signal\n */\nexport const proxy = (snigal, target = nothing) =>\n\tnew Proxy(target, {\n\t\tget(target, key) {\n\t\t\treturn snigal()[key]\n\t\t},\n\t\thas(target, key) {\n\t\t\treturn key in snigal()\n\t\t},\n\t\townKeys(target) {\n\t\t\treturn keys(snigal())\n\t\t},\n\t})\n\n/**\n * A self contained signal function, when an argument is present it\n * writes to the signal, when theres no argument it reads the signal.\n *\n * @template T\n * @param {T} [value] - Optional initial value\n * @returns {SignalFunction<T>}\n */\nexport function signalFunction(value) {\n\tconst [read, write] = signal(value)\n\treturn markReactive((...args) =>\n\t\targs.length ? write(args[0]) : read(),\n\t)\n}\n\n/**\n * To set and read refs. To use in ref attribute.\n *\n * @template T\n * @returns {SignalFunction<T>}\n */\nexport const ref = () => signalFunction()\n\n/**\n * Runs a function inside an effect if value is a function.\n * Aditionally unwraps promises.\n *\n * @param {any} value\n * @param {(value) => any} fn\n */\nexport const withValue = (value, fn) => {\n\tif (isFunction(value)) {\n\t\teffect(() => withValue(getValue(value), fn))\n\t} else if (isPromise(value)) {\n\t\tvalue.then(owned(value => withValue(value, fn)))\n\t} else {\n\t\tfn(value)\n\t}\n}\n\n/**\n * Runs a function inside an effect if value is a function\n *\n * @param {any} value\n * @param {(value) => any} fn\n */\nexport function withPrevValue(value, fn) {\n\tif (isFunction(value)) {\n\t\tlet prev = undefined\n\t\teffect(() => {\n\t\t\tconst val = getValue(value)\n\t\t\tfn(val, prev)\n\t\t\tprev = val\n\t\t})\n\t} else {\n\t\tfn(value)\n\t}\n}\n\n/**\n * Lazy and writable version of `memo`, its writable and will run the\n * function only when used\n *\n * @author ryansolid\n * @param {Function} fn - Function to re-run when dependencies change\n * @returns {((...args) => any) | (() => any)}\n */\nexport function writable(fn) {\n\tconst result = memo(() => signal(fn()))\n\n\treturn markReactive((...args) => {\n\t\treturn args.length ? result().write(args[0]) : result().read()\n\t})\n}\n\n/**\n * Creates an asynchronously effect\n *\n * @param {(currentRunningEffect: Promise<any>) => any} fn - A\n *   function that receives a `currentRunningEffect` that should be\n *   awaited for when wanting to run effects synchronously, that's it\n *   one effect after another.\n */\nexport function asyncEffect(fn) {\n\tconst queue = []\n\teffect(() => {\n\t\tconst { promise, resolve } = withResolvers()\n\n\t\tqueue.push(promise)\n\n\t\tfunction onDone() {\n\t\t\tremoveFromArray(queue, promise)\n\t\t\tresolve()\n\t\t}\n\n\t\tresolved(\n\t\t\tfn(queue.length === 1 ? undefined : queue[queue.length - 2]),\n\t\t\tonDone,\n\t\t)\n\t})\n}\n\n/**\n * A Promise loader handler. Allows to display/run something or\n * nothing while a promise is resolving. Allows to run a callback when\n * the promise resolves. Allows to get notified of errors, and\n * display/run something or nothing, if wanted a `retry` function is\n * given for retrying the promise. All functions run with the original\n * owner, so it's `Context` friendly.\n *\n * @param {(() => Promise<any>) | Promise<any>} fn - Function that\n *   returns a promise\n * @param {{\n * \tonLoading?: any\n * \tonLoaded?: Function\n * \tonError?: ((e: Error, retry: Function) => any) | any\n * }} [options]\n *\n * @returns {Component}\n * @url https://pota.quack.uy/lazy\n */\nexport const lazy = (fn, options = nothing) =>\n\tmarkComponent(props => {\n\t\tconst { onLoading, onLoaded, onError } = options\n\n\t\tconst [value, setValue] = signal(onLoading)\n\n\t\tconst _onLoaded = owned(onLoaded)\n\n\t\tconst retry = () =>\n\t\t\tPromise.resolve(isFunction(fn) ? fn() : fn)\n\t\t\t\t.then(r => {\n\t\t\t\t\tsetValue(\n\t\t\t\t\t\tmarkComponent(() => {\n\t\t\t\t\t\t\tr = isObject(r) && r.default ? r.default : r\n\t\t\t\t\t\t\treturn isFunction(r) ? r(props) : r\n\t\t\t\t\t\t}),\n\t\t\t\t\t)\n\t\t\t\t\tmicrotask(_onLoaded)\n\t\t\t\t})\n\t\t\t\t.catch(e =>\n\t\t\t\t\tonError\n\t\t\t\t\t\t? setValue(\n\t\t\t\t\t\t\t\tmarkComponent(() =>\n\t\t\t\t\t\t\t\t\tisFunction(onError) ? onError(e, retry) : onError,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t: console.error(e),\n\t\t\t\t)\n\t\tretry()\n\n\t\treturn value\n\t})\n\nexport const Lazy = props => lazy(props.children, props)\n\nexport const microtask = fn => queueMicrotask(owned(fn))\n\n// MAP\n\n/**\n * Reactive Map\n *\n * @template T\n * @param {Each<T>} list\n * @param {Function} callback\n * @param {boolean} [sort]\n */\nexport function map(list, callback, sort) {\n\tconst cache = new Map()\n\tconst duplicates = new Map() // for when caching by value is not possible [1, 2, 1, 1, 1]\n\n\tlet runId = 0\n\n\tlet rows = []\n\t/** @type any[] */\n\tlet prev = []\n\n\tfunction clear() {\n\t\tfor (let i = 0; i < prev.length; i++) {\n\t\t\tprev[i].dispose(true)\n\t\t}\n\t\tcache.clear()\n\t\tduplicates.clear()\n\n\t\trows.length = 0\n\t\tprev.length = 0\n\t}\n\n\t// to get rid of all nodes when parent disposes\n\tcleanup(clear)\n\n\tclass Row {\n\t\tconstructor(item, index, fn, isDupe) {\n\t\t\tthis.runId = -1\n\t\t\tthis.item = item\n\t\t\tthis.index = index\n\t\t\tthis.isDupe = isDupe\n\t\t\tthis.disposer = undefined\n\t\t\tthis.nodes = root(disposer => {\n\t\t\t\tthis.disposer = disposer\n\t\t\t\t/** @type Children[] */\n\t\t\t\treturn fn(item, index)\n\t\t\t})\n\t\t}\n\t\tget begin() {\n\t\t\treturn this.nodes[0]\n\t\t}\n\t\tget end() {\n\t\t\treturn this.nodes[this.nodes.length - 1]\n\t\t}\n\t\tdispose(all) {\n\t\t\t// skip cache deletion as we are going to clear the full map\n\t\t\tif (all === undefined) {\n\t\t\t\t// delete from cache\n\t\t\t\tif (!this.isDupe) {\n\t\t\t\t\tcache.delete(this.item)\n\t\t\t\t} else {\n\t\t\t\t\tconst arr = duplicates.get(this.item)\n\t\t\t\t\tarr.length === 1\n\t\t\t\t\t\t? duplicates.delete(this.item)\n\t\t\t\t\t\t: removeFromArray(arr, this)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.disposer()\n\t\t}\n\t}\n\n\t/**\n\t * @param {Function} fn\n\t * @returns {Children}\n\t */\n\tfunction mapper(fn) {\n\t\tconst cb = fn\n\t\t\t? (item, index) => fn(callback(item, index), index)\n\t\t\t: callback\n\n\t\tconst value = getValue(list) || []\n\n\t\t/** To allow iterate objects as if were an array with indexes */\n\t\tconst items = isIterable(value) ? value.entries() : entries(value)\n\n\t\trunId++\n\t\trows = []\n\t\tconst hasPrev = prev.length\n\n\t\tfor (const [index, item] of items) {\n\t\t\tlet row = hasPrev ? cache.get(item) : undefined\n\n\t\t\t// if the item doesnt exists, create it\n\t\t\tif (row === undefined) {\n\t\t\t\trow = new Row(item, index, cb, false)\n\t\t\t\tcache.set(item, row)\n\t\t\t} else if (row.runId === runId) {\n\t\t\t\t// a map will save only 1 of any primitive duplicates, say: [1, 1, 1, 1]\n\t\t\t\t// if the saved value was already used on this run, create a new one\n\t\t\t\tlet dupes = duplicates.get(item)\n\t\t\t\tif (!dupes) {\n\t\t\t\t\tdupes = []\n\t\t\t\t\tduplicates.set(item, dupes)\n\t\t\t\t}\n\t\t\t\tfor (let i = 0; i < dupes.length; i++) {\n\t\t\t\t\tif (dupes[i].runId !== runId) {\n\t\t\t\t\t\trow = dupes[i]\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (row.runId === runId) {\n\t\t\t\t\trow = new Row(item, index, cb, true)\n\t\t\t\t\tdupes.push(row)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trow.runId = runId // mark used on this run\n\t\t\trow.index = index // save sort order\n\t\t\trows.push(row)\n\t\t}\n\n\t\t// remove rows that arent present on the current run\n\t\tif (rows.length === 0) {\n\t\t\tclear()\n\t\t} else {\n\t\t\tfor (let i = 0; i < prev.length; i++) {\n\t\t\t\tif (prev[i].runId !== runId) {\n\t\t\t\t\tprev[i].dispose()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// reorder elements\n\t\t// `rows.length > 1` because no need for sorting when there are no items\n\t\t// prev.length > 0 to skip sorting on creation as its already sorted\n\t\tif (sort && rows.length > 1 && prev.length) {\n\t\t\t// if the planets align it handles swapping\n\t\t\t// a = sorted\n\t\t\t// b = unsorted\n\t\t\tconst { a, b } = groupBy(rows, (value, index) =>\n\t\t\t\trows[index] === prev[index] ? 'a' : 'b',\n\t\t\t)\n\n\t\t\tlet unsorted = b?.length\n\t\t\tif (\n\t\t\t\ta &&\n\t\t\t\tb &&\n\t\t\t\ta.length &&\n\t\t\t\tb.length &&\n\t\t\t\tb.length < a.length &&\n\t\t\t\tb.every(item => prev.includes(item))\n\t\t\t) {\n\t\t\t\tfor (const usort of b) {\n\t\t\t\t\tfor (const sort of a) {\n\t\t\t\t\t\tif (usort.index === sort.index - 1) {\n\t\t\t\t\t\t\tsort.begin.before(...nodesFromRow(usort))\n\t\t\t\t\t\t\tunsorted--\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t} else if (usort.index === sort.index + 1) {\n\t\t\t\t\t\t\tsort.end.after(...nodesFromRow(usort))\n\t\t\t\t\t\t\tunsorted--\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (unsorted) {\n\t\t\t\t// handles all other cases\n\t\t\t\t// best for any combination of: push/pop/shift/unshift/insertion/deletion\n\t\t\t\t// must check in reverse as on creation stuff is added to the end\n\n\t\t\t\tlet current = rows[rows.length - 1]\n\t\t\t\tfor (let i = rows.length - 1; i > 0; i--) {\n\t\t\t\t\tconst previous = rows[i - 1]\n\t\t\t\t\tif (current.begin.previousSibling !== previous.end) {\n\t\t\t\t\t\tcurrent.begin.before(...nodesFromRow(previous))\n\t\t\t\t\t}\n\t\t\t\t\tcurrent = previous\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// save sorted list\n\t\tprev = rows\n\n\t\t// return external representation\n\t\treturn rows.map(item => item.nodes)\n\t}\n\tmapper[$isMap] = undefined\n\treturn mapper\n}\n\nfunction nodesFromRow(row) {\n\tconst { begin, end } = row\n\tconst nodes = [begin]\n\n\tlet nextSibling = begin\n\twhile (nextSibling !== end) {\n\t\tnextSibling = nextSibling.nextSibling\n\t\tnodes.push(nextSibling)\n\t}\n\n\treturn nodes\n}\n\n/**\n * Resolves and returns `children` in a memo\n *\n * @param {Function | Children} fn\n * @returns {Function} Memo\n * @url https://pota.quack.uy/resolve\n */\nexport function resolve(fn) {\n\tconst children = isFunction(fn) ? memo(fn) : () => fn\n\treturn memo(() => unwrap(children()))\n}\n\n/**\n * Recursively unwrap children functions\n *\n * @param {Children} children\n * @returns {Children}\n */\nfunction unwrap(children) {\n\tif (isFunction(children)) {\n\t\treturn unwrap(children())\n\t}\n\n\tif (isArray(children)) {\n\t\tconst childrens = []\n\t\tfor (let child of children) {\n\t\t\tchild = unwrap(child)\n\t\t\tisArray(child)\n\t\t\t\t? childrens.push(...child)\n\t\t\t\t: childrens.push(child)\n\t\t}\n\t\treturn childrens\n\t}\n\n\treturn children\n}\n\n/**\n * Extend `Pota` and define a `render(props){}` method to create a\n * class component. `ready(cb)` and `cleanup(cb)` methods will be\n * registered automatically\n *\n * @url https://pota.quack.uy/Classes\n */\nexport class Pota {}\n\nPota[$isClass] = undefined\n\n/**\n * Returns true if the `value` is a `Component`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isComponent = value =>\n\tisFunction(value) && $isComponent in value\n\n/**\n * Returns true if the value can be made a Component\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isComponentable = value =>\n\t!isReactive(value) &&\n\t(isFunction(value) ||\n\t\t// avoid [1,2] and support { toString(){ return \"something\"} }\n\t\t(!isArray(value) && isObject(value) && !value.then))\n\n/**\n * Makes of `children` a function. Reactive children will run as is,\n * non-reactive children will run untracked, regular children will\n * just return.\n *\n * @param {Children} children\n * @returns {Function}\n */\nexport function makeCallback(children) {\n\t/**\n\t * When children is an array, as in >${[0, 1, 2]}< then children\n\t * will end as `[[0, 1, 2]]`, so flat it\n\t */\n\n\tchildren = isArray(children) ? flat(children) : children\n\n\tconst callbacks = !isArray(children)\n\t\t? callback(children)\n\t\t: children.map(callback)\n\n\treturn !isArray(children)\n\t\t? markComponent((...args) => callbacks(args))\n\t\t: markComponent((...args) =>\n\t\t\t\tcallbacks.map(callback => callback(args)),\n\t\t\t)\n}\n\nconst callback = child =>\n\tisFunction(child)\n\t\t? isReactive(child)\n\t\t\t? args => {\n\t\t\t\t\t/**\n\t\t\t\t\t * The function inside the `for` is saved in a signal. The\n\t\t\t\t\t * result of the signal is our callback\n\t\t\t\t\t *\n\t\t\t\t\t * ```js\n\t\t\t\t\t * htmlEffect(\n\t\t\t\t\t * \thtml =>\n\t\t\t\t\t * \t\thtml`<table>\n\t\t\t\t\t * \t\t\t<tr>\n\t\t\t\t\t * \t\t\t\t<th>name</th>\n\t\t\t\t\t * \t\t\t</tr>\n\t\t\t\t\t * \t\t\t<for each=\"${tests}\">\n\t\t\t\t\t * \t\t\t\t${item =>\n\t\t\t\t\t * \t\t\t\t\thtml`<tr>\n\t\t\t\t\t * \t\t\t\t\t\t<td>${item.name}</td>\n\t\t\t\t\t * \t\t\t\t\t</tr>`}\n\t\t\t\t\t * \t\t\t</for>\n\t\t\t\t\t * \t\t</table>`,\n\t\t\t\t\t * )\n\t\t\t\t\t * ```\n\t\t\t\t\t */\n\t\t\t\t\tconst r = child()\n\t\t\t\t\treturn isFunction(r)\n\t\t\t\t\t\t? isReactive(r)\n\t\t\t\t\t\t\t? r()\n\t\t\t\t\t\t\t: untrack(() => r(...args))\n\t\t\t\t\t\t: r\n\t\t\t\t}\n\t\t\t: args => untrack(() => child(...args))\n\t\t: () => child\n\n// allows to tell a `signal function` from a `component function`\n// signals and user functions go in effects, for reactivity\n// components and callbacks are untracked and wont go in effects to avoid re-rendering\n\n/**\n * Marks a function as a `Component`.\n *\n * @param {Function} fn - Function to mark as a `Component`\n * @returns {Component}\n */\nexport function markComponent(fn) {\n\tfn[$isComponent] = undefined\n\treturn fn\n}\n\n/**\n * Unwraps components till it gets a value. To keep context relevant\n * to the component\n *\n * @param {Function | any} value - Maybe function\n * @returns {any}\n */\nexport function getValueComponent(value) {\n\twhile ($isComponent in value) value = value()\n\treturn value\n}\n\n/**\n * Adds an event listener to a node\n *\n * @param {Element} node - Element to add the event listener\n * @param {(keyof WindowEventMap & keyof GlobalEventHandlersEventMap)\n * \t| string} type\n *   - The name of the event listener\n *\n * @param {EventListener\n * \t| EventListenerObject\n * \t| (EventListenerObject & AddEventListenerOptions)} handler\n *   - Function to handle the event\n *\n * @returns {Function} - An `off` function for removing the event\n *   listener\n * @url https://pota.quack.uy/props/EventListener\n */\nexport function addEventListener(node, type, handler) {\n\tnode.addEventListener(\n\t\ttype,\n\t\thandler,\n\t\t!isFunction(handler) && handler,\n\t)\n\n\t/**\n\t * Removes event on tracking scope disposal.\n\t *\n\t * Situation: the event was added to the `document` manually using\n\t * `addEventListener`, say to listen for clicks as a \"click\n\t * outside\". The event needs to be removed when the component that\n\t * added it is disposed.\n\t */\n\n\treturn cleanup(() => removeEventListener(node, type, handler))\n}\n\n/**\n * Removes an event listener from a node\n *\n * @param {Element} node - Element to add the event listener\n * @param {(keyof WindowEventMap & keyof GlobalEventHandlersEventMap)\n * \t| string} type\n *   - The name of the event listener\n *\n * @param {EventListener\n * \t| EventListenerObject\n * \t| (EventListenerObject & AddEventListenerOptions)} handler\n *   - Function to handle the event\n *\n * @returns {Function} - An `on` function for adding back the event\n *   listener\n * @url https://pota.quack.uy/props/EventListener\n */\nexport function removeEventListener(node, type, handler) {\n\tnode.removeEventListener(\n\t\ttype,\n\t\thandler,\n\t\t!isFunction(handler) && handler,\n\t)\n\n\treturn () => addEventListener(node, type, handler)\n}\n\n/**\n * It gives a handler an owner, so stuff runs batched on it, and\n * things like context and cleanup work\n */\nexport const ownedEvent = handler =>\n\t'handleEvent' in handler\n\t\t? {\n\t\t\t\t...handler,\n\t\t\t\thandleEvent: owned(e => handler.handleEvent(e)),\n\t\t\t}\n\t\t: owned(handler)\n","import { owned } from './lib/reactive.js'\nimport { call, queueMicrotask } from './lib/std.js'\n\n/**\n * The purpose of this file is to guarantee the timing of some\n * callbacks. It queues a microtask, then the callbacks are added to a\n * position in the array. These are run with a priority.\n */\n\n/** @type boolean */\nlet added\n\n/** @type [][] */\nlet queue\n\nfunction reset() {\n\tqueue = [[], [], [], [], [], []]\n\tadded = false\n}\n\n// initialization\nreset()\n\n/**\n * Queues a callback at a priority\n *\n * @param {PropertyKey} priority - Priority\n * @param {Function} fn - Function to run once the callbacks at this\n *   priority run\n */\nfunction add(priority, fn) {\n\tif (!added) {\n\t\tadded = true\n\t\tqueueMicrotask(run)\n\t}\n\tqueue[priority].push(owned(fn))\n}\n\n/** Runs all queued callbacks */\nfunction run() {\n\tconst q = queue\n\treset()\n\n\tfor (const fns of q) {\n\t\tfns.length && call(fns)\n\t}\n}\n\n/**\n * Queue a function to run before everything else (onProps, onRef,\n * onMount, ready) ex focus restoration\n *\n * @param {Function} fn\n */\nexport const onFixes = fn => add(0, fn)\n\n/**\n * Queue a function to run before (onRef, onMount, ready) ex running\n * user functions on elements via plugins\n *\n * @param {Function} fn\n */\nexport const onProps = fn => add(1, fn)\n\n/**\n * Queue a function to run onRef (before onMount, after onProps)\n *\n * @param {Function} fn\n */\nexport const onRef = fn => add(2, fn)\n\n/**\n * Queue a function to run onMount (before ready, after onRef)\n *\n * @param {Function} fn\n */\nexport const onMount = fn => add(3, fn)\n\n/**\n * Queue a function to run on ready (after onMount)\n *\n * @param {Function} fn\n * @url https://pota.quack.uy/ready\n */\nexport const ready = fn => add(4, fn)\n\n/**\n * Queue a function to run after all user defined processes\n *\n * @param {Function} fn\n */\nexport const onDone = fn => add(5, fn)\n","import { addEventListener, ownedEvent } from '../lib/reactive.js'\nimport { window, withCache } from '../lib/std.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {EventListenerOrEventListenerObject} value\n * @param {object} props\n * @param {string} localName\n * @param {string} ns\n */\nexport const setEventNS = (node, name, value, props, localName, ns) =>\n\taddEventListener(node, localName, ownedEvent(value))\n\n/**\n * Returns an event name when the string could be mapped to an event\n *\n * @param {string} name - String to check for a mapped event\n * @returns {string | undefined} Returns the event name or null in\n *   case isnt found\n */\nexport const eventName = withCache(name =>\n\tname.startsWith('on') && name.toLowerCase() in window\n\t\t? name.slice(2).toLowerCase()\n\t\t: null,\n)\n","import { cacheStore } from '../lib/std.js'\nimport { onProps } from '../scheduler.js'\n\nexport const plugins = cacheStore()\nexport const pluginsNS = cacheStore()\n\n/**\n * Defines a prop that can be used on any Element\n *\n * @param {string} propName - Name of the prop\n * @param {(\n * \tnode: Elements,\n * \tpropName: string,\n * \tpropValue: Function | any,\n * \tprops: object,\n * ) => void} fn\n *   - Function to run when this prop is found on any Element\n *\n * @param {boolean} [onMicrotask=true] - To avoid the problem of\n *   needed props not being set, or children elements not created yet.\n *   Default is `true`\n * @url https://pota.quack.uy/props/propsPlugin\n */\nexport const propsPlugin = (propName, fn, onMicrotask) => {\n\tplugin(plugins, propName, fn, onMicrotask)\n}\n\n/**\n * Defines a namespaced prop that can be used on any Element\n *\n * @param {string} NSName - Name of the namespace\n * @param {(\n * \tnode: Elements,\n * \tpropName: string,\n * \tpropValue: Function | any,\n * \tprops: object,\n * \tlocalName: string,\n * \tns: string,\n * ) => void} fn\n *   - Function to run when this prop is found on any Element\n *\n * @param {boolean} [onMicrotask=true] - Set to run on a microtask to\n *   avoid the problem of needed props not being set, or children\n *   elements not being created yet. Default is `true`\n */\nexport const propsPluginNS = (NSName, fn, onMicrotask) => {\n\tplugin(pluginsNS, NSName, fn, onMicrotask)\n}\n\n/**\n * Defines prop and namespaced prop that can be used on any Element\n *\n * @param {string} propName - Name of the prop/namespace\n * @param {Function} fn - Function to run when this prop is found on\n *   any Element\n * @param {boolean} [onMicrotask=true] - Set to run on a microtask to\n *   avoid the problem of needed props not being set, or children\n *   elements not being created yet. Default is `true`\n */\nexport const propsPluginBoth = (propName, fn, onMicrotask) => {\n\tplugin(plugins, propName, fn, onMicrotask)\n\tplugin(pluginsNS, propName, fn, onMicrotask)\n}\n\nconst plugin = (plugins, name, fn, onMicrotask = true) => {\n\tplugins.set(\n\t\tname,\n\t\t!onMicrotask ? fn : (...args) => onProps(() => fn(...args)),\n\t)\n}\n","import { withValue } from '../lib/reactive.js'\nimport { isNullUndefined } from '../lib/std.js'\n\nimport { NS } from '../constants.js'\n\n// NODE ATTRIBUTES\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {object} props\n * @param {string} localName\n * @param {string} ns\n */\nexport const setAttributeNS = (\n\tnode,\n\tname,\n\tvalue,\n\tprops,\n\tlocalName,\n\tns,\n) => setAttribute(node, localName, value)\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {string} [ns]\n * @url https://pota.quack.uy/props/setAttribute\n */\nexport const setAttribute = (node, name, value, ns) =>\n\twithValue(value, value => _setAttribute(node, name, value, ns))\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {string} value\n * @param {string} [ns]\n */\nfunction _setAttribute(node, name, value, ns) {\n\t// if the value is null or undefined it will be removed\n\tif (isNullUndefined(value)) {\n\t\tns && NS[ns]\n\t\t\t? node.removeAttributeNS(NS[ns], name)\n\t\t\t: node.removeAttribute(name)\n\t} else {\n\t\tns && NS[ns]\n\t\t\t? node.setAttributeNS(NS[ns], name, value)\n\t\t\t: node.setAttribute(name, value)\n\t}\n}\n","import { withValue } from '../lib/reactive.js'\nimport { isNullUndefined } from '../lib/std.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {object} props\n * @param {string} localName\n * @param {string} ns\n */\nexport const setPropertyNS = (\n\tnode,\n\tname,\n\tvalue,\n\tprops,\n\tlocalName,\n\tns,\n) => setProperty(node, localName, value)\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @url https://pota.quack.uy/props/setProperty\n */\nexport const setProperty = (node, name, value) =>\n\twithValue(value, value => _setProperty(node, name, value))\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n */\nexport function _setProperty(node, name, value) {\n\t// if the value is null or undefined it will be set to null\n\tif (isNullUndefined(value)) {\n\t\t// defaulting to undefined breaks `progress` tag and the whole page\n\t\tnode[name] = null\n\t} else {\n\t\tnode[name] = value\n\t}\n}\n","// NODE UNKNOWN PROPERTIES / ATTRIBUTES\n\nimport { withValue } from '../lib/reactive.js'\nimport {\n\tgetPrototypeOf,\n\tgetSetterNamesFromPrototype,\n} from '../lib/std.js'\nimport { setAttribute } from './attribute.js'\nimport { setProperty } from './property.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {string} [ns]\n */\nexport const setUnknown = (node, name, value, ns) => {\n\twithValue(value, value => _setUnknown(node, name, value, ns))\n}\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {string} [ns]\n */\nexport const _setUnknown = (node, name, value, ns) => {\n\tconst setters = elementSetters(node)\n\n\tif (\n\t\tsetters.element.has(name) &&\n\t\t(typeof value !== 'string' || node.tagName.includes('-'))\n\t) {\n\t\t/**\n\t\t * 1. Only do this when it's different to a string to avoid coarcing\n\t\t *    on native elements (ex: (img.width = '16px') === 0)\n\t\t * 2. Or when a custom element has a setter\n\t\t */\n\t\tsetProperty(node, name, value)\n\t} else if (setters.builtIn.has(name)) {\n\t\t// ex: innerHTML, textContent, draggable={true}\n\t\tsetProperty(node, name, value)\n\t} else {\n\t\tsetAttribute(node, name, value, ns)\n\t}\n}\n\nconst elements = new Map()\n\n/** @param {Element} node */\nfunction elementSetters(node) {\n\t/**\n\t * Use `node.constructor` instead of `node.nodeName` because it\n\t * handles the difference between `a` `HTMLAnchorElement` and `a`\n\t * `SVGAElement`\n\t */\n\tlet setters = elements.get(node.constructor)\n\tif (setters) return setters\n\tsetters = { builtIn: new Set(builtInSetters), element: new Set() }\n\telements.set(node.constructor, setters)\n\n\tlet store = setters.element\n\tlet proto = getPrototypeOf(node)\n\n\t/**\n\t * Stop at `Element` instead of `HTMLElement` because it handles the\n\t * difference between `HTMLElement`, `SVGElement`, `FutureElement`\n\t * etc\n\t */\n\twhile (proto.constructor !== Element) {\n\t\tconst nextProto = getPrototypeOf(proto)\n\n\t\t/**\n\t\t * The previous prototype to `Element` is a `builtIn`\n\t\t * (`HTMLElement`, `SVGElement`,`FutureElement`, etc)\n\t\t */\n\t\tif (nextProto.constructor === Element) {\n\t\t\tstore = setters.builtIn\n\t\t}\n\t\tgetSetterNamesFromPrototype(proto, store)\n\t\tproto = nextProto\n\t}\n\n\treturn setters\n}\n\n/** Setters shared by all kind of elements */\nconst builtInSetters = getSetterNamesFromPrototype(\n\tElement.prototype,\n\tgetSetterNamesFromPrototype(Node.prototype),\n)\n","// BOOL ATTRIBUTES\n\nimport { withValue } from '../lib/reactive.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {object} props\n * @param {string} localName\n * @param {string} ns\n */\nexport const setBoolNS = (node, name, value, props, localName, ns) =>\n\tsetBool(node, localName, value)\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @url https://pota.quack.uy/props/setBool\n */\nexport const setBool = (node, name, value) =>\n\twithValue(value, value => _setBool(node, name, value))\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n */\nexport const _setBool = (node, name, value) =>\n\t// if the value is falsy gets removed\n\tvalue ? node.setAttribute(name, '') : node.removeAttribute(name)\n","// node style\n\nimport { withValue } from '../lib/reactive.js'\nimport { getValue, isNullUndefined, isObject } from '../lib/std.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {object} props\n * @url https://pota.quack.uy/props/setStyle\n */\nexport const setStyle = (node, name, value, props) =>\n\tsetNodeStyle(node.style, value)\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {object} props\n * @param {string} localName\n * @param {string} ns\n */\nexport const setStyleNS = (node, name, value, props, localName, ns) =>\n\tsetNodeStyle(\n\t\tnode.style,\n\t\tisObject(value) ? value : { [localName]: value },\n\t)\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {object} props\n * @param {string} localName\n * @param {string} ns\n */\nexport const setVarNS = (node, name, value, props, localName, ns) =>\n\tsetNodeStyle(node.style, { ['--' + localName]: value })\n\n/**\n * @param {CSSStyleDeclaration} style\n * @param {unknown} value\n */\nfunction setNodeStyle(style, value) {\n\tif (isObject(value)) {\n\t\tlet name\n\t\tfor (name in value) {\n\t\t\tsetStyleValue(style, name, value[name])\n\t\t}\n\t\treturn\n\t}\n\tconst type = typeof value\n\tif (type === 'string') {\n\t\tstyle.cssText = value\n\t\treturn\n\t}\n\tif (type === 'function') {\n\t\twithValue(value, value => setNodeStyle(style, getValue(value)))\n\t\treturn\n\t}\n}\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n */\nexport const setElementStyle = (node, name, value) =>\n\tsetStyleValue(node.style, name, value)\n\n/**\n * @param {CSSStyleDeclaration} style\n * @param {string} name\n * @param {unknown} value\n */\nconst setStyleValue = (style, name, value) =>\n\twithValue(value, value => _setStyleValue(style, name, value))\n\n/**\n * @param {CSSStyleDeclaration} style\n * @param {string} name\n * @param {string | null} value\n */\nconst _setStyleValue = (style, name, value) =>\n\t// if the value is null or undefined it will be removed\n\tisNullUndefined(value)\n\t\t? style.removeProperty(name)\n\t\t: style.setProperty(name, value)\n","// node class / classList\n\nimport { withPrevValue, withValue } from '../lib/reactive.js'\nimport {\n\tclassListAdd,\n\tclassListRemove,\n\tisFunction,\n\tisString,\n} from '../lib/std.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {object | string | ArrayLike<any>} value\n * @param {object} props\n */\nexport const setClass = (node, name, value, props) =>\n\tisString(value)\n\t\t? node.setAttribute('class', value)\n\t\t: setClassList(node, value)\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {object | string | ArrayLike<any>} value\n * @param {object} props\n * @param {string} localName\n * @param {string} ns\n */\nexport const setClassNS = (\n\tnode,\n\tname,\n\tvalue,\n\tprops,\n\tlocalName,\n\tns,\n) =>\n\tisFunction(value)\n\t\t? setElementClass(node, localName, value)\n\t\t: setClassList(node, value)\n\n/**\n * @param {Element} node\n * @param {object | string | ArrayLike<any>} value\n */\nfunction setClassList(node, value) {\n\tswitch (typeof value) {\n\t\tcase 'string': {\n\t\t\t_setClassListValue(node, value, true)\n\t\t\tbreak\n\t\t}\n\n\t\tcase 'object': {\n\t\t\tlet name\n\t\t\tfor (name in value) {\n\t\t\t\tsetElementClass(node, name, value[name])\n\t\t\t}\n\t\t\tbreak\n\t\t}\n\n\t\tcase 'function': {\n\t\t\twithValue(value, value => setClassList(node, value))\n\t\t\tbreak\n\t\t}\n\t}\n}\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n */\nexport const setElementClass = (node, name, value) =>\n\twithPrevValue(value, (value, prev) => {\n\t\t// on initialization do not remove whats not there\n\t\tif (!value && !prev) {\n\t\t} else {\n\t\t\t_setClassListValue(node, name, value)\n\t\t}\n\t})\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n */\n\nconst _setClassListValue = (node, name, value) =>\n\t// null, undefined or false, the class is removed\n\t!value\n\t\t? classListRemove(node, name)\n\t\t: classListAdd(node, ...name.trim().split(/\\s+/))\n","import { cleanup, withValue } from '../lib/reactive.js'\nimport { isNullUndefined } from '../lib/std.js'\nimport { _setProperty } from './property.js'\n\n/**\n * `value` as a prop is special cased so the button `reset` in forms\n * works as expected. The first time a value is set, its done as an\n * attribute.\n */\nexport const setValue = (node, name, value) =>\n\twithValue(value, value => _setValue(node, name, value))\n\nconst defaults = new Set()\n\nfunction _setValue(node, name, value) {\n\tif (!defaults.has(node)) {\n\t\tdefaults.add(node)\n\t\tcleanup(() => defaults.delete(node))\n\n\t\tif (!isNullUndefined(value)) {\n\t\t\tswitch (node.tagName) {\n\t\t\t\tcase 'INPUT': {\n\t\t\t\t\tnode.setAttribute('value', value)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tcase 'TEXTAREA': {\n\t\t\t\t\tnode.textContent = value\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_setProperty(node, name, value)\n\tif (!value && node.tagName === 'PROGRESS') {\n\t\tnode.removeAttribute('value')\n\t}\n}\n","/** Returns true or false with a `chance` of getting `true` */\nexport const chance = (chance = 50, generator = random) => {\n\treturn generator() < chance / 100\n}\n\n/** Returns random number between 0 and 1 */\nexport const random = () =>\n\tcrypto.getRandomValues(new Uint32Array(1))[0] / (0xffffffff + 1)\n\nexport const randomBetween = (min, max, generator = random) =>\n\tMath.floor(generator() * (max - min + 1)) + min\n\nexport const randomColor = (min = 0, max = 255) =>\n\t'rgb(' +\n\trandomBetween(min, max) +\n\t',' +\n\trandomBetween(min, max) +\n\t',' +\n\trandomBetween(min, max) +\n\t')'\n\nexport const randomId = () =>\n\tcrypto.getRandomValues(new BigUint64Array(1))[0].toString(36)\n\n/**\n * Returns a random number generator based no a seed that generates\n * numbers between 0 and 1\n */\nexport function randomSeeded(seed) {\n\tconst m = 2 ** 35 - 31\n\tlet s = seed % m\n\treturn () => (s = (s * 185852) % m) / m\n}\n","import {\n\tadoptedStyleSheetsAdd,\n\tclassListAdd,\n\tgetDocumentForElement,\n\tsheet,\n\twithState,\n} from '../lib/std.js'\n\nimport { randomId } from '../plugin/useRandom.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {string} value\n * @param {object} props\n */\nexport const setCSS = (node, name, value, props) =>\n\tsetNodeCSS(node, value)\n\n/**\n * @param {Element} node\n * @param {string} value\n */\nconst setNodeCSS = withState((state, node, value) => {\n\tclassListAdd(\n\t\tnode,\n\t\tstate.get(value, value => {\n\t\t\tconst id = 'c' + randomId()\n\t\t\tadoptedStyleSheetsAdd(\n\t\t\t\tgetDocumentForElement(node),\n\t\t\t\tsheet(value.replace(/class/g, '.' + id)),\n\t\t\t)\n\t\t\treturn id\n\t\t}),\n\t)\n})\n","import { cleanup } from '../lib/reactive.js'\n\nimport { onMount, onRef } from '../scheduler.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {Function} value\n * @param {object} props\n */\nexport const setRef = (node, name, value, props) =>\n\tonRef(() => value(node))\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {Function} value\n * @param {object} props\n */\nexport const setOnMount = (node, name, value, props) =>\n\tonMount(() => value(node))\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {Function} value\n * @param {object} props\n */\nexport const setUnmount = (node, name, value, props) =>\n\tcleanup(() => value(node))\n","import { addEventListener, ownedEvent } from '../lib/reactive.js'\n\nimport { eventName } from './event.js'\n\nimport {\n\tplugins,\n\tpluginsNS,\n\tpropsPlugin,\n\tpropsPluginBoth,\n\tpropsPluginNS,\n} from './plugin.js'\nimport { setUnknown } from './unknown.js'\n\n// exports\n\nexport { setAttribute } from './attribute.js'\nexport { setBool } from './bool.js'\nexport { setProperty } from './property.js'\nexport { setUnknown } from './unknown.js'\nexport { setElementStyle as setStyle } from './style.js'\nexport { setElementClass as setClass } from './class.js'\n\n// PLUGINS NS\n\n// namespaced attributes/properties\n\nimport { setPropertyNS } from './property.js'\npropsPluginNS('prop', setPropertyNS, false)\n\nimport { setAttributeNS } from './attribute.js'\npropsPluginNS('attr', setAttributeNS, false)\n\nimport { setBoolNS } from './bool.js'\npropsPluginNS('bool', setBoolNS, false)\n\n// events\n\nimport { setEventNS } from './event.js'\npropsPluginNS('on', setEventNS, false)\n\n// var\n\nimport { setVarNS } from './style.js'\npropsPluginNS('var', setVarNS, false)\n\n// PLUGINS REGULAR\n\n// noop\n\nimport { noop } from '../lib/std.js'\npropsPlugin('__dev', noop, false)\npropsPlugin('xmlns', noop, false)\n\n// value\n\nimport { setValue } from './value.js'\npropsPlugin('value', setValue, false)\n\n// PLUGIN BOTH\n\n// css\n\nimport { setCSS } from './css.js'\npropsPluginBoth('css', setCSS, false)\n\n// mount\n\nimport { setOnMount } from './lifecycle.js'\npropsPluginBoth('onMount', setOnMount, false)\n\n// unmount\n\nimport { setUnmount } from './lifecycle.js'\npropsPluginBoth('onUnmount', setUnmount, false)\n\n// ref\n\nimport { setRef } from './lifecycle.js'\npropsPluginBoth('ref', setRef, false)\n\n// PLUGIN BOTH DIFFERENT\n\n// styles\n\nimport { setStyle, setStyleNS } from './style.js'\npropsPlugin('style', setStyle, false)\npropsPluginNS('style', setStyleNS, false)\n\n// class\n\nimport { setClass, setClassNS } from './class.js'\npropsPlugin('class', setClass, false)\npropsPluginNS('class', setClassNS, false)\n\n// catch all\n\n/**\n * Assigns props to an Element\n *\n * @param {Element} node - Element to which assign props\n * @param {object} props - Props to assign\n */\nexport function assignProps(node, props) {\n\tfor (const name in props) {\n\t\tassignProp(node, name, props[name], props)\n\t}\n}\n\n/**\n * Assigns a prop to an Element\n *\n * @param {Element} node\n * @param {string} name\n * @param {any} value\n * @param {object} props\n */\nexport function assignProp(node, name, value, props) {\n\t// run plugins\n\tlet plugin = plugins.get(name)\n\tif (plugin) {\n\t\tplugin(node, name, value, props)\n\t\treturn\n\t}\n\n\t// onClick={handler}\n\tlet event = eventName(name)\n\tif (event) {\n\t\t// `value &&` for when `onClick={handler}` and `handler` is undefined\n\t\tvalue && addEventListener(node, event, ownedEvent(value))\n\t\treturn\n\t}\n\n\tif (name.includes(':')) {\n\t\t// with ns\n\t\tconst [ns, localName] = name.split(':')\n\n\t\t// run plugins NS\n\t\tplugin = pluginsNS.get(ns)\n\t\tif (plugin) {\n\t\t\tplugin(node, name, value, props, localName, ns)\n\t\t\treturn\n\t\t}\n\n\t\t// onClick:my-ns={handler}\n\t\tevent = eventName(ns)\n\t\tif (event) {\n\t\t\t// `value &&` for when `onClick={handler}` and `handler` is undefined\n\t\t\tvalue && addEventListener(node, event, ownedEvent(value))\n\t\t\treturn\n\t\t}\n\n\t\tsetUnknown(node, name, value, ns)\n\t\treturn\n\t}\n\n\t// catch all\n\tsetUnknown(node, name, value)\n}\n","// CONSTANTS\n\nimport { $isClass, $isMap, NS } from './constants.js'\n\n// LIB\n\nimport {\n\tcleanup,\n\tContext,\n\teffect,\n\tisReactive,\n\troot,\n\tsignal,\n\tuntrack,\n} from './lib/reactive.js'\n\nimport {\n\tadoptedStyleSheetsAdd,\n\tadoptedStyleSheetsRemove,\n\tcreateElement,\n\tcreateElementNS,\n\tcreateTextNode,\n\tCSSStyleSheet,\n\tdocument,\n\tDocumentFragment,\n\tflat,\n\tfreeze,\n\tgetDocumentForElement,\n\timportNode,\n\tisArray,\n\tisConnected,\n\titerator,\n\tnothing,\n\tquerySelector,\n\tresolved,\n\tstringify,\n\ttoArray,\n\twalkElements,\n} from './lib/std.js'\n\nimport {\n\tisComponent,\n\tisComponentable,\n\tmarkComponent,\n} from './lib/reactive.js'\n\nimport { onFixes, ready } from './scheduler.js'\n\n// PROPERTIES / ATTRIBUTES\n\nimport { assignProps } from './props/@main.js'\nimport { propsPlugin } from './props/plugin.js'\n\n// STATE\n\nconst useXMLNS = context()\n\n// COMPONENTS\n\n/**\n * Used by the regular JSX transform, as `<>...</>` or\n * `<Fragment>...</Fragment>`.\n */\nexport const Fragment = props => props.children\n\n/**\n * Creates components for things. When props argument is given, the\n * props become fixed. When props argument is ommited, it allows you\n * to keep calling the returned function with new props. Returns a\n * function because we need to render from parent to children instead\n * of from children to parent. This allows to properly set the\n * reactivity tree (think of nested effects that clear inner effects,\n * context, etc).\n *\n * @param {string | Function | Element | object | symbol} value -\n *   Component\n * @param {any} [props] Object\n * @url https://pota.quack.uy/Component\n */\n\nexport function Component(value, props) {\n\tif (value === Fragment) {\n\t\treturn props.children\n\t}\n\n\t/** Freeze props so isnt directly writable */\n\tfreeze(props)\n\n\t/** Create a callable function to pass `props` */\n\tconst component = Factory(value)\n\n\treturn props === undefined\n\t\t? component\n\t\t: markComponent(propsOverride =>\n\t\t\t\tcomponent(\n\t\t\t\t\tpropsOverride\n\t\t\t\t\t\t? freeze({ ...props, ...propsOverride })\n\t\t\t\t\t\t: props,\n\t\t\t\t),\n\t\t\t)\n}\n\n/**\n * Creates a component that could be called with a props object\n *\n * @template T\n * @param {any} value\n * @returns {Component}\n */\n\nfunction Factory(value) {\n\tif (isComponent(value)) {\n\t\treturn value\n\t}\n\n\tswitch (typeof value) {\n\t\tcase 'string': {\n\t\t\t// string component, 'div' becomes <div>\n\t\t\treturn markComponent(props => createTag(value, props))\n\t\t}\n\t\tcase 'function': {\n\t\t\tif ($isClass in value) {\n\t\t\t\t// class component <MyComponent../>\n\t\t\t\treturn markComponent(props => createClass(value, props))\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * ```js\n\t\t\t * const [Count, setCount] = signal(1)\n\t\t\t * return <Count />\n\t\t\t * ```\n\t\t\t */\n\t\t\tif (isReactive(value)) {\n\t\t\t\treturn markComponent(() => createAnything(value))\n\t\t\t}\n\n\t\t\t// function component <MyComponent../>\n\t\t\t// value = value\n\t\t\treturn markComponent(value)\n\t\t}\n\t\tdefault: {\n\t\t\tif (value instanceof Node) {\n\t\t\t\t// node component <div>\n\t\t\t\treturn markComponent(props => createNode(value, props))\n\t\t\t}\n\n\t\t\treturn markComponent(() => createAnything(value))\n\t\t}\n\t}\n}\n\nexport function createComponent(value) {\n\tconst component = Factory(value)\n\n\treturn props => {\n\t\t/** Freeze props so isnt directly writable */\n\t\tfreeze(props)\n\t\treturn markComponent(() => component(props))\n\t}\n}\n\nfunction createClass(value, props) {\n\tconst i = new value()\n\ti.ready && ready(() => i.ready())\n\ti.cleanup && cleanup(() => i.cleanup())\n\n\treturn i.render(props)\n}\n\nfunction createAnything(value) {\n\treturn value\n}\n\n/**\n * Creates a x/html element from a tagName\n *\n * @template P\n * @param {TagNames} tagName\n * @param {P} props\n * @returns {Element} Element\n */\nfunction createTag(tagName, props) {\n\t/**\n\t * Namespace, use props xmlns or special case svg, math, etc in case\n\t * of missing xmlns attribute\n\t */\n\tconst xmlns = props?.xmlns || NS[tagName]\n\n\treturn withXMLNS(\n\t\txmlns,\n\t\txmlns =>\n\t\t\tcreateNode(\n\t\t\t\txmlns\n\t\t\t\t\t? createElementNS(xmlns, tagName)\n\t\t\t\t\t: createElement(tagName),\n\t\t\t\tprops,\n\t\t\t),\n\t\ttagName,\n\t)\n}\n\nfunction withXMLNS(xmlns, fn, tagName) {\n\tconst nsContext = useXMLNS()\n\n\tif (xmlns && xmlns !== nsContext) {\n\t\t// the xmlns changed, use the new xmlns\n\t\treturn useXMLNS(xmlns, () => fn(xmlns))\n\t}\n\n\t/**\n\t * `foreignObject` children are created with html xmlns (default\n\t * browser behaviour)\n\t */\n\tif (nsContext && tagName === 'foreignObject') {\n\t\treturn useXMLNS(NS.html, () => fn(nsContext))\n\t}\n\n\treturn fn(nsContext)\n}\n\n// PARTIALS\n\nfunction parseHTML(content, xmlns) {\n\tconst template = xmlns\n\t\t? createElementNS(xmlns, 'template')\n\t\t: createElement('template')\n\n\ttemplate.innerHTML = content\n\n\t// xml\n\tif (!template.content) {\n\t\tif (template.childNodes.length === 1) {\n\t\t\treturn template.firstChild\n\t\t}\n\n\t\ttemplate.content = new DocumentFragment()\n\t\ttemplate.content.append(...template.childNodes)\n\t}\n\n\treturn template.content.childNodes.length === 1\n\t\t? template.content.firstChild\n\t\t: template.content\n}\n\nexport function createPartial(content, propsData = nothing) {\n\tlet clone = () => {\n\t\tconst node = withXMLNS(propsData.x, xmlns =>\n\t\t\tparseHTML(content, xmlns),\n\t\t)\n\n\t\tclone = propsData.i\n\t\t\t? importNode.bind(null, node, true)\n\t\t\t: node.cloneNode.bind(node, true)\n\t\treturn clone()\n\t}\n\n\treturn props => {\n\t\t/** Freeze props so isnt directly writable */\n\t\tfreeze(props)\n\t\treturn markComponent(() =>\n\t\t\tassignPartialProps(clone(), props, propsData),\n\t\t)\n\t}\n}\n\nfunction assignPartialProps(node, props, propsData) {\n\tif (props) {\n\t\tconst nodes = []\n\t\twalkElements(node, node => {\n\t\t\tnodes.push(node)\n\n\t\t\tif (nodes.length === propsData.m) return true\n\t\t})\n\n\t\twithXMLNS(propsData.x, xmlns => {\n\t\t\tfor (let i = 0; i < props.length; i++) {\n\t\t\t\tassignProps(nodes[propsData[i] || i], props[i])\n\t\t\t}\n\t\t})\n\t}\n\n\treturn node instanceof DocumentFragment\n\t\t? toArray(node.childNodes)\n\t\t: node\n}\n\n/**\n * Assigns props to an element and creates its children\n *\n * @template P\n * @param {Element} node\n * @param {P} props\n * @returns {Element} Element\n */\nfunction createNode(node, props) {\n\tif (props) {\n\t\tassignProps(node, props)\n\t}\n\treturn node\n}\n\n/**\n * Creates the children for a parent\n *\n * @param {Element} parent\n * @param {Children} child\n * @param {boolean} [relative]\n * @param {Text | undefined} [prev]\n * @returns {Children}\n */\nfunction createChildren(parent, child, relative, prev = undefined) {\n\tswitch (typeof child) {\n\t\t// string/number\n\t\tcase 'string':\n\t\tcase 'number': {\n\t\t\tif (prev instanceof Text) {\n\t\t\t\tprev.nodeValue = child\n\t\t\t\treturn prev\n\t\t\t}\n\t\t\treturn insertNode(parent, createTextNode(child), relative)\n\t\t}\n\n\t\tcase 'function': {\n\t\t\t// component\n\t\t\tif (isComponent(child)) {\n\t\t\t\treturn createChildren(parent, untrack(child), relative)\n\t\t\t}\n\n\t\t\tlet node = []\n\n\t\t\t// signal/memo/external/user provided function\n\t\t\t// needs placeholder to stay in position\n\t\t\tparent = createPlaceholder(\n\t\t\t\tparent,\n\t\t\t\tundefined /*child.name*/,\n\t\t\t\trelative,\n\t\t\t)\n\n\t\t\t// For\n\t\t\tif ($isMap in child) {\n\t\t\t\teffect(() => {\n\t\t\t\t\tnode = toDiff(\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\tchild(child => {\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * Wrap the item with placeholders, for when stuff in\n\t\t\t\t\t\t\t * between moves. If a `Show` adds and removes nodes, we\n\t\t\t\t\t\t\t * dont have a reference to these nodes. By delimiting\n\t\t\t\t\t\t\t * with a shore, we can just handle anything in between\n\t\t\t\t\t\t\t * as a group.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tconst begin = createPlaceholder(\n\t\t\t\t\t\t\t\tparent,\n\t\t\t\t\t\t\t\tundefined /*begin*/,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\tconst end = createPlaceholder(\n\t\t\t\t\t\t\t\tparent,\n\t\t\t\t\t\t\t\tundefined /*end*/,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\treturn [begin, createChildren(end, child, true), end]\n\t\t\t\t\t\t}),\n\t\t\t\t\t)\n\t\t\t\t})\n\n\t\t\t\tcleanup(() => {\n\t\t\t\t\ttoDiff(node)\n\t\t\t\t\tparent.remove()\n\t\t\t\t})\n\t\t\t\treturn [node, parent]\n\t\t\t}\n\n\t\t\t// maybe a signal so needs an effect\n\n\t\t\teffect(() => {\n\t\t\t\tnode = toDiff(node, [\n\t\t\t\t\tcreateChildren(parent, child(), true, node[0]),\n\t\t\t\t])\n\t\t\t})\n\n\t\t\tcleanup(() => {\n\t\t\t\ttoDiff(node)\n\t\t\t\tparent.remove()\n\t\t\t})\n\t\t\t/**\n\t\t\t * A placeholder is created and added to the document but doesnt\n\t\t\t * form part of the children. The placeholder needs to be\n\t\t\t * returned so it forms part of the group of children. If\n\t\t\t * children are moved and the placeholder is not moved with\n\t\t\t * them, then, whenever children update these will be at the\n\t\t\t * wrong place. wrong place: where the placeholder is and not\n\t\t\t * where the children were moved to\n\t\t\t */\n\t\t\treturn [node, parent]\n\t\t}\n\n\t\tcase 'object': {\n\t\t\t// HTMLElement/Text\n\t\t\tif (child instanceof HTMLElement || child instanceof Text) {\n\t\t\t\treturn insertNode(parent, child, relative)\n\t\t\t}\n\n\t\t\t// children/fragments\n\t\t\tif (isArray(child)) {\n\t\t\t\treturn child.length === 1\n\t\t\t\t\t? createChildren(parent, child[0], relative)\n\t\t\t\t\t: child.map(child =>\n\t\t\t\t\t\t\tcreateChildren(parent, child, relative),\n\t\t\t\t\t\t)\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * The value is `null`, as in {null} or like a show returning\n\t\t\t * `null` on the falsy case\n\t\t\t */\n\t\t\tif (child === null) {\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\t// Node/DocumentFragment\n\t\t\tif (child instanceof Node) {\n\t\t\t\t/**\n\t\t\t\t * DocumentFragment are special as only the children get added\n\t\t\t\t * to the document and the document becomes empty. If we dont\n\t\t\t\t * insert them 1 by 1 then we wont have a reference to them\n\t\t\t\t * for deletion on cleanup with node.remove()\n\t\t\t\t */\n\t\t\t\tif (child instanceof DocumentFragment) {\n\t\t\t\t\treturn createChildren(\n\t\t\t\t\t\tparent,\n\t\t\t\t\t\ttoArray(child.childNodes),\n\t\t\t\t\t\trelative,\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\treturn insertNode(parent, child, relative)\n\t\t\t}\n\n\t\t\t// async components\n\t\t\tif ('then' in child) {\n\t\t\t\tconst [value, setValue] = signal(undefined)\n\n\t\t\t\tconst onResult = result =>\n\t\t\t\t\tisConnected(parent) && setValue(result)\n\n\t\t\t\tresolved(child, onResult)\n\n\t\t\t\treturn createChildren(parent, value, relative)\n\t\t\t}\n\n\t\t\t// iterable/Map/Set/NodeList\n\t\t\tif (iterator in child) {\n\t\t\t\treturn createChildren(\n\t\t\t\t\tparent,\n\t\t\t\t\ttoArray(child.values()),\n\t\t\t\t\trelative,\n\t\t\t\t)\n\t\t\t}\n\n\t\t\t// CSSStyleSheet\n\t\t\tif (child instanceof CSSStyleSheet) {\n\t\t\t\t/**\n\t\t\t\t * Custom elements wont report a document unless is already\n\t\t\t\t * connected. So our stylesheet would end on the main document\n\t\t\t\t * intead of the shadodRoot\n\t\t\t\t */\n\t\t\t\tonFixes(() => {\n\t\t\t\t\tif (isConnected(parent)) {\n\t\t\t\t\t\tconst doc = getDocumentForElement(parent)\n\t\t\t\t\t\tadoptedStyleSheetsAdd(doc, child)\n\n\t\t\t\t\t\tcleanup(() => adoptedStyleSheetsRemove(doc, child))\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\t// object.toString fancy objects\n\t\t\treturn createChildren(\n\t\t\t\tparent,\n\t\t\t\t// Object.create(null) would fail to convert to string\n\t\t\t\t'toString' in child ? child.toString() : stringify(child),\n\t\t\t\trelative,\n\t\t\t)\n\t\t}\n\t\tcase 'undefined': {\n\t\t\treturn undefined\n\t\t}\n\t\tdefault: {\n\t\t\t// boolean/bigint/symbol/catch all\n\t\t\t// toString() is needed for `Symbol`\n\t\t\treturn insertNode(\n\t\t\t\tparent,\n\t\t\t\tcreateTextNode(child.toString()),\n\t\t\t\trelative,\n\t\t\t)\n\t\t}\n\t}\n}\n\npropsPlugin(\n\t'children',\n\t(node, propName, propValue) => createChildren(node, propValue),\n\tfalse,\n)\n\n/**\n * Creates placeholder to keep nodes in position\n *\n * @param {Element} parent\n * @param {unknown} text\n * @param {boolean} [relative]\n * @returns {Element}\n */\nconst createPlaceholder = (parent, text, relative) => {\n\treturn insertNode(parent, createTextNode(''), relative)\n\n\t/* dev\n\treturn insertNode(\n\t\tparent,\n\t\tdocument.createComment(\n\t\t\t(text || '') + (relative ? ' relative' : ''),\n\t\t),\n\t\trelative,\n\t) */\n}\n\nconst head = document.head\n\n/**\n * Adds the element to the document\n *\n * @param {Element} parent\n * @param {Element &\n * \tHTMLTitleElement &\n * \tHTMLMetaElement &\n * \tHTMLLinkElement} node\n * @param {boolean} [relative]\n * @returns {Element}\n */\n\nfunction insertNode(parent, node, relative) {\n\t// special case `head`\n\tif (parent === head) {\n\t\tconst name = node.tagName\n\n\t\t// search for tags that should be unique\n\t\tlet prev\n\t\tif (name === 'TITLE') {\n\t\t\tprev = querySelector(head, 'title')\n\t\t} else if (name === 'META') {\n\t\t\tprev =\n\t\t\t\tquerySelector(\n\t\t\t\t\thead,\n\t\t\t\t\t'meta[name=\"' + node.getAttribute('name') + '\"]',\n\t\t\t\t) ||\n\t\t\t\tquerySelector(\n\t\t\t\t\thead,\n\t\t\t\t\t'meta[property=\"' + node.getAttribute('property') + '\"]',\n\t\t\t\t)\n\t\t} else if (name === 'LINK' && node.rel === 'canonical') {\n\t\t\tprev = querySelector(head, 'link[rel=\"canonical\"]')\n\t\t}\n\n\t\t// replace old node if there's any\n\t\tprev ? prev.replaceWith(node) : parent.appendChild(node)\n\t} else {\n\t\trelative ? parent.before(node) : parent.appendChild(node)\n\t}\n\n\treturn node\n}\n\n// RENDERING\n\n/**\n * WARNINGS Removal of the element on where you render/insert into,\n * wont cause disposal of what you render/insert.\n */\n\n/**\n * Inserts children into a parent\n *\n * @param {any} children - Thing to render\n * @param {Element | null} [parent] - Mount point, defaults to\n *   document.body\n * @param {{ clear?: boolean; relative?: boolean }} [options] -\n *   Mounting options\n * @returns {Function} Disposer\n * @url https://pota.quack.uy/render\n */\nexport function render(children, parent, options = nothing) {\n\tconst dispose = root(dispose => {\n\t\tinsert(children, parent, options)\n\t\treturn dispose\n\t})\n\n\t// run dispose when the parent scope disposes\n\tcleanup(dispose)\n\n\treturn dispose\n}\n\n/**\n * @param {any} children - Thing to render\n * @param {Element | null} [parent] - Mount point, defaults to\n *   `document.body`\n * @param {{ clear?: boolean; relative?: boolean }} [options] -\n *   Mounting options\n */\nexport function insert(\n\tchildren,\n\tparent = document.body,\n\toptions = nothing,\n) {\n\tif (options.clear && parent) parent.textContent = ''\n\n\tconst node = createChildren(\n\t\tparent,\n\t\tisComponentable(children) ? Factory(children) : children,\n\t\toptions.relative,\n\t)\n\n\tcleanup(() => toDiff([node].flat(Infinity)))\n\n\treturn node\n}\n\n/**\n * Creates and returns HTML Elements for `children`\n *\n * @param {Children} children\n * @returns {Children}\n * @url https://pota.quack.uy/toHTML\n */\nexport const toHTML = children =>\n\t/**\n\t * DocumentFragment is transformed to an `Array` of `Node/Element`,\n\t * that way we can keep a reference to the nodes. Because when the\n\t * DocumentFragment is used, it removes the nodes from the\n\t * DocumentFragment and then we will lose the reference.\n\t */\n\n\tflat(toHTMLFragment(children).childNodes)\n\n/**\n * Creates and returns a DocumentFragment for `children`\n *\n * @param {Children} children\n * @returns {DocumentFragment}\n * @url https://pota.quack.uy/toHTML\n */\nexport function toHTMLFragment(children) {\n\tconst fragment = new DocumentFragment()\n\tcreateChildren(fragment, children)\n\n\treturn fragment\n}\n\n/**\n * Creates a context and returns a function to get or set the value\n *\n * @param {any} [defaultValue] - Default value for the context\n * @returns {Function & { Provider: ({ value }) => Children }}\n *   Context\n * @url https://pota.quack.uy/Reactivity/Context\n */\n/* #__NO_SIDE_EFFECTS__ */ export function context(\n\tdefaultValue = undefined,\n) {\n\t/** @type {Function & { Provider: ({ value }) => Children }} */\n\tconst ctx = Context(defaultValue)\n\n\t/**\n\t * Sets the `value` for the context\n\t *\n\t * @param {object} props\n\t * @param {any} props.value\n\t * @param {Children} [props.children]\n\t * @returns {Children} Children\n\t * @url https://pota.quack.uy/Reactivity/Context\n\t */\n\tctx.Provider = props =>\n\t\tctx(props.value, () => toHTML(props.children))\n\n\treturn ctx\n}\n\n/**\n * Removes from the DOM `prev` elements not found on `next`\n *\n * @param {Element[]} prev - Array with previous elements\n * @param {Element[]} next - Array with next elements\n * @returns {Element[]}\n */\nfunction toDiff(prev = [], next = []) {\n\tnext = next.flat(Infinity)\n\tfor (let i = 0, item; i < prev.length; i++) {\n\t\titem = prev[i]\n\t\titem &&\n\t\t\t(next.length === 0 || !next.includes(item)) &&\n\t\t\titem.remove()\n\t}\n\treturn next\n}\n","import { makeCallback, map } from '../lib/reactive.js'\nimport {\n\tactiveElement,\n\tdocumentElement,\n\tisConnected,\n} from '../lib/std.js'\n\nimport { onFixes } from '../scheduler.js'\n\n/**\n * Renders reactive values from an signal that returns an Iterable\n * object\n *\n * @template T\n * @param {object} props\n * @param {Each<T>} props.each\n * @param {boolean} [props.restoreFocus] - If the focused element\n *   moves it may lose focus\n * @param {Children} [props.children]\n * @returns {Children}\n * @url https://pota.quack.uy/Components/For\n */\n\nexport const For = props =>\n\tmap(\n\t\t() => {\n\t\t\tprops.restoreFocus && queue()\n\t\t\treturn props.each\n\t\t},\n\t\tmakeCallback(props.children),\n\t\ttrue,\n\t)\n\nlet queued\n\n// because re-ordering the elements trashes focus\nfunction queue() {\n\tif (!queued) {\n\t\tqueued = true\n\n\t\tconst active = activeElement()\n\t\tconst scroll = documentElement.scrollTop\n\n\t\tonFixes(() => {\n\t\t\tqueued = false\n\t\t\t// re-ordering the elements trashes focus\n\t\t\tactive &&\n\t\t\t\tactive !== activeElement() &&\n\t\t\t\tisConnected(active) &&\n\t\t\t\tactive.focus()\n\n\t\t\tdocumentElement.scrollTop = scroll\n\t\t})\n\t}\n}\n","import { signal, cleanup, syncEffect } from '../lib/reactive.js'\nimport { isIterable, toArray } from '../lib/std.js'\n\n/**\n * Returns a `isSelected` function that will return `true` when the\n * argument for it matches the original signal `value`.\n *\n * @param {Signal} value - Signal with the current value\n * @returns {(item: any) => Signal} Signal that you can run with a\n *   value to know if matches the original signal\n */\nexport function useSelector(value) {\n\tconst map = new Map()\n\n\tlet prev = []\n\n\tsyncEffect(() => {\n\t\tconst val = value()\n\n\t\tconst selected = isIterable(val) ? toArray(val.values()) : [val]\n\n\t\t// unselect\n\t\tfor (const value of prev) {\n\t\t\tif (!selected.includes(value)) {\n\t\t\t\tconst current = map.get(value)\n\t\t\t\tcurrent && current.write(false)\n\t\t\t}\n\t\t}\n\n\t\t// select\n\t\tfor (const value of selected) {\n\t\t\tif (!prev.includes(value)) {\n\t\t\t\tconst current = map.get(value)\n\t\t\t\tcurrent && current.write(true)\n\t\t\t}\n\t\t}\n\n\t\tprev = selected\n\t})\n\n\t/**\n\t * Is selected function, it will return `true` when the value\n\t * matches the current signal.\n\t *\n\t * @param {any} item - Values to compare with current\n\t * @returns {Signal} A signal with a boolean value\n\t */\n\treturn function isSelected(item) {\n\t\tlet selected = map.get(item)\n\t\tif (!selected) {\n\t\t\tselected = signal(prev.includes(item))\n\t\t\tselected.counter = 0\n\t\t\tmap.set(item, selected)\n\t\t}\n\n\t\tselected.counter++\n\n\t\tcleanup(() => {\n\t\t\tif (--selected.counter === 0) {\n\t\t\t\tmap.delete(item)\n\t\t\t}\n\t\t})\n\n\t\treturn selected.read\n\t}\n}\n","import { render, signal, batch } from 'pota'\nimport { For } from 'pota/web'\n\nimport { useSelector } from 'pota/plugin/useSelector'\n\nlet idCounter = 1\nconst adjectives = [\n    'pretty',\n    'large',\n    'big',\n    'small',\n    'tall',\n    'short',\n    'long',\n    'handsome',\n    'plain',\n    'quaint',\n    'clean',\n    'elegant',\n    'easy',\n    'angry',\n    'crazy',\n    'helpful',\n    'mushy',\n    'odd',\n    'unsightly',\n    'adorable',\n    'important',\n    'inexpensive',\n    'cheap',\n    'expensive',\n    'fancy',\n  ],\n  colours = [\n    'red',\n    'yellow',\n    'blue',\n    'green',\n    'pink',\n    'brown',\n    'purple',\n    'brown',\n    'white',\n    'black',\n    'orange',\n  ],\n  nouns = [\n    'table',\n    'chair',\n    'house',\n    'bbq',\n    'desk',\n    'car',\n    'pony',\n    'cookie',\n    'sandwich',\n    'burger',\n    'pizza',\n    'mouse',\n    'keyboard',\n  ]\n\nfunction _random(max) {\n  return Math.round(Math.random() * 1000) % max\n}\n\nfunction buildData(count) {\n  let data = new Array(count)\n  for (let i = 0; i < count; i++) {\n    const [label, setLabel, updateLabel] = signal(\n      `${adjectives[_random(adjectives.length)]} ${\n        colours[_random(colours.length)]\n      } ${nouns[_random(nouns.length)]}`,\n    )\n    data[i] = {\n      id: idCounter++,\n      label,\n      updateLabel,\n    }\n  }\n  return data\n}\n\nconst Button = ({ id, text, fn }) => (\n  <div class=\"col-sm-6 smallpad\">\n    <button\n      id={id}\n      class=\"btn btn-primary btn-block\"\n      type=\"button\"\n      onClick={fn}\n    >\n      {text}\n    </button>\n  </div>\n)\n\nconst App = () => {\n  const [data, setData, updateData] = signal([]),\n    [selected, setSelected] = signal(null),\n    run = () => setData(buildData(1000)),\n    runLots = () => {\n      setData(buildData(10000))\n    },\n    add = () => updateData(d => [...d, ...buildData(1000)]),\n    update = () =>\n      batch(() => {\n        for (let i = 0, d = data(), len = d.length; i < len; i += 10)\n          d[i].updateLabel(l => l + ' !!!')\n      }),\n    swapRows = () => {\n      const d = data().slice()\n      if (d.length > 998) {\n        let tmp = d[1]\n        d[1] = d[998]\n        d[998] = tmp\n        setData(d)\n      }\n    },\n    clear = () => setData([]),\n    remove = id =>\n      updateData(d => {\n        const idx = d.findIndex(datum => datum.id === id)\n        d.splice(idx, 1)\n        return [...d]\n      }),\n    isSelected = useSelector(selected)\n\n  return (\n    <div class=\"container\">\n      <div class=\"jumbotron\">\n        <div class=\"row\">\n          <div class=\"col-md-6\">\n            <h1>pota Keyed</h1>\n          </div>\n          <div class=\"col-md-6\">\n            <div class=\"row\">\n              <Button\n                id=\"run\"\n                text=\"Create 1,000 rows\"\n                fn={run}\n              />\n              <Button\n                id=\"runlots\"\n                text=\"Create 10,000 rows\"\n                fn={runLots}\n              />\n              <Button\n                id=\"add\"\n                text=\"Append 1,000 rows\"\n                fn={add}\n              />\n              <Button\n                id=\"update\"\n                text=\"Update every 10th row\"\n                fn={update}\n              />\n              <Button\n                id=\"clear\"\n                text=\"Clear\"\n                fn={clear}\n              />\n              <Button\n                id=\"swaprows\"\n                text=\"Swap Rows\"\n                fn={swapRows}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <table\n        class=\"table table-hover table-striped test-data\"\n        onClick={e => {\n          const element = e.target\n          const { selectRow, removeRow } = element\n          if (selectRow !== undefined) {\n            setSelected(selectRow)\n          } else if (removeRow !== undefined) {\n            remove(removeRow)\n          }\n        }}\n      >\n        <tbody>\n          <For each={data}>\n            {row => {\n              const { id, label } = row\n\n              return (\n                <tr class:danger={isSelected(id)}>\n                  <td\n                    class=\"col-md-1\"\n                    textContent={id}\n                  />\n                  <td class=\"col-md-4\">\n                    <a\n                      textContent={label}\n                      prop:selectRow={id}\n                    />\n                  </td>\n                  <td class=\"col-md-1\">\n                    <a>\n                      <span\n                        class=\"glyphicon glyphicon-remove\"\n                        aria-hidden=\"true\"\n                        prop:removeRow={id}\n                      />\n                    </a>\n                  </td>\n                  <td class=\"col-md-6\" />\n                </tr>\n              )\n            }}\n          </For>\n        </tbody>\n      </table>\n      <span\n        class=\"preloadicon glyphicon glyphicon-remove\"\n        aria-hidden=\"true\"\n      />\n    </div>\n  )\n}\n\nrender(App, document.getElementById('main'))\n"],"names":["global","globalThis","window","CSSStyleSheet","document","DocumentFragment","Object","Symbol","queueMicrotask","assign","entries","freeze","getOwnPropertyDescriptors","getPrototypeOf","groupBy","isArray","Array","toArray","from","iterator","stringify","JSON","resolved","promise","onDone","then","catch","isConnected","node","activeElement","documentElement","call","fns","fn","bind","createElement","createElementNS","createTextNode","importNode","createTreeWalker","empty","create","flat","arr","length","withState","state","cacheStore","withCache","cache","thing","get","walkElements","walk","currentNode","nodeType","nextNode","getDocumentForElement","getRootNode","ownerDocument","getSetterNamesFromPrototype","object","set","Set","descriptors","key","add","getValue","value","isFunction","isIterable","isObject","isNullUndefined","undefined","isString","isPromise","noop","nothing","querySelector","query","removeFromArray","array","index","indexOf","splice","DataStore","constructor","kind","store","k","v","has","target","defaults","o","delete","Map","classListAdd","className","classList","classListRemove","remove","adoptedStyleSheetsGet","adoptedStyleSheets","adoptedStyleSheetsAdd","styleSheet","push","adoptedStyleSheetsRemove","sheet","css","replace","$isComponent","$isClass","$isReactive","$isMap","prefix","NS","__proto__","svg","math","html","xlink","CLEAN","STALE","CHECK","Owner","Listener","Updates","Effects","Time","Root","owner","owned","cleanups","context","options","dispose","i","Computation","updatedAt","sources","sourceSlots","update","time","prevOwner","prevListener","err","source","observers","observer","slot","pop","observerSlots","Effect","user","batch","SyncEffect","Signal","save","prev","read","markReactive","sourceSlot","write","equals","runUpdates","pure","downstream","a","b","root","signal","initialValue","effect","syncEffect","runWithOwner","untrack","cleanup","runTop","upstream","ancestors","updates","init","wait","res","runQueue","effects","runEffects","queue","userLength","ignore","Context","defaultValue","id","useContext","newValue","cb","args","isReactive","withValue","withPrevValue","val","map","list","callback","sort","duplicates","runId","rows","clear","Row","item","isDupe","disposer","nodes","begin","end","all","mapper","items","hasPrev","row","dupes","unsorted","every","includes","usort","before","nodesFromRow","after","current","previous","previousSibling","nextSibling","isComponent","isComponentable","makeCallback","children","callbacks","markComponent","child","r","addEventListener","type","handler","removeEventListener","ownedEvent","handleEvent","e","added","reset","priority","run","q","onFixes","onProps","onRef","onMount","ready","setEventNS","name","props","localName","ns","eventName","startsWith","toLowerCase","slice","plugins","pluginsNS","propsPlugin","propName","onMicrotask","plugin","propsPluginNS","NSName","propsPluginBoth","setAttributeNS","setAttribute","_setAttribute","removeAttributeNS","removeAttribute","setPropertyNS","setProperty","_setProperty","setUnknown","_setUnknown","setters","elementSetters","element","tagName","builtIn","elements","builtInSetters","proto","Element","nextProto","prototype","Node","setBoolNS","setBool","_setBool","setStyle","setNodeStyle","style","setStyleNS","setVarNS","setStyleValue","cssText","_setStyleValue","removeProperty","setClass","setClassList","setClassNS","setElementClass","_setClassListValue","trim","split","setValue","_setValue","textContent","randomId","crypto","getRandomValues","BigUint64Array","toString","setCSS","setNodeCSS","setRef","setOnMount","setUnmount","assignProps","assignProp","event","useXMLNS","Factory","createTag","createClass","createAnything","createNode","createComponent","component","render","xmlns","withXMLNS","nsContext","parseHTML","content","template","innerHTML","childNodes","firstChild","append","createPartial","propsData","clone","x","cloneNode","assignPartialProps","m","createChildren","parent","relative","Text","nodeValue","insertNode","createPlaceholder","toDiff","HTMLElement","onResult","result","values","doc","propValue","text","head","getAttribute","rel","replaceWith","appendChild","insert","body","Infinity","toHTML","toHTMLFragment","fragment","ctx","Provider","next","For","restoreFocus","each","queued","active","scroll","scrollTop","focus","useSelector","selected","isSelected","counter","_For","_createComponent","idCounter","adjectives","colours","nouns","_random","max","Math","round","random","buildData","count","data","label","setLabel","updateLabel","Button","_div","onClick","_Button","App","setData","updateData","setSelected","runLots","d","len","l","swapRows","tmp","idx","findIndex","datum","_div2","selectRow","removeRow","_tr","getElementById"],"mappings":"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"}