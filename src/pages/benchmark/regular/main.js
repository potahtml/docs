!function(){"use strict";const t=globalThis,e=t.Symbol,n=t.Object,s=n.assign,o=t=>"function"==typeof t,r=e(),i=e(),c=e(),l=e(),u="http://www.w3.org/",a={__proto__:null,svg:u+"2000/svg",math:u+"1998/Math/MathML",html:u+"1999/xhtml",xlink:u+"1999/xlink"};const d=0,h=1,f=2;let p,b,v=null,g=null,m=0;class w{owner;owned;cleanups;context;constructor(t){this.owner=t,this.context=t?.context}dispose(){let t;const{owned:e,cleanups:n}=this;if(e){for(t=e.length-1;t>=0;t--)e[t].dispose();e.length=0}if(n){for(t=n.length-1;t>=0;t--)n[t]();n.length=0}}}class y extends w{state=h;updatedAt=0;fn;sources;sourceSlots;constructor(t,e){super(t),this.fn=e,t&&(t.owned?t.owned.push(this):t.owned=[this])}update(){this.dispose();const t=m,e=p,n=b;b=p=this;try{this.fn()}catch(e){throw this.updatedAt=t+1,e}finally{p=e,b=n}this.updatedAt<=t&&(this.updatedAt=t)}dispose(){const{sources:t,sourceSlots:e}=this;if(t){let n,s,o,r,i;for(;t.length;)n=t.pop(),s=n.observers,o=e.pop(),s&&s.length&&(r=s.pop(),i=n.observerSlots.pop(),o<s.length&&(r.sourceSlots[i]=o,s[o]=r,n.observerSlots[o]=i))}super.dispose(),this.state=d}}class x extends y{user=!0;constructor(t,e){super(t,e),g?g.push(this):C((()=>this.update()))}}class S extends y{constructor(t,e){super(t,e),C((()=>this.update()))}}class k{value;observers;observerSlots;constructor(t,e){var n;this.value=t,e&&(s(this,e),this.save&&(this.prev=t)),this.read=((n=this.read.bind(this))[c]=void 0,n),this.write=this.write.bind(this),this.update=this.update.bind(this)}read(){if(b){const t=this.observers?this.observers.length:0;b.sources?(b.sources.push(this),b.sourceSlots.push(t)):(b.sources=[this],b.sourceSlots=[t]),this.observers?(this.observers.push(b),this.observerSlots.push(b.sources.length-1)):(this.observers=[b],this.observerSlots=[b.sources.length-1])}return this.value}write(t){return(!1===this.equals||!this.equals(this.value,t))&&(this.save&&(this.prev=this.value),this.value=t,this.observers&&this.observers.length&&T((()=>{for(let t,e=0;e<this.observers.length;e++)t=this.observers[e],t.state===d&&(t.pure?v.push(t):g.push(t),t.observers&&q(t)),t.state=h})),!0)}update(t){return"function"==typeof t&&(t=t(this.value)),this.write(t)}equals(t,e){return t===e}*[e.iterator](){yield this.read,yield this.write,yield this.update}}function A(t){const e=p,n=b,s=new w(p);p=s,b=void 0;try{return T((()=>t(s.dispose.bind(s))),!0)}finally{p=e,b=n}}function M(t,e=void 0){return new k(t,e)}function N(t){return new x(p,t)}const C=T;function L(t){return p&&(p.cleanups?p.cleanups.push(t):p.cleanups=[t]),t}function E(t){switch(t.state){case d:return;case f:return I(t)}const e=[];do{t.state&&e.push(t),t=t.owner}while(t&&t.updatedAt<m);for(let n,s=e.length-1;s>=0;s--)switch((t=e[s]).state){case h:t.update();break;case f:n=v,v=null,T((()=>I(t,e[0]))),v=n}}function T(t,e=!1){if(v)return t();let n=!1;e||(v=[]),g?n=!0:g=[],m++;try{const e=t();if(v&&(!function(t){for(let e=0;e<t.length;e++)E(t[e])}(v),v=null),!n){const t=g;g=null,t.length&&T((()=>function(t){let e,n,s=0;for(e=0;e<t.length;e++)n=t[e],n.user?t[s++]=n:E(n);for(e=0;e<s;e++)E(t[e])}(t)))}return e}catch(t){throw n||(g=null),v=null,t}}function I(t,e){t.state=d;for(let n,s=0;s<t.sources.length;s++)if(n=t.sources[s],n.sources)switch(n.state){case h:n!==e&&n.updatedAt<m&&E(n);break;case f:I(n,e)}}function q(t){for(let e,n=0;n<t.observers.length;n++)e=t.observers[n],e.state===d&&(e.state=f,e.pure?v.push(e):g.push(e),e.observers&&q(e))}function j(t=void 0){const n=e();return W.bind(null,n,t)}function W(t,e,n,s){if(void 0===n)return p?.context&&void 0!==p.context[t]?p.context[t]:e;{let e;return function(t){new S(p,t)}((()=>{p.context={...p.context,[t]:n},e=s()})),e}}const O=()=>{const t=p;return e=>o(e)?function(t,e){const n=p,s=b;p=t,b=void 0;try{return T(e,!0)}catch(t){throw t}finally{p=n,b=s}}(t,e):e},_=t=>{for(;"function"==typeof t;)t=t();return t},z=n.groupBy;function D(t,e){const n=t.indexOf(e);return-1!==n&&t.splice(n,1),t}function R(t){const{begin:e,end:n}=t,s=[e];let o=e;for(;o!==n;)o=o.nextSibling,s.push(o);return s}const F=(t,e)=>o(t)?N((()=>{e(_(t))})):e(t),H=Array.isArray,P=(t,...e)=>H(t)?t[0](...e,...t.slice(1)):t(...e),U=t=>null!==t&&"object"==typeof t,$=n.create.bind(null,null),B=t=>1===t.length?t[0]:t,K=n.freeze,J=t=>null==t,G=e.iterator,Q=queueMicrotask,V=K($()),X=JSON.stringify,Y=Array.from;const Z=t=>o(t)&&c in t,tt=t=>o(t)&&r in t,et=t=>!Z(t)&&(o(t)||!H(t)&&U(t)&&!t.then);function nt(t){return t[r]=void 0,t}let st,ot;const rt=[];function it(){ot=[[],[],[]],st=!1}function ct(t,e){st||(st=!0,Q(lt)),ot[t].push(e)}function lt(){const t=ot;it();for(const e of t)for(const t of e)P(t);for(const t of rt)P(t)}it();const ut=t=>ct(1,t),at=$(),dt=$(),ht=(t,e,n=!0)=>{pt(at,t,e,n)},ft=(t,e,n=!0)=>{pt(dt,t,e,n)},pt=(t,e,n,s)=>{t[e]=s?(...t)=>{const e=O();Q((()=>e((()=>n(...t)))))}:n},bt=(t,e,n={bubbles:!0,cancelable:!0,composed:!0})=>t.dispatchEvent(new CustomEvent(e,n)),vt=(t,e,n)=>F(n,(n=>gt(t,e,n)));function gt(t,e,n){J(n)?t[e]=null:t[e]=n,"value"===e&&(bt(t,"input"),bt(t,"change"))}const mt=(t,e,n,s)=>F(n,(n=>wt(t,e,n,s)));function wt(t,e,n,s){J(n)?s&&a[s]?t.removeAttributeNS(a[s],e):t.removeAttribute(e):s&&a[s]?t.setAttributeNS(a[s],e,n):t.setAttribute(e,n)}const yt=(t,e,n)=>F(n,(n=>xt(t,e,n))),xt=(t,e,n)=>n?t.setAttribute(e,""):t.removeAttribute(e);function St(t,e){if(U(e)){let n;for(n in e)kt(t,n,e[n]);return}const n=typeof e;"string"!==n?"function"!==n||N((()=>{St(t,_(e))})):t.cssText=e}const kt=(t,e,n)=>F(n,(n=>At(t,e,n))),At=(t,e,n)=>J(n)?t.removeProperty(e):t.setProperty(e,n);function Mt(t,e){switch(typeof e){case"string":Ct(t,e,!0);break;case"object":{let n;for(n in e)Nt(t,n,e[n]);break}case"function":F(e,(e=>Mt(t,e)))}}const Nt=(t,e,n)=>F(n,(n=>Ct(t,e,n))),Ct=(t,e,n)=>n?t.classList.add(...e.trim().split(/\s+/)):t.classList.remove(e),Lt=(t,e,n,s)=>n(t),Et=(t,e,n,s)=>ct(0,[n,t]),Tt=(t,e,n,s)=>L((()=>n(t))),It=$();function qt(t){return t in It||(t.startsWith("on")&&t.toLowerCase()in window?It[t]=t.slice(2).toLowerCase():It[t]=void 0),It[t]}function jt(t,e,n){t.addEventListener(e,n,o(n)?void 0:n);const s=()=>function(t,e,n){return t.removeEventListener(e,n),()=>jt(t,e,n)}(t,e,n);return L(s),s}const Wt=(t,e,n,s)=>F(n,(n=>Ot(t,e,n,s))),Ot=(t,e,n,s)=>{U(n)?gt(t,e,n):"boolean"!=typeof n||e.includes("-")?(wt(t,e,n,s),J(n)&&gt(t,e,n)):gt(t,e,n)};ht("style",((t,e,n,s)=>St(t.style,n)),!1),ft("style",((t,e,n,s,o,r)=>St(t.style,U(n)?n:{[o]:n})),!1),ft("var",((t,e,n,s,o,r)=>St(t.style,{["--"+o]:n})),!1),ht("class",((t,e,n,s)=>(t=>"string"==typeof t)(n)?t.setAttribute("class",n):Mt(t,n)),!1),ft("class",((t,e,n,s,o,r)=>U(n)?Mt(t,n):Nt(t,o,n)),!1);for(const t of["value","textContent","innerText","innerHTML"])ht(t,vt,!1);ft("prop",((t,e,n,s,o,r)=>vt(t,o,n)),!1),ft("attr",((t,e,n,s,o,r)=>mt(t,o,n)),!1),ft("bool",((t,e,n,s,o,r)=>yt(t,o,n)),!1),ht("onMount",Et,!1),ft("onMount",Et,!1),ht("onUnmount",Tt,!1),ft("onUnmount",Tt,!1),ht("ref",Lt,!1),ft("ref",Lt,!1),ft("on",((t,e,n,s,o,r)=>jt(t,o,n)),!1);const _t=(t,e)=>"is"in e||t.localName?.includes("-");function zt(t,e){let n,s;for(n in e){if(s=e[n],n in at){at[n](t,n,s,e);continue}let o=qt(n);if(o)jt(t,o,s);else if(n.includes(":")){let[r,i]=n.split(":");if(r in dt){dt[r](t,n,s,e,i,r);continue}if(o=qt(r),o){jt(t,o,s);continue}_t(t,e)?gt(t,n,s):Wt(t,n,s,r)}else _t(t,e)?gt(t,n,s):Wt(t,n,s)}}const Dt=t=>document[t].bind(document),Rt=Dt("createElement"),Ft=Dt("createElementNS"),Ht=Dt("createTextNode"),Pt=document.adoptedStyleSheets;function Ut(t=[],e=[]){e=H(e)?e.flat(1/0):[e];for(let n,s=0;s<t.length;s++)n=t[s],n&&(0===e.length||!e.includes(n))&&n.remove();return e}function $t(){const t=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT);return($t=()=>t)()}!function(){const t=new WeakMap,e=t.get.bind(t),n=t.set.bind(t);t.has.bind(t),t.delete.bind(t)}();const Bt=new Map;const Kt=new Map,Jt=new WeakMap,Gt=function(t){const e=j(t);return e.Provider=t=>e(t.value,(()=>le(t.children))),e}(),Qt=e();function Vt(t,e){return t===Qt?e.children:(K(e),void 0===e?Xt(t):nt(Xt(t).bind(null,e)))}function Xt(t){if(tt(t))return t;const e=U(t);let n=e?Jt.get(t):Kt.get(t);if(n)return n;switch(typeof t){case"string":n=te.bind(null,t);break;case"function":if(i in t){n=Yt.bind(null,t);break}if(Z(t)){n=Zt.bind(null,t);break}n=t;break;default:if(t instanceof Node){n=se.bind(null,t);break}n=Zt.bind(null,t)}return e?Jt.set(t,n):Kt.set(t,n),nt(n)}function Yt(t,e){const n=new t;return n.ready&&ut(n.ready.bind(n)),n.cleanup&&L(n.cleanup.bind(n)),n.render(e)}function Zt(t,e){return t}function te(t,e){return ee(e?.xmlns||a[t],(n=>se(n?Ft(n,t):Rt(t),e)),t)}function ee(t,e,n){const s=Gt();return t&&t!==s?Gt(t,(()=>e(t))):s&&"foreignObject"===n?Gt(a.html,(()=>e(a.html))):e(s)}function ne(t,e){return nt((()=>ee(e?e[0].xmlns:void 0,(n=>{const s=function(t,e){const n=Bt.get(t);if(n)return n.cloneNode(!0);let s=e?Ft(e,"template"):Rt("template");return s.innerHTML=t,s=e?s.firstChild:1===s.content.childNodes.length?s.content.firstChild:s.content,Bt.set(t,s),s.cloneNode(!0)}(t,n);if(e){const t=[];let n;1===s.nodeType&&s.hasAttribute("pota")&&(t.push(s),s.removeAttribute("pota"));const o=$t();for(o.currentNode=s;n=o.nextNode();)n.hasAttribute("pota")&&(t.push(n),n.removeAttribute("pota"));let r=0;for(const n of t)zt(n,e[r++])}return s}))))}function se(t,e){return e&&zt(t,e),t}function oe(t,e,n){switch(typeof e){case"string":case"number":return ce(t,Ht(e),n);case"function":{if(tt(e))return oe(t,function(t){if(void 0===b)return t();const e=b;b=void 0;try{return t()}finally{b=e}}(e),n);let s=[];return t=re(t,void 0,n),l in e?(N((()=>{s=Ut(s,e((e=>{const n=re(t,void 0,!0),s=re(t,void 0,!0);return[n,oe(s,e,!0),s]})))})),L((()=>{Ut(s),t.remove()})),[s,t]):(N((()=>{s=Ut(s,oe(t,e(),!0))})),L((()=>{Ut(s),t.remove()})),[s,t])}case"object":if(H(e))return 1===e.length?oe(t,e[0],n):e.map((e=>oe(t,e,n)));if(e instanceof Node)return e instanceof DocumentFragment?oe(t,Y(e.childNodes),n):ce(t,e,n);if(null===e)return;if("then"in e){const[s,o]=M(void 0),r=e=>t.isConnected&&o(e);return e.then(r).catch(r),oe(t,s,n)}return G in e?oe(t,Y(e.values()),n):e instanceof CSSStyleSheet?(Pt.push(e),void L((()=>D(Pt,e)))):oe(t,"toString"in e?e.toString():X(e),n);case"undefined":return;default:return ce(t,Ht(e.toString()),n)}}ht("children",((t,e,n)=>oe(t,n)),!1);const re=(t,e,n)=>ce(t,Ht(""),n);let ie;function ce(t,e,n){if(t===document.head){if(!ie){const t=document.head;ie=t.querySelector.bind(t)}const n=e.tagName;let s;"TITLE"===n?s=ie("title"):"META"===n?s=ie('meta[name="'+e.getAttribute("name")+'"]')||ie('meta[property="'+e.getAttribute("property")+'"]'):"LINK"===n&&"canonical"===e.rel&&(s=ie('link[rel="canonical"]')),s?s.replaceWith(e):t.appendChild(e)}else n?t.before(e):t.appendChild(e);return e}const le=t=>B(function(t){const e=new DocumentFragment;return oe(e,t),e}(t).childNodes);const ue=t=>o(t)?Z(t)?e=>{const n=t();return o(n)?Z(n)?n():n(...e):n}:e=>t(...e):()=>t;$();const ae=t=>function(t,e,n){const s=new Map,o=new Map;let r=0,i=[],c=[];function u(){for(let t=0;t<c.length;t++)c[t].dispose(!0);s.clear(),o.clear(),i.length=0,c.length=0}L(u);class a{constructor(t,e,n,s){this.runId=-1,this.item=t,this.index=e,this.isDupe=s,this.disposer=void 0,this.nodes=A((s=>(this.disposer=s,n(t,e))))}get begin(){return this.nodes[0]}get end(){return this.nodes[this.nodes.length-1]}dispose(t){if(void 0===t)if(this.isDupe){const t=o.get(this.item);1===t.length?o.delete(this.item):D(t,this)}else s.delete(this.item);this.disposer()}}function d(l){const d=l?(t,n)=>l(e(t,n),n):e,h=(_(t)||[]).entries();r++,i=[];const f=c.length;for(const[t,e]of h){let n=f?s.get(e):void 0;if(void 0===n)n=new a(e,t,d,!1),s.set(e,n);else if(n.runId===r){let s=o.get(e);s||(s=[],o.set(e,s));for(let t=0;t<s.length;t++)if(s[t].runId!==r){n=s[t];break}n.runId===r&&(n=new a(e,t,d,!0),s.push(n))}n.runId=r,n.index=t,i.push(n)}if(0===i.length)u();else for(let t=0;t<c.length;t++)c[t].runId!==r&&c[t].dispose();if(n&&i.length>1&&c.length){const{a:t,b:e}=z(i,((t,e)=>i[e]===c[e]?"a":"b"));if(t&&e&&t.length&&e.length&&e.length<t.length&&e.every((t=>c.includes(t))))for(const n of e)for(const e of t){if(n.index===e.index-1){e.begin.before(...R(n));break}if(n.index===e.index+1){e.end.after(...R(n));break}}let n=i[i.length-1];for(let t=i.length-1;t>0;t--){const e=i[t-1];n.begin.previousSibling!==e.end&&n.begin.before(...R(e)),n=e}}return c=i,i.map((t=>t.nodes))}return d[l]=void 0,d}(t.each,function(t){t=H(t)?B(t):t;const e=H(t)?t.map(ue):ue(t);return H(t)?nt(((...t)=>e.map((e=>e(t))))):nt(((...t)=>e(t)))}(t.children),!0);let de=1;const he=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],fe=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],pe=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"];function be(t){return Math.round(1e3*Math.random())%t}function ve(t){let e=new Array(t);for(let n=0;n<t;n++){const[t,s]=M(`${he[be(he.length)]} ${fe[be(fe.length)]} ${pe[be(pe.length)]}`);e[n]={id:de++,label:t,setLabel:s}}return e}const ge=({id:t,text:e,fn:n})=>ne('<div class="col-sm-6 smallpad"><button pota class="btn btn-primary btn-block" type=button></button></div>',[{id:t,onClick:n,children:e}]);!function(t,e,n=V){const s=A((s=>(function(t,e=document.body,n){n.clear&&e&&(e.textContent="");const s=oe(e,et(t)?Xt(t):t,n.relative);L((()=>Ut([s].flat(1/0))))}(t,e,n),s)));L(s)}((()=>{const[t,e]=M([]),[n,s]=M(null),o=function(t){const e=new Map;let n;return N((()=>{const s=t();if(s===n)return;const o=e.get(n);o&&o.write(!1);const r=e.get(s);r&&r.write(!0),n=s})),function(n){let s=e.get(n);return s||(s=M(n===t()),s.counter=0,e.set(n,s)),s.counter++,L((()=>{0==--s.counter&&e.delete(n)})),s.read}}(n);return ne('<div class=container><div class=jumbotron><div class=row><div class=col-md-6><h1>pota Keyed</h1></div><div class=col-md-6><div pota class=row></div></div></div></div><table pota class="table table-hover table-striped test-data"><tbody pota></tbody></table><span class="preloadicon glyphicon glyphicon-remove" aria-hidden=true></span></div>',[{children:[Vt(ge,{id:"run",text:"Create 1,000 rows",fn:()=>e(ve(1e3))}),Vt(ge,{id:"runlots",text:"Create 10,000 rows",fn:()=>{e(ve(1e4))}}),Vt(ge,{id:"add",text:"Append 1,000 rows",fn:()=>e((t=>[...t,...ve(1e3)]))}),Vt(ge,{id:"update",text:"Update every 10th row",fn:()=>C((()=>{for(let e=0,n=t(),s=n.length;e<s;e+=10)n[e].setLabel((t=>t+" !!!"))}))}),Vt(ge,{id:"clear",text:"Clear",fn:()=>e([])}),Vt(ge,{id:"swaprows",text:"Swap Rows",fn:()=>{const n=t().slice();if(n.length>998){let t=n[1];n[1]=n[998],n[998]=t,e(n)}}})]},{onClick:t=>{const n=t.target;var o;void 0!==n.setSelected?s(n.setSelected):void 0!==n.removeRow&&(o=n.removeRow,e((t=>{const e=t.findIndex((t=>t.id===o));return t.splice(e,1),[...t]})))}},{children:Vt(ae,{each:t,children:t=>{const{id:e,label:n}=t;return ne('<tr pota><td pota class=col-md-1></td><td class=col-md-4><a pota></a></td><td class=col-md-1><a><span pota class="glyphicon glyphicon-remove" aria-hidden=true></span></a></td><td class=col-md-6></td></tr>',[{"class:danger":o(e)},{textContent:e},{textContent:n,"prop:setSelected":e},{"prop:removeRow":e}])}})}])}),document.getElementById("main"))}();
//# sourceMappingURL=main.js.map
