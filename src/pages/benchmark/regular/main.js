!function(){"use strict";const e=globalThis,t=e.Symbol,n=e.Object,s=n.assign,o=e=>"function"==typeof e,r=t(),i=t(),c=t(),l=t(),u="http://www.w3.org/",a={__proto__:null,svg:u+"2000/svg",math:u+"1998/Math/MathML",html:u+"1999/xhtml",xlink:u+"1999/xlink"};const d=0,h=1,f=2;let p,b,v=null,g=null,m=0;class w{owner;owned;cleanups;context;constructor(e){this.owner=e,this.context=e?.context}dispose(){let e;const{owned:t,cleanups:n}=this;if(t){for(e=t.length-1;e>=0;e--)t[e].dispose();t.length=0}if(n){for(e=n.length-1;e>=0;e--)n[e]();n.length=0}}}class y extends w{state=h;updatedAt=0;fn;sources;sourceSlots;constructor(e,t){super(e),this.fn=t,e&&(e.owned?e.owned.push(this):e.owned=[this])}update(){this.dispose();const e=m,t=p,n=b;b=p=this;try{this.fn()}catch(t){throw this.updatedAt=e+1,t}finally{p=t,b=n}this.updatedAt<=e&&(this.updatedAt=e)}dispose(){const{sources:e,sourceSlots:t}=this;if(e){let n,s,o,r,i;for(;e.length;)n=e.pop(),s=n.observers,o=t.pop(),s&&s.length&&(r=s.pop(),i=n.observerSlots.pop(),o<s.length&&(r.sourceSlots[i]=o,s[o]=r,n.observerSlots[o]=i))}super.dispose(),this.state=d}}class x extends y{user=!0;constructor(e,t){super(e,t),g?g.push(this):N((()=>this.update()))}}class S extends y{constructor(e,t){super(e,t),N((()=>this.update()))}}class k{value;observers;observerSlots;constructor(e,t){var n;this.value=e,t&&(s(this,t),this.save&&(this.prev=e)),this.read=((n=this.read.bind(this))[c]=void 0,n),this.write=this.write.bind(this),this.update=this.update.bind(this)}read(){if(b){const e=this.observers?this.observers.length:0;b.sources?(b.sources.push(this),b.sourceSlots.push(e)):(b.sources=[this],b.sourceSlots=[e]),this.observers?(this.observers.push(b),this.observerSlots.push(b.sources.length-1)):(this.observers=[b],this.observerSlots=[b.sources.length-1])}return this.value}write(e){return(!1===this.equals||!this.equals(this.value,e))&&(this.save&&(this.prev=this.value),this.value=e,this.observers&&this.observers.length&&E((()=>{for(let e,t=0;t<this.observers.length;t++)e=this.observers[t],e.state===d&&(e.pure?v.push(e):g.push(e),e.observers&&q(e)),e.state=h})),!0)}update(e){return"function"==typeof e&&(e=e(this.value)),this.write(e)}equals(e,t){return e===t}*[t.iterator](){yield this.read,yield this.write,yield this.update}}function A(e){const t=p,n=b,s=new w(p);p=s,b=void 0;try{return E((()=>e(s.dispose.bind(s))),!0)}finally{p=t,b=n}}function M(e,t=void 0){return new k(e,t)}function C(e){return new x(p,e)}const N=E;function L(e){return p&&(p.cleanups?p.cleanups.push(e):p.cleanups=[e]),e}function I(e){switch(e.state){case d:return;case f:return T(e)}const t=[];do{e.state&&t.push(e),e=e.owner}while(e&&e.updatedAt<m);for(let n,s=t.length-1;s>=0;s--)switch((e=t[s]).state){case h:e.update();break;case f:n=v,v=null,E((()=>T(e,t[0]))),v=n}}function E(e,t=!1){if(v)return e();let n=!1;t||(v=[]),g?n=!0:g=[],m++;try{const t=e();if(v&&(!function(e){for(let t=0;t<e.length;t++)I(e[t])}(v),v=null),!n){const e=g;g=null,e.length&&E((()=>function(e){let t,n,s=0;for(t=0;t<e.length;t++)n=e[t],n.user?e[s++]=n:I(n);for(t=0;t<s;t++)I(e[t])}(e)))}return t}catch(e){throw n||(g=null),v=null,e}}function T(e,t){e.state=d;for(let n,s=0;s<e.sources.length;s++)if(n=e.sources[s],n.sources)switch(n.state){case h:n!==t&&n.updatedAt<m&&I(n);break;case f:T(n,t)}}function q(e){for(let t,n=0;n<e.observers.length;n++)t=e.observers[n],t.state===d&&(t.state=f,t.pure?v.push(t):g.push(t),t.observers&&q(t))}function j(e=void 0){const n=t();return z.bind(null,n,e)}function z(e,t,n,s){if(void 0===n)return p?.context&&void 0!==p.context[e]?p.context[e]:t;{let t;return function(e){new S(p,e)}((()=>{p.context={...p.context,[e]:n},t=s()})),t}}const D=()=>{const e=p;return t=>o(t)?function(e,t){const n=p,s=b;p=e,b=void 0;try{return E(t,!0)}catch(e){throw e}finally{p=n,b=s}}(e,t):t},O=e=>{for(;"function"==typeof e;)e=e();return e},R=n.groupBy;function _(e,t){const n=e.indexOf(t);return-1!==n&&e.splice(n,1),e}function P(e){const{begin:t,end:n}=e,s=[t];let o=t;for(;o!==n;)o=o.nextSibling,s.push(o);return s}const U=(e,t)=>o(e)?C((()=>{t(O(e))})):t(e),W=Array.isArray,$=(e,...t)=>W(e)?e[0](...t,...e.slice(1)):e(...t),B=e=>null!==e&&"object"==typeof e,F=n.create.bind(null,null),H=e=>1===e.length?e[0]:e,K=n.freeze,J=e=>null==e,G=t.iterator,Q=queueMicrotask,V=K(F()),X=JSON.stringify,Y=Array.from,Z=e=>o(e)&&c in e,ee=e=>o(e)&&r in e,te=e=>!Z(e)&&(o(e)||!W(e)&&B(e)&&!e.then);function ne(e){return e[r]=void 0,e}let se,oe;const re=[];function ie(){oe=[[],[],[]],se=!1}function ce(e,t){se||(se=!0,Q(le)),oe[e].push(t)}function le(){const e=oe;ie();for(const t of e)for(const e of t)$(e);for(const e of re)$(e)}ie();const ue=e=>ce(1,e),ae=F(),de=F(),he=(e,t,n=!0)=>{pe(ae,e,t,n)},fe=(e,t,n=!0)=>{pe(de,e,t,n)},pe=(e,t,n,s)=>{e[t]=s?(...e)=>{const t=D();Q((()=>t((()=>n(...e)))))}:n},be=(e,t,n={bubbles:!0,cancelable:!0,composed:!0})=>e.dispatchEvent(new CustomEvent(t,n)),ve=(e,t,n)=>U(n,(n=>ge(e,t,n)));function ge(e,t,n){J(n)?e[t]=null:e[t]=n,"value"===t&&(be(e,"input"),be(e,"change"))}const me=(e,t,n,s)=>U(n,(n=>we(e,t,n,s)));function we(e,t,n,s){J(n)?s&&a[s]?e.removeAttributeNS(a[s],t):e.removeAttribute(t):s&&a[s]?e.setAttributeNS(a[s],t,n):e.setAttribute(t,n)}const ye=(e,t,n)=>U(n,(n=>xe(e,t,n))),xe=(e,t,n)=>n?e.setAttribute(t,""):e.removeAttribute(t);function Se(e,t){if(B(t)){let n;for(n in t)ke(e,n,t[n]);return}const n=typeof t;"string"!==n?"function"!==n||C((()=>{Se(e,O(t))})):e.cssText=t}const ke=(e,t,n)=>U(n,(n=>Ae(e,t,n))),Ae=(e,t,n)=>J(n)?e.removeProperty(t):e.setProperty(t,n);function Me(e,t){switch(typeof t){case"string":Ne(e,t,!0);break;case"object":{let n;for(n in t)Ce(e,n,t[n]);break}case"function":U(t,(t=>Me(e,t)))}}const Ce=(e,t,n)=>U(n,(n=>Ne(e,t,n))),Ne=(e,t,n)=>n?e.classList.add(...t.trim().split(/\s+/)):e.classList.remove(t),Le=(e,t,n,s)=>n(e),Ie=(e,t,n,s)=>ce(0,[n,e]),Ee=(e,t,n,s)=>L((()=>n(e))),Te=F();function qe(e){return e in Te||(e.startsWith("on")&&e.toLowerCase()in window?Te[e]=e.slice(2).toLowerCase():Te[e]=void 0),Te[e]}function je(e,t,n){e.addEventListener(t,n,o(n)?void 0:n);const s=()=>function(e,t,n){return e.removeEventListener(t,n),()=>je(e,t,n)}(e,t,n);return L(s),s}const ze=(e,t,n,s)=>U(n,(n=>De(e,t,n,s))),De=(e,t,n,s)=>{B(n)?ge(e,t,n):"boolean"!=typeof n||t.includes("-")?(we(e,t,n,s),J(n)&&ge(e,t,n)):ge(e,t,n)};he("style",((e,t,n,s)=>Se(e.style,n)),!1),fe("style",((e,t,n,s,o,r)=>Se(e.style,B(n)?n:{[o]:n})),!1),fe("var",((e,t,n,s,o,r)=>Se(e.style,{["--"+o]:n})),!1),he("class",((e,t,n,s)=>(e=>"string"==typeof e)(n)?e.setAttribute("class",n):Me(e,n)),!1),fe("class",((e,t,n,s,o,r)=>B(n)?Me(e,n):Ce(e,o,n)),!1);for(const e of["value","textContent","innerText","innerHTML"])he(e,ve,!1);fe("prop",((e,t,n,s,o,r)=>ve(e,o,n)),!1),fe("attr",((e,t,n,s,o,r)=>me(e,o,n)),!1),fe("bool",((e,t,n,s,o,r)=>ye(e,o,n)),!1),he("onMount",Ie,!1),fe("onMount",Ie,!1),he("onUnmount",Ee,!1),fe("onUnmount",Ee,!1),he("ref",Le,!1),fe("ref",Le,!1),fe("on",((e,t,n,s,o,r)=>je(e,o,n)),!1);const Oe=(e,t)=>"is"in t||e.localName?.includes("-");const Re=e=>document[e].bind(document),_e=Re("createElement"),Pe=Re("createElementNS"),Ue=Re("createTextNode"),We=document.adoptedStyleSheets;function $e(e=[],t=[]){t=W(t)?t.flat(1/0):[t];for(let n,s=0;s<e.length;s++)n=e[s],n&&(0===t.length||!t.includes(n))&&n.remove();return t}const Be=new Map,Fe=new WeakMap,He=new Map,Ke=function(e){const t=j(e);return t.Provider=e=>t(e.value,(()=>ct(e.children))),t}(),Je=t();function Ge(e,t){return e===Je?t.children:(K(t),void 0===t?Qe(e):ne(Qe(e).bind(null,t)))}function Qe(e){if(ee(e))return e;const t=B(e);let n=t?Fe.get(e):Be.get(e);if(n)return n;switch(typeof e){case"string":n=Ye.bind(null,e);break;case"function":if(i in e){n=Ve.bind(null,e);break}if(Z(e)){n=Xe.bind(null,e);break}n=e;break;default:if(e instanceof Node){n=nt.bind(null,e);break}n=Xe.bind(null,e)}return t?Fe.set(e,n):Be.set(e,n),ne(n)}function Ve(e,t){const n=new e;return n.ready&&ue(n.ready.bind(n)),n.cleanup&&L(n.cleanup.bind(n)),n.render(t)}function Xe(e,t){return e}function Ye(e,t){const n=t?.xmlns||a[e],s=Ke();return n&&n!==s?Ke(n,(()=>nt(Pe(n,e),t))):s&&"foreignObject"===e?Ke(a.html,(()=>nt(Pe(s,e),t))):nt(s?Pe(s,e):_e(e),t)}function Ze(e,t){return ne((()=>function(e,t){et||(et=!0,queueMicrotask((()=>{et=!1,He.clear()})));const n=He.get(e);if(n)return nt(n.cloneNode(!0),t);const s=t?.xmlns,o=Ke();if(s&&s!==o)return Ke(s,(()=>tt(e,t,s)));return tt(e,t,o)}(e,t)))}let et=!1;function tt(e,t,n){let s=n?Pe(n,"template"):_e("template");s.innerHTML=e,s=n?s:s.content;const o=1===s.childNodes.length?s.firstChild:s;return He.set(e,o),nt(o.cloneNode(!0),t)}function nt(e,t){return t&&function(e,t){let n,s;for(n in t){if(s=t[n],n in ae){ae[n](e,n,s,t);continue}let o=qe(n);if(o)je(e,o,s);else if(n.includes(":")){let[r,i]=n.split(":");if(r in de){de[r](e,n,s,t,i,r);continue}if(o=qe(r),o){je(e,o,s);continue}Oe(e,t)?ge(e,n,s):ze(e,n,s,r)}else Oe(e,t)?ge(e,n,s):ze(e,n,s)}}(e,t),e}function st(e,t,n){switch(typeof t){case"string":case"number":return it(e,Ue(t),n);case"function":{if(ee(t))return st(e,function(e){if(void 0===b)return e();const t=b;b=void 0;try{return e()}finally{b=t}}(t),n);let s=[];return e=ot(e,void 0,n),l in t?(C((()=>{s=$e(s,t((t=>{const n=ot(e,void 0,!0),s=ot(e,void 0,!0);return[n,st(s,t,!0),s]})))})),L((()=>{$e(s),e.remove()})),[s,e]):(C((()=>{s=$e(s,st(e,t(),!0))})),L((()=>{$e(s),e.remove()})),[s,e])}case"object":if(W(t))return 1===t.length?st(e,t[0],n):t.map((t=>st(e,t,n)));if(t instanceof Node)return t instanceof DocumentFragment?st(e,Y(t.childNodes),n):it(e,t,n);if(null===t)return;if("then"in t){const[s,o]=M(void 0),r=t=>e.isConnected&&o(t);return t.then(r).catch(r),st(e,s,n)}return G in t?st(e,Y(t.values()),n):t instanceof CSSStyleSheet?(We.push(t),L((()=>_(We,t))),null):st(e,"toString"in t?t.toString():X(t),n);case"undefined":return;default:return it(e,Ue(t.toString()),n)}}he("children",((e,t,n)=>st(e,n)),!1);const ot=(e,t,n)=>it(e,Ue(""),n);let rt;function it(e,t,n){if(e===document.head){if(!rt){const e=document.head;rt=e.querySelector.bind(e)}const n=t.tagName;let s;"TITLE"===n?s=rt("title"):"META"===n?s=rt('meta[name="'+t.getAttribute("name")+'"]')||rt('meta[property="'+t.getAttribute("property")+'"]'):"LINK"===n&&"canonical"===t.rel&&(s=rt('link[rel="canonical"]')),s?s.replaceWith(t):e.appendChild(t)}else n?e.before(t):e.appendChild(t);return t}const ct=e=>H(function(e){const t=new DocumentFragment;return st(t,e),t}(e).childNodes);const lt=e=>o(e)?Z(e)?t=>{const n=e();return o(n)?Z(n)?n():n(...t):n}:t=>e(...t):()=>e;F();const ut=e=>function(e,t,n){const s=new Map,o=new Map;let r=0,i=[],c=[];function u(){for(let e=0;e<c.length;e++)c[e].dispose(!0);s.clear(),o.clear(),i.length=0,c.length=0}L(u);class a{constructor(e,t,n,s){this.runId=-1,this.item=e,this.index=t,this.isDupe=s,this.disposer=void 0,this.nodes=A((s=>(this.disposer=s,n(e,t))))}get begin(){return this.nodes[0]}get end(){return this.nodes[this.nodes.length-1]}dispose(e){if(void 0===e)if(this.isDupe){const e=o.get(this.item);1===e.length?o.delete(this.item):_(e,this)}else s.delete(this.item);this.disposer()}}function d(l){const d=l?(e,n)=>l(t(e,n),n):t,h=(O(e)||[]).entries();r++,i=[];const f=c.length;for(const[e,t]of h){let n=f?s.get(t):void 0;if(void 0===n)n=new a(t,e,d,!1),s.set(t,n);else if(n.runId===r){let s=o.get(t);s||(s=[],o.set(t,s));for(let e=0;e<s.length;e++)if(s[e].runId!==r){n=s[e];break}n.runId===r&&(n=new a(t,e,d,!0),s.push(n))}n.runId=r,n.index=e,i.push(n)}if(0===i.length)u();else for(let e=0;e<c.length;e++)c[e].runId!==r&&c[e].dispose();if(n&&i.length>1&&c.length){const{a:e,b:t}=R(i,((e,t)=>i[t]===c[t]?"a":"b"));if(e&&t&&e.length&&t.length&&t.length<e.length&&t.every((e=>c.includes(e))))for(const n of t)for(const t of e){if(n.index===t.index-1){t.begin.before(...P(n));break}if(n.index===t.index+1){t.end.after(...P(n));break}}let n=i[i.length-1];for(let e=i.length-1;e>0;e--){const t=i[e-1];n.begin.previousSibling!==t.end&&n.begin.before(...P(t)),n=t}}return c=i,i.map((e=>e.nodes))}return d[l]=void 0,d}(e.each,function(e){e=W(e)?H(e):e;const t=W(e)?e.map(lt):lt(e);return W(e)?ne(((...e)=>t.map((t=>t(e))))):ne(((...e)=>t(e)))}(e.children),!0);let at=1;const dt=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],ht=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],ft=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"];function pt(e){return Math.round(1e3*Math.random())%e}function bt(e){let t=new Array(e);for(let n=0;n<e;n++){const[e,s]=M(`${dt[pt(dt.length)]} ${ht[pt(ht.length)]} ${ft[pt(ft.length)]}`);t[n]={id:at++,label:e,setLabel:s}}return t}const vt=({id:e,text:t,fn:n})=>Ze('<div class="col-sm-6 smallpad"></div>',{children:Ze('<button class="btn btn-primary btn-block" type=button></button>',{id:e,onClick:n,children:t})});!function(e,t,n=V){const s=A((s=>(function(e,t=document.body,n){n.clear&&t&&(t.textContent="");const s=st(t,te(e)?Qe(e):e,n.relative);L((()=>$e([s].flat(1/0))))}(e,t,n),s)));L(s)}((()=>{const[e,t]=M([]),[n,s]=M(null),o=function(e){const t=new Map;let n;return C((()=>{const s=e();if(s===n)return;const o=t.get(n);o&&o.write(!1);const r=t.get(s);r&&r.write(!0),n=s})),function(n){let s=t.get(n);return s||(s=M(n===e()),s.counter=0,t.set(n,s)),s.counter++,L((()=>{0==--s.counter&&t.delete(n)})),s.read}}(n);return Ze("<div class=container></div>",{children:[Ze("<div class=jumbotron></div>",{children:Ze("<div class=row><div class=col-md-6><h1>pota Keyed</h1></div></div>",{children:Ze("<div class=col-md-6></div>",{children:Ze("<div class=row></div>",{children:[Ge(vt,{id:"run",text:"Create 1,000 rows",fn:()=>t(bt(1e3))}),Ge(vt,{id:"runlots",text:"Create 10,000 rows",fn:()=>{t(bt(1e4))}}),Ge(vt,{id:"add",text:"Append 1,000 rows",fn:()=>t((e=>[...e,...bt(1e3)]))}),Ge(vt,{id:"update",text:"Update every 10th row",fn:()=>N((()=>{for(let t=0,n=e(),s=n.length;t<s;t+=10)n[t].setLabel((e=>e+" !!!"))}))}),Ge(vt,{id:"clear",text:"Clear",fn:()=>t([])}),Ge(vt,{id:"swaprows",text:"Swap Rows",fn:()=>{const n=e().slice();if(n.length>998){let e=n[1];n[1]=n[998],n[998]=e,t(n)}}})]})})})}),Ze('<table class="table table-hover table-striped test-data"></table>',{onClick:e=>{const n=e.target;var o;void 0!==n.setSelected?s(n.setSelected):void 0!==n.removeRow&&(o=n.removeRow,t((e=>{const t=e.findIndex((e=>e.id===o));return e.splice(t,1),[...e]})))},children:Ze("<tbody></tbody>",{children:Ge(ut,{each:e,children:e=>{const{id:t,label:n}=e;return Ze("<tr></tr>",{"class:danger":o(t),children:[Ze("<td class=col-md-1></td>",{textContent:t}),Ze("<td class=col-md-4></td>",{children:Ze("<a></a>",{textContent:n,"prop:setSelected":t})}),Ze("<td class=col-md-1></td>",{children:Ze("<a></a>",{children:Ze('<span class="glyphicon glyphicon-remove" aria-hidden=true></span>',{"prop:removeRow":t})})}),Ze("<td class=col-md-6></td>")]})}})})}),Ze('<span class="preloadicon glyphicon glyphicon-remove" aria-hidden=true></span>')]})}),document.getElementById("main"))}();
//# sourceMappingURL=main.js.map
