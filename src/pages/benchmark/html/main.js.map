{"version":3,"file":"main.js","sources":["../../../../../pota/src/lib/std.js","../../../../../pota/src/constants.js","../../../../../pota/src/lib/reactive.js","../../../../../pota/src/scheduler.js","../../../../../pota/src/props/event.js","../../../../../pota/src/props/plugin.js","../../../../../pota/src/props/property.js","../../../../../pota/src/props/attribute.js","../../../../../pota/src/props/unknown.js","../../../../../pota/src/props/bool.js","../../../../../pota/src/props/style.js","../../../../../pota/src/plugin/useRandom.js","../../../../../pota/src/props/css.js","../../../../../pota/src/props/lifecycle.js","../../../../../pota/src/props/class.js","../../../../../pota/src/props/@main.js","../../../../../pota/src/renderer.js","../../../../../pota/src/plugin/useString.js","../../../../../pota/src/web/CustomElement.js","../../../../../pota/src/web/Collapse.js","../../../../../pota/src/web/Dynamic.js","../../../../../pota/src/web/For.js","../../../../../pota/src/web/Portal.js","../../../../../pota/src/web/Head.js","../../../../../pota/src/plugin/useScroll.js","../../../../../pota/src/plugin/useURL.js","../../../../../pota/src/web/router/context.js","../../../../../pota/src/plugin/useLocation.js","../../../../../pota/src/web/Show.js","../../../../../pota/src/web/router/scroll.js","../../../../../pota/src/web/router/router.js","../../../../../pota/src/web/router/link.js","../../../../../pota/src/plugin/useTimeout.js","../../../../../pota/src/web/router/load.js","../../../../../pota/src/web/Switch.js","../../../../../pota/src/html.js","../../../../../pota/src/plugin/useSelector.js","index.jsx"],"sourcesContent":["export const global = globalThis\nexport const window = global\n\nexport const CSSStyleSheet = global.CSSStyleSheet\nexport const document = global.document\nexport const DocumentFragment = global.DocumentFragment\nexport const Object = global.Object\nexport const Promise = global.Promise\nexport const requestAnimationFrame = global.requestAnimationFrame\nexport const Symbol = global.Symbol\nexport const queueMicrotask = global.queueMicrotask\n\nexport const assign = Object.assign\nexport const create = Object.create\nexport const defineProperties = Object.defineProperties\nexport const defineProperty = Object.defineProperty\nexport const entries = Object.entries\nexport const freeze = Object.freeze\nexport const fromEntries = Object.fromEntries\nexport const getOwnPropertyDescriptor =\n\tObject.getOwnPropertyDescriptor\nexport const getOwnPropertyDescriptors =\n\tObject.getOwnPropertyDescriptors\nexport const getOwnPropertyNames = Object.getOwnPropertyNames\nexport const getOwnPropertySymbols = Object.getOwnPropertySymbols\nexport const getPrototypeOf = Object.getPrototypeOf\nexport const groupBy = Object.groupBy\nexport const hasOwnProperty = Object.hasOwn\nexport const is = Object.is\nexport const isExtensible = Object.isExtensible\nexport const keys = Object.keys\nexport const values = Object.values\nexport const setPrototypeOf = Object.setPrototypeOf\n\nexport const isArray = Array.isArray\nexport const toArray = Array.from\n\nexport const isNaN = Number.isNaN\n\nexport const iterator = Symbol.iterator\n\nexport const stringify = JSON.stringify\nexport const stringifyReadable = o => stringify(o, null, 2)\n\nexport const stringifySorted = o => {\n\tfunction sort(o) {\n\t\tif (!isObject(o)) {\n\t\t\treturn o\n\t\t}\n\t\tconst tmp = isArray(o) ? [] : {}\n\t\tkeys(o)\n\t\t\t.sort()\n\t\t\t.map(k => (tmp[k] = sort(o[k])))\n\n\t\tif (isArray(tmp)) {\n\t\t\ttmp.sort((a, b) => stringify(a).localeCompare(stringify(b)))\n\t\t}\n\t\treturn tmp\n\t}\n\treturn stringifyReadable(sort(o))\n}\n\nexport const PrototypeArray = Array.prototype\nexport const PrototypeMap = Map.prototype\n\nexport const history = global.history\nexport const location = global.location\nexport const navigator = global.navigator\n\nexport const origin = location.origin\n\nexport const promise = fn => new Promise(fn)\n\nexport const withResolvers = () => Promise.withResolvers()\n\n/**\n * Given a promise it adds `onDone` to `then` and `catch`\n *\n * ```js\n * resolved(promise, onDone)\n * // is same as\n * promise.then(onDone).catch(onDone)\n * ```\n */\nexport const resolved = (promise, onDone) =>\n\tpromise.then(onDone).catch(onDone)\n\nexport const setAttribute = (node, name, value) =>\n\tnode.setAttribute(name, value)\n\nexport const hasAttribute = (node, name) => node.hasAttribute(name)\n\nexport const removeAttribute = (node, name) =>\n\tnode.removeAttribute(name)\n\nexport const setAttributeNS = (node, name, value) =>\n\tnode.setAttributeNS(name, value)\n\nexport const hasAttributeNS = (node, name) =>\n\tnode.hasAttributeNS(name)\n\nexport const removeAttributeNS = (node, name) =>\n\tnode.removeAttributeNS(name)\n\nexport const isConnected = node => node.isConnected\n\nexport const activeElement = () => document.activeElement\n\nexport const documentElement = document.documentElement\n\n/**\n * Runs an array of functions\n *\n * @param {Iterable<Function>} fns\n */\nexport const call = fns => {\n\tfor (const fn of fns) fn()\n}\n\nexport const copy = o => (isObject(o) ? structuredClone(o) : o)\n\n/**\n * Object.defineProperty with `enumerable` and `configurable` set to\n * `true` unless overwriten by `descriptor` argument\n *\n * @param {object} target\n * @param {PropertyKey} key\n * @param {PropertyDescriptor} descriptor\n */\nexport const redefineProperty = (target, key, descriptor) =>\n\tdefineProperty(target, key, assign(create(defaults), descriptor))\n\nconst defaults = {\n\t__proto__: null,\n\tconfigurable: true,\n\tenumerable: true,\n}\n\n/**\n * Object.defineProperty with `configurable`, `writable` and\n * `enumerable` as `false`\n *\n * @param {object} target\n * @param {PropertyKey} key\n * @param {any} value\n */\nexport const definePropertyReadOnly = (target, key, value) => {\n\tconst descriptor = create(defaultsReadOnly)\n\tdescriptor.value = value\n\tdefineProperty(target, key, descriptor)\n}\n\nconst defaultsReadOnly = {\n\t__proto__: null,\n\tconfigurable: false,\n\tenumerable: false,\n\twritable: false,\n\tvalue: undefined,\n}\n\nconst bind = fn => document[fn].bind(document)\n\nexport const createElement = bind('createElement')\n\nexport const createElementNS = bind('createElementNS')\n\nexport const createTextNode = bind('createTextNode')\n\nexport const importNode = bind('importNode')\n\nexport const createTreeWalker = bind('createTreeWalker')\n\n/**\n * Returns an object without a prototype\n *\n * @type {Function}\n * @returns {Props} Empty object\n */\nexport const empty = Object.create.bind(null, null)\n\nexport function* entriesIncludingSymbols(target) {\n\tfor (const item of entries(target)) {\n\t\tyield item\n\t}\n\n\tfor (const item of getOwnPropertySymbols(target)) {\n\t\t// todo: causes access!\n\t\tyield [item, target[item]]\n\t}\n}\n\n// modified version of https://github.com/epoberezkin/fast-deep-equal\n\nexport function equals(a, b) {\n\tif (a === b) {\n\t\treturn true\n\t}\n\n\tif (a && b && typeof a == 'object' && typeof b == 'object') {\n\t\tif (a.constructor !== b.constructor) {\n\t\t\treturn false\n\t\t}\n\n\t\tlet length, i, k\n\t\tif (isArray(a)) {\n\t\t\tlength = a.length\n\t\t\tif (length != b.length) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tfor (i = length; i-- !== 0; ) {\n\t\t\t\tif (!equals(a[i], b[i])) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true\n\t\t}\n\n\t\tif (a.constructor === RegExp)\n\t\t\treturn a.source === b.source && a.flags === b.flags\n\t\tif (a.valueOf !== Object.prototype.valueOf)\n\t\t\treturn a.valueOf() === b.valueOf()\n\t\tif (a.toString !== Object.prototype.toString)\n\t\t\treturn a.toString() === b.toString()\n\n\t\tk = keys(a)\n\t\tlength = k.length\n\t\tif (length !== keys(b).length) {\n\t\t\treturn false\n\t\t}\n\n\t\tfor (i = length; i-- !== 0; ) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(b, k[i])) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\tfor (i = length; i-- !== 0; ) {\n\t\t\tvar key = k[i]\n\n\t\t\tif (!equals(a[key], b[key])) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\treturn true\n\t}\n\n\t// true if both NaN, false otherwise\n\treturn a !== a && b !== b\n}\n\n/**\n * Flats an array/childNodes to the first children if the length is 1\n *\n * @param {any[] | NodeListOf<ChildNode>} arr\n * @returns {any}\n */\nexport const flat = arr => (arr.length === 1 ? arr[0] : arr)\n\n/**\n * Keeps state in the function as the first param\n *\n * @template T\n * @param {T} fn - Function to which add state to it\n * @param {DataStore<Map> | DataStore<WeakMap>} [state] - Passed to\n *   `fn` as first param\n * @returns {T} A copy of the function with the state\n */\nexport const withState = /* #__NO_SIDE_EFFECTS__ */ (\n\tfn,\n\tstate = cacheStore,\n) => fn.bind(null, state())\n\nexport const walkElements = withState(\n\t(walk, node, fn) => {\n\t\twalk.currentNode = node\n\n\t\t/**\n\t\t * The first node is not walked by the walker.\n\t\t *\n\t\t * Also the first node could be a DocumentFragment\n\t\t */\n\t\tif (node.nodeType === 1) {\n\t\t\tif (fn(node)) return\n\t\t}\n\n\t\twhile ((node = walk.nextNode())) {\n\t\t\tif (fn(node)) break\n\t\t}\n\t},\n\t() => createTreeWalker(document, 1 /*NodeFilter.SHOW_ELEMENT*/),\n)\n\n/**\n * Returns `document` for element. That could be a `shadowRoot`\n *\n * @param {Element} node\n * @returns {Document | ShadowRoot}\n */\n\nexport const getDocumentForElement = node => {\n\tconst document = node.getRootNode()\n\tconst { nodeType } = document\n\t// getRootNode returns:\n\t// 1. Node for isConnected = false\n\t// 2. Document for isConnected = true\n\t// 3. shadowRoot for custom elements\n\n\t// always return a Document-like\n\treturn nodeType === 11 || nodeType === 9\n\t\t? document\n\t\t: node.ownerDocument\n}\n\nexport const getOwnValues = o =>\n\tgetOwnPropertyNames(o).map(key => {\n\t\ttry {\n\t\t\treturn o[key]\n\t\t} catch (e) {}\n\t})\n\n/**\n * Unwraps values. If the argument is a function then it runs it\n * recursively and returns the value\n *\n * @param {Function | any} value - Maybe function\n * @returns {any}\n */\nexport function getValue(value) {\n\twhile (typeof value === 'function') value = value()\n\treturn value\n}\n\n/**\n * Unwraps `value` and returns `element` if result is a `Node`, else\n * `undefined` in the case isn't a `Node`\n *\n * @param {Function | any} value - Maybe function\n * @param {...any} args? - Arguments\n * @returns {Node | undefined}\n */\nexport function getValueElement(value, ...args) {\n\tconst element = getValueWithArguments(value, ...args)\n\treturn element instanceof Node ? element : undefined\n}\n\nexport const getValueWithArguments = (value, ...args) =>\n\ttypeof value === 'function'\n\t\t? args.length\n\t\t\t? getValue(value(...args))\n\t\t\t: getValue(value())\n\t\t: value\n\n/**\n * Identity function, given `x` returns `x`\n *\n * @template T\n * @param {T} x\n * @returns {T}\n */\nexport const identity = x => x\n\n/**\n * When `value` is an object, it will check if the `key` on `target`\n * is `configurable`\n *\n * @param {object} target\n * @param {PropertyKey} key\n * @param {boolean | undefined} value\n */\nexport const isConfigurable = (target, key, value) => {\n\tif (isObject(value)) {\n\t\tconst descriptor = getOwnPropertyDescriptor(target, key)\n\t\tif (descriptor) {\n\t\t\treturn descriptor.configurable\n\t\t}\n\t}\n\treturn true\n}\n\n/**\n * Returns `true` when `typeof` of `value` is `function`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isFunction = value => typeof value === 'function'\n\n/**\n * Returns `true` when value is Iterable\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isIterable = value =>\n\tisObject(value) && 'values' in value\n\n/**\n * Returns `true` if the value is `null` or `undefined`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isNullUndefined = value =>\n\tvalue === undefined || value === null\n\n/**\n * Returns `true` when typeof of value is object and not null\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isObject = value =>\n\tvalue !== null && typeof value === 'object'\n\n/**\n * Returns `true` when object morphed between array/object\n *\n * @param {any} a\n * @param {any} b\n * @returns {boolean}\n */\nexport const morphedBetweenArrayAndObject = (a, b) =>\n\t(isObject(a) && !isObject(b)) ||\n\t(isObject(b) && !isObject(a)) ||\n\t(isArray(a) && !isArray(b)) ||\n\t(isArray(b) && !isArray(a))\n\n/**\n * Returns `true` if the property is defined in the `prototype` and\n * absent in the `object`\n *\n * @param {object} target\n * @param {PropertyKey} key\n */\nexport const isPrototypeProperty = (target, key) =>\n\t// must do `key in target` to check that it DOES have it somewhere\n\t// must do !hasOwnProperty to check that isnt an own property\n\tkey in target && !hasOwnProperty(target, key)\n\n/**\n * Returns `true` when `typeof` of `value` is `string`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isString = value => typeof value === 'string'\n\n/**\n * Returns `true` when `typeof` of `value` is `number`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isNumber = value => typeof value === 'number'\n\n/**\n * Returns `true` when `typeof` of `value` is `symbol`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isSymbol = value => typeof value === 'symbol'\n\n/**\n * Returns `true` when `typeof` of `value` is `boolean`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isBoolean = value => typeof value === 'boolean'\n\nexport const noop = () => {}\n\n/**\n * An empty frozen object\n *\n * @type object\n */\nexport const nothing = freeze(empty())\n\n// an optional value is `true` by default, so most of the time is undefined which means is `true`\n// to avoid having conditions like `if(something.bla === undefined || something.bla)`\n// this function will short it to `if(optional(something.bla))`\n// additionally the value is resolved, for cases like `when={() => show() && optional(props.when)}`\n\n/**\n * Returns `true` when value is true or undefined\n *\n * @param {Function | boolean | undefined} value\n * @returns {boolean} True when value is true or undefined\n */\nexport const optional = value =>\n\tvalue === undefined || getValue(value)\n\nexport const partAdd = (node, className) => node.part.add(className)\n\nexport const partRemove = (node, className) =>\n\tnode.part.remove(className)\n\nexport const querySelector = (node, query) =>\n\tnode.querySelector(query)\n\nexport const querySelectorAll = (node, query) =>\n\tnode.querySelectorAll(query)\n\nexport function* range(start, stop, step = 1) {\n\tyield start\n\twhile (start < stop) {\n\t\tyield (start += step)\n\t}\n}\n\nexport const {\n\townKeys: reflectOwnKeys,\n\thas: reflectHas,\n\tdeleteProperty: reflectDeleteProperty,\n\tgetOwnPropertyDescriptor: reflectGetOwnPropertyDescriptor,\n\tget: reflectGet,\n\tapply: reflectApply,\n\tset: reflectSet,\n} = Reflect\n\n/**\n * Removes a value from an array\n *\n * @template T\n * @param {T[]} array\n * @param {T} value To remove from the array\n * @returns {T[]}\n */\nexport function removeFromArray(array, value) {\n\tconst index = array.indexOf(value)\n\tif (index !== -1) array.splice(index, 1)\n\treturn array\n}\n/**\n * Removes values from an array based on a condition\n *\n * @template T\n * @param {T[]} array\n * @param {(value: T, index: number) => boolean} cb Function with\n *   condition\n */\nexport function removeFromArrayConditionally(array, cb) {\n\tlet i = array.length\n\twhile (i--) {\n\t\tif (cb(array[i], i)) {\n\t\t\tarray.splice(i, 1)\n\t\t}\n\t}\n}\n/**\n * Removes values from an array based on a condition\n *\n * @param {Iterable<object | any[]>} iterable\n * @param {PropertyKey} key Function with condition\n */\nexport function indexByKey(iterable, key) {\n\tconst byKey = empty()\n\tfor (const item of iterable) {\n\t\tbyKey[item[key]] = item\n\t}\n\treturn byKey\n}\n\n/**\n * Replace a prototype in the prototype chain with another prototype\n *\n * @param {object} target - Target object\n * @param {object} search - The prototype to replace\n * @param {object} replacement - The replacement prototype\n */\nexport function replacePrototypeWith(target, search, replacement) {\n\tlet prototype = target\n\twhile (getPrototypeOf(prototype) !== search) {\n\t\tprototype = getPrototypeOf(prototype)\n\t}\n\n\tsetPrototypeOf(prototype, replacement)\n}\n\nexport const typeString = obj =>\n\tObject.prototype.toString.call(obj).slice(8, -1)\n\nexport function walkParents(context, propertyName, cb) {\n\twhile (context) {\n\t\tif (cb(context)) return true\n\t\tcontext = context[propertyName]\n\t}\n}\n\n/**\n * Store template\n *\n * @typedef {(\n * \treference: any,\n * \tcreateIfNotExistsAs?: ((target: any) => any) | Function,\n * ) => any} DataStoreGet\n *\n *\n * @typedef {(key: any, value: any) => void} DataStoreSet\n *\n * @typedef {(key: any) => boolean} DataStoreHas\n *\n * @typedef {(key: any) => boolean} DataStoreDelete\n */\n\nclass DataStore {\n\tconstructor(kind) {\n\t\tconst store = new kind()\n\n\t\tconst get = store.get.bind(store)\n\t\tconst set = store.set.bind(store)\n\t\tconst has = store.has.bind(store)\n\n\t\tthis.get = (target, defaults = undefined) => {\n\t\t\tconst o = get(target)\n\n\t\t\tif (o !== undefined) {\n\t\t\t\treturn o\n\t\t\t}\n\n\t\t\tif (defaults !== undefined) {\n\t\t\t\t/**\n\t\t\t\t * Default values should be passed as a function, so we dont\n\t\t\t\t * constantly initialize values when giving them\n\t\t\t\t */\n\t\t\t\tdefaults = defaults(target)\n\t\t\t\tset(target, defaults)\n\t\t\t\treturn defaults\n\t\t\t}\n\t\t}\n\n\t\tthis.set = set\n\t\tthis.has = has\n\t\tthis.delete = store.delete.bind(store)\n\t}\n\n\t*[Symbol.iterator]() {\n\t\tyield this.get\n\t\tyield this.set\n\t\tyield this.has\n\t\tyield this.delete\n\t}\n}\n\n/**\n * Creates a WeakMap to store data\n *\n * @returns {[\n * \tDataStoreGet,\n * \tDataStoreSet,\n * \tDataStoreHas,\n * \tDataStoreDelete,\n * ] & {\n * \tget: DataStoreGet\n * \tset: DataStoreSet\n * \thas: DataStoreHas\n * \tdelete: DataStoreDelete\n * }}\n */\nexport const weakStore = () => new DataStore(WeakMap)\n\n/**\n * Creates a Map to store data\n *\n * @returns {[\n * \tDataStoreGet,\n * \tDataStoreSet,\n * \tDataStoreHas,\n * \tDataStoreDelete,\n * ] & {\n * \tget: DataStoreGet\n * \tset: DataStoreSet\n * \thas: DataStoreHas\n * \tdel: DataStoreDelete\n * }}\n */\nexport const cacheStore = () => new DataStore(Map)\n\nexport const classListAdd = (node, className) =>\n\tnode.classList.add(className)\n\nexport const classListRemove = (node, className) =>\n\tnode.classList.remove(className)\n\n/**\n * - Returns `adoptedStyleSheets` for a document\n *\n * @param {Document | ShadowRoot} document\n */\nexport const adoptedStyleSheetsGet = document =>\n\tdocument.adoptedStyleSheets\n\nexport const adoptedStyleSheets =\n\t/* #__PURE__*/ adoptedStyleSheetsGet(document)\n\n/**\n * Adds a style sheet to the document\n *\n * @param {Document | ShadowRoot} document\n * @param {CSSStyleSheet} styleSheet\n */\nexport const adoptedStyleSheetsAdd = (document, styleSheet) =>\n\tadoptedStyleSheetsGet(document).push(styleSheet)\n\n/**\n * Removes a style sheet from the document\n *\n * @param {Document | ShadowRoot} document\n * @param {CSSStyleSheet} styleSheet\n */\nexport const adoptedStyleSheetsRemove = (document, styleSheet) =>\n\tremoveFromArray(adoptedStyleSheetsGet(document), styleSheet)\n\n/**\n * Adds a style sheet to the custom element\n *\n * @param {Document | ShadowRoot} document\n * @param {(CSSStyleSheet | string)[]} styleSheets\n */\nexport function addStyleSheets(document, styleSheets = []) {\n\tfor (const sheet of styleSheets) {\n\t\tif (sheet) {\n\t\t\tsheet instanceof CSSStyleSheet\n\t\t\t\t? adoptedStyleSheetsAdd(document, sheet)\n\t\t\t\t: addStyleSheetExternal(document, sheet)\n\t\t}\n\t}\n}\n\n/**\n * Adds the stylesheet from urls. It uses a cache, to avoid having to\n * fire a request for each external sheet when used in more than one\n * custom element. Also, all reference the same object.\n *\n * @param {Document | ShadowRoot} document\n * @param {string} text\n */\nexport const addStyleSheetExternal = withState(\n\t(state, document, text) => {\n\t\tstate\n\t\t\t.get(text, text =>\n\t\t\t\ttext.startsWith('http')\n\t\t\t\t\t? fetch(text)\n\t\t\t\t\t\t\t.then(r => r.text())\n\t\t\t\t\t\t\t.then(css => sheet(css))\n\t\t\t\t\t: promise(resolve => resolve(sheet(text))),\n\t\t\t)\n\t\t\t.then(styleSheet => adoptedStyleSheetsAdd(document, styleSheet))\n\t},\n)\n\n/**\n * Swaps classNames and waits for the animation to end\n *\n * @param {Element} element\n * @param {string} oldClass - `class` with the old animation\n * @param {string} newClass - `class` with the new animation\n */\nexport const animateClassTo = (element, oldClass, newClass) =>\n\tpromise(resolve =>\n\t\trequestAnimationFrame(() => {\n\t\t\tclassListRemove(element, oldClass)\n\t\t\tclassListAdd(element, newClass)\n\t\t\telement.getAnimations().length\n\t\t\t\t? resolved(waitEvent(element, 'animationend'), resolve)\n\t\t\t\t: resolve()\n\t\t}),\n\t)\n\n/**\n * Swaps parts and waits for the animation to end\n *\n * @param {Element} element\n * @param {string} oldPart - `part` with the old animation\n * @param {string} newPart - `part` with the new animation\n */\nexport const animatePartTo = (element, oldPart, newPart) =>\n\tpromise(resolve =>\n\t\trequestAnimationFrame(() => {\n\t\t\tpartRemove(element, oldPart)\n\t\t\tpartAdd(element, newPart)\n\t\t\telement.getAnimations().length\n\t\t\t\t? resolved(waitEvent(element, 'animationend'), resolve)\n\t\t\t\t: resolve()\n\t\t}),\n\t)\n\n/**\n * Creates tagged css and returns a CSSStyleSheet. Mostly for css\n * highlighting in js\n *\n * @param {TemplateStringsArray} template\n * @param {...any} values\n * @returns {CSSStyleSheet}\n */\nexport const css = (template, ...values) =>\n\tsheet(String.raw({ raw: template }, ...values))\n\n/**\n * Creates a stylesheet from a css string\n *\n * @param {string} css\n * @returns {CSSStyleSheet}\n */\nexport const sheet = withState((cache, css) =>\n\tcache.get(css, css => {\n\t\tconst sheet = new CSSStyleSheet()\n\t\t/**\n\t\t * Replace is asynchronous and can accept @import statements\n\t\t * referencing external resources.\n\t\t */\n\t\tsheet.replace(css)\n\n\t\treturn sheet\n\t}),\n)\n\n/**\n * @param {Element} node\n * @param {string} eventName\n * @param {any} [data]\n */\n\nexport const emit = (\n\tnode,\n\teventName,\n\tdata = { bubbles: true, cancelable: true, composed: true },\n) => node.dispatchEvent(new CustomEvent(eventName, data))\n\nexport function stopEvent(e) {\n\tpreventDefault(e)\n\tstopPropagation(e)\n\tstopImmediatePropagation(e)\n}\n\nexport const preventDefault = e => e.preventDefault()\nexport const stopPropagation = e => e.stopPropagation()\nexport const stopImmediatePropagation = e =>\n\te.stopImmediatePropagation()\n\n/**\n * Waits for an event to be dispatched and runs a callback\n *\n * @param {Element} element\n * @param {string} eventName\n */\nexport const waitEvent = withState(\n\t(state, element, eventName) =>\n\t\tpromise((resolve, reject) => {\n\t\t\t/**\n\t\t\t * To prevent firing `transitionend` twice it needs to stop\n\t\t\t * listening the old one because maybe wasn't dispatched and\n\t\t\t * running a new transition will make it dispatch twice\n\t\t\t */\n\t\t\tconst previous = state.get(element, empty)\n\t\t\tprevious.reject && previous.reject()\n\t\t\telement.removeEventListener(eventName, previous.resolve)\n\t\t\tstate.set(element, { resolve, reject })\n\t\t\telement.addEventListener(eventName, resolve, {\n\t\t\t\tonce: true,\n\t\t\t})\n\t\t}),\n\tweakStore,\n)\n\nexport const addEventListenerObject = (where, type, handler) =>\n\twhere.addEventListener(type, handler, handler)\n\nexport const removeEventListenerObject = (where, type, handler) =>\n\twhere.removeEventListener(type, handler, handler)\n\n/** @param {EventListener} fn */\nexport const passiveEvent = fn => ({ handleEvent: fn, passive: true })\n","// symbols\n\nimport { Symbol } from './lib/std.js'\n\nexport const $isComponent = Symbol()\nexport const $isClass = Symbol()\nexport const $isReactive = Symbol()\nexport const $isMap = Symbol()\n\n// supported namespaces\n\nconst prefix = 'http://www.w3.org/'\n\n// when a tag/attribute is missing the namespace this puts it back in\n\nexport const NS = {\n\t__proto__: null,\n\tsvg: prefix + '2000/svg',\n\tmath: prefix + '1998/Math/MathML',\n\thtml: prefix + '1999/xhtml',\n\txlink: prefix + '1999/xlink',\n}\n","/**\n * This is so far the core of Solid JS Reactivity, this may change.\n *\n * Adaptation for potas needs have been made:\n *\n * - Ported to Classes what does fit\n * - Signal has more options: `label` and `save` previous value\n * - Writing to a signal returns `true` when the value changes\n * - Signal is an object that could be used as signal.read/write or\n *   destructured as an array.\n * - Signals can save and wont run functions\n * - `update` function on Signal that could be used to use the old value\n */\n\nimport {\n\t$isClass,\n\t$isComponent,\n\t$isMap,\n\t$isReactive,\n} from '../constants.js'\n\nimport {\n\tassign,\n\tentries,\n\tflat,\n\tgetValue,\n\tgroupBy,\n\tisArray,\n\tisFunction,\n\tisIterable,\n\tisObject,\n\tkeys,\n\tnothing,\n\tqueueMicrotask,\n\tremoveFromArray,\n\tresolved,\n\tSymbol,\n\twithResolvers,\n} from './std.js'\n\nconst CLEAN = 0\nconst STALE = 1\nconst CHECK = 2\n\nlet Owner\nlet Listener\n\nlet Updates = null\nlet Effects = null\n\nlet Time = 0\n\n// ROOT\n\nclass Root {\n\towner\n\towned\n\n\tcleanups\n\n\tcontext\n\n\tconstructor(owner, options) {\n\t\tthis.owner = owner\n\t\tthis.context = owner?.context\n\n\t\tif (options) {\n\t\t\tassign(this, options)\n\t\t}\n\t}\n\n\tdispose() {\n\t\tlet i\n\n\t\tconst { owned, cleanups } = this\n\n\t\tif (owned) {\n\t\t\tfor (i = owned.length - 1; i >= 0; i--) {\n\t\t\t\towned[i].dispose()\n\t\t\t}\n\t\t\towned.length = 0\n\t\t}\n\t\tif (cleanups) {\n\t\t\tfor (i = cleanups.length - 1; i >= 0; i--) {\n\t\t\t\tcleanups[i]()\n\t\t\t}\n\t\t\tcleanups.length = 0\n\t\t}\n\t}\n}\n\n// COMPUTATION\n\nclass Computation extends Root {\n\tstate = STALE\n\n\tupdatedAt = 0\n\n\tfn\n\n\tsources\n\tsourceSlots\n\n\tconstructor(owner, fn, options) {\n\t\tsuper(owner, options)\n\n\t\tthis.fn = fn\n\n\t\tif (owner) {\n\t\t\tif (owner.owned) {\n\t\t\t\towner.owned.push(this)\n\t\t\t} else {\n\t\t\t\towner.owned = [this]\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate() {\n\t\tthis.dispose()\n\n\t\tconst time = Time\n\n\t\tconst prevOwner = Owner\n\t\tconst prevListener = Listener\n\n\t\tListener = Owner = this\n\t\ttry {\n\t\t\tthis.fn()\n\t\t} catch (err) {\n\t\t\tthis.updatedAt = time + 1\n\n\t\t\tthrow err\n\t\t} finally {\n\t\t\tOwner = prevOwner\n\t\t\tListener = prevListener\n\t\t}\n\n\t\tif (this.updatedAt <= time) {\n\t\t\tthis.updatedAt = time\n\t\t}\n\t}\n\n\tdispose() {\n\t\tconst { sources, sourceSlots } = this\n\n\t\tif (sources) {\n\t\t\tlet source\n\t\t\tlet observers\n\t\t\tlet index\n\n\t\t\tlet observer\n\t\t\tlet slot\n\t\t\twhile (sources.length) {\n\t\t\t\tsource = sources.pop()\n\t\t\t\tobservers = source.observers\n\n\t\t\t\tindex = sourceSlots.pop()\n\n\t\t\t\tif (observers && observers.length) {\n\t\t\t\t\tobserver = observers.pop()\n\t\t\t\t\tslot = source.observerSlots.pop()\n\n\t\t\t\t\tif (index < observers.length) {\n\t\t\t\t\t\tobserver.sourceSlots[slot] = index\n\t\t\t\t\t\tobservers[index] = observer\n\t\t\t\t\t\tsource.observerSlots[index] = slot\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsuper.dispose()\n\n\t\tthis.state = CLEAN\n\t}\n}\n\nclass Effect extends Computation {\n\tuser = true\n\n\tconstructor(owner, fn, options) {\n\t\tsuper(owner, fn, options)\n\n\t\tEffects ? Effects.push(this) : batch(() => this.update())\n\t}\n}\n\nclass SyncEffect extends Computation {\n\tconstructor(owner, fn, options) {\n\t\tsuper(owner, fn, options)\n\n\t\tbatch(() => this.update())\n\t}\n}\n\n// SIGNALS\n\nclass Memo extends Computation {\n\tstate = STALE\n\n\tpure = true\n\n\tvalue\n\n\tobservers\n\tobserverSlots\n\n\t// options:\n\t// equals\n\n\tconstructor(owner, fn, options) {\n\t\tsuper(owner, fn, options)\n\n\t\treturn markReactive(this.read.bind(this))\n\t}\n\n\tread() {\n\t\t// checkReadForbidden()\n\n\t\tif (this.state) {\n\t\t\tif (this.state === STALE) {\n\t\t\t\tthis.update()\n\t\t\t} else {\n\t\t\t\tconst updates = Updates\n\t\t\t\tUpdates = null\n\t\t\t\trunUpdates(() => upstream(this))\n\t\t\t\tUpdates = updates\n\t\t\t}\n\t\t}\n\n\t\tif (Listener) {\n\t\t\tconst sourceSlot = this.observers ? this.observers.length : 0\n\n\t\t\tif (Listener.sources) {\n\t\t\t\tListener.sources.push(this)\n\t\t\t\tListener.sourceSlots.push(sourceSlot)\n\t\t\t} else {\n\t\t\t\tListener.sources = [this]\n\t\t\t\tListener.sourceSlots = [sourceSlot]\n\t\t\t}\n\n\t\t\tif (this.observers) {\n\t\t\t\tthis.observers.push(Listener)\n\t\t\t\tthis.observerSlots.push(Listener.sources.length - 1)\n\t\t\t} else {\n\t\t\t\tthis.observers = [Listener]\n\t\t\t\tthis.observerSlots = [Listener.sources.length - 1]\n\t\t\t}\n\t\t}\n\n\t\treturn this.value\n\t}\n\n\twrite(value) {\n\t\tif (this.equals === false || !this.equals(this.value, value)) {\n\t\t\tthis.value = value\n\t\t\tif (this.observers && this.observers.length) {\n\t\t\t\trunUpdates(() => {\n\t\t\t\t\tfor (let i = 0, observer; i < this.observers.length; i++) {\n\t\t\t\t\t\tobserver = this.observers[i]\n\n\t\t\t\t\t\tif (observer.state === CLEAN) {\n\t\t\t\t\t\t\tif (observer.pure) {\n\t\t\t\t\t\t\t\tUpdates.push(observer)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tEffects.push(observer)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (observer.observers) {\n\t\t\t\t\t\t\t\tdownstream(observer)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tobserver.state = STALE\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\tequals(a, b) {\n\t\treturn a === b\n\t}\n\n\tupdate() {\n\t\tthis.dispose()\n\n\t\tlet nextValue\n\n\t\tconst time = Time\n\n\t\tconst prevOwner = Owner\n\t\tconst prevListener = Listener\n\n\t\tListener = Owner = this\n\t\ttry {\n\t\t\tnextValue = this.fn()\n\t\t} catch (err) {\n\t\t\tthis.state = STALE\n\t\t\tif (this.owned) {\n\t\t\t\tthis.owned.forEach(node => node.dispose())\n\t\t\t\tthis.owned.length = 0\n\t\t\t}\n\t\t\tthis.updatedAt = time + 1\n\n\t\t\tthrow err\n\t\t} finally {\n\t\t\tOwner = prevOwner\n\t\t\tListener = prevListener\n\t\t}\n\t\tif (this.updatedAt <= time) {\n\t\t\tif (this.updatedAt !== 0) {\n\t\t\t\tthis.write(nextValue)\n\t\t\t} else {\n\t\t\t\tthis.value = nextValue\n\t\t\t}\n\t\t\tthis.updatedAt = time\n\t\t}\n\t}\n}\n\n// SIGNAL\n\nclass Signal {\n\tvalue\n\n\tobservers\n\tobserverSlots\n\n\t// options:\n\t// equals\n\t// save\n\n\t// `prev` if option save was given\n\n\tconstructor(value, options) {\n\t\tthis.value = value\n\t\tif (options) {\n\t\t\tassign(this, options)\n\t\t\tif (this.save) {\n\t\t\t\tthis.prev = value\n\t\t\t}\n\t\t}\n\n\t\tthis.read = markReactive(this.read.bind(this))\n\n\t\tthis.write = this.write.bind(this)\n\t\tthis.update = this.update.bind(this)\n\t}\n\n\tread() {\n\t\t// checkReadForbidden()\n\n\t\tif (Listener) {\n\t\t\tconst sourceSlot = this.observers ? this.observers.length : 0\n\n\t\t\tif (Listener.sources) {\n\t\t\t\tListener.sources.push(this)\n\t\t\t\tListener.sourceSlots.push(sourceSlot)\n\t\t\t} else {\n\t\t\t\tListener.sources = [this]\n\t\t\t\tListener.sourceSlots = [sourceSlot]\n\t\t\t}\n\n\t\t\tif (this.observers) {\n\t\t\t\tthis.observers.push(Listener)\n\t\t\t\tthis.observerSlots.push(Listener.sources.length - 1)\n\t\t\t} else {\n\t\t\t\tthis.observers = [Listener]\n\t\t\t\tthis.observerSlots = [Listener.sources.length - 1]\n\t\t\t}\n\t\t}\n\n\t\treturn this.value\n\t}\n\n\twrite(value) {\n\t\tif (this.equals === false || !this.equals(this.value, value)) {\n\t\t\tif (this.save) {\n\t\t\t\tthis.prev = this.value\n\t\t\t}\n\t\t\tthis.value = value\n\t\t\tif (this.observers && this.observers.length) {\n\t\t\t\trunUpdates(() => {\n\t\t\t\t\tfor (let i = 0, observer; i < this.observers.length; i++) {\n\t\t\t\t\t\tobserver = this.observers[i]\n\n\t\t\t\t\t\tif (observer.state === CLEAN) {\n\t\t\t\t\t\t\tif (observer.pure) {\n\t\t\t\t\t\t\t\tUpdates.push(observer)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tEffects.push(observer)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (observer.observers) {\n\t\t\t\t\t\t\t\tdownstream(observer)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tobserver.state = STALE\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\n\tupdate(value) {\n\t\tif (isFunction(value)) {\n\t\t\tvalue = value(this.value)\n\t\t}\n\t\treturn this.write(value)\n\t}\n\n\tequals(a, b) {\n\t\treturn a === b\n\t}\n\n\t*[Symbol.iterator]() {\n\t\tyield this.read\n\t\tyield this.write\n\t\tyield this.update\n\t}\n}\n\n// API\n\n/**\n * Creates a new root\n *\n * @param {(dispose: Function) => any} fn\n * @param {object} [options]\n * @returns {any}\n */\nexport function root(fn, options = undefined) {\n\tconst prevOwner = Owner\n\tconst prevListener = Listener\n\n\tconst root = new Root(Owner, options)\n\n\tOwner = root\n\tListener = undefined\n\n\ttry {\n\t\treturn runUpdates(() => fn(root.dispose.bind(root)), true)\n\t} finally {\n\t\tOwner = prevOwner\n\t\tListener = prevListener\n\t}\n}\n\n/**\n * Creates a signal\n *\n * @template const T\n * @param {T} [initialValue] - Initial value of the signal\n * @param {SignalOptions} [options] - Signal options\n * @returns {SignalObject<T>}\n */\n/* #__NO_SIDE_EFFECTS__ */\nexport function signal(initialValue, options = undefined) {\n\treturn new Signal(initialValue, options)\n}\n\n/**\n * Creates an effect\n *\n * @param {Function} fn\n * @param {object} [options]\n */\nexport function effect(fn, options = undefined) {\n\tnew Effect(Owner, fn, options)\n}\n\n/**\n * Creates an effect with explicit dependencies\n *\n * @param {Function} depend - Function that causes tracking\n * @param {Function} fn - Function that wont cause tracking\n * @param {object} [options]\n */\nexport function on(depend, fn, options = undefined) {\n\teffect(() => {\n\t\tdepend()\n\t\tuntrack(fn)\n\t}, options)\n}\n\n/**\n * Creates a syncEffect\n *\n * @param {Function} fn\n * @param {object} [options]\n */\nexport function syncEffect(fn, options = undefined) {\n\treturn new SyncEffect(Owner, fn, options)\n}\n\n/**\n * Creates a read-only signal from the return value of a function that\n * automatically updates\n *\n * @template T\n * @param {() => T} fn - Function to re-run when dependencies change\n * @param {SignalOptions} [options]\n * @returns {SignalAccessor<T>} - Read only signal\n */\n\n/* #__NO_SIDE_EFFECTS__ */ export function memo(\n\tfn,\n\toptions = undefined,\n) {\n\treturn new Memo(Owner, fn, options)\n}\n\n/**\n * Batches changes to signals\n *\n * @param {Function} fn\n * @returns {any}\n */\nexport const batch = runUpdates\n\n/**\n * Returns current owner\n *\n * @returns {typeof Owner}\n */\nexport function owner() {\n\treturn Owner\n}\n\nfunction runWithOwner(owner, fn) {\n\tconst prevOwner = Owner\n\tconst prevListener = Listener\n\n\tOwner = owner\n\tListener = undefined\n\n\ttry {\n\t\treturn runUpdates(fn, true)\n\t} catch (err) {\n\t\tthrow err\n\t} finally {\n\t\tOwner = prevOwner\n\t\tListener = prevListener\n\t}\n}\n\n/**\n * Disables tracking for a function\n *\n * @param {Function} fn - Function to run with tracking disabled\n * @returns {any}\n */\nexport function untrack(fn) {\n\tif (Listener === undefined) {\n\t\treturn fn()\n\t}\n\n\tconst prevListener = Listener\n\tListener = undefined\n\ttry {\n\t\treturn fn()\n\t} finally {\n\t\tListener = prevListener\n\t}\n}\n\n/**\n * Runs a callback on cleanup, returns callback\n *\n * @template T\n * @param {T} fn\n * @returns {T}\n */\nexport function cleanup(fn) {\n\tif (Owner) {\n\t\tif (Owner.cleanups) {\n\t\t\tOwner.cleanups.push(fn)\n\t\t} else {\n\t\t\tOwner.cleanups = [fn]\n\t\t}\n\t}\n\treturn fn\n}\n\n// UPDATES\n\nfunction runTop(node) {\n\tswitch (node.state) {\n\t\tcase CLEAN: {\n\t\t\treturn\n\t\t}\n\t\tcase CHECK: {\n\t\t\treturn upstream(node)\n\t\t}\n\t}\n\n\tconst ancestors = []\n\n\tdo {\n\t\tif (node.state) {\n\t\t\tancestors.push(node)\n\t\t}\n\t\tnode = node.owner\n\t} while (node && node.updatedAt < Time)\n\n\tfor (let i = ancestors.length - 1, updates; i >= 0; i--) {\n\t\tnode = ancestors[i]\n\n\t\tswitch (node.state) {\n\t\t\tcase STALE: {\n\t\t\t\tnode.update()\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase CHECK: {\n\t\t\t\tupdates = Updates\n\t\t\t\tUpdates = null\n\t\t\t\trunUpdates(() => upstream(node, ancestors[0]))\n\t\t\t\tUpdates = updates\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction runUpdates(fn, init = false) {\n\tif (Updates) {\n\t\treturn fn()\n\t}\n\n\tlet wait = false\n\n\tif (!init) {\n\t\tUpdates = []\n\t}\n\n\tif (Effects) {\n\t\twait = true\n\t} else {\n\t\tEffects = []\n\t}\n\n\tTime++\n\n\ttry {\n\t\tconst res = fn()\n\n\t\tif (Updates) {\n\t\t\trunQueue(Updates)\n\t\t\tUpdates = null\n\t\t}\n\t\tif (!wait) {\n\t\t\tconst effects = Effects\n\t\t\tEffects = null\n\t\t\tif (effects.length) {\n\t\t\t\trunUpdates(() => runEffects(effects))\n\t\t\t}\n\t\t}\n\n\t\treturn res\n\t} catch (err) {\n\t\tif (!wait) {\n\t\t\tEffects = null\n\t\t}\n\t\tUpdates = null\n\n\t\tthrow err\n\t}\n}\n\nfunction runQueue(queue) {\n\tfor (let i = 0; i < queue.length; i++) {\n\t\trunTop(queue[i])\n\t}\n}\n\nfunction runEffects(queue) {\n\tlet i\n\n\tlet effect\n\tlet userLength = 0\n\tfor (i = 0; i < queue.length; i++) {\n\t\teffect = queue[i]\n\n\t\tif (!effect.user) {\n\t\t\trunTop(effect)\n\t\t} else {\n\t\t\tqueue[userLength++] = effect\n\t\t}\n\t}\n\n\tfor (i = 0; i < userLength; i++) {\n\t\trunTop(queue[i])\n\t}\n}\n\nfunction upstream(node, ignore) {\n\tnode.state = CLEAN\n\n\tfor (let i = 0, source; i < node.sources.length; i++) {\n\t\tsource = node.sources[i]\n\n\t\tif (source.sources) {\n\t\t\tswitch (source.state) {\n\t\t\t\tcase STALE: {\n\t\t\t\t\tif (source !== ignore && source.updatedAt < Time) {\n\t\t\t\t\t\trunTop(source)\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tcase CHECK: {\n\t\t\t\t\tupstream(source, ignore)\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction downstream(node) {\n\tfor (let i = 0, observer; i < node.observers.length; i++) {\n\t\tobserver = node.observers[i]\n\n\t\tif (observer.state === CLEAN) {\n\t\t\tobserver.state = CHECK\n\t\t\tif (observer.pure) {\n\t\t\t\tUpdates.push(observer)\n\t\t\t} else {\n\t\t\t\tEffects.push(observer)\n\t\t\t}\n\t\t\tobserver.observers && downstream(observer)\n\t\t}\n\t}\n}\n\nlet readForbid = false\n\nfunction checkReadForbidden() {\n\tif (readForbid) {\n\t\tconsole.trace('Signal Read!')\n\t}\n}\nexport function readForbidden(fn, value) {\n\tconst prev = readForbid\n\ttry {\n\t\treadForbid = value\n\t\treturn fn()\n\t} finally {\n\t\treadForbid = prev\n\t}\n}\n\n/**\n * Creates a context and returns a function to get or set the value\n *\n * @param {any} [defaultValue] - Default value for the context\n * @returns {typeof Context} Context\n */\nexport function Context(defaultValue = undefined) {\n\tconst id = Symbol()\n\n\treturn useContext.bind(null, id, defaultValue)\n}\n\n/**\n * @overload Gets the context value\n * @returns {any} Context value\n */\n/**\n * @overload Runs `fn` with a new value as context\n * @param {any} newValue - New value for the context\n * @param {Function} fn - Callback to run with the new context value\n * @returns {Children} Children\n */\n/**\n * @param {any} newValue\n * @param {Function} fn\n */\nfunction useContext(id, defaultValue, newValue, fn) {\n\tif (newValue === undefined) {\n\t\treturn Owner?.context && Owner.context[id] !== undefined\n\t\t\t? Owner.context[id]\n\t\t\t: defaultValue\n\t} else {\n\t\tlet res\n\n\t\tsyncEffect(() => {\n\t\t\tOwner.context = {\n\t\t\t\t...Owner.context,\n\t\t\t\t[id]: newValue,\n\t\t\t}\n\t\t\tres = untrack(fn)\n\t\t})\n\n\t\treturn res\n\t}\n}\n\n/**\n * Returns an owned function\n *\n * @param {function | undefined} cb\n * @returns {() => any}\n */\nexport const owned = cb => {\n\tconst o = Owner\n\treturn (...args) => cb && runWithOwner(o, () => cb(...args))\n}\n\n/**\n * Returns true when value is reactive (a signal)\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isReactive = value =>\n\tisFunction(value) && $isReactive in value\n\n/**\n * Marks a function as reactive. Reactive functions are ran inside\n * effects.\n *\n * @param {Function} fn - Function to mark as reactive\n * @returns {Function}\n */\nexport function markReactive(fn) {\n\tfn[$isReactive] = undefined\n\treturn fn\n}\n\n/**\n * Proxies a signals property access so you dont have to call the\n * function\n *\n * @param {Signal} snigal - Signal to proxy\n * @param {object} [target] - Target object for the proxy\n * @returns {object} An object that will read the properties from the\n *   signal\n */\nexport const proxy = (snigal, target = nothing) =>\n\tnew Proxy(target, {\n\t\tget(target, key) {\n\t\t\treturn snigal()[key]\n\t\t},\n\t\thas(target, key) {\n\t\t\treturn key in snigal()\n\t\t},\n\t\townKeys(target) {\n\t\t\treturn keys(snigal())\n\t\t},\n\t})\n\n/**\n * A self contained signal function, when an argument is present it\n * writes to the signal, when theres no argument it reads the signal.\n *\n * @template T\n * @param {T} [value] - Optional initial value\n * @returns {SignalFunction<T>}\n */\nexport function signalFunction(value) {\n\tconst [read, write] = signal(value)\n\treturn markReactive((...args) =>\n\t\targs.length ? write(args[0]) : read(),\n\t)\n}\n\n/**\n * To set and read refs. To use in ref attribute.\n *\n * @template T\n * @returns {SignalFunction<T>}\n */\nexport const ref = () => signalFunction()\n\n/**\n * Runs a function inside an effect if value is a function\n *\n * @param {any} value\n * @param {(value) => any} fn\n */\nexport const withValue = (value, fn) =>\n\tisFunction(value) ? effect(() => fn(getValue(value))) : fn(value)\n\n/**\n * Runs a function inside an effect if value is a function\n *\n * @param {any} value\n * @param {(value) => any} fn\n */\nexport function withPrevValue(value, fn) {\n\tif (isFunction(value)) {\n\t\tlet prev = undefined\n\t\teffect(() => {\n\t\t\tconst val = getValue(value)\n\t\t\tfn(val, prev)\n\t\t\tprev = val\n\t\t})\n\t} else {\n\t\tfn(value)\n\t}\n}\n\n/**\n * Lazy and writable version of `memo`, its writable and will run the\n * function only when used\n *\n * @author ryansolid\n * @param {Function} fn - Function to re-run when dependencies change\n * @returns {((...args) => any) | (() => any)}\n */\nexport function writable(fn) {\n\tconst result = memo(() => signal(fn()))\n\n\treturn markReactive((...args) => {\n\t\treturn args.length ? result().write(args[0]) : result().read()\n\t})\n}\n\n/**\n * Creates an asynchronously effect\n *\n * @param {(currentRunningEffect: Promise<any>) => any} fn - A\n *   function that receives a `currentRunningEffect` that should be\n *   awaited for when wanting to run effects synchronously, that's it\n *   one effect after another.\n */\nexport function asyncEffect(fn) {\n\tconst queue = []\n\teffect(() => {\n\t\tconst { promise, resolve } = withResolvers()\n\n\t\tqueue.push(promise)\n\n\t\tfunction onDone() {\n\t\t\tremoveFromArray(queue, promise)\n\t\t\tresolve()\n\t\t}\n\n\t\tresolved(\n\t\t\tfn(queue.length === 1 ? undefined : queue[queue.length - 2]),\n\t\t\tonDone,\n\t\t)\n\t})\n}\n\n/**\n * A Promise loader handler. Allows to display/run something or\n * nothing while a promise is resolving. Allows to run a callback when\n * the promise resolves. Allows to get notified of errors, and\n * display/run something or nothing, if wanted a `retry` function is\n * given for retrying the promise. All functions run with the original\n * owner, so it's `Context` friendly.\n *\n * @param {(() => Promise<any>) | Promise<any>} fn - Function that\n *   returns a promise\n * @param {{\n * \tonLoading?: any\n * \tonLoaded?: Function\n * \tonError?: ((e: Error, retry: Function) => any) | any\n * }} [options]\n *\n * @returns {Component}\n * @url https://pota.quack.uy/lazy\n */\nexport const lazy = (fn, options = nothing) =>\n\tmarkComponent(props => {\n\t\tconst { onLoading, onLoaded, onError } = options\n\n\t\tconst [value, setValue] = signal(onLoading)\n\n\t\tconst _onLoaded = owned(onLoaded)\n\n\t\tconst retry = () =>\n\t\t\tPromise.resolve(isFunction(fn) ? fn() : fn)\n\t\t\t\t.then(r => {\n\t\t\t\t\tsetValue(\n\t\t\t\t\t\tmarkComponent(() => {\n\t\t\t\t\t\t\tr = isObject(r) && r.default ? r.default : r\n\t\t\t\t\t\t\treturn isFunction(r) ? r(props) : r\n\t\t\t\t\t\t}),\n\t\t\t\t\t)\n\t\t\t\t\tmicrotask(_onLoaded)\n\t\t\t\t})\n\t\t\t\t.catch(e =>\n\t\t\t\t\tonError\n\t\t\t\t\t\t? setValue(\n\t\t\t\t\t\t\t\tmarkComponent(() =>\n\t\t\t\t\t\t\t\t\tisFunction(onError) ? onError(e, retry) : onError,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t: console.error(e),\n\t\t\t\t)\n\t\tretry()\n\n\t\treturn value\n\t})\n\nexport const Lazy = props => lazy(props.children, props)\n\nexport const microtask = fn => queueMicrotask(owned(fn))\n\n// MAP\n\n/**\n * Reactive Map\n *\n * @template T\n * @param {Each<T>} list\n * @param {Function} callback\n * @param {boolean} sort\n */\nexport function map(list, callback, sort) {\n\tconst cache = new Map()\n\tconst duplicates = new Map() // for when caching by value is not possible [1, 2, 1, 1, 1]\n\n\tlet runId = 0\n\n\tlet rows = []\n\t/** @type any[] */\n\tlet prev = []\n\n\tfunction clear() {\n\t\tfor (let i = 0; i < prev.length; i++) {\n\t\t\tprev[i].dispose(true)\n\t\t}\n\t\tcache.clear()\n\t\tduplicates.clear()\n\n\t\trows.length = 0\n\t\tprev.length = 0\n\t}\n\n\t// to get rid of all nodes when parent disposes\n\tcleanup(clear)\n\n\tclass Row {\n\t\tconstructor(item, index, fn, isDupe) {\n\t\t\tthis.runId = -1\n\t\t\tthis.item = item\n\t\t\tthis.index = index\n\t\t\tthis.isDupe = isDupe\n\t\t\tthis.disposer = undefined\n\t\t\tthis.nodes = root(disposer => {\n\t\t\t\tthis.disposer = disposer\n\t\t\t\t/** @type Children[] */\n\t\t\t\treturn fn(item, index)\n\t\t\t})\n\t\t}\n\t\tget begin() {\n\t\t\treturn this.nodes[0]\n\t\t}\n\t\tget end() {\n\t\t\treturn this.nodes[this.nodes.length - 1]\n\t\t}\n\t\tdispose(all) {\n\t\t\t// skip cache deletion as we are going to clear the full map\n\t\t\tif (all === undefined) {\n\t\t\t\t// delete from cache\n\t\t\t\tif (!this.isDupe) {\n\t\t\t\t\tcache.delete(this.item)\n\t\t\t\t} else {\n\t\t\t\t\tconst arr = duplicates.get(this.item)\n\t\t\t\t\tarr.length === 1\n\t\t\t\t\t\t? duplicates.delete(this.item)\n\t\t\t\t\t\t: removeFromArray(arr, this)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.disposer()\n\t\t}\n\t}\n\n\t/**\n\t * @param {Function} fn\n\t * @returns {Children}\n\t */\n\tfunction mapper(fn) {\n\t\tconst cb = fn\n\t\t\t? (item, index) => fn(callback(item, index), index)\n\t\t\t: callback\n\n\t\tconst value = getValue(list) || []\n\n\t\t/** To allow iterate objects as if were an array with indexes */\n\t\tconst items = isIterable(value) ? value.entries() : entries(value)\n\n\t\trunId++\n\t\trows = []\n\t\tconst hasPrev = prev.length\n\n\t\tfor (const [index, item] of items) {\n\t\t\tlet row = hasPrev ? cache.get(item) : undefined\n\n\t\t\t// if the item doesnt exists, create it\n\t\t\tif (row === undefined) {\n\t\t\t\trow = new Row(item, index, cb, false)\n\t\t\t\tcache.set(item, row)\n\t\t\t} else if (row.runId === runId) {\n\t\t\t\t// a map will save only 1 of any primitive duplicates, say: [1, 1, 1, 1]\n\t\t\t\t// if the saved value was already used on this run, create a new one\n\t\t\t\tlet dupes = duplicates.get(item)\n\t\t\t\tif (!dupes) {\n\t\t\t\t\tdupes = []\n\t\t\t\t\tduplicates.set(item, dupes)\n\t\t\t\t}\n\t\t\t\tfor (let i = 0; i < dupes.length; i++) {\n\t\t\t\t\tif (dupes[i].runId !== runId) {\n\t\t\t\t\t\trow = dupes[i]\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (row.runId === runId) {\n\t\t\t\t\trow = new Row(item, index, cb, true)\n\t\t\t\t\tdupes.push(row)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trow.runId = runId // mark used on this run\n\t\t\trow.index = index // save sort order\n\t\t\trows.push(row)\n\t\t}\n\n\t\t// remove rows that arent present on the current run\n\t\tif (rows.length === 0) {\n\t\t\tclear()\n\t\t} else {\n\t\t\tfor (let i = 0; i < prev.length; i++) {\n\t\t\t\tif (prev[i].runId !== runId) {\n\t\t\t\t\tprev[i].dispose()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// reorder elements\n\t\t// `rows.length > 1` because no need for sorting when there are no items\n\t\t// prev.length > 0 to skip sorting on creation as its already sorted\n\t\tif (sort && rows.length > 1 && prev.length) {\n\t\t\t// if the planets align it handles swapping\n\t\t\t// a = sorted\n\t\t\t// b = unsorted\n\t\t\tconst { a, b } = groupBy(rows, (value, index) =>\n\t\t\t\trows[index] === prev[index] ? 'a' : 'b',\n\t\t\t)\n\n\t\t\tlet unsorted = b?.length\n\t\t\tif (\n\t\t\t\ta &&\n\t\t\t\tb &&\n\t\t\t\ta.length &&\n\t\t\t\tb.length &&\n\t\t\t\tb.length < a.length &&\n\t\t\t\tb.every(item => prev.includes(item))\n\t\t\t) {\n\t\t\t\tfor (const usort of b) {\n\t\t\t\t\tfor (const sort of a) {\n\t\t\t\t\t\tif (usort.index === sort.index - 1) {\n\t\t\t\t\t\t\tsort.begin.before(...nodesFromRow(usort))\n\t\t\t\t\t\t\tunsorted--\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t} else if (usort.index === sort.index + 1) {\n\t\t\t\t\t\t\tsort.end.after(...nodesFromRow(usort))\n\t\t\t\t\t\t\tunsorted--\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (unsorted) {\n\t\t\t\t// handles all other cases\n\t\t\t\t// best for any combination of: push/pop/shift/unshift/insertion/deletion\n\t\t\t\t// must check in reverse as on creation stuff is added to the end\n\n\t\t\t\tlet current = rows[rows.length - 1]\n\t\t\t\tfor (let i = rows.length - 1; i > 0; i--) {\n\t\t\t\t\tconst previous = rows[i - 1]\n\t\t\t\t\tif (current.begin.previousSibling !== previous.end) {\n\t\t\t\t\t\tcurrent.begin.before(...nodesFromRow(previous))\n\t\t\t\t\t}\n\t\t\t\t\tcurrent = previous\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// save sorted list\n\t\tprev = rows\n\n\t\t// return external representation\n\t\treturn rows.map(item => item.nodes)\n\t}\n\tmapper[$isMap] = undefined\n\treturn mapper\n}\n\nfunction nodesFromRow(row) {\n\tconst { begin, end } = row\n\tconst nodes = [begin]\n\n\tlet nextSibling = begin\n\twhile (nextSibling !== end) {\n\t\tnextSibling = nextSibling.nextSibling\n\t\tnodes.push(nextSibling)\n\t}\n\n\treturn nodes\n}\n\n/**\n * Resolves and returns `children` in a memo\n *\n * @param {Function | Children} fn\n * @returns {Function} Memo\n * @url https://pota.quack.uy/resolve\n */\nexport function resolve(fn) {\n\tconst children = isFunction(fn) ? memo(fn) : () => fn\n\treturn memo(() => unwrap(children()))\n}\n\n/**\n * Recursively unwrap children functions\n *\n * @param {Children} children\n * @returns {Children}\n */\nfunction unwrap(children) {\n\tif (isFunction(children)) {\n\t\treturn unwrap(children())\n\t}\n\n\tif (isArray(children)) {\n\t\tconst childrens = []\n\t\tfor (let child of children) {\n\t\t\tchild = unwrap(child)\n\t\t\tisArray(child)\n\t\t\t\t? childrens.push(...child)\n\t\t\t\t: childrens.push(child)\n\t\t}\n\t\treturn childrens\n\t}\n\n\treturn children\n}\n\n/**\n * Extend `Pota` and define a `render(props){}` method to create a\n * class component. `ready(cb)` and `cleanup(cb)` methods will be\n * registered automatically\n *\n * @url https://pota.quack.uy/Classes\n */\nexport class Pota {}\n\nPota[$isClass] = undefined\n\n/**\n * Returns true if the `value` is a `Component`\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isComponent = value =>\n\tisFunction(value) && $isComponent in value\n\n/**\n * Returns true if the value can be made a Component\n *\n * @param {any} value\n * @returns {boolean}\n */\nexport const isComponentable = value =>\n\t!isReactive(value) &&\n\t(isFunction(value) ||\n\t\t// avoid [1,2] and support { toString(){ return \"something\"} }\n\t\t(!isArray(value) && isObject(value) && !value.then))\n\n/**\n * Makes of `children` a function. Reactive children will run as is,\n * non-reactive children will run untracked, regular children will\n * just return.\n *\n * @param {Children} children\n * @returns {Function}\n */\nexport function makeCallback(children) {\n\t/**\n\t * When children is an array, as in >${[0, 1, 2]}< then children\n\t * will end as `[[0, 1, 2]]`, so flat it\n\t */\n\n\tchildren = isArray(children) ? flat(children) : children\n\n\tconst callbacks = !isArray(children)\n\t\t? callback(children)\n\t\t: children.map(callback)\n\n\treturn !isArray(children)\n\t\t? markComponent((...args) => callbacks(args))\n\t\t: markComponent((...args) =>\n\t\t\t\tcallbacks.map(callback => callback(args)),\n\t\t\t)\n}\n\nconst callback = child =>\n\tisFunction(child)\n\t\t? isReactive(child)\n\t\t\t? args => {\n\t\t\t\t\t/**\n\t\t\t\t\t * The function inside the `for` is saved in a signal. The\n\t\t\t\t\t * result of the signal is our callback\n\t\t\t\t\t *\n\t\t\t\t\t * ```js\n\t\t\t\t\t * htmlEffect(\n\t\t\t\t\t * \thtml =>\n\t\t\t\t\t * \t\thtml`<table>\n\t\t\t\t\t * \t\t\t<tr>\n\t\t\t\t\t * \t\t\t\t<th>name</th>\n\t\t\t\t\t * \t\t\t</tr>\n\t\t\t\t\t * \t\t\t<for each=\"${tests}\">\n\t\t\t\t\t * \t\t\t\t${item =>\n\t\t\t\t\t * \t\t\t\t\thtml`<tr>\n\t\t\t\t\t * \t\t\t\t\t\t<td>${item.name}</td>\n\t\t\t\t\t * \t\t\t\t\t</tr>`}\n\t\t\t\t\t * \t\t\t</for>\n\t\t\t\t\t * \t\t</table>`,\n\t\t\t\t\t * )\n\t\t\t\t\t * ```\n\t\t\t\t\t */\n\t\t\t\t\tconst r = child()\n\t\t\t\t\treturn isFunction(r)\n\t\t\t\t\t\t? isReactive(r)\n\t\t\t\t\t\t\t? r()\n\t\t\t\t\t\t\t: untrack(() => r(...args))\n\t\t\t\t\t\t: r\n\t\t\t\t}\n\t\t\t: args => untrack(() => child(...args))\n\t\t: () => child\n\n// allows to tell a `signal function` from a `component function`\n// signals and user functions go in effects, for reactivity\n// components and callbacks are untracked and wont go in effects to avoid re-rendering\n\n/**\n * Marks a function as a `Component`.\n *\n * @param {Function} fn - Function to mark as a `Component`\n * @returns {Component}\n */\nexport function markComponent(fn) {\n\tfn[$isComponent] = undefined\n\treturn fn\n}\n\n/**\n * Unwraps components till it gets a value. To keep context relevant\n * to the component\n *\n * @param {Function | any} value - Maybe function\n * @returns {any}\n */\nexport function getValueComponent(value) {\n\twhile ($isComponent in value) value = value()\n\treturn value\n}\n\n/**\n * Adds an event listener to a node\n *\n * @param {Element} node - Element to add the event listener\n * @param {(keyof WindowEventMap & keyof GlobalEventHandlersEventMap)\n * \t| string} type\n *   - The name of the event listener\n *\n * @param {EventListener\n * \t| EventListenerObject\n * \t| (EventListenerObject & AddEventListenerOptions)} handler\n *   - Function to handle the event\n *\n * @returns {Function} - An `off` function for removing the event\n *   listener\n * @url https://pota.quack.uy/props/EventListener\n */\nexport function addEventListener(node, type, handler) {\n\tnode.addEventListener(\n\t\ttype,\n\t\thandler,\n\t\t!isFunction(handler) && handler,\n\t)\n\n\t/**\n\t * Removes event on tracking scope disposal.\n\t *\n\t * Situation: the event was added to the `document` manually using\n\t * `addEventListener`, say to listen for clicks as a \"click\n\t * outside\". The event needs to be removed when the component that\n\t * added it is disposed.\n\t */\n\n\treturn cleanup(() => removeEventListener(node, type, handler))\n}\n\n/**\n * Removes an event listener from a node\n *\n * @param {Element} node - Element to add the event listener\n * @param {(keyof WindowEventMap & keyof GlobalEventHandlersEventMap)\n * \t| string} type\n *   - The name of the event listener\n *\n * @param {EventListener\n * \t| EventListenerObject\n * \t| (EventListenerObject & AddEventListenerOptions)} handler\n *   - Function to handle the event\n *\n * @returns {Function} - An `on` function for adding back the event\n *   listener\n * @url https://pota.quack.uy/props/EventListener\n */\nexport function removeEventListener(node, type, handler) {\n\tnode.removeEventListener(\n\t\ttype,\n\t\thandler,\n\t\t!isFunction(handler) && handler,\n\t)\n\n\treturn () => addEventListener(node, type, handler)\n}\n","import { owned } from './lib/reactive.js'\nimport { call, queueMicrotask } from './lib/std.js'\n\n/**\n * The purpose of this file is to guarantee the timing of some\n * callbacks. It queues a microtask, then the callbacks are added to a\n * position in the array. These are run with a priority.\n */\n\n/** @type boolean */\nlet added\n\n/** @type [][] */\nlet queue\n\nfunction reset() {\n\tqueue = [[], [], [], [], [], []]\n\tadded = false\n}\n\n// initialization\nreset()\n\n/**\n * Queues a callback at a priority\n *\n * @param {PropertyKey} priority - Priority\n * @param {Function} fn - Function to run once the callbacks at this\n *   priority run\n */\nfunction add(priority, fn) {\n\tif (!added) {\n\t\tadded = true\n\t\tqueueMicrotask(run)\n\t}\n\tqueue[priority].push(owned(fn))\n}\n\n/** Runs all queued callbacks */\nfunction run() {\n\tconst q = queue\n\treset()\n\n\tfor (const fns of q) {\n\t\tfns.length && call(fns)\n\t}\n}\n\n/**\n * Queue a function to run before everything else (onProps, onRef,\n * onMount, ready) ex focus restoration\n *\n * @param {Function} fn\n */\nexport const onFixes = fn => add(0, fn)\n\n/**\n * Queue a function to run before (onRef, onMount, ready) ex running\n * user functions on elements via plugins\n *\n * @param {Function} fn\n */\nexport const onProps = fn => add(1, fn)\n\n/**\n * Queue a function to run onRef (before onMount, after onProps)\n *\n * @param {Function} fn\n */\nexport const onRef = fn => add(2, fn)\n\n/**\n * Queue a function to run onMount (before ready, after onRef)\n *\n * @param {Function} fn\n */\nexport const onMount = fn => add(3, fn)\n\n/**\n * Queue a function to run on ready (after onMount)\n *\n * @param {Function} fn\n * @url https://pota.quack.uy/ready\n */\nexport const ready = fn => add(4, fn)\n\n/**\n * Queue a function to run after all user defined processes\n *\n * @param {Function} fn\n */\nexport const onDone = fn => add(5, fn)\n","import { addEventListener } from '../lib/reactive.js'\nimport { window, withState } from '../lib/std.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {EventListenerOrEventListenerObject} value\n * @param {object} props\n * @param {string} localName\n * @param {string} ns\n */\nexport const setEventNS = (node, name, value, props, localName, ns) =>\n\taddEventListener(node, localName, value)\n\n/**\n * Returns an event name when the string could be mapped to an event\n *\n * @param {string} name - String to check for a mapped event\n * @returns {string | undefined} Returns the event name or null in\n *   case isnt found\n */\nexport const eventName = withState((state, name) =>\n\tstate.get(name, name =>\n\t\tname.startsWith('on') && name.toLowerCase() in window\n\t\t\t? name.slice(2).toLowerCase()\n\t\t\t: null,\n\t),\n)\n/*\nconst eventNames = new Set(\n\tkeys(global).filter(prop => prop.startsWith('on')),\n)\n*/\n","import { cacheStore } from '../lib/std.js'\nimport { onProps } from '../scheduler.js'\n\nexport const plugins = cacheStore()\nexport const pluginsNS = cacheStore()\n\n/**\n * Defines a prop that can be used on any Element\n *\n * @param {string} propName - Name of the prop\n * @param {(\n * \tnode: Elements,\n * \tpropName: string,\n * \tpropValue: Function | any,\n * \tprops: object,\n * ) => void} fn\n *   - Function to run when this prop is found on any Element\n *\n * @param {boolean} [onMicrotask=true] - To avoid the problem of\n *   needed props not being set, or children elements not created yet.\n *   Default is `true`\n * @url https://pota.quack.uy/props/propsPlugin\n */\nexport const propsPlugin = (propName, fn, onMicrotask) => {\n\tplugin(plugins, propName, fn, onMicrotask)\n}\n\n/**\n * Defines a namespaced prop that can be used on any Element\n *\n * @param {string} NSName - Name of the namespace\n * @param {(\n * \tnode: Elements,\n * \tpropName: string,\n * \tpropValue: Function | any,\n * \tprops: object,\n * \tlocalName: string,\n * \tns: string,\n * ) => void} fn\n *   - Function to run when this prop is found on any Element\n *\n * @param {boolean} [onMicrotask=true] - Set to run on a microtask to\n *   avoid the problem of needed props not being set, or children\n *   elements not being created yet. Default is `true`\n */\nexport const propsPluginNS = (NSName, fn, onMicrotask) => {\n\tplugin(pluginsNS, NSName, fn, onMicrotask)\n}\n\n/**\n * Defines prop and namespaced prop that can be used on any Element\n *\n * @param {string} propName - Name of the prop/namespace\n * @param {Function} fn - Function to run when this prop is found on\n *   any Element\n * @param {boolean} [onMicrotask=true] - Set to run on a microtask to\n *   avoid the problem of needed props not being set, or children\n *   elements not being created yet. Default is `true`\n */\nexport const propsPluginBoth = (propName, fn, onMicrotask) => {\n\tplugin(plugins, propName, fn, onMicrotask)\n\tplugin(pluginsNS, propName, fn, onMicrotask)\n}\n\nconst plugin = (plugins, name, fn, onMicrotask = true) => {\n\tplugins.set(\n\t\tname,\n\t\t!onMicrotask ? fn : (...args) => onProps(() => fn(...args)),\n\t)\n}\n","import { withValue } from '../lib/reactive.js'\nimport { isNullUndefined } from '../lib/std.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {object} props\n * @param {string} localName\n * @param {string} ns\n */\nexport const setPropertyNS = (\n\tnode,\n\tname,\n\tvalue,\n\tprops,\n\tlocalName,\n\tns,\n) => setProperty(node, localName, value)\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @url https://pota.quack.uy/props/setProperty\n */\nexport const setProperty = (node, name, value) =>\n\twithValue(value, value => _setProperty(node, name, value))\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n */\nexport function _setProperty(node, name, value) {\n\t// if the value is null or undefined it will be set to null\n\tif (isNullUndefined(value)) {\n\t\t// defaulting to undefined breaks `progress` tag and the whole page\n\t\tnode[name] = null\n\t} else {\n\t\tnode[name] = value\n\t}\n}\n","import { withValue } from '../lib/reactive.js'\nimport { isNullUndefined } from '../lib/std.js'\n\nimport { NS } from '../constants.js'\n\n// NODE ATTRIBUTES\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {object} props\n * @param {string} localName\n * @param {string} ns\n */\nexport const setAttributeNS = (\n\tnode,\n\tname,\n\tvalue,\n\tprops,\n\tlocalName,\n\tns,\n) => setAttribute(node, localName, value)\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {string} [ns]\n * @url https://pota.quack.uy/props/setAttribute\n */\nexport const setAttribute = (node, name, value, ns) =>\n\twithValue(value, value => _setAttribute(node, name, value, ns))\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {string} value\n * @param {string} [ns]\n */\nexport function _setAttribute(node, name, value, ns) {\n\t// if the value is null or undefined it will be removed\n\tif (isNullUndefined(value)) {\n\t\tns && NS[ns]\n\t\t\t? node.removeAttributeNS(NS[ns], name)\n\t\t\t: node.removeAttribute(name)\n\t} else {\n\t\tns && NS[ns]\n\t\t\t? node.setAttributeNS(NS[ns], name, value)\n\t\t\t: node.setAttribute(name, value)\n\t}\n}\n","// NODE UNKNOWN PROPERTIES / ATTRIBUTES\n\nimport { withValue } from '../lib/reactive.js'\nimport { isBoolean, isNullUndefined, isObject } from '../lib/std.js'\n\nimport { _setAttribute } from './attribute.js'\nimport { _setProperty } from './property.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {string} [ns]\n */\nexport const setUnknownProp = (node, name, value, ns) =>\n\twithValue(value, value => _setUnknownProp(node, name, value, ns))\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {string} [ns]\n */\nconst _setUnknownProp = (node, name, value, ns) => {\n\tif (isObject(value)) {\n\t\t// when not null object\n\t\t_setProperty(node, name, value)\n\t} else if (isBoolean(value) && !name.includes('-')) {\n\t\t// when boolean and name doesnt have a hyphen\n\t\t_setProperty(node, name, value)\n\t} else {\n\t\t// fallback to attribute\n\t\t_setAttribute(node, name, value, ns)\n\n\t\t// to be able to delete properties\n\t\tisNullUndefined(value) && _setProperty(node, name, value)\n\t}\n}\n","// BOOL ATTRIBUTES\n\nimport { withValue } from '../lib/reactive.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {object} props\n * @param {string} localName\n * @param {string} ns\n */\nexport const setBoolNS = (node, name, value, props, localName, ns) =>\n\tsetBool(node, localName, value)\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @url https://pota.quack.uy/props/setBool\n */\nexport const setBool = (node, name, value) =>\n\twithValue(value, value => _setBool(node, name, value))\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n */\nexport const _setBool = (node, name, value) =>\n\t// if the value is falsy gets removed\n\t!value ? node.removeAttribute(name) : node.setAttribute(name, '')\n","// node style\n\nimport { withValue } from '../lib/reactive.js'\nimport { getValue, isNullUndefined, isObject } from '../lib/std.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {object} props\n * @url https://pota.quack.uy/props/setStyle\n */\nexport const setStyle = (node, name, value, props) =>\n\tsetNodeStyle(node.style, value)\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {object} props\n * @param {string} localName\n * @param {string} ns\n */\nexport const setStyleNS = (node, name, value, props, localName, ns) =>\n\tsetNodeStyle(\n\t\tnode.style,\n\t\tisObject(value) ? value : { [localName]: value },\n\t)\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n * @param {object} props\n * @param {string} localName\n * @param {string} ns\n */\nexport const setVarNS = (node, name, value, props, localName, ns) =>\n\tsetNodeStyle(node.style, { ['--' + localName]: value })\n\n/**\n * @param {CSSStyleDeclaration} style\n * @param {unknown} value\n */\nfunction setNodeStyle(style, value) {\n\tif (isObject(value)) {\n\t\tlet name\n\t\tfor (name in value) {\n\t\t\tsetStyleValue(style, name, value[name])\n\t\t}\n\t\treturn\n\t}\n\tconst type = typeof value\n\tif (type === 'string') {\n\t\tstyle.cssText = value\n\t\treturn\n\t}\n\tif (type === 'function') {\n\t\twithValue(value, value => setNodeStyle(style, getValue(value)))\n\t\treturn\n\t}\n}\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n */\nexport const setElementStyle = (node, name, value) =>\n\tsetStyleValue(node.style, name, value)\n\n/**\n * @param {CSSStyleDeclaration} style\n * @param {string} name\n * @param {unknown} value\n */\nconst setStyleValue = (style, name, value) =>\n\twithValue(value, value => _setStyleValue(style, name, value))\n\n/**\n * @param {CSSStyleDeclaration} style\n * @param {string} name\n * @param {string | null} value\n */\nconst _setStyleValue = (style, name, value) =>\n\t// if the value is null or undefined it will be removed\n\tisNullUndefined(value)\n\t\t? style.removeProperty(name)\n\t\t: style.setProperty(name, value)\n","/** Returns true or false with a `chance` of getting `true` */\nexport const chance = (chance = 50, generator = random) => {\n\treturn generator() < chance / 100\n}\n\n/** Returns random number between 0 and 1 */\nexport const random = () =>\n\tcrypto.getRandomValues(new Uint32Array(1))[0] / (0xffffffff + 1)\n\nexport const randomBetween = (min, max, generator = random) =>\n\tMath.floor(generator() * (max - min + 1)) + min\n\nexport const randomColor = (min = 0, max = 255) =>\n\t'rgb(' +\n\trandomBetween(min, max) +\n\t',' +\n\trandomBetween(min, max) +\n\t',' +\n\trandomBetween(min, max) +\n\t')'\n\nexport const randomId = () =>\n\tcrypto.getRandomValues(new BigUint64Array(1))[0].toString(36)\n\n/**\n * Returns a random number generator based no a seed that generates\n * numbers between 0 and 1\n */\nexport function randomSeeded(seed) {\n\tconst m = 2 ** 35 - 31\n\tlet s = seed % m\n\treturn () => (s = (s * 185852) % m) / m\n}\n","import {\n\tadoptedStyleSheetsAdd,\n\tclassListAdd,\n\tgetDocumentForElement,\n\tsheet,\n\twithState,\n} from '../lib/std.js'\n\nimport { randomId } from '../plugin/useRandom.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {string} value\n * @param {object} props\n */\nexport const setCSS = (node, name, value, props) =>\n\tsetNodeCSS(node, value)\n\n/**\n * @param {Element} node\n * @param {string} value\n */\nconst setNodeCSS = withState((state, node, value) => {\n\tclassListAdd(\n\t\tnode,\n\t\tstate.get(value, value => {\n\t\t\tconst id = 'c' + randomId()\n\t\t\tadoptedStyleSheetsAdd(\n\t\t\t\tgetDocumentForElement(node),\n\t\t\t\tsheet(value.replace(/class/g, '.' + id)),\n\t\t\t)\n\t\t\treturn id\n\t\t}),\n\t)\n})\n","import { cleanup } from '../lib/reactive.js'\n\nimport { onMount, onRef } from '../scheduler.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {Function} value\n * @param {object} props\n */\nexport const setRef = (node, name, value, props) =>\n\tonRef(() => value(node))\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {Function} value\n * @param {object} props\n */\nexport const setOnMount = (node, name, value, props) =>\n\tonMount(() => value(node))\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {Function} value\n * @param {object} props\n */\nexport const setUnmount = (node, name, value, props) =>\n\tcleanup(() => value(node))\n","// node class / classList\n\nimport { withPrevValue, withValue } from '../lib/reactive.js'\nimport {\n\tclassListAdd,\n\tclassListRemove,\n\tisFunction,\n\tisString,\n} from '../lib/std.js'\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {object | string | ArrayLike<any>} value\n * @param {object} props\n */\nexport const setClass = (node, name, value, props) =>\n\tisString(value)\n\t\t? node.setAttribute('class', value)\n\t\t: setClassList(node, value)\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {object | string | ArrayLike<any>} value\n * @param {object} props\n * @param {string} localName\n * @param {string} ns\n */\nexport const setClassNS = (\n\tnode,\n\tname,\n\tvalue,\n\tprops,\n\tlocalName,\n\tns,\n) =>\n\tisFunction(value)\n\t\t? setClassListValue(node, localName, value)\n\t\t: setClassList(node, value)\n\n/**\n * @param {Element} node\n * @param {object | string | ArrayLike<any>} value\n */\nfunction setClassList(node, value) {\n\tswitch (typeof value) {\n\t\tcase 'string': {\n\t\t\t_setClassListValue(node, value, true)\n\t\t\tbreak\n\t\t}\n\n\t\tcase 'object': {\n\t\t\tlet name\n\t\t\tfor (name in value) {\n\t\t\t\tsetClassListValue(node, name, value[name])\n\t\t\t}\n\t\t\tbreak\n\t\t}\n\n\t\tcase 'function': {\n\t\t\twithValue(value, value => setClassList(node, value))\n\t\t\tbreak\n\t\t}\n\t}\n}\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n */\nconst setClassListValue = (node, name, value) =>\n\twithPrevValue(value, (value, prev) => {\n\t\t// on initialization do not remove whats not there\n\t\tif (!value && !prev) {\n\t\t} else {\n\t\t\t_setClassListValue(node, name, value)\n\t\t}\n\t})\n\n/**\n * @param {Element} node\n * @param {string} name\n * @param {unknown} value\n */\n\nconst _setClassListValue = (node, name, value) =>\n\t// null, undefined or false, the class is removed\n\t!value\n\t\t? classListRemove(node, name)\n\t\t: classListAdd(node, ...name.trim().split(/\\s+/))\n","import { addEventListener, owned } from '../lib/reactive.js'\nimport { isObject } from '../lib/std.js'\n\nimport { eventName } from './event.js'\n\nimport {\n\tplugins,\n\tpluginsNS,\n\tpropsPlugin,\n\tpropsPluginBoth,\n\tpropsPluginNS,\n} from './plugin.js'\nimport { _setProperty } from './property.js'\nimport { setUnknownProp } from './unknown.js'\n\n// exports\n\nexport { setAttribute } from './attribute.js'\nexport { setBool } from './bool.js'\nexport { setProperty } from './property.js'\nexport { setElementStyle as setStyle } from './style.js'\n\n// PLUGINS NS\n\n// namespaced attributes/properties\n\nimport { setPropertyNS } from './property.js'\npropsPluginNS('prop', setPropertyNS, false)\n\nimport { setAttributeNS } from './attribute.js'\npropsPluginNS('attr', setAttributeNS, false)\n\nimport { setBoolNS } from './bool.js'\npropsPluginNS('bool', setBoolNS, false)\n\n// events\n\nimport { setEventNS } from './event.js'\npropsPluginNS('on', setEventNS, false)\n\n// var\n\nimport { setVarNS } from './style.js'\npropsPluginNS('var', setVarNS, false)\n\n// PLUGINS REGULAR\n\n// forced as properties\n\nimport { setProperty } from './property.js'\nfor (const item of [\n\t'value',\n\t'textContent',\n\t'innerText',\n\t'innerHTML',\n]) {\n\tpropsPlugin(item, setProperty, false)\n}\n\n// noop\n\nimport { noop } from '../lib/std.js'\npropsPlugin('__dev', noop, false)\npropsPlugin('xmlns', noop, false)\n\n// PLUGIN BOTH\n\n// css\n\nimport { setCSS } from './css.js'\npropsPluginBoth('css', setCSS, false)\n\n// mount\n\nimport { setOnMount } from './lifecycle.js'\npropsPluginBoth('onMount', setOnMount, false)\n\n// unmount\n\nimport { setUnmount } from './lifecycle.js'\npropsPluginBoth('onUnmount', setUnmount, false)\n\n// ref\n\nimport { setRef } from './lifecycle.js'\npropsPluginBoth('ref', setRef, false)\n\n// PLUGIN BOTH DIFFERENT\n\n// styles\n\nimport { setStyle, setStyleNS } from './style.js'\npropsPlugin('style', setStyle, false)\npropsPluginNS('style', setStyleNS, false)\n\n// class\n\nimport { setClass, setClassNS } from './class.js'\npropsPlugin('class', setClass, false)\npropsPluginNS('class', setClassNS, false)\n\n// catch all\n\n/**\n * Assigns props to an Element\n *\n * @param {Element} node - Element to which assign props\n * @param {object} props - Props to assign\n * @param {number} [isCustomElement] - Is custom element\n */\nexport function assignProps(node, props, isCustomElement) {\n\tlet name\n\n\tfor (name in props) {\n\t\tassignProp(node, name, props[name], props, isCustomElement)\n\t}\n\n\treturn node\n}\n\n/**\n * Assigns a prop to an Element\n *\n * @param {Element} node\n * @param {string} name\n * @param {any} value\n * @param {object} props\n * @param {number} [isCE]\n */\nexport function assignProp(node, name, value, props, isCE) {\n\tif (isObject(value) && 'then' in value) {\n\t\tvalue.then(\n\t\t\towned(value => assignProp(node, name, value, props, isCE)),\n\t\t)\n\t\treturn\n\t}\n\t// run plugins\n\n\tlet plugin = plugins.get(name)\n\tif (plugin) {\n\t\tplugin(node, name, value, props)\n\t\treturn\n\t}\n\n\t// onClick={handler}\n\tlet event = eventName(name)\n\tif (event) {\n\t\taddEventListener(node, event, value)\n\t\treturn\n\t}\n\n\tif (name.includes(':')) {\n\t\t// with ns\n\t\tlet [ns, localName] = name.split(':')\n\n\t\t// run plugins NS\n\t\tplugin = pluginsNS.get(ns)\n\t\tif (plugin) {\n\t\t\tplugin(node, name, value, props, localName, ns)\n\t\t\treturn\n\t\t}\n\n\t\t// onClick:my-ns={handler}\n\t\tevent = eventName(ns)\n\t\tif (event) {\n\t\t\taddEventListener(node, event, value)\n\t\t\treturn\n\t\t}\n\n\t\tisCustomElement(node, props, isCE)\n\t\t\t? _setProperty(node, name, value)\n\t\t\t: setUnknownProp(node, name, value, ns)\n\t\treturn\n\t}\n\n\t// catch all\n\tisCustomElement(node, props, isCE)\n\t\t? _setProperty(node, name, value)\n\t\t: setUnknownProp(node, name, value)\n}\n\nconst isCustomElement = (node, props, isCustomElement) =>\n\t// DocumentFragment doesn't have a `localName?`\n\tisCustomElement !== undefined\n\t\t? isCustomElement\n\t\t: 'is' in props || node.localName?.includes('-')\n","// CONSTANTS\n\nimport { $isClass, $isMap, NS } from './constants.js'\n\n// LIB\n\nimport {\n\tcleanup,\n\tContext,\n\teffect,\n\tisReactive,\n\troot,\n\tsignal,\n\tuntrack,\n} from './lib/reactive.js'\n\nimport {\n\tadoptedStyleSheetsAdd,\n\tadoptedStyleSheetsRemove,\n\tcreateElement,\n\tcreateElementNS,\n\tcreateTextNode,\n\tCSSStyleSheet,\n\tdocument,\n\tDocumentFragment,\n\tflat,\n\tfreeze,\n\tgetDocumentForElement,\n\timportNode,\n\tisArray,\n\tisConnected,\n\titerator,\n\tnothing,\n\tquerySelector,\n\tresolved,\n\tstringify,\n\ttoArray,\n\twalkElements,\n} from './lib/std.js'\n\nimport {\n\tisComponent,\n\tisComponentable,\n\tmarkComponent,\n} from './lib/reactive.js'\n\nimport { onFixes, ready } from './scheduler.js'\n\n// PROPERTIES / ATTRIBUTES\n\nimport { assignProps } from './props/@main.js'\nimport { propsPlugin } from './props/plugin.js'\n\n// STATE\n\nconst useXMLNS = context()\n\n// COMPONENTS\n\n/**\n * Used by the regular JSX transform, as `<>...</>` or\n * `<Fragment>...</Fragment>`.\n */\nexport const Fragment = props => props.children\n\n/**\n * Creates components for things. When props argument is given, the\n * props become fixed. When props argument is ommited, it allows you\n * to keep calling the returned function with new props. Returns a\n * function because we need to render from parent to children instead\n * of from children to parent. This allows to properly set the\n * reactivity tree (think of nested effects that clear inner effects,\n * context, etc).\n *\n * @param {string | Function | Element | object | symbol} value -\n *   Component\n * @param {any} [props] Object\n * @url https://pota.quack.uy/Component\n */\n\nexport function Component(value, props) {\n\tif (value === Fragment) {\n\t\treturn props.children\n\t}\n\n\t/** Freeze props so isnt directly writable */\n\tfreeze(props)\n\n\t/**\n\t * Create a callable function to pass `props`. When `props` its not\n\t * defined it allows the user to make a `Factory` of components,\n\t * when `props` its defined the `props` are fixed.\n\t */\n\treturn props === undefined\n\t\t? Factory(value)\n\t\t: markComponent(Factory(value).bind(null, props))\n}\n\n/**\n * Creates a component that could be called with a props object\n *\n * @template T\n * @param {any} value\n * @returns {Component}\n */\n\nfunction Factory(value) {\n\tif (isComponent(value)) {\n\t\treturn value\n\t}\n\n\tswitch (typeof value) {\n\t\tcase 'string': {\n\t\t\t// string component, 'div' becomes <div>\n\t\t\tvalue = createTag.bind(null, value)\n\t\t\tbreak\n\t\t}\n\t\tcase 'function': {\n\t\t\tif ($isClass in value) {\n\t\t\t\t// class component <MyComponent../>\n\t\t\t\tvalue = createClass.bind(null, value)\n\t\t\t\tbreak\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * ```js\n\t\t\t * const [Count, setCount] = signal(1)\n\t\t\t * return <Count />\n\t\t\t * ```\n\t\t\t */\n\t\t\tif (isReactive(value)) {\n\t\t\t\tvalue = createAnything.bind(null, value)\n\t\t\t\tbreak\n\t\t\t}\n\n\t\t\t// function component <MyComponent../>\n\t\t\t// value = value\n\t\t\tbreak\n\t\t}\n\t\tdefault: {\n\t\t\tif (value instanceof Node) {\n\t\t\t\t// node component <div>\n\t\t\t\tvalue = createNode.bind(null, value)\n\t\t\t\tbreak\n\t\t\t}\n\n\t\t\tvalue = createAnything.bind(null, value)\n\t\t\tbreak\n\t\t}\n\t}\n\n\treturn markComponent(value)\n}\n\nexport function createComponent(value) {\n\tconst component = Factory(value)\n\n\treturn props => {\n\t\t/** Freeze props so isnt directly writable */\n\t\tfreeze(props)\n\t\treturn markComponent(() => component(props))\n\t}\n}\n\nfunction createClass(value, props) {\n\tconst i = new value()\n\ti.ready && ready(i.ready.bind(i))\n\ti.cleanup && cleanup(i.cleanup.bind(i))\n\n\treturn i.render(props)\n}\n\nfunction createAnything(value, props) {\n\treturn value\n}\n\n/**\n * Creates a x/html element from a tagName\n *\n * @template P\n * @param {TagNames} tagName\n * @param {P} props\n * @returns {Element} Element\n */\nfunction createTag(tagName, props) {\n\t/**\n\t * Namespace, use props xmlns or special case svg, math, etc in case\n\t * of missing xmlns attribute\n\t */\n\tconst xmlns = props?.xmlns || NS[tagName]\n\n\treturn withXMLNS(\n\t\txmlns,\n\t\txmlns =>\n\t\t\tcreateNode(\n\t\t\t\txmlns\n\t\t\t\t\t? createElementNS(xmlns, tagName)\n\t\t\t\t\t: createElement(tagName),\n\t\t\t\tprops,\n\t\t\t),\n\t\ttagName,\n\t)\n}\n\nfunction withXMLNS(xmlns, fn, tagName) {\n\tconst nsContext = useXMLNS()\n\n\tif (xmlns && xmlns !== nsContext) {\n\t\t// the xmlns changed, use the new xmlns\n\t\treturn useXMLNS(xmlns, () => fn(xmlns))\n\t}\n\n\t/**\n\t * `foreignObject` children are created with html xmlns (default\n\t * browser behaviour)\n\t */\n\tif (nsContext && tagName === 'foreignObject') {\n\t\treturn useXMLNS(NS.html, () => fn(nsContext))\n\t}\n\n\treturn fn(nsContext)\n}\n\n// PARTIALS\n\nfunction cloneNode(content, xmlns) {\n\tconst template = xmlns\n\t\t? createElementNS(xmlns, 'template')\n\t\t: createElement('template')\n\n\ttemplate.innerHTML = content\n\n\t// xml\n\tif (!template.content) {\n\t\tif (template.childNodes.length === 1) {\n\t\t\treturn template.firstChild\n\t\t}\n\n\t\ttemplate.content = new DocumentFragment()\n\t\ttemplate.content.append(...template.childNodes)\n\t}\n\n\treturn template.content.childNodes.length === 1\n\t\t? template.content.firstChild\n\t\t: template.content\n}\n\nexport function createPartial(\n\tcontent,\n\tpropsAt = nothing,\n\telementData = nothing,\n) {\n\tlet clone = () => {\n\t\tconst node = withXMLNS(elementData.x, xmlns =>\n\t\t\tcloneNode(content, xmlns),\n\t\t)\n\n\t\tclone = elementData.i\n\t\t\t? importNode.bind(null, node, true)\n\t\t\t: node.cloneNode.bind(node, true)\n\t\treturn clone()\n\t}\n\n\treturn props => {\n\t\t/** Freeze props so isnt directly writable */\n\t\tfreeze(props)\n\t\treturn markComponent(() =>\n\t\t\tassignPartialProps(clone(), props, propsAt, elementData),\n\t\t)\n\t}\n}\n\nfunction assignPartialProps(node, props, propsAt, elementData) {\n\tif (props) {\n\t\tconst nodes = []\n\t\twalkElements(node, node => {\n\t\t\tnodes.push(node)\n\n\t\t\tif (nodes.length === elementData.m) return true\n\t\t})\n\n\t\twithXMLNS(elementData.x, xmlns => {\n\t\t\tfor (let i = 0; i < props.length; i++) {\n\t\t\t\tassignProps(\n\t\t\t\t\tnodes[propsAt[i] || i],\n\t\t\t\t\tprops[i],\n\t\t\t\t\t// only the container may be a custom element\n\t\t\t\t\ti === 0 ? elementData.c : 0,\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\treturn node instanceof DocumentFragment\n\t\t? toArray(node.childNodes)\n\t\t: node\n}\n\n/**\n * Assigns props to an element and creates its children\n *\n * @template P\n * @param {Element} node\n * @param {P} props\n * @returns {Element} Element\n */\nfunction createNode(node, props) {\n\tif (props) {\n\t\tassignProps(node, props)\n\t}\n\treturn node\n}\n\n/**\n * Creates the children for a parent\n *\n * @param {Element} parent\n * @param {Children} child\n * @param {boolean} [relative]\n * @param {Text | undefined} [prev]\n * @returns {Children}\n */\nfunction createChildren(parent, child, relative, prev = undefined) {\n\tswitch (typeof child) {\n\t\t// string/number\n\t\tcase 'string':\n\t\tcase 'number': {\n\t\t\tif (prev instanceof Text) {\n\t\t\t\tprev.nodeValue = child\n\t\t\t\treturn prev\n\t\t\t}\n\t\t\treturn insertNode(parent, createTextNode(child), relative)\n\t\t}\n\n\t\tcase 'function': {\n\t\t\t// component\n\t\t\tif (isComponent(child)) {\n\t\t\t\treturn createChildren(parent, untrack(child), relative)\n\t\t\t}\n\t\t\tlet node = []\n\n\t\t\t// signal/memo/external/user provided function\n\t\t\t// needs placeholder to stay in position\n\t\t\tparent = createPlaceholder(\n\t\t\t\tparent,\n\t\t\t\tundefined /*child.name*/,\n\t\t\t\trelative,\n\t\t\t)\n\n\t\t\t// For\n\t\t\tif ($isMap in child) {\n\t\t\t\teffect(() => {\n\t\t\t\t\tnode = toDiff(\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\tchild(child => {\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * Wrap the item with placeholders, for when stuff in\n\t\t\t\t\t\t\t * between moves. If a `Show` adds and removes nodes, we\n\t\t\t\t\t\t\t * dont have a reference to these nodes. By delimiting\n\t\t\t\t\t\t\t * with a shore, we can just handle anything in between\n\t\t\t\t\t\t\t * as a group.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tconst begin = createPlaceholder(\n\t\t\t\t\t\t\t\tparent,\n\t\t\t\t\t\t\t\tundefined /*begin*/,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\tconst end = createPlaceholder(\n\t\t\t\t\t\t\t\tparent,\n\t\t\t\t\t\t\t\tundefined /*end*/,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\treturn [begin, createChildren(end, child, true), end]\n\t\t\t\t\t\t}),\n\t\t\t\t\t)\n\t\t\t\t})\n\n\t\t\t\tcleanup(() => {\n\t\t\t\t\ttoDiff(node)\n\t\t\t\t\tparent.remove()\n\t\t\t\t})\n\t\t\t\treturn [node, parent]\n\t\t\t}\n\n\t\t\t// maybe a signal so needs an effect\n\n\t\t\teffect(() => {\n\t\t\t\tnode = toDiff(node, [\n\t\t\t\t\tcreateChildren(parent, child(), true, node[0]),\n\t\t\t\t])\n\t\t\t})\n\n\t\t\tcleanup(() => {\n\t\t\t\ttoDiff(node)\n\t\t\t\tparent.remove()\n\t\t\t})\n\t\t\t/**\n\t\t\t * A placeholder is created and added to the document but doesnt\n\t\t\t * form part of the children. The placeholder needs to be\n\t\t\t * returned so it forms part of the group of children. If\n\t\t\t * children are moved and the placeholder is not moved with\n\t\t\t * them, then, whenever children update these will be at the\n\t\t\t * wrong place. wrong place: where the placeholder is and not\n\t\t\t * where the children were moved to\n\t\t\t */\n\t\t\treturn [node, parent]\n\t\t}\n\n\t\tcase 'object': {\n\t\t\t// children/fragments\n\t\t\tif (isArray(child)) {\n\t\t\t\treturn child.length === 1\n\t\t\t\t\t? createChildren(parent, child[0], relative)\n\t\t\t\t\t: child.map(child =>\n\t\t\t\t\t\t\tcreateChildren(parent, child, relative),\n\t\t\t\t\t\t)\n\t\t\t}\n\n\t\t\t// Node/DocumentFragment\n\t\t\tif (child instanceof Node) {\n\t\t\t\t/**\n\t\t\t\t * DocumentFragment are special as only the children get added\n\t\t\t\t * to the document and the document becomes empty. If we dont\n\t\t\t\t * insert them 1 by 1 then we wont have a reference to them\n\t\t\t\t * for deletion on cleanup with node.remove()\n\t\t\t\t */\n\t\t\t\tif (child instanceof DocumentFragment) {\n\t\t\t\t\treturn createChildren(\n\t\t\t\t\t\tparent,\n\t\t\t\t\t\ttoArray(child.childNodes),\n\t\t\t\t\t\trelative,\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\treturn insertNode(parent, child, relative)\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * The value is `null`, as in {null} or like a show returning\n\t\t\t * `null` on the falsy case\n\t\t\t */\n\t\t\tif (child === null) {\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\t// async components\n\t\t\tif ('then' in child) {\n\t\t\t\tconst [value, setValue] = signal(undefined)\n\n\t\t\t\tconst onResult = result =>\n\t\t\t\t\tisConnected(parent) && setValue(result)\n\n\t\t\t\tresolved(child, onResult)\n\n\t\t\t\treturn createChildren(parent, value, relative)\n\t\t\t}\n\n\t\t\t// iterable/Map/Set/NodeList\n\t\t\tif (iterator in child) {\n\t\t\t\treturn createChildren(\n\t\t\t\t\tparent,\n\t\t\t\t\ttoArray(child.values()),\n\t\t\t\t\trelative,\n\t\t\t\t)\n\t\t\t}\n\n\t\t\t// CSSStyleSheet\n\t\t\tif (child instanceof CSSStyleSheet) {\n\t\t\t\t/**\n\t\t\t\t * Custom elements wont report a document unless is already\n\t\t\t\t * connected. So our stylesheet would end on the main document\n\t\t\t\t * intead of the shadodRoot\n\t\t\t\t */\n\t\t\t\tonFixes(() => {\n\t\t\t\t\tif (isConnected(parent)) {\n\t\t\t\t\t\tconst doc = getDocumentForElement(parent)\n\t\t\t\t\t\tadoptedStyleSheetsAdd(doc, child)\n\n\t\t\t\t\t\tcleanup(() => adoptedStyleSheetsRemove(doc, child))\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\t// object.toString fancy objects\n\t\t\treturn createChildren(\n\t\t\t\tparent,\n\t\t\t\t// Object.create(null) would fail to convert to string\n\t\t\t\t'toString' in child ? child.toString() : stringify(child),\n\t\t\t\trelative,\n\t\t\t)\n\t\t}\n\t\tcase 'undefined': {\n\t\t\treturn undefined\n\t\t}\n\t\tdefault: {\n\t\t\t// boolean/bigint/symbol/catch all\n\t\t\t// toString() is needed for `Symbol`\n\t\t\treturn insertNode(\n\t\t\t\tparent,\n\t\t\t\tcreateTextNode(child.toString()),\n\t\t\t\trelative,\n\t\t\t)\n\t\t}\n\t}\n}\n\npropsPlugin(\n\t'children',\n\t(node, propName, propValue) => createChildren(node, propValue),\n\tfalse,\n)\n\n/**\n * Creates placeholder to keep nodes in position\n *\n * @param {Element} parent\n * @param {unknown} text\n * @param {boolean} [relative]\n * @returns {Element}\n */\nconst createPlaceholder = (parent, text, relative) => {\n\treturn insertNode(parent, createTextNode(''), relative)\n\n\t/* dev\n\treturn insertNode(\n\t\tparent,\n\t\tdocument.createComment(\n\t\t\t(text || '') + (relative ? ' relative' : ''),\n\t\t),\n\t\trelative,\n\t) */\n}\n\nconst head = document.head\n\n/**\n * Adds the element to the document\n *\n * @param {Element} parent\n * @param {Element &\n * \tHTMLTitleElement &\n * \tHTMLMetaElement &\n * \tHTMLLinkElement} node\n * @param {boolean} [relative]\n * @returns {Element}\n */\n\nfunction insertNode(parent, node, relative) {\n\t// special case `head`\n\tif (parent === head) {\n\t\tconst name = node.localName\n\n\t\t// search for tags that should be unique\n\t\tlet prev\n\t\tif (name === 'title') {\n\t\t\tprev = querySelector(head, 'title')\n\t\t} else if (name === 'meta') {\n\t\t\tprev =\n\t\t\t\tquerySelector(\n\t\t\t\t\thead,\n\t\t\t\t\t'meta[name=\"' + node.getAttribute('name') + '\"]',\n\t\t\t\t) ||\n\t\t\t\tquerySelector(\n\t\t\t\t\thead,\n\t\t\t\t\t'meta[property=\"' + node.getAttribute('property') + '\"]',\n\t\t\t\t)\n\t\t} else if (name === 'link' && node.rel === 'canonical') {\n\t\t\tprev = querySelector(head, 'link[rel=\"canonical\"]')\n\t\t}\n\n\t\t// replace old node if there's any\n\t\tprev ? prev.replaceWith(node) : parent.appendChild(node)\n\t} else {\n\t\trelative ? parent.before(node) : parent.appendChild(node)\n\t}\n\n\treturn node\n}\n\n// RENDERING\n\n/**\n * WARNINGS Removal of the element on where you render/insert into,\n * wont cause disposal of what you render/insert.\n */\n\n/**\n * Inserts children into a parent\n *\n * @param {any} children - Thing to render\n * @param {Element | null} [parent] - Mount point, defaults to\n *   document.body\n * @param {{ clear?: boolean; relative?: boolean }} [options] -\n *   Mounting options\n * @returns {Function} Disposer\n * @url https://pota.quack.uy/render\n */\nexport function render(children, parent, options = nothing) {\n\tconst dispose = root(dispose => {\n\t\tinsert(children, parent, options)\n\t\treturn dispose\n\t})\n\n\t// run dispose when the parent scope disposes\n\tcleanup(dispose)\n\n\treturn dispose\n}\n\n/**\n * @param {any} children - Thing to render\n * @param {Element | null} [parent] - Mount point, defaults to\n *   `document.body`\n * @param {{ clear?: boolean; relative?: boolean }} [options] -\n *   Mounting options\n */\nexport function insert(\n\tchildren,\n\tparent = document.body,\n\toptions = nothing,\n) {\n\tif (options.clear && parent) parent.textContent = ''\n\n\tconst node = createChildren(\n\t\tparent,\n\t\tisComponentable(children) ? Factory(children) : children,\n\t\toptions.relative,\n\t)\n\n\tcleanup(() => toDiff([node].flat(Infinity)))\n\n\treturn node\n}\n\n/**\n * Creates and returns HTML Elements for `children`\n *\n * @param {Children} children\n * @returns {Children}\n * @url https://pota.quack.uy/toHTML\n */\nexport const toHTML = children =>\n\t/**\n\t * DocumentFragment is transformed to an `Array` of `Node/Element`,\n\t * that way we can keep a reference to the nodes. Because when the\n\t * DocumentFragment is used, it removes the nodes from the\n\t * DocumentFragment and then we will lose the reference.\n\t */\n\n\tflat(toHTMLFragment(children).childNodes)\n\n/**\n * Creates and returns a DocumentFragment for `children`\n *\n * @param {Children} children\n * @returns {DocumentFragment}\n * @url https://pota.quack.uy/toHTML\n */\nexport function toHTMLFragment(children) {\n\tconst fragment = new DocumentFragment()\n\tcreateChildren(fragment, children)\n\n\treturn fragment\n}\n\n/**\n * Creates a context and returns a function to get or set the value\n *\n * @param {any} [defaultValue] - Default value for the context\n * @returns {Function & { Provider: ({ value }) => Children }}\n *   Context\n * @url https://pota.quack.uy/Reactivity/Context\n */\n/* #__NO_SIDE_EFFECTS__ */ export function context(\n\tdefaultValue = undefined,\n) {\n\t/** @type {Function & { Provider: ({ value }) => Children }} */\n\tconst ctx = Context(defaultValue)\n\n\t/**\n\t * Sets the `value` for the context\n\t *\n\t * @param {object} props\n\t * @param {any} props.value\n\t * @param {Children} [props.children]\n\t * @returns {Children} Children\n\t * @url https://pota.quack.uy/Reactivity/Context\n\t */\n\tctx.Provider = props =>\n\t\tctx(props.value, () => toHTML(props.children))\n\n\treturn ctx\n}\n\n/**\n * Removes from the DOM `prev` elements not found on `next`\n *\n * @param {Element[]} prev - Array with previous elements\n * @param {Element[]} next - Array with next elements\n * @returns {Element[]}\n */\nfunction toDiff(prev = [], next = []) {\n\tnext = next.flat(Infinity)\n\tfor (let i = 0, item; i < prev.length; i++) {\n\t\titem = prev[i]\n\t\titem &&\n\t\t\t(next.length === 0 || !next.includes(item)) &&\n\t\t\titem.remove()\n\t}\n\treturn next\n}\n","import { isString, noop, resolved } from '../lib/std.js'\n\nexport const dashesToCamelCase = s =>\n\ts.replace(/-([a-z0-9])/g, g => g[1].toUpperCase())\n\nexport const capitalizeFirstLetter = string =>\n\tstring.charAt(0).toUpperCase() + string.slice(1)\n\nexport const copyToClipboard = s =>\n\tresolved(navigator.clipboard.writeText(s), noop)\n\nexport async function hash(value, algo = 'SHA-256') {\n\tconst msgUint8 = new TextEncoder().encode(value)\n\tconst hashBuffer = await crypto.subtle.digest(algo, msgUint8)\n\tconst hashArray = Array.from(new Uint8Array(hashBuffer))\n\treturn hashArray.map(b => b.toString(16).padStart(2, '0')).join('')\n}\n\nexport const label = string =>\n\tstring.replace(/[-_]/g, ' ').replace(/\\s+/g, ' ')\n\nexport const short = (string = '') =>\n\tstring.length > 40 ? string.slice(0, 40) + '…' : string\n\nexport const ensureString = s => String(s || '')\n\nexport const toString = (s, length = 0) =>\n\tlength\n\t\t? ensureString(s).trim().slice(0, length).trim()\n\t\t: ensureString(s).trim()\n\nexport function validateEmail(s) {\n\t// a@a.uy\n\ts = toString(s).toLowerCase()\n\tif (!s || s.length < 6 || !/^[^@]+@[^@]+\\.[^@]+$/.test(s)) {\n\t\treturn false\n\t}\n\treturn s\n}\n\nexport function validatePassword(s) {\n\ts = toString(s)\n\tif (!s || s.length < 6) {\n\t\treturn false\n\t}\n\treturn s\n}\n\n// removes decimal from number, converts NaN to 0\nexport const wholeNumber = num => +num | 0\n\nexport const isEmoji = value =>\n\t/(\\uD83C\\uDFF4(?:\\uDB40\\uDC67\\uDB40\\uDC62(?:\\uDB40\\uDC65\\uDB40\\uDC6E\\uDB40\\uDC67|\\uDB40\\uDC77\\uDB40\\uDC6C\\uDB40\\uDC73|\\uDB40\\uDC73\\uDB40\\uDC63\\uDB40\\uDC74)\\uDB40\\uDC7F|\\u200D\\u2620\\uFE0F)|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D(?:\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67]))|\\uD83D\\uDC68(?:\\u200D(?:\\u2764\\uFE0F\\u200D(?:\\uD83D\\uDC8B\\u200D)?\\uD83D\\uDC68|(?:\\uD83D[\\uDC68\\uDC69])\\u200D(?:\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67]))|\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67])|\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDB0-\\uDDB3])|(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDB0-\\uDDB3]))|\\uD83D\\uDC69\\u200D(?:\\u2764\\uFE0F\\u200D(?:\\uD83D\\uDC8B\\u200D(?:\\uD83D[\\uDC68\\uDC69])|\\uD83D[\\uDC68\\uDC69])|\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDB0-\\uDDB3])|\\uD83D\\uDC69\\u200D\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|(?:\\uD83D\\uDC41\\uFE0F\\u200D\\uD83D\\uDDE8|\\uD83D\\uDC69(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2695\\u2696\\u2708]|\\uD83D\\uDC68(?:(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2695\\u2696\\u2708]|\\u200D[\\u2695\\u2696\\u2708])|(?:(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)\\uFE0F|\\uD83D\\uDC6F|\\uD83E[\\uDD3C\\uDDDE\\uDDDF])\\u200D[\\u2640\\u2642]|(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2640\\u2642]|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDB8\\uDDB9\\uDDD6-\\uDDDD])(?:(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2640\\u2642]|\\u200D[\\u2640\\u2642])|\\uD83D\\uDC69\\u200D[\\u2695\\u2696\\u2708])\\uFE0F|\\uD83D\\uDC69\\u200D\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67])|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D(?:\\uD83D[\\uDC66\\uDC67])|\\uD83D\\uDC68(?:\\u200D(?:(?:\\uD83D[\\uDC68\\uDC69])\\u200D(?:\\uD83D[\\uDC66\\uDC67])|\\uD83D[\\uDC66\\uDC67])|\\uD83C[\\uDFFB-\\uDFFF])|\\uD83C\\uDFF3\\uFE0F\\u200D\\uD83C\\uDF08|\\uD83D\\uDC69\\u200D\\uD83D\\uDC67|\\uD83D\\uDC69(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDB0-\\uDDB3])|\\uD83D\\uDC69\\u200D\\uD83D\\uDC66|\\uD83C\\uDDF6\\uD83C\\uDDE6|\\uD83C\\uDDFD\\uD83C\\uDDF0|\\uD83C\\uDDF4\\uD83C\\uDDF2|\\uD83D\\uDC69(?:\\uD83C[\\uDFFB-\\uDFFF])|\\uD83C\\uDDED(?:\\uD83C[\\uDDF0\\uDDF2\\uDDF3\\uDDF7\\uDDF9\\uDDFA])|\\uD83C\\uDDEC(?:\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEE\\uDDF1-\\uDDF3\\uDDF5-\\uDDFA\\uDDFC\\uDDFE])|\\uD83C\\uDDEA(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDED\\uDDF7-\\uDDFA])|\\uD83C\\uDDE8(?:\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDEE\\uDDF0-\\uDDF5\\uDDF7\\uDDFA-\\uDDFF])|\\uD83C\\uDDF2(?:\\uD83C[\\uDDE6\\uDDE8-\\uDDED\\uDDF0-\\uDDFF])|\\uD83C\\uDDF3(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA-\\uDDEC\\uDDEE\\uDDF1\\uDDF4\\uDDF5\\uDDF7\\uDDFA\\uDDFF])|\\uD83C\\uDDFC(?:\\uD83C[\\uDDEB\\uDDF8])|\\uD83C\\uDDFA(?:\\uD83C[\\uDDE6\\uDDEC\\uDDF2\\uDDF3\\uDDF8\\uDDFE\\uDDFF])|\\uD83C\\uDDF0(?:\\uD83C[\\uDDEA\\uDDEC-\\uDDEE\\uDDF2\\uDDF3\\uDDF5\\uDDF7\\uDDFC\\uDDFE\\uDDFF])|\\uD83C\\uDDEF(?:\\uD83C[\\uDDEA\\uDDF2\\uDDF4\\uDDF5])|\\uD83C\\uDDF8(?:\\uD83C[\\uDDE6-\\uDDEA\\uDDEC-\\uDDF4\\uDDF7-\\uDDF9\\uDDFB\\uDDFD-\\uDDFF])|\\uD83C\\uDDEE(?:\\uD83C[\\uDDE8-\\uDDEA\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9])|\\uD83C\\uDDFF(?:\\uD83C[\\uDDE6\\uDDF2\\uDDFC])|\\uD83C\\uDDEB(?:\\uD83C[\\uDDEE-\\uDDF0\\uDDF2\\uDDF4\\uDDF7])|\\uD83C\\uDDF5(?:\\uD83C[\\uDDE6\\uDDEA-\\uDDED\\uDDF0-\\uDDF3\\uDDF7-\\uDDF9\\uDDFC\\uDDFE])|\\uD83C\\uDDE9(?:\\uD83C[\\uDDEA\\uDDEC\\uDDEF\\uDDF0\\uDDF2\\uDDF4\\uDDFF])|\\uD83C\\uDDF9(?:\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDED\\uDDEF-\\uDDF4\\uDDF7\\uDDF9\\uDDFB\\uDDFC\\uDDFF])|\\uD83C\\uDDE7(?:\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEF\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9\\uDDFB\\uDDFC\\uDDFE\\uDDFF])|[#\\*0-9]\\uFE0F\\u20E3|\\uD83C\\uDDF1(?:\\uD83C[\\uDDE6-\\uDDE8\\uDDEE\\uDDF0\\uDDF7-\\uDDFB\\uDDFE])|\\uD83C\\uDDE6(?:\\uD83C[\\uDDE8-\\uDDEC\\uDDEE\\uDDF1\\uDDF2\\uDDF4\\uDDF6-\\uDDFA\\uDDFC\\uDDFD\\uDDFF])|\\uD83C\\uDDF7(?:\\uD83C[\\uDDEA\\uDDF4\\uDDF8\\uDDFA\\uDDFC])|\\uD83C\\uDDFB(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDEE\\uDDF3\\uDDFA])|\\uD83C\\uDDFE(?:\\uD83C[\\uDDEA\\uDDF9])|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDB8\\uDDB9\\uDDD6-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:[\\u261D\\u270A-\\u270D]|\\uD83C[\\uDF85\\uDFC2\\uDFC7]|\\uD83D[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66\\uDC67\\uDC70\\uDC72\\uDC74-\\uDC76\\uDC78\\uDC7C\\uDC83\\uDC85\\uDCAA\\uDD74\\uDD7A\\uDD90\\uDD95\\uDD96\\uDE4C\\uDE4F\\uDEC0\\uDECC]|\\uD83E[\\uDD18-\\uDD1C\\uDD1E\\uDD1F\\uDD30-\\uDD36\\uDDB5\\uDDB6\\uDDD1-\\uDDD5])(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:[\\u231A\\u231B\\u23E9-\\u23EC\\u23F0\\u23F3\\u25FD\\u25FE\\u2614\\u2615\\u2648-\\u2653\\u267F\\u2693\\u26A1\\u26AA\\u26AB\\u26BD\\u26BE\\u26C4\\u26C5\\u26CE\\u26D4\\u26EA\\u26F2\\u26F3\\u26F5\\u26FA\\u26FD\\u2705\\u270A\\u270B\\u2728\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2795-\\u2797\\u27B0\\u27BF\\u2B1B\\u2B1C\\u2B50\\u2B55]|\\uD83C[\\uDC04\\uDCCF\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE1A\\uDE2F\\uDE32-\\uDE36\\uDE38-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF20\\uDF2D-\\uDF35\\uDF37-\\uDF7C\\uDF7E-\\uDF93\\uDFA0-\\uDFCA\\uDFCF-\\uDFD3\\uDFE0-\\uDFF0\\uDFF4\\uDFF8-\\uDFFF]|\\uD83D[\\uDC00-\\uDC3E\\uDC40\\uDC42-\\uDCFC\\uDCFF-\\uDD3D\\uDD4B-\\uDD4E\\uDD50-\\uDD67\\uDD7A\\uDD95\\uDD96\\uDDA4\\uDDFB-\\uDE4F\\uDE80-\\uDEC5\\uDECC\\uDED0-\\uDED2\\uDEEB\\uDEEC\\uDEF4-\\uDEF9]|\\uD83E[\\uDD10-\\uDD3A\\uDD3C-\\uDD3E\\uDD40-\\uDD45\\uDD47-\\uDD70\\uDD73-\\uDD76\\uDD7A\\uDD7C-\\uDDA2\\uDDB0-\\uDDB9\\uDDC0-\\uDDC2\\uDDD0-\\uDDFF])|(?:[#\\*0-9\\xA9\\xAE\\u203C\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21A9\\u21AA\\u231A\\u231B\\u2328\\u23CF\\u23E9-\\u23F3\\u23F8-\\u23FA\\u24C2\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB-\\u25FE\\u2600-\\u2604\\u260E\\u2611\\u2614\\u2615\\u2618\\u261D\\u2620\\u2622\\u2623\\u2626\\u262A\\u262E\\u262F\\u2638-\\u263A\\u2640\\u2642\\u2648-\\u2653\\u265F\\u2660\\u2663\\u2665\\u2666\\u2668\\u267B\\u267E\\u267F\\u2692-\\u2697\\u2699\\u269B\\u269C\\u26A0\\u26A1\\u26AA\\u26AB\\u26B0\\u26B1\\u26BD\\u26BE\\u26C4\\u26C5\\u26C8\\u26CE\\u26CF\\u26D1\\u26D3\\u26D4\\u26E9\\u26EA\\u26F0-\\u26F5\\u26F7-\\u26FA\\u26FD\\u2702\\u2705\\u2708-\\u270D\\u270F\\u2712\\u2714\\u2716\\u271D\\u2721\\u2728\\u2733\\u2734\\u2744\\u2747\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2763\\u2764\\u2795-\\u2797\\u27A1\\u27B0\\u27BF\\u2934\\u2935\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B50\\u2B55\\u3030\\u303D\\u3297\\u3299]|\\uD83C[\\uDC04\\uDCCF\\uDD70\\uDD71\\uDD7E\\uDD7F\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE02\\uDE1A\\uDE2F\\uDE32-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF21\\uDF24-\\uDF93\\uDF96\\uDF97\\uDF99-\\uDF9B\\uDF9E-\\uDFF0\\uDFF3-\\uDFF5\\uDFF7-\\uDFFF]|\\uD83D[\\uDC00-\\uDCFD\\uDCFF-\\uDD3D\\uDD49-\\uDD4E\\uDD50-\\uDD67\\uDD6F\\uDD70\\uDD73-\\uDD7A\\uDD87\\uDD8A-\\uDD8D\\uDD90\\uDD95\\uDD96\\uDDA4\\uDDA5\\uDDA8\\uDDB1\\uDDB2\\uDDBC\\uDDC2-\\uDDC4\\uDDD1-\\uDDD3\\uDDDC-\\uDDDE\\uDDE1\\uDDE3\\uDDE8\\uDDEF\\uDDF3\\uDDFA-\\uDE4F\\uDE80-\\uDEC5\\uDECB-\\uDED2\\uDEE0-\\uDEE5\\uDEE9\\uDEEB\\uDEEC\\uDEF0\\uDEF3-\\uDEF9]|\\uD83E[\\uDD10-\\uDD3A\\uDD3C-\\uDD3E\\uDD40-\\uDD45\\uDD47-\\uDD70\\uDD73-\\uDD76\\uDD7A\\uDD7C-\\uDDA2\\uDDB0-\\uDDB9\\uDDC0-\\uDDC2\\uDDD0-\\uDDFF])\\uFE0F?|(?:[\\u261D\\u26F9\\u270A-\\u270D]|\\uD83C[\\uDF85\\uDFC2-\\uDFC4\\uDFC7\\uDFCA-\\uDFCC]|\\uD83D[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66-\\uDC69\\uDC6E\\uDC70-\\uDC78\\uDC7C\\uDC81-\\uDC83\\uDC85-\\uDC87\\uDCAA\\uDD74\\uDD75\\uDD7A\\uDD90\\uDD95\\uDD96\\uDE45-\\uDE47\\uDE4B-\\uDE4F\\uDEA3\\uDEB4-\\uDEB6\\uDEC0\\uDECC]|\\uD83E[\\uDD18-\\uDD1C\\uDD1E\\uDD1F\\uDD26\\uDD30-\\uDD39\\uDD3D\\uDD3E\\uDDB5\\uDDB6\\uDDB8\\uDDB9\\uDDD1-\\uDDDD]))/g.test(\n\t\tvalue,\n\t)\n\nexport function diff(a, b) {\n\tif (\n\t\tisString(a) &&\n\t\tisString(b) &&\n\t\ta.includes('\\n') &&\n\t\tb.includes('\\n')\n\t) {\n\t\ta = a.split('\\n')\n\t\tb = b.split('\\n')\n\t\tconst length = Math.max(a.length, b.length)\n\t\tfor (let i = 0, done = false; i < length; i++) {\n\t\t\tlet char = '  '\n\t\t\tif (!done && a[i] !== b[i]) {\n\t\t\t\tdone = true\n\t\t\t\tchar = '->'\n\t\t\t}\n\t\t\ta[i] = char + toString(a[i])\n\t\t\tb[i] = char + toString(b[i])\n\t\t}\n\t\treturn [a.join('\\n'), b.join('\\n')]\n\t}\n\treturn [a, b]\n}\n","import { withValue } from '../lib/reactive.js'\nimport {\n\taddStyleSheets,\n\temit,\n\tisString,\n\tquerySelector,\n\tremoveAttribute,\n\tsetAttribute,\n} from '../lib/std.js'\n\nimport { Component, toHTMLFragment } from '../renderer.js'\n\n/**\n * Defines a custom Element (if isnt defined already)\n *\n * @param {string} name - Name for the custom element\n * @param {CustomElementConstructor} constructor - Class for the\n *   custom element\n * @param {ElementDefinitionOptions} [options] - Options passed to\n *   `customElements.define`\n */\nexport function customElement(name, constructor, options) {\n\tif (customElements.get(name) === undefined) {\n\t\tcustomElements.define(name, constructor, options)\n\t}\n}\n\nexport class CustomElement extends HTMLElement {\n\tconstructor() {\n\t\tsuper()\n\n\t\tconst shadowRoot = this.attachShadow({\n\t\t\tmode: 'open',\n\t\t})\n\n\t\t// this is needed because `baseStyleSheets/styleSheets` are `static`\n\t\tconst constructor = this.constructor\n\n\t\taddStyleSheets(shadowRoot, constructor.baseStyleSheets)\n\t\taddStyleSheets(shadowRoot, constructor.styleSheets)\n\t}\n\n\t/* DOM API */\n\n\t/**\n\t * Shortcut for querySelector\n\t *\n\t * @param {string} query\n\t */\n\tquery(query) {\n\t\treturn querySelector(this, query)\n\t}\n\t/**\n\t * Shortcut for this.shadowRoot.innerHTML\n\t *\n\t * @param {string} value\n\t */\n\tset html(value) {\n\t\tif (isString(value)) {\n\t\t\tthis.shadowRoot.innerHTML = value\n\t\t} else {\n\t\t\tthis.shadowRoot.replaceChildren(\n\t\t\t\ttoHTMLFragment(Component(value || 'slot')),\n\t\t\t)\n\t\t}\n\t}\n\n\t/**\n\t * Toggles attribute `hidden`\n\t *\n\t * @param {boolean} value\n\t */\n\tset hidden(value) {\n\t\twithValue(value, value => {\n\t\t\tvalue\n\t\t\t\t? setAttribute(this, 'hidden', '')\n\t\t\t\t: removeAttribute(this, 'hidden')\n\t\t})\n\t}\n\n\t/* EVENTS API */\n\n\t/**\n\t * Emits an event\n\t *\n\t * @param {string} eventName\n\t * @param {any} [data]\n\t */\n\temit(eventName, data) {\n\t\temit(this, eventName, data)\n\t}\n\n\t/* SLOTS API */\n\n\thasSlot(name) {\n\t\treturn this.query(`:scope [slot=\"${name}\"]`)\n\t}\n}\n","import { withValue } from '../lib/reactive.js'\nimport { css } from '../lib/std.js'\n\nimport { Component } from '../renderer.js'\nimport { CustomElement, customElement } from './CustomElement.js'\n\n/**\n * Similar to `Show`, but doesn't remove its children from the\n * document\n *\n * @template T\n * @param {{\n * \twhen: When<T>\n * \tchildren?: Children\n * }} props\n * @returns {Children}\n * @url https://pota.quack.uy/Components/Collapse\n */\nexport function Collapse(props) {\n\t// need to include the class here because else its not treeshaked\n\tclass CollapseElement extends CustomElement {\n\t\tstatic styleSheets = [\n\t\t\tcss`\n\t\t\t\t:host {\n\t\t\t\t\tdisplay: contents;\n\t\t\t\t}\n\t\t\t`,\n\t\t]\n\n\t\t/**\n\t\t * @template T\n\t\t * @param {When<T>} value - To toggle children\n\t\t */\n\t\tset when(value) {\n\t\t\twithValue(value, value => (this.html = value ? '<slot/>' : ''))\n\t\t}\n\t}\n\n\tconst name = 'pota-collapse'\n\n\tcustomElement(name, CollapseElement)\n\n\treturn Component(name, {\n\t\twhen: props.when,\n\t\tchildren: props.children,\n\t})\n}\n","import { Component } from '../renderer.js'\n\n/**\n * Creates components dynamically\n *\n * @template props\n * @param {{\n * \tcomponent: Component\n * } & props} props\n * @returns {Component}\n * @url https://pota.quack.uy/Components/Dynamic\n */\n\nexport const Dynamic = props =>\n\t// `component` needs to be deleted else it will end in the tag as an attribute\n\tComponent(props.component, { ...props, component: undefined })\n","import { makeCallback, map } from '../lib/reactive.js'\nimport {\n\tactiveElement,\n\tdocumentElement,\n\tisConnected,\n} from '../lib/std.js'\n\nimport { onFixes } from '../scheduler.js'\n\n/**\n * Renders reactive values from an signal that returns an Iterable\n * object\n *\n * @template T\n * @param {object} props\n * @param {Each<T>} props.each\n * @param {boolean} [props.restoreFocus] - If the focused element\n *   moves it may lose focus\n * @param {Children} [props.children]\n * @returns {Children}\n * @url https://pota.quack.uy/Components/For\n */\n\nexport const For = props =>\n\tmap(\n\t\t() => {\n\t\t\tprops.restoreFocus && queue()\n\t\t\treturn props.each\n\t\t},\n\t\tmakeCallback(props.children),\n\t\ttrue,\n\t)\n\nlet queued\n\n// because re-ordering the elements trashes focus\nfunction queue() {\n\tif (!queued) {\n\t\tqueued = true\n\n\t\tconst active = activeElement()\n\t\tconst scroll = documentElement.scrollTop\n\n\t\tonFixes(() => {\n\t\t\tqueued = false\n\t\t\t// re-ordering the elements trashes focus\n\t\t\tactive &&\n\t\t\t\tactive !== activeElement() &&\n\t\t\t\tisConnected(active) &&\n\t\t\t\tactive.focus()\n\n\t\t\tdocumentElement.scrollTop = scroll\n\t\t})\n\t}\n}\n","import { insert } from '../renderer.js'\n\n/**\n * Portals children to a different element while keeping the original\n * scope\n *\n * @param {object} props\n * @param {Element} props.mount\n * @param {Children} [props.children]\n * @url https://pota.quack.uy/Components/Portal\n */\nexport function Portal(props) {\n\tinsert(props.children, props.mount)\n}\n","import { document } from '../lib/std.js'\nimport { Component } from '../renderer.js'\nimport { Portal } from './Portal.js'\n\n/**\n * Mounts children on `document.head`\n *\n * @param {{\n * \tchildren?: Children\n * }} props\n * @returns {Children}\n * @url https://pota.quack.uy/Components/Head\n */\nexport const Head = props =>\n\tComponent(Portal, {\n\t\tmount: document.head,\n\t\tchildren: props.children,\n\t})\n","import {\n\tdocument,\n\tlocation,\n\tquerySelector,\n\twindow,\n} from '../lib/std.js'\n\n/**\n * Scrolls to an element\n *\n * @param {Element} item - Element to scroll to\n */\nexport function scrollToElement(item) {\n\t/** Scroll children of element to the top */\n\titem.scrollTop = 0\n\n\t/** Scroll to element */\n\titem.scrollIntoView(true)\n}\n\n/** Scrolls to `window.location.hash` */\nexport const scrollToLocationHash = () =>\n\tscrollToSelector(location.hash)\n\n/**\n * Scrolls to element that matches the hash\n *\n * @param {string} selector - Hash to scroll to\n * @returns {boolean} True on success\n */\nexport function scrollToSelector(selector) {\n\tif (selector) {\n\t\ttry {\n\t\t\t// selector could be invalid\n\t\t\tconst item = querySelector(document, selector)\n\t\t\tif (item) {\n\t\t\t\tscrollToElement(item)\n\t\t\t\treturn true\n\t\t\t}\n\t\t} catch (e) {}\n\t}\n\treturn false\n}\n\n/**\n * Scrolls to hash and in case isnt found it scrolls to the top\n *\n * @param {string} selector - Hash to scroll to\n */\nexport function scrollToSelectorWithFallback(selector) {\n\tif (!scrollToSelector(selector)) scrollToTop()\n}\n\n/** Scrolls to the top of the window */\nexport const scrollToTop = () =>\n\twindow.scrollTo({ top: 0, behavior: 'auto' })\n","import { global } from '../lib/std.js'\n\nexport const cleanLink = v => v.replace(/[\\.,\"]$/, '')\n\nexport const encodeURIComponent = global.encodeURIComponent\n\n/**\n * Safe guard. `decodeURIComponent` will fail with malformed strings:\n * links are copied, pasted, manipulated by people, software etc\n *\n * @param {string} string - String to decode\n * @returns {string} Returns decoded string or original string on\n *   error\n */\nfunction _decodeURIComponent(string) {\n\ttry {\n\t\treturn decodeURIComponent(string)\n\t} catch (e) {\n\t\treturn string\n\t}\n}\nexport { _decodeURIComponent as decodeURIComponent }\n\n/**\n * Returns true if the link is absolute: starts with '/', '#' or\n * 'http'\n *\n * @param {string} href - Url\n * @returns {boolean} Returns true if the link is absolute\n */\nexport const isAbsolute = href =>\n\thref[0] === '/' || href[0] === '#' || /^http/.test(href)\n\n/**\n * Returns true if the link is external. It does so by checking that\n * window.location.origin is present at the beginning of the url\n *\n * @param {string} url - Url\n * @returns {boolean} Returns true if the link is external\n */\nexport const isExternal = url =>\n\t// origin could be http://example.net and link could be http://example.net.ha.com, so add \"/\"\n\t/^http/.test(url) && !(url + '/').startsWith(origin + '/')\n\n/**\n * Returns true if the link is relative\n *\n * @param {string} url - Url\n * @returns {boolean} Returns true if the link relative\n */\nexport const isRelative = url => !isAbsolute(url)\n\n/**\n * Replace params in an url for the encoded equivalent\n *\n * @param {string | undefined} url - Url\n * @param {object} [params] - Key-value pair to replace\n * @returns {string} Url with the params replaced\n */\nexport const replaceParams = (url, params) =>\n\tparams\n\t\t? url.replace(/\\:([a-z0-9_\\-]+)/gi, (a, b) =>\n\t\t\t\t// only replace the ones defined on params\n\t\t\t\tparams[b] !== undefined ? encodeURIComponent(params[b]) : a,\n\t\t\t)\n\t\t: url\n","import { memo, signal } from '../../lib/reactive.js'\nimport { nothing, removeFromArray } from '../../lib/std.js'\n\nimport { context } from '../../renderer.js'\n\n/* #__NO_SIDE_EFFECTS__ */ export function create(props = nothing) {\n\tconst [children, setChildren, updateChildren] = signal([])\n\n\treturn {\n\t\tbase: '', // the composed base route\n\t\thref: () => '', // the url of the route\n\t\tparent: undefined, // parent context\n\t\tshow: () => false, // if the route is shown\n\t\tparams: () => () => nothing, // params of the route\n\t\tscroll: [], // elements to scroll\n\t\t// the children routes\n\t\taddChildren: child => {\n\t\t\tupdateChildren(children => {\n\t\t\t\tchildren.push(child)\n\t\t\t\treturn [...children]\n\t\t\t})\n\t\t},\n\t\tremoveChildren: child => {\n\t\t\tupdateChildren(children => {\n\t\t\t\tremoveFromArray(children, child)\n\t\t\t\treturn [...children]\n\t\t\t})\n\t\t},\n\t\tnoneMatch: memo(() => {\n\t\t\treturn (\n\t\t\t\t/**\n\t\t\t\t * If doesnt have siblings then is not a 404\n\t\t\t\t *\n\t\t\t\t * @example\n\t\t\t\t * \t<Route>\n\t\t\t\t * \t<Component/> <Router.Default/> <-- Router.Default should never render\n\t\t\t\t * \t</Route>\n\t\t\t\t */\n\t\t\t\tchildren().length &&\n\t\t\t\t// when it has sibling, check if at least 1 rendered\n\t\t\t\tchildren().every(children => !children.show())\n\t\t\t)\n\t\t}),\n\t\t// override\n\t\t...props,\n\t}\n}\n\nexport const Context = context(create())\n","import { memo, signal } from '../lib/reactive.js'\nimport {\n\tdocument,\n\tempty,\n\tentries,\n\thistory,\n\tnothing,\n\toptional,\n\torigin,\n\tpreventDefault,\n\twalkParents,\n\tlocation as wLocation,\n} from '../lib/std.js'\n\nimport { scrollToSelectorWithFallback } from './useScroll.js'\n\nimport {\n\tdecodeURIComponent,\n\tisExternal,\n\treplaceParams,\n} from './useURL.js'\n\nimport { Context } from '../web/router/context.js'\n\n// window.location signal\n\nconst [getLocation, setLocation] = signal(wLocation, {\n\tequals: false,\n})\n\n// only trigger on what changed\n\nconst pathname = memo(() => getLocation().pathname)\nconst search = memo(() => getLocation().search)\nconst href = memo(() => getLocation().href)\n\n// http://location/# reports hash to be empty\n// http://location/ reports hash to be empty\n// handle this difference by checking if \"#\" is at the end of `href`\nconst hash = memo(() =>\n\thref().endsWith('#') ? '#' : getLocation().hash,\n)\n\n/**\n * @typedef {object} location\n * @property {Signal} href - The full url\n * @property {Signal} pathname - Mirror of window.location.pathname\n * @property {Signal} hash - Everything after #\n * @property {Signal} path - Pathname + hash\n * @property {Signal} query - Key value pairs with search params\n * @property {Function} params - Key value pairs with route params\n */\n\n/** @type location */\nexport const location = {\n\thref,\n\tpathname,\n\thash,\n\tpath: memo(() => pathname() + hash()),\n\tquery: memo(() => {\n\t\tconst value = search()\n\t\tconst searchParams = empty()\n\t\tconst params = new URL(origin + '/' + value).searchParams\n\t\tfor (const [key, value] of params.entries()) {\n\t\t\tsearchParams[key] = value\n\t\t}\n\t\treturn searchParams\n\t}),\n\tparams: () => {\n\t\tconst routes = []\n\t\twalkParents(Context(), 'parent', context => {\n\t\t\troutes.push(context.params)\n\t\t})\n\t\tconst params = empty()\n\n\t\tfor (const param of routes) {\n\t\t\t// `|| params` because when nothing is found the result is undefined\n\t\t\tfor (const [key, value] of entries(param()() || nothing)) {\n\t\t\t\tparams[key] =\n\t\t\t\t\tvalue !== undefined ? decodeURIComponent(value) : value\n\t\t\t}\n\t\t}\n\t\treturn params\n\t},\n}\n\nlet BeforeLeave = []\n\n/**\n * Run code before leaving the route, return or resolve to false to\n * reject, return true to continue\n *\n * @param {Function | Promise<unknown>} callback - Run before leaving\n *   the route\n * @url https://pota.quack.uy/Components/Router/useBeforeLeave\n */\nexport const useBeforeLeave = callback => {\n\taddListeners()\n\n\tBeforeLeave.push({\n\t\thref: Context().href() || wLocation.href,\n\t\tcallback,\n\t})\n}\n\n/**\n * Returns a boolean telling if navigation is allowed\n *\n * @param {string} href\n * @returns {Promise<boolean>}\n */\nasync function canNavigate(href) {\n\tconst newBeforeLeave = []\n\tfor (const beforeLeave of BeforeLeave) {\n\t\tif (href.indexOf(beforeLeave.href) !== 0) {\n\t\t\tif (!(await beforeLeave.callback().catch(() => false)))\n\t\t\t\treturn false\n\t\t} else {\n\t\t\tnewBeforeLeave.push(beforeLeave)\n\t\t}\n\t}\n\tBeforeLeave = newBeforeLeave\n\treturn true\n}\n\n/**\n * Navigates to a new location\n *\n * @param {string} href\n * @param {{ scroll?: boolean; replace?: boolean }} options\n * @url https://pota.quack.uy/Components/Router/Navigate\n */\nasync function navigate(href, options = nothing) {\n\tif (wLocation.href !== href) {\n\t\tif (await canNavigate(href)) {\n\t\t\tconst fn = () => navigateInternal(href, options)\n\t\t\t// navigate with transition if available\n\t\t\tdocument.startViewTransition &&\n\t\t\twLocation.href.replace(/#.*/, '') !== href.replace(/#.*/, '')\n\t\t\t\t? document.startViewTransition(fn)\n\t\t\t\t: fn()\n\t\t}\n\t}\n}\n\nfunction navigateInternal(href, options) {\n\tif (options.replace) {\n\t\thistory.replaceState(null, '', href)\n\t} else {\n\t\thistory.pushState(null, '', href)\n\t}\n\tsetLocation(wLocation)\n\n\tif (optional(options.scroll)) {\n\t\tscrollToSelectorWithFallback(wLocation.hash)\n\t}\n}\n\n/**\n * Navigates to a new location programmatically\n *\n * @param {string} href\n * @param {{\n * \tparams?: object\n * \tscroll?: boolean\n * \treplace?: boolean\n * }} options\n * @url https://pota.quack.uy/Components/Router/Navigate\n */\nfunction navigateUser(href, options = nothing) {\n\taddListeners()\n\n\thref = replaceParams(href, options.params)\n\n\t// when the user sets the url it may pass a relative path\n\t// this makes it absolute\n\tnavigate(\n\t\thref.startsWith('http')\n\t\t\t? href\n\t\t\t: new URL(href, wLocation.href).href,\n\t\toptions,\n\t)\n}\nexport { navigateUser as navigate }\n\n/**\n * Navigates to a new location from JSX\n *\n * @param {{\n * \thref: string\n * \tscroll?: boolean\n * \treplace?: boolean\n * \tparams?: object\n * }} props\n * @url https://pota.quack.uy/Components/Router/Navigate\n */\nexport function Navigate(props) {\n\taddListeners()\n\tnavigateUser(props.href, props)\n}\n\n// listeners\n\nlet addListenersAdded = false\n\nexport function addListeners() {\n\tif (!addListenersAdded) {\n\t\taddListenersAdded = true\n\n\t\tdocument.addEventListener('click', onLinkClick)\n\n\t\taddEventListener('hashchange', onLocationChange)\n\t\taddEventListener('popstate', onLocationChange)\n\t}\n}\n\n// listen when using browser buttons\n// safe to use async as its on a listener\nasync function onLocationChange() {\n\t// chrome has a bug on which if you use the back/forward button\n\t// it will change the title of the tab to whatever it was before\n\t// if the navigation is prevented (therefore the title/page wont change)\n\t// it will still use the old title even if the title tag didn't change at all\n\tconst title = document.title\n\tdocument.title = title + ' '\n\tdocument.title = title\n\n\tif (await canNavigate(wLocation.href)) {\n\t\tsetLocation(wLocation)\n\t} else {\n\t\thistory.pushState(null, '', location.href())\n\t}\n}\n\nfunction onLinkClick(e) {\n\tif (\n\t\te.defaultPrevented ||\n\t\te.button !== 0 ||\n\t\te.metaKey ||\n\t\te.altKey ||\n\t\te.ctrlKey ||\n\t\te.shiftKey\n\t)\n\t\treturn\n\n\t// find link\n\tconst node = e\n\t\t.composedPath()\n\t\t.find(item => item instanceof HTMLAnchorElement)\n\n\t// validate\n\tif (\n\t\t!node ||\n\t\t!node.href ||\n\t\tnode.download ||\n\t\tnode.target ||\n\t\t!node.href.startsWith('http') || // when using other protocol than \"http\"\n\t\tisExternal(node.href) ||\n\t\t(node.rel && node.rel.split(/\\s/).includes('external'))\n\t)\n\t\treturn\n\n\tpreventDefault(e)\n\n\tnavigate(node.href, {\n\t\treplace: node.replace,\n\t})\n}\n","import { makeCallback, memo, resolve } from '../lib/reactive.js'\n\nimport { getValue, isNullUndefined } from '../lib/std.js'\n\n/**\n * Renders its children based on a condition\n *\n * @template T\n * @param {object} props\n * @param {When<T>} props.when\n * @param {Children} [props.fallback]\n * @param {Children} [props.children]\n * @returns {Children}\n * @url https://pota.quack.uy/Components/Show\n */\nexport function Show(props) {\n\tconst callback = makeCallback(props.children)\n\tconst value = memo(() => getValue(props.when))\n\tconst condition = memo(() => !!value())\n\n\t// needs resolve to avoid re-rendering\n\tconst fallback = isNullUndefined(props.fallback)\n\t\t? undefined\n\t\t: memo(() => resolve(props.fallback))\n\n\treturn memo(() => (condition() ? callback(value) : fallback))\n}\n","import {\n\tscrollToLocationHash,\n\tscrollToSelector,\n\tscrollToTop,\n} from '../../plugin/useScroll.js'\n\nimport { walkParents } from '../../lib/std.js'\n\nexport function scroll(context) {\n\t/**\n\t * Scroll to hash first, if doesnt, scroll to positions defined by\n\t * the Routes.\n\t */\n\tif (!scrollToLocationHash()) {\n\t\tif (\n\t\t\t!walkParents(context, 'parent', context => {\n\t\t\t\tif (context.scroll) {\n\t\t\t\t\tfor (const item of context.scroll) {\n\t\t\t\t\t\tif (scrollToSelector(item)) {\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t) {\n\t\t\tscrollToTop()\n\t\t}\n\t}\n}\n","import { cleanup, memo, signal } from '../../lib/reactive.js'\nimport { nothing, optional, origin } from '../../lib/std.js'\n\nimport { addListeners, location } from '../../plugin/useLocation.js'\nimport { replaceParams } from '../../plugin/useURL.js'\n\nimport { Collapse } from '../Collapse.js'\nimport { Dynamic } from '../Dynamic.js'\nimport { Show } from '../Show.js'\n\nimport { Component } from '../../renderer.js'\nimport { onDone } from '../../scheduler.js'\n\nimport { Context, create } from './context.js'\nimport { scroll } from './scroll.js'\n\n/**\n * Renders children if the path matches the current location\n *\n * @template T\n * @param {object} props\n * @param {string} [props.path] - Path to match relative to the parent\n *   Route. When `path` is missing, it will render only when the\n *   parent's route path is matched exactly.\n * @param {string[]} [props.scroll] - Elements to scroll when the\n *   route matches\n * @param {object} [props.params] - Key-value pairs params to encode\n *   and replace on the path\n * @param {When<T>} [props.collapse] - To hide the route instead of\n *   removing it from the document\n * @param {When<T>} [props.when] - To stop rendering the route even if\n *   the path matches.\n * @param {Children} [props.fallback] - Fallback for when a `when`\n *   condition is set. If the `when` condition is not set, this wont\n *   be used.\n * @param {Children} [props.children]\n * @returns {Children}\n * @url https://pota.quack.uy/Components/Router/Router\n */\nexport function Router(props) {\n\taddListeners()\n\n\tconst parent = Context()\n\n\tconst base =\n\t\tparent.base +\n\t\treplaceParams(\n\t\t\t// when <Router lacks a path prop is treated as the final route\n\t\t\tprops.path === undefined\n\t\t\t\t? '(|#.*)$' // ends with nothing or has a hash followed of stuff\n\t\t\t\t: // ends with nothing or has a hash followed of stuff\n\t\t\t\t\tprops.path\n\t\t\t\t\t\t.replace('$', '(|#.*)$')\n\t\t\t\t\t\t// pathname always starts with /, make sure the hash is considered\n\t\t\t\t\t\t.replace(/^#/, '/#'),\n\t\t\tprops.params,\n\t\t)\n\n\tconst route = new RegExp(\n\t\t'^' + base.replace(/\\:([a-z0-9_\\-]+)/gi, '(?<$1>[^/#]+)'),\n\t)\n\n\tlet href = ''\n\tconst [params, setParams] = signal(() => nothing)\n\n\t// derived\n\tconst show = memo(() => {\n\t\tconst path = location.path()\n\t\tif (route.test(path)) {\n\t\t\tsetParams(() => route.exec(path).groups)\n\n\t\t\tif (href === '') {\n\t\t\t\thref = path.replace(path.replace(route, ''), '')\n\t\t\t\t// create full link\n\t\t\t\thref =\n\t\t\t\t\t// add origin\n\t\t\t\t\torigin +\n\t\t\t\t\t// add slash after origin if isnt present in the href\n\t\t\t\t\t(href[0] !== '/' ? '/' : '') +\n\t\t\t\t\t// add the path\n\t\t\t\t\thref\n\t\t\t}\n\n\t\t\tonDone(() => scroll(context))\n\n\t\t\treturn true\n\t\t} else {\n\t\t\treturn false\n\t\t}\n\t})\n\n\tconst context = create({\n\t\tbase, // the prefix for the children path\n\t\thref: () => href, // the full url of the route\n\t\tparams,\n\t\tscroll: props.scroll,\n\t\tparent,\n\t\tshow,\n\t})\n\n\tparent.addChildren(context)\n\n\tcleanup(() => parent.removeChildren(context))\n\n\treturn Component(Context.Provider, {\n\t\tvalue: context,\n\t\tchildren: Component(Dynamic, {\n\t\t\tcomponent: props.collapse ? Collapse : Show,\n\t\t\twhen: () => show() && optional(props.when),\n\t\t\tfallback: props.fallback,\n\t\t\tchildren: props.children,\n\t\t}),\n\t})\n}\n\n/**\n * Renders children when no sibling `Router` matches\n *\n * @param {object} props\n * @param {Children} [props.children]\n * @returns {Children}\n */\nRouter.Default = props => {\n\tconst context = Context()\n\treturn Component(Show, {\n\t\twhen: context.noneMatch,\n\t\tchildren: props.children,\n\t})\n}\n","import { addListeners } from '../../plugin/useLocation.js'\nimport { isRelative, replaceParams } from '../../plugin/useURL.js'\n\nimport { Component } from '../../renderer.js'\n\nimport { Context } from './context.js'\n\n/*\n * // props\n * // props.href Url relative to the parent <Router/>\n * // props.params Key-value pair object params to replace in the url\n *   not scroll on location change\n * // props.replace Replace the history entry from the browser} props\n */\n\n/**\n * Creates a link with Router features\n *\n * @param {{\n * \thref: string\n * \tparams?: object\n * \treplace?: boolean\n * } & Props} props\n *\n * @returns {Children}\n * @url https://pota.quack.uy/Components/Router/A\n */\n\nexport function A(props) {\n\taddListeners()\n\n\tlet href = replaceParams(props.href, props.params)\n\n\t// make it absolute\n\t// link is relative to the <Route\n\tconst base = Context().href()\n\thref =\n\t\t!isRelative(href[0]) || !base\n\t\t\t? href\n\t\t\t: base.includes('/#')\n\t\t\t\t? // making link dos/ relative to http://localhost:11433/#uno/\n\t\t\t\t\t// becomes http://localhost:11433/#uno/dos/\n\t\t\t\t\tbase + href\n\t\t\t\t: new URL(href, base).href\n\n\treturn Component('a', { ...{ ...props, href, params: undefined } })\n}\n","import { cleanup, withValue } from '../lib/reactive.js'\n\n/**\n * Creates a `setTimeout` that autodisposes. The `delay` could be\n * reactive. The timeout is NOT started automatically.\n *\n * @param {Function} callback - Callback to run once delay completes\n * @param {Signal | number} delay - Delay number or signal\n * @param {any[]} args - Arguments to pass to the callback\n * @returns {{ start: Function; stop: Function }}\n */\nexport function useTimeout(callback, delay, ...args) {\n\tlet id\n\tconst fn = {\n\t\tstart: () => {\n\t\t\twithValue(delay, delay => {\n\t\t\t\tfn.stop()\n\t\t\t\tif (delay < Infinity)\n\t\t\t\t\tid = setTimeout(callback, delay, ...args)\n\t\t\t})\n\t\t\treturn fn\n\t\t},\n\n\t\tstop: () => clearTimeout(id),\n\t}\n\n\tcleanup(fn.stop)\n\n\treturn fn\n}\n","import { lazy } from '../../lib/reactive.js'\nimport { isFunction, nothing } from '../../lib/std.js'\n\nimport { useTimeout } from '../../plugin/useTimeout.js'\n\nimport { Context } from './context.js'\nimport { scroll } from './scroll.js'\n\n/**\n * For dynamic imports. For `lazy` components see `lazy` instead. Used\n * as `load(()=>import('file.js'))`. It retries a couple of times on\n * network error. Scrolls the document to the hash of the url, or\n * fallbacks defined on the `<Route>` components.\n *\n * @param {() => Promise<any>} component - Import statement\n * @param {{\n * \tonLoading?: any\n * \tonLoaded?: Function\n * \tonError?: ((e: Error, retry: Function) => any) | any\n * }} [options]\n * @returns {Component}\n * @url https://pota.quack.uy/load\n */\nexport function load(component, options = nothing) {\n\tconst { onLoading, onLoaded, onError } = options\n\n\tlet tries = 0\n\treturn lazy(component, {\n\t\tonLoading,\n\t\tonError: (e, retry) =>\n\t\t\ttries++ < 10\n\t\t\t\t? useTimeout(retry, 5000).start() && undefined\n\t\t\t\t: isFunction(onError)\n\t\t\t\t\t? onError(e, retry)\n\t\t\t\t\t: onError,\n\t\tonLoaded: () => {\n\t\t\tlet context = Context()\n\n\t\t\tscroll(context)\n\n\t\t\t// user function\n\t\t\tonLoaded && onLoaded()\n\t\t},\n\t})\n}\n","import { makeCallback, memo, resolve } from '../lib/reactive.js'\nimport { getValue, identity, isNullUndefined } from '../lib/std.js'\n\n/**\n * Renders the first child that matches the given `when` condition, or\n * a fallback in case of no match\n *\n * @param {object} props\n * @param {Children} [props.children]\n * @param {Children} [props.fallback]\n * @returns {Children}\n * @url https://pota.quack.uy/Components/Switch\n */\nexport function Switch(props) {\n  const matches = resolve(() => props.children)\n\n  const fallback = isNullUndefined(props.fallback)\n    ? memo(() => {\n        const r = matches().find(match => !('when' in match))\n        return r && r.children\n      })\n    : memo(() => resolve(props.fallback))\n\n  const match = memo(() =>\n    matches().find(match => !!getValue(match.when)),\n  )\n\n  const value = memo(() => match() && getValue(match().when))\n\n  const callback = memo(\n    () => match() && makeCallback(match().children),\n  )\n  return memo(() => (match() ? callback()(value) : fallback))\n}\n\n/**\n * Renders the content if the `when` condition is true\n *\n * @template T\n * @param {object} props\n * @param {When<T>} props.when\n * @param {Children} [props.children]\n * @returns {Children}\n */\nexport const Match = identity\n","import {\n\tbatch,\n\tcleanup,\n\troot,\n\tsignal,\n\tsyncEffect,\n} from './lib/reactive.js'\n\nimport {\n\tcall,\n\tcreateElement,\n\tempty,\n\tentries,\n\tflat,\n\tfromEntries,\n\ttoArray,\n\tweakStore,\n\twithState,\n} from './lib/std.js'\n\nimport { dashesToCamelCase } from './plugin/useString.js'\n\nimport { Component } from './renderer.js'\n\nimport * as defaultRegistryTemplate from './web/@main.js'\n\nconst defaultRegistry = fromEntries(\n\tentries(defaultRegistryTemplate).map(([k, v]) => [\n\t\tk.toLowerCase(),\n\t\tv,\n\t]),\n)\n\n// parseHTML\n\nconst id = 'pota'\nconst tag = `<pota></pota>`\n\n/**\n * Makes Nodes from TemplateStringsArray\n *\n * @param {TemplateStringsArray} content\n * @returns {Element}\n */\nconst parseHTML = withState(\n\t(cache, content) =>\n\t\tcache.get(content, content => {\n\t\t\tconst template = createElement('template')\n\n\t\t\ttemplate.innerHTML = content\n\t\t\t\t.join(tag)\n\t\t\t\t.replaceAll(`\"${tag}\"`, `\"${id}\"`)\n\t\t\t\t// avoid double br when self-closing\n\t\t\t\t.replace(/<br\\s*\\/\\s*>/g, '<br>')\n\t\t\t\t// self-close\n\t\t\t\t.replace(/<([a-z-]+)([^/>]*)\\/\\s*>/gi, '<$1 $2></$1>')\n\n\t\t\treturn template.content\n\t\t}),\n\tweakStore,\n)\n\n/**\n * Function to create cached tagged template components\n *\n * @returns {Function & {\n * \tdefine: ({ components }) => void\n * \tcomponents: {}\n * }}\n * @url https://pota.quack.uy/HTML\n */\n\nexport function HTML() {\n\t/**\n\t * Creates tagged template components\n\t *\n\t * @param {TemplateStringsArray} template\n\t * @param {...any} values\n\t * @returns {Children}\n\t * @url https://pota.quack.uy/HTML\n\t */\n\n\tfunction html(template, ...values) {\n\t\tconst cached = parseHTML(template)\n\n\t\tlet index = 0\n\t\tfunction nodes(node) {\n\t\t\t// Node.ELEMENT_NODE\n\t\t\tif (node.nodeType === 1) {\n\t\t\t\tconst localName = node.localName\n\t\t\t\tif (localName === id) {\n\t\t\t\t\treturn values[index++]\n\t\t\t\t}\n\n\t\t\t\t// gather props\n\t\t\t\tconst props = empty()\n\t\t\t\tfor (let { name, value } of node.attributes) {\n\t\t\t\t\tif (value === id) {\n\t\t\t\t\t\tvalue = values[index++]\n\t\t\t\t\t}\n\n\t\t\t\t\tif (name[0] === '.') {\n\t\t\t\t\t\tprops['prop:' + dashesToCamelCase(name.slice(1))] = value\n\t\t\t\t\t} else if (name.startsWith('prop:')) {\n\t\t\t\t\t\tprops['prop:' + dashesToCamelCase(name.slice(5))] = value\n\t\t\t\t\t} else if (name[0] === '?') {\n\t\t\t\t\t\tprops['bool:' + name.slice(1)] = value\n\t\t\t\t\t} else if (name[0] === '@') {\n\t\t\t\t\t\tprops['on:' + name.slice(1)] = value\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprops[name] = value\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// gather children\n\t\t\t\tif (node.childNodes.length) {\n\t\t\t\t\tprops.children = flat(toArray(node.childNodes).map(nodes))\n\t\t\t\t}\n\n\t\t\t\treturn Component(\n\t\t\t\t\thtml.components[localName] || localName,\n\t\t\t\t\tprops,\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\treturn node.cloneNode()\n\t\t\t}\n\t\t}\n\n\t\treturn flat(toArray(cached.childNodes).map(nodes))\n\t}\n\n\thtml.components = { ...defaultRegistry }\n\thtml.define = userComponents => {\n\t\tlet name\n\t\tfor (name in userComponents) {\n\t\t\thtml.components[name.toLowerCase()] = userComponents[name]\n\t\t}\n\t}\n\n\treturn html\n}\n\n/**\n * Runs an `effect` on an `html` template. Reacts to reactive\n * interpolated values, or to the reactivity used in the body of the\n * function you pass.\n *\n * @param {(html: Function) => Children} fn - Function to run as an\n *   effect. It receives `html` argument for template creation.\n * @returns {Children}\n * @url https://pota.quack.uy/HTML\n */\nexport const htmlEffect = fn => {\n\t/** Copy the components from the global registry */\n\tconst html_ = HTML()\n\thtml_.components = { ...html.components }\n\n\tconst [get, set] = weakStore()\n\n\tconst disposeHTMLEffect = []\n\n\tfunction _html(template, ...values) {\n\t\t// when template is cached just update the signals\n\t\tlet cached = get(template)\n\t\tif (cached) {\n\t\t\t/**\n\t\t\t * Purpose:\n\t\t\t *\n\t\t\t * 1. Track the `values` by reading, so we track the interpolated\n\t\t\t *    values.\n\t\t\t * 2. Aditionally, this will also rerun when reactive values used\n\t\t\t *    on the body of the function you pass to the effect\n\t\t\t *    update.\n\t\t\t * 3. Update the `signals` when `values` change.\n\t\t\t *\n\t\t\t * It batches changes so it updates the template in one shot\n\t\t\t */\n\t\t\tbatch(() => {\n\t\t\t\tfor (let key = 0; key < values.length; key++) {\n\t\t\t\t\t// getValue(value) causes tracking\n\t\t\t\t\tcached[0][key].write(values[key])\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t/**\n\t\t\t * It needs to return the result because when nesting (ex\n\t\t\t * calling html twice inside the htmlEffect), the second call\n\t\t\t * will use the value of the first call. The result is a\n\t\t\t * reference to the nodes created before, so it always use the\n\t\t\t * same nodes, and reactivity on these nodes is live.\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * htmlEffect(html => {\n\t\t\t * \tconst ELEMENTS = html`<div>\n\t\t\t * \t\tdouble ${data.test * 2}\n\t\t\t * \t</div>`\n\t\t\t * \t// ^ these elements are needed in the next line\n\t\t\t * \treturn html`<div>${data.test} ${ELEMENTS}</div>`\n\t\t\t * })\n\t\t\t * ```\n\t\t\t */\n\t\t\treturn cached[1]\n\t\t}\n\n\t\t/**\n\t\t * Creates the html with `signals` in place of the interpolated\n\t\t * `values`. This is to avoid having to create the template more\n\t\t * than once. Once the template is created, then the only thing\n\t\t * that will update is the `signals`.\n\t\t *\n\t\t * It creates a root because when any of the `values` changes\n\t\t * inside the body of the function that you pass to `htmlEffect`,\n\t\t * or when the interpolated `values` change, it causes disposal\n\t\t * (aka removing the elements), and htmlEffect re-runs. To avoid\n\t\t * having the elements removed by the disposal of the body of your\n\t\t * own function we create a root.\n\t\t */\n\t\tconst signals = []\n\t\tlet result\n\t\troot(dispose => {\n\t\t\tdisposeHTMLEffect.push(dispose)\n\n\t\t\t/**\n\t\t\t * HTML is created with the `signals` in place of the `values`.\n\t\t\t * Pota will add one effect for each signal. So this wont\n\t\t\t * re-run.\n\t\t\t */\n\t\t\tresult = html_(\n\t\t\t\ttemplate,\n\t\t\t\t...values.map((value, key) => {\n\t\t\t\t\tsignals[key] = signal(value)\n\t\t\t\t\t// give accesors to template instead of the `values`\n\t\t\t\t\treturn signals[key].read\n\t\t\t\t}),\n\t\t\t)\n\t\t})\n\n\t\t// save the `signals` in the cached template\n\t\tset(template, [signals, result])\n\t\treturn result\n\t}\n\n\t/**\n\t * This effect will re-run when the `values` interpolated change, or\n\t * when any signal that you use on the `htmlEffect` function body\n\t * change. It cause re-runs of what we are batching above.\n\t */\n\n\tlet result\n\n\tsyncEffect(() => {\n\t\tresult = fn(_html)\n\t})\n\n\t/** Dispose the effect when whatever started it is disposed. */\n\tcleanup(() => call(disposeHTMLEffect))\n\n\treturn result\n}\n\nexport const html = HTML()\n","import { signal, cleanup, syncEffect } from '../lib/reactive.js'\nimport { isIterable, toArray } from '../lib/std.js'\n\n/**\n * Returns a `isSelected` function that will return `true` when the\n * argument for it matches the original signal `value`.\n *\n * @param {Signal} value - Signal with the current value\n * @returns {(item: any) => Signal} Signal that you can run with a\n *   value to know if matches the original signal\n */\nexport function useSelector(value) {\n\tconst map = new Map()\n\n\tlet prev = []\n\n\tsyncEffect(() => {\n\t\tconst val = value()\n\n\t\tconst selected = isIterable(val) ? toArray(val.values()) : [val]\n\n\t\t// unselect\n\t\tfor (const value of prev) {\n\t\t\tif (!selected.includes(value)) {\n\t\t\t\tconst current = map.get(value)\n\t\t\t\tcurrent && current.write(false)\n\t\t\t}\n\t\t}\n\n\t\t// select\n\t\tfor (const value of selected) {\n\t\t\tif (!prev.includes(value)) {\n\t\t\t\tconst current = map.get(value)\n\t\t\t\tcurrent && current.write(true)\n\t\t\t}\n\t\t}\n\n\t\tprev = selected\n\t})\n\n\t/**\n\t * Is selected function, it will return `true` when the value\n\t * matches the current signal.\n\t *\n\t * @param {any} item - Values to compare with current\n\t * @returns {Signal} A signal with a boolean value\n\t */\n\treturn function isSelected(item) {\n\t\tlet selected = map.get(item)\n\t\tif (!selected) {\n\t\t\tselected = signal(prev.includes(item))\n\t\t\tselected.counter = 0\n\t\t\tmap.set(item, selected)\n\t\t}\n\n\t\tselected.counter++\n\n\t\tcleanup(() => {\n\t\t\tif (--selected.counter === 0) {\n\t\t\t\tmap.delete(item)\n\t\t\t}\n\t\t})\n\n\t\treturn selected.read\n\t}\n}\n","import { batch, render, signal } from 'pota'\nimport { html } from 'pota/html'\nimport { useSelector } from 'pota/plugin/useSelector'\n\nlet idCounter = 1\nconst adjectives = [\n    'pretty',\n    'large',\n    'big',\n    'small',\n    'tall',\n    'short',\n    'long',\n    'handsome',\n    'plain',\n    'quaint',\n    'clean',\n    'elegant',\n    'easy',\n    'angry',\n    'crazy',\n    'helpful',\n    'mushy',\n    'odd',\n    'unsightly',\n    'adorable',\n    'important',\n    'inexpensive',\n    'cheap',\n    'expensive',\n    'fancy',\n  ],\n  colours = [\n    'red',\n    'yellow',\n    'blue',\n    'green',\n    'pink',\n    'brown',\n    'purple',\n    'brown',\n    'white',\n    'black',\n    'orange',\n  ],\n  nouns = [\n    'table',\n    'chair',\n    'house',\n    'bbq',\n    'desk',\n    'car',\n    'pony',\n    'cookie',\n    'sandwich',\n    'burger',\n    'pizza',\n    'mouse',\n    'keyboard',\n  ]\n\nfunction _random(max) {\n  return Math.round(Math.random() * 1000) % max\n}\n\nfunction buildData(count) {\n  let data = new Array(count)\n  for (let i = 0; i < count; i++) {\n    const [label, setLabel] = signal(\n      `${adjectives[_random(adjectives.length)]} ${\n        colours[_random(colours.length)]\n      } ${nouns[_random(nouns.length)]}`,\n    )\n    data[i] = {\n      id: idCounter++,\n      label,\n      setLabel,\n    }\n  }\n  return data\n}\n\nconst bbutton = ({ id, text, fn }) =>\n  html`<div class=\"col-sm-6 smallpad\">\n    <button\n      id=\"${id}\"\n      class=\"btn btn-primary btn-block\"\n      type=\"button\"\n      onClick=\"${fn}\"\n    >\n      ${text}\n    </button>\n  </div>`\n\nconst App = () => {\n  const [data, setData] = signal([])\n  const [selected, setSelected] = signal([])\n  const run = () => setData(buildData(1000))\n  const runLots = () => {\n    setData(buildData(10000))\n  }\n  const add = () => setData(d => [...d, ...buildData(1000)])\n  const update = () =>\n    batch(() => {\n      for (let i = 0, d = data(), len = d.length; i < len; i += 10)\n        d[i].setLabel(l => l + ' !!!')\n    })\n  const swapRows = () => {\n    const d = data().slice()\n    if (d.length > 998) {\n      let tmp = d[1]\n      d[1] = d[998]\n      d[998] = tmp\n      setData(d)\n    }\n  }\n  const clear = () => setData([])\n  const remove = id =>\n    setData(d => {\n      const idx = d.findIndex(datum => datum.id === id)\n      d.splice(idx, 1)\n      return [...d]\n    })\n  const isSelected = useSelector(selected)\n\n  html.define({ bbutton })\n\n  return html`<div class=\"container\">\n    <div class=\"jumbotron\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <h1>pota Keyed</h1>\n        </div>\n        <div class=\"col-md-6\">\n          <div class=\"row\">\n            <bbutton\n              id=\"run\"\n              text=\"Create 1,000 rows\"\n              fn=\"${run}\"\n            />\n            <bbutton\n              id=\"runlots\"\n              text=\"Create 10,000 rows\"\n              fn=\"${runLots}\"\n            />\n            <bbutton\n              id=\"add\"\n              text=\"Append 1,000 rows\"\n              fn=\"${add}\"\n            />\n            <bbutton\n              id=\"update\"\n              text=\"Update every 10th row\"\n              fn=\"${update}\"\n            />\n            <bbutton\n              id=\"clear\"\n              text=\"Clear\"\n              fn=\"${clear}\"\n            />\n            <bbutton\n              id=\"swaprows\"\n              text=\"Swap Rows\"\n              fn=\"${swapRows}\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      class=\"table table-hover table-striped test-data\"\n      onClick=\"${e => {\n        const element = e.target\n        if (element.setSelected !== undefined) {\n          setSelected(element.setSelected)\n        } else if (element.removeRow !== undefined) {\n          remove(element.removeRow)\n        }\n      }}\"\n    >\n      <div>\n        <For each=\"${data}\">\n          ${row => {\n            const { id, label } = row\n\n            return html`<tr class:danger=\"${isSelected(id)}\">\n              <td class=\"col-md-1\">${id}</td>\n              <td class=\"col-md-4\">\n                <a .set-selected=\"${id}\">${label}</a>\n              </td>\n              <td class=\"col-md-1\">\n                <a>\n                  <span\n                    class=\"glyphicon glyphicon-remove\"\n                    aria-hidden=\"true\"\n                    .remove-row=\"${id}\"\n                  />\n                </a>\n              </td>\n              <td class=\"col-md-6\" />\n            </tr>`\n          }}\n        </For>\n      </div>\n    </div>\n    <span\n      class=\"preloadicon glyphicon glyphicon-remove\"\n      aria-hidden=\"true\"\n    />\n  </div>`\n}\n\nrender(App, document.getElementById('main'))\n"],"names":["global","globalThis","window","CSSStyleSheet","document","DocumentFragment","Object","Promise","Symbol","queueMicrotask","assign","entries","freeze","fromEntries","groupBy","isArray","Array","toArray","from","iterator","stringify","JSON","history","location","origin","promise","fn","resolved","onDone","then","catch","setAttribute","node","name","value","removeAttribute","isConnected","activeElement","documentElement","call","fns","bind","createElement","createElementNS","createTextNode","empty","create","flat","arr","length","withState","state","cacheStore","getDocumentForElement","getRootNode","nodeType","ownerDocument","getValue","identity","x","isFunction","isIterable","isObject","isNullUndefined","undefined","isString","isBoolean","noop","nothing","optional","querySelector","query","removeFromArray","array","index","indexOf","splice","walkParents","context","propertyName","cb","DataStore","constructor","kind","store","get","set","has","target","defaults","o","delete","weakStore","WeakMap","Map","classListAdd","className","classList","add","classListRemove","remove","adoptedStyleSheetsGet","adoptedStyleSheets","adoptedStyleSheetsAdd","styleSheet","push","adoptedStyleSheetsRemove","addStyleSheets","styleSheets","sheet","addStyleSheetExternal","text","startsWith","fetch","r","css","resolve","template","values","String","raw","cache","replace","emit","eventName","data","bubbles","cancelable","composed","dispatchEvent","CustomEvent","preventDefault","e","$isComponent","$isClass","$isReactive","$isMap","prefix","NS","__proto__","svg","math","html","xlink","CLEAN","STALE","CHECK","Owner","Listener","Updates","Effects","Time","Root","owner","owned","cleanups","options","dispose","i","Computation","updatedAt","sources","sourceSlots","update","time","prevOwner","prevListener","err","source","observers","observer","slot","pop","observerSlots","Effect","user","batch","SyncEffect","Memo","pure","markReactive","read","updates","runUpdates","upstream","sourceSlot","write","equals","downstream","a","b","nextValue","forEach","Signal","save","prev","root","signal","initialValue","effect","syncEffect","memo","runWithOwner","untrack","cleanup","runTop","ancestors","init","wait","res","runQueue","effects","runEffects","queue","userLength","ignore","Context","defaultValue","id","useContext","newValue","args","isReactive","withValue","withPrevValue","val","lazy","markComponent","props","onLoading","onLoaded","onError","setValue","_onLoaded","retry","default","microtask","console","error","map","list","callback","sort","duplicates","runId","rows","clear","Row","item","isDupe","disposer","nodes","begin","end","all","mapper","items","hasPrev","row","dupes","unsorted","every","includes","usort","before","nodesFromRow","after","current","previous","previousSibling","nextSibling","children","unwrap","childrens","child","isComponent","isComponentable","makeCallback","callbacks","addEventListener","type","handler","removeEventListener","added","reset","priority","run","q","onFixes","onProps","onRef","onMount","ready","setEventNS","localName","ns","toLowerCase","slice","plugins","pluginsNS","propsPlugin","propName","onMicrotask","plugin","propsPluginNS","NSName","propsPluginBoth","setPropertyNS","setProperty","_setProperty","setAttributeNS","_setAttribute","removeAttributeNS","setUnknownProp","_setUnknownProp","setBoolNS","setBool","_setBool","setStyle","setNodeStyle","style","setStyleNS","setVarNS","setStyleValue","cssText","_setStyleValue","removeProperty","randomId","crypto","getRandomValues","BigUint64Array","toString","setCSS","setNodeCSS","setRef","setOnMount","setUnmount","setClass","setClassList","setClassNS","setClassListValue","_setClassListValue","trim","split","assignProps","isCustomElement","assignProp","isCE","event","useXMLNS","Fragment","Component","Factory","createTag","createClass","createAnything","Node","createNode","render","tagName","xmlns","withXMLNS","nsContext","createChildren","parent","relative","Text","nodeValue","insertNode","createPlaceholder","toDiff","childNodes","onResult","result","doc","propValue","head","getAttribute","rel","replaceWith","appendChild","insert","body","textContent","Infinity","toHTML","toHTMLFragment","fragment","ctx","Provider","next","dashesToCamelCase","s","g","toUpperCase","customElement","customElements","define","CustomElement","HTMLElement","shadowRoot","attachShadow","mode","baseStyleSheets","innerHTML","replaceChildren","hidden","hasSlot","Collapse","CollapseElement","when","Dynamic","component","For","restoreFocus","each","queued","active","scroll","scrollTop","focus","Portal","mount","Head","scrollToElement","scrollIntoView","scrollToLocationHash","scrollToSelector","hash","selector","scrollToSelectorWithFallback","scrollToTop","scrollTo","top","behavior","encodeURIComponent","_decodeURIComponent","string","decodeURIComponent","isAbsolute","href","test","isExternal","url","isRelative","replaceParams","params","setChildren","updateChildren","base","show","addChildren","removeChildren","noneMatch","getLocation","setLocation","wLocation","pathname","search","endsWith","path","searchParams","URL","key","routes","param","BeforeLeave","canNavigate","newBeforeLeave","beforeLeave","navigate","navigateInternal","startViewTransition","replaceState","pushState","addListenersAdded","addListeners","onLinkClick","onLocationChange","title","defaultPrevented","button","metaKey","altKey","ctrlKey","shiftKey","composedPath","find","HTMLAnchorElement","download","Show","condition","fallback","Router","route","RegExp","setParams","exec","groups","collapse","Default","A","useTimeout","delay","start","stop","setTimeout","clearTimeout","load","tries","Switch","matches","match","Match","defaultRegistry","defaultRegistryTemplate","k","v","tag","parseHTML","content","join","replaceAll","HTML","cached","attributes","components","cloneNode","userComponents","useSelector","selected","isSelected","counter","idCounter","adjectives","colours","nouns","_random","max","Math","round","random","buildData","count","label","setLabel","bbutton","App","setData","setSelected","runLots","d","len","l","swapRows","tmp","idx","findIndex","datum","element","removeRow","getElementById"],"mappings":";;;CAAO,MAAMA,MAAM,GAAGC,UAAU,CAAA;CACzB,MAAMC,MAAM,GAAGF,MAAM,CAAA;CAErB,MAAMG,aAAa,GAAGH,MAAM,CAACG,aAAa,CAAA;CAC1C,MAAMC,UAAQ,GAAGJ,MAAM,CAACI,QAAQ,CAAA;CAChC,MAAMC,gBAAgB,GAAGL,MAAM,CAACK,gBAAgB,CAAA;CAChD,MAAMC,QAAM,GAAGN,MAAM,CAACM,MAAM,CAAA;CAC5B,MAAMC,SAAO,GAAGP,MAAM,CAACO,OAAO,CAAA;CAE9B,MAAMC,MAAM,GAAGR,MAAM,CAACQ,MAAM,CAAA;CAC5B,MAAMC,cAAc,GAAGT,MAAM,CAACS,cAAc,CAAA;CAE5C,MAAMC,MAAM,GAAGJ,QAAM,CAACI,MAAM,CAAA;CAI5B,MAAMC,OAAO,GAAGL,QAAM,CAACK,OAAO,CAAA;CAC9B,MAAMC,MAAM,GAAGN,QAAM,CAACM,MAAM,CAAA;CAC5B,MAAMC,WAAW,GAAGP,QAAM,CAACO,WAAW,CAAA;CAQtC,MAAMC,OAAO,GAAGR,QAAM,CAACQ,OAAO,CAAA;CAQ9B,MAAMC,OAAO,GAAGC,KAAK,CAACD,OAAO,CAAA;CAC7B,MAAME,OAAO,GAAGD,KAAK,CAACE,IAAI,CAAA;CAI1B,MAAMC,QAAQ,GAAGX,MAAM,CAACW,QAAQ,CAAA;CAEhC,MAAMC,SAAS,GAAGC,IAAI,CAACD,SAAS,CAAA;CAwBhC,MAAME,OAAO,GAAGtB,MAAM,CAACsB,OAAO,CAAA;CAC9B,MAAMC,UAAQ,GAAGvB,MAAM,CAACuB,QAAQ,CAAA;CAGhC,MAAMC,QAAM,GAAGD,UAAQ,CAACC,MAAM,CAAA;CAE9B,MAAMC,OAAO,GAAGC,EAAE,IAAI,IAAInB,SAAO,CAACmB,EAAE,CAAC,CAAA;;CAI5C;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMC,QAAQ,GAAGA,CAACF,OAAO,EAAEG,MAAM,KACvCH,OAAO,CAACI,IAAI,CAACD,MAAM,CAAC,CAACE,KAAK,CAACF,MAAM,CAAC,CAAA;CAE5B,MAAMG,cAAY,GAAGA,CAACC,IAAI,EAAEC,IAAI,EAAEC,KAAK,KAC7CF,IAAI,CAACD,YAAY,CAACE,IAAI,EAAEC,KAAK,CAAC,CAAA;CAIxB,MAAMC,eAAe,GAAGA,CAACH,IAAI,EAAEC,IAAI,KACzCD,IAAI,CAACG,eAAe,CAACF,IAAI,CAAC,CAAA;CAWpB,MAAMG,WAAW,GAAGJ,IAAI,IAAIA,IAAI,CAACI,WAAW,CAAA;CAE5C,MAAMC,aAAa,GAAGA,MAAMjC,UAAQ,CAACiC,aAAa,CAAA;CAElD,MAAMC,eAAe,GAAGlC,UAAQ,CAACkC,eAAe,CAAA;;CAEvD;CACA;CACA;CACA;CACA;CACO,MAAMC,IAAI,GAAGC,GAAG,IAAI;CAC1B,EAAA,KAAK,MAAMd,EAAE,IAAIc,GAAG,EAAEd,EAAE,EAAE,CAAA;CAC3B,CAAC,CAAA;CA2CD,MAAMe,IAAI,GAAGf,EAAE,IAAItB,UAAQ,CAACsB,EAAE,CAAC,CAACe,IAAI,CAACrC,UAAQ,CAAC,CAAA;CAEvC,MAAMsC,aAAa,GAAGD,IAAI,CAAC,eAAe,CAAC,CAAA;CAE3C,MAAME,eAAe,GAAGF,IAAI,CAAC,iBAAiB,CAAC,CAAA;CAE/C,MAAMG,cAAc,GAAGH,IAAI,CAAC,gBAAgB,CAAC,CAAA;CAE1BA,IAAI,CAAC,YAAY,EAAC;CAEZA,IAAI,CAAC,kBAAkB,EAAC;;CAExD;CACA;CACA;CACA;CACA;CACA;CACO,MAAMI,KAAK,GAAGvC,QAAM,CAACwC,MAAM,CAACL,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;;CAyEnD;CACA;CACA;CACA;CACA;CACA;CACO,MAAMM,IAAI,GAAGC,GAAG,IAAKA,GAAG,CAACC,MAAM,KAAK,CAAC,GAAGD,GAAG,CAAC,CAAC,CAAC,GAAGA,GAAI,CAAA;;CAE5D;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAME,SAAS,6BAA8BA,CACnDxB,EAAE,EACFyB,KAAK,GAAGC,UAAU,KACd1B,EAAE,CAACe,IAAI,CAAC,IAAI,EAAEU,KAAK,EAAE,CAAC,CAAA;;CAsB3B;CACA;CACA;CACA;CACA;CACA;;CAEO,MAAME,qBAAqB,GAAGrB,IAAI,IAAI;CAC5C,EAAA,MAAM5B,QAAQ,GAAG4B,IAAI,CAACsB,WAAW,EAAE,CAAA;GACnC,MAAM;CAAEC,IAAAA,QAAAA;CAAS,GAAC,GAAGnD,QAAQ,CAAA;CAC7B;CACA;CACA;CACA;;CAEA;CACA,EAAA,OAAOmD,QAAQ,KAAK,EAAE,IAAIA,QAAQ,KAAK,CAAC,GACrCnD,QAAQ,GACR4B,IAAI,CAACwB,aAAa,CAAA;CACtB,CAAC,CAAA;;CASD;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASC,QAAQA,CAACvB,KAAK,EAAE;GAC/B,OAAO,OAAOA,KAAK,KAAK,UAAU,EAAEA,KAAK,GAAGA,KAAK,EAAE,CAAA;CACnD,EAAA,OAAOA,KAAK,CAAA;CACb,CAAA;;CAsBA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMwB,QAAQ,GAAGC,CAAC,IAAIA,CAAC,CAAA;;CAoB9B;CACA;CACA;CACA;CACA;CACA;CACO,MAAMC,UAAU,GAAG1B,KAAK,IAAI,OAAOA,KAAK,KAAK,UAAU,CAAA;;CAE9D;CACA;CACA;CACA;CACA;CACA;CACO,MAAM2B,UAAU,GAAG3B,KAAK,IAC9B4B,QAAQ,CAAC5B,KAAK,CAAC,IAAI,QAAQ,IAAIA,KAAK,CAAA;;CAErC;CACA;CACA;CACA;CACA;CACA;CACO,MAAM6B,eAAe,GAAG7B,KAAK,IACnCA,KAAK,KAAK8B,SAAS,IAAI9B,KAAK,KAAK,IAAI,CAAA;;CAEtC;CACA;CACA;CACA;CACA;CACA;CACO,MAAM4B,QAAQ,GAAG5B,KAAK,IAC5BA,KAAK,KAAK,IAAI,IAAI,OAAOA,KAAK,KAAK,QAAQ,CAAA;;CA2B5C;CACA;CACA;CACA;CACA;CACA;CACO,MAAM+B,QAAQ,GAAG/B,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,CAAA;;CAkB1D;CACA;CACA;CACA;CACA;CACA;CACO,MAAMgC,SAAS,GAAGhC,KAAK,IAAI,OAAOA,KAAK,KAAK,SAAS,CAAA;CAErD,MAAMiC,IAAI,GAAGA,MAAM,EAAE,CAAA;;CAE5B;CACA;CACA;CACA;CACA;CACO,MAAMC,OAAO,GAAGxD,MAAM,CAACiC,KAAK,EAAE,CAAC,CAAA;;CAEtC;CACA;CACA;CACA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMwB,QAAQ,GAAGnC,KAAK,IAC5BA,KAAK,KAAK8B,SAAS,IAAIP,QAAQ,CAACvB,KAAK,CAAC,CAAA;CAOhC,MAAMoC,aAAa,GAAGA,CAACtC,IAAI,EAAEuC,KAAK,KACxCvC,IAAI,CAACsC,aAAa,CAACC,KAAK,CAAC,CAAA;;CAsB1B;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASC,eAAeA,CAACC,KAAK,EAAEvC,KAAK,EAAE;CAC7C,EAAA,MAAMwC,KAAK,GAAGD,KAAK,CAACE,OAAO,CAACzC,KAAK,CAAC,CAAA;CAClC,EAAA,IAAIwC,KAAK,KAAK,CAAC,CAAC,EAAED,KAAK,CAACG,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC,CAAA;CACxC,EAAA,OAAOD,KAAK,CAAA;CACb,CAAA;CAkDO,SAASI,WAAWA,CAACC,OAAO,EAAEC,YAAY,EAAEC,EAAE,EAAE;CACtD,EAAA,OAAOF,OAAO,EAAE;CACf,IAAA,IAAIE,EAAE,CAACF,OAAO,CAAC,EAAE,OAAO,IAAI,CAAA;CAC5BA,IAAAA,OAAO,GAAGA,OAAO,CAACC,YAAY,CAAC,CAAA;CAChC,GAAA;CACD,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CAEA,MAAME,SAAS,CAAC;GACfC,WAAWA,CAACC,IAAI,EAAE;CACjB,IAAA,MAAMC,KAAK,GAAG,IAAID,IAAI,EAAE,CAAA;KAExB,MAAME,GAAG,GAAGD,KAAK,CAACC,GAAG,CAAC5C,IAAI,CAAC2C,KAAK,CAAC,CAAA;KACjC,MAAME,GAAG,GAAGF,KAAK,CAACE,GAAG,CAAC7C,IAAI,CAAC2C,KAAK,CAAC,CAAA;KACjC,MAAMG,GAAG,GAAGH,KAAK,CAACG,GAAG,CAAC9C,IAAI,CAAC2C,KAAK,CAAC,CAAA;KAEjC,IAAI,CAACC,GAAG,GAAG,CAACG,MAAM,EAAEC,QAAQ,GAAGzB,SAAS,KAAK;CAC5C,MAAA,MAAM0B,CAAC,GAAGL,GAAG,CAACG,MAAM,CAAC,CAAA;OAErB,IAAIE,CAAC,KAAK1B,SAAS,EAAE;CACpB,QAAA,OAAO0B,CAAC,CAAA;CACT,OAAA;OAEA,IAAID,QAAQ,KAAKzB,SAAS,EAAE;CAC3B;CACJ;CACA;CACA;CACIyB,QAAAA,QAAQ,GAAGA,QAAQ,CAACD,MAAM,CAAC,CAAA;CAC3BF,QAAAA,GAAG,CAACE,MAAM,EAAEC,QAAQ,CAAC,CAAA;CACrB,QAAA,OAAOA,QAAQ,CAAA;CAChB,OAAA;MACA,CAAA;KAED,IAAI,CAACH,GAAG,GAAGA,GAAG,CAAA;KACd,IAAI,CAACC,GAAG,GAAGA,GAAG,CAAA;KACd,IAAI,CAACI,MAAM,GAAGP,KAAK,CAACO,MAAM,CAAClD,IAAI,CAAC2C,KAAK,CAAC,CAAA;CACvC,GAAA;GAEA,EAAE5E,MAAM,CAACW,QAAQ,CAAI,GAAA;KACpB,MAAM,IAAI,CAACkE,GAAG,CAAA;KACd,MAAM,IAAI,CAACC,GAAG,CAAA;KACd,MAAM,IAAI,CAACC,GAAG,CAAA;KACd,MAAM,IAAI,CAACI,MAAM,CAAA;CAClB,GAAA;CACD,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMC,SAAS,GAAGA,MAAM,IAAIX,SAAS,CAACY,OAAO,CAAC,CAAA;;CAErD;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMzC,UAAU,GAAGA,MAAM,IAAI6B,SAAS,CAACa,GAAG,CAAC,CAAA;CAE3C,MAAMC,YAAY,GAAGA,CAAC/D,IAAI,EAAEgE,SAAS,KAC3ChE,IAAI,CAACiE,SAAS,CAACC,GAAG,CAACF,SAAS,CAAC,CAAA;CAEvB,MAAMG,eAAe,GAAGA,CAACnE,IAAI,EAAEgE,SAAS,KAC9ChE,IAAI,CAACiE,SAAS,CAACG,MAAM,CAACJ,SAAS,CAAC,CAAA;;CAEjC;CACA;CACA;CACA;CACA;CACO,MAAMK,qBAAqB,GAAGjG,QAAQ,IAC5CA,QAAQ,CAACkG,kBAAkB,CAAA;;CAK5B;CACA;CACA;CACA;CACA;CACA;CACO,MAAMC,qBAAqB,GAAGA,CAACnG,QAAQ,EAAEoG,UAAU,KACzDH,qBAAqB,CAACjG,QAAQ,CAAC,CAACqG,IAAI,CAACD,UAAU,CAAC,CAAA;;CAEjD;CACA;CACA;CACA;CACA;CACA;CACO,MAAME,wBAAwB,GAAGA,CAACtG,QAAQ,EAAEoG,UAAU,KAC5DhC,eAAe,CAAC6B,qBAAqB,CAACjG,QAAQ,CAAC,EAAEoG,UAAU,CAAC,CAAA;;CAE7D;CACA;CACA;CACA;CACA;CACA;CACO,SAASG,cAAcA,CAACvG,QAAQ,EAAEwG,WAAW,GAAG,EAAE,EAAE;CAC1D,EAAA,KAAK,MAAMC,KAAK,IAAID,WAAW,EAAE;CAChC,IAAA,IAAIC,KAAK,EAAE;CACVA,MAAAA,KAAK,YAAY1G,aAAa,GAC3BoG,qBAAqB,CAACnG,QAAQ,EAAEyG,KAAK,CAAC,GACtCC,qBAAqB,CAAC1G,QAAQ,EAAEyG,KAAK,CAAC,CAAA;CAC1C,KAAA;CACD,GAAA;CACD,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMC,qBAAqB,GAAG5D,SAAS,CAC7C,CAACC,KAAK,EAAE/C,QAAQ,EAAE2G,IAAI,KAAK;CAC1B5D,EAAAA,KAAK,CACHkC,GAAG,CAAC0B,IAAI,EAAEA,IAAI,IACdA,IAAI,CAACC,UAAU,CAAC,MAAM,CAAC,GACpBC,KAAK,CAACF,IAAI,CAAC,CACVlF,IAAI,CAACqF,CAAC,IAAIA,CAAC,CAACH,IAAI,EAAE,CAAC,CACnBlF,IAAI,CAACsF,GAAG,IAAIN,KAAK,CAACM,GAAG,CAAC,CAAC,GACxB1F,OAAO,CAAC2F,OAAO,IAAIA,OAAO,CAACP,KAAK,CAACE,IAAI,CAAC,CAAC,CAC3C,CAAC,CACAlF,IAAI,CAAC2E,UAAU,IAAID,qBAAqB,CAACnG,QAAQ,EAAEoG,UAAU,CAAC,CAAC,CAAA;CAClE,CACD,CAAC,CAAA;;CAsCD;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMW,GAAG,GAAGA,CAACE,QAAQ,EAAE,GAAGC,MAAM,KACtCT,KAAK,CAACU,MAAM,CAACC,GAAG,CAAC;CAAEA,EAAAA,GAAG,EAAEH,QAAAA;CAAS,CAAC,EAAE,GAAGC,MAAM,CAAC,CAAC,CAAA;;CAEhD;CACA;CACA;CACA;CACA;CACA;CACO,MAAMT,KAAK,GAAG3D,SAAS,CAAC,CAACuE,KAAK,EAAEN,GAAG,KACzCM,KAAK,CAACpC,GAAG,CAAC8B,GAAG,EAAEA,GAAG,IAAI;CACrB,EAAA,MAAMN,KAAK,GAAG,IAAI1G,aAAa,EAAE,CAAA;CACjC;CACF;CACA;CACA;CACE0G,EAAAA,KAAK,CAACa,OAAO,CAACP,GAAG,CAAC,CAAA;CAElB,EAAA,OAAON,KAAK,CAAA;CACb,CAAC,CACF,CAAC,CAAA;;CAED;CACA;CACA;CACA;CACA;;CAEO,MAAMc,IAAI,GAAGA,CACnB3F,IAAI,EACJ4F,SAAS,EACTC,IAAI,GAAG;CAAEC,EAAAA,OAAO,EAAE,IAAI;CAAEC,EAAAA,UAAU,EAAE,IAAI;CAAEC,EAAAA,QAAQ,EAAE,IAAA;CAAK,CAAC,KACtDhG,IAAI,CAACiG,aAAa,CAAC,IAAIC,WAAW,CAACN,SAAS,EAAEC,IAAI,CAAC,CAAC,CAAA;CAQlD,MAAMM,cAAc,GAAGC,CAAC,IAAIA,CAAC,CAACD,cAAc,EAAE;;CCt0BrD;;CAIO,MAAME,YAAY,GAAG7H,MAAM,EAAE,CAAA;CAC7B,MAAM8H,QAAQ,GAAG9H,MAAM,EAAE,CAAA;CACzB,MAAM+H,WAAW,GAAG/H,MAAM,EAAE,CAAA;CAC5B,MAAMgI,MAAM,GAAGhI,MAAM,EAAE,CAAA;;CAE9B;;CAEA,MAAMiI,MAAM,GAAG,oBAAoB,CAAA;;CAEnC;;CAEO,MAAMC,EAAE,GAAG;CACjBC,EAAAA,SAAS,EAAE,IAAI;GACfC,GAAG,EAAEH,MAAM,GAAG,UAAU;GACxBI,IAAI,EAAEJ,MAAM,GAAG,kBAAkB;GACjCK,IAAI,EAAEL,MAAM,GAAG,YAAY;GAC3BM,KAAK,EAAEN,MAAM,GAAG,YAAA;CACjB,CAAC;;CCrBD;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CA4BA,MAAMO,KAAK,GAAG,CAAC,CAAA;CACf,MAAMC,KAAK,GAAG,CAAC,CAAA;CACf,MAAMC,KAAK,GAAG,CAAC,CAAA;CAEf,IAAIC,KAAK,CAAA;CACT,IAAIC,QAAQ,CAAA;CAEZ,IAAIC,OAAO,GAAG,IAAI,CAAA;CAClB,IAAIC,OAAO,GAAG,IAAI,CAAA;CAElB,IAAIC,IAAI,GAAG,CAAC,CAAA;;CAEZ;;CAEA,MAAMC,IAAI,CAAC;GACVC,KAAK,CAAA;GACLC,KAAK,CAAA;GAELC,QAAQ,CAAA;GAER7E,OAAO,CAAA;CAEPI,EAAAA,WAAWA,CAACuE,KAAK,EAAEG,OAAO,EAAE;KAC3B,IAAI,CAACH,KAAK,GAAGA,KAAK,CAAA;CAClB,IAAA,IAAI,CAAC3E,OAAO,GAAG2E,KAAK,EAAE3E,OAAO,CAAA;CAE7B,IAAA,IAAI8E,OAAO,EAAE;CACZlJ,MAAAA,MAAM,CAAC,IAAI,EAAEkJ,OAAO,CAAC,CAAA;CACtB,KAAA;CACD,GAAA;CAEAC,EAAAA,OAAOA,GAAG;CACT,IAAA,IAAIC,CAAC,CAAA;KAEL,MAAM;OAAEJ,KAAK;CAAEC,MAAAA,QAAAA;CAAS,KAAC,GAAG,IAAI,CAAA;CAEhC,IAAA,IAAID,KAAK,EAAE;CACV,MAAA,KAAKI,CAAC,GAAGJ,KAAK,CAACzG,MAAM,GAAG,CAAC,EAAE6G,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;CACvCJ,QAAAA,KAAK,CAACI,CAAC,CAAC,CAACD,OAAO,EAAE,CAAA;CACnB,OAAA;OACAH,KAAK,CAACzG,MAAM,GAAG,CAAC,CAAA;CACjB,KAAA;CACA,IAAA,IAAI0G,QAAQ,EAAE;CACb,MAAA,KAAKG,CAAC,GAAGH,QAAQ,CAAC1G,MAAM,GAAG,CAAC,EAAE6G,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;CAC1CH,QAAAA,QAAQ,CAACG,CAAC,CAAC,EAAE,CAAA;CACd,OAAA;OACAH,QAAQ,CAAC1G,MAAM,GAAG,CAAC,CAAA;CACpB,KAAA;CACD,GAAA;CACD,CAAA;;CAEA;;CAEA,MAAM8G,WAAW,SAASP,IAAI,CAAC;CAC9BrG,EAAAA,KAAK,GAAG8F,KAAK,CAAA;CAEbe,EAAAA,SAAS,GAAG,CAAC,CAAA;GAEbtI,EAAE,CAAA;GAEFuI,OAAO,CAAA;GACPC,WAAW,CAAA;CAEXhF,EAAAA,WAAWA,CAACuE,KAAK,EAAE/H,EAAE,EAAEkI,OAAO,EAAE;CAC/B,IAAA,KAAK,CAACH,KAAK,EAAEG,OAAO,CAAC,CAAA;KAErB,IAAI,CAAClI,EAAE,GAAGA,EAAE,CAAA;CAEZ,IAAA,IAAI+H,KAAK,EAAE;OACV,IAAIA,KAAK,CAACC,KAAK,EAAE;CAChBD,QAAAA,KAAK,CAACC,KAAK,CAACjD,IAAI,CAAC,IAAI,CAAC,CAAA;CACvB,OAAC,MAAM;CACNgD,QAAAA,KAAK,CAACC,KAAK,GAAG,CAAC,IAAI,CAAC,CAAA;CACrB,OAAA;CACD,KAAA;CACD,GAAA;CAEAS,EAAAA,MAAMA,GAAG;KACR,IAAI,CAACN,OAAO,EAAE,CAAA;KAEd,MAAMO,IAAI,GAAGb,IAAI,CAAA;KAEjB,MAAMc,SAAS,GAAGlB,KAAK,CAAA;KACvB,MAAMmB,YAAY,GAAGlB,QAAQ,CAAA;KAE7BA,QAAQ,GAAGD,KAAK,GAAG,IAAI,CAAA;KACvB,IAAI;OACH,IAAI,CAACzH,EAAE,EAAE,CAAA;MACT,CAAC,OAAO6I,GAAG,EAAE;CACb,MAAA,IAAI,CAACP,SAAS,GAAGI,IAAI,GAAG,CAAC,CAAA;CAEzB,MAAA,MAAMG,GAAG,CAAA;CACV,KAAC,SAAS;CACTpB,MAAAA,KAAK,GAAGkB,SAAS,CAAA;CACjBjB,MAAAA,QAAQ,GAAGkB,YAAY,CAAA;CACxB,KAAA;CAEA,IAAA,IAAI,IAAI,CAACN,SAAS,IAAII,IAAI,EAAE;OAC3B,IAAI,CAACJ,SAAS,GAAGI,IAAI,CAAA;CACtB,KAAA;CACD,GAAA;CAEAP,EAAAA,OAAOA,GAAG;KACT,MAAM;OAAEI,OAAO;CAAEC,MAAAA,WAAAA;CAAY,KAAC,GAAG,IAAI,CAAA;CAErC,IAAA,IAAID,OAAO,EAAE;CACZ,MAAA,IAAIO,MAAM,CAAA;CACV,MAAA,IAAIC,SAAS,CAAA;CACb,MAAA,IAAI/F,KAAK,CAAA;CAET,MAAA,IAAIgG,QAAQ,CAAA;CACZ,MAAA,IAAIC,IAAI,CAAA;OACR,OAAOV,OAAO,CAAChH,MAAM,EAAE;CACtBuH,QAAAA,MAAM,GAAGP,OAAO,CAACW,GAAG,EAAE,CAAA;SACtBH,SAAS,GAAGD,MAAM,CAACC,SAAS,CAAA;CAE5B/F,QAAAA,KAAK,GAAGwF,WAAW,CAACU,GAAG,EAAE,CAAA;CAEzB,QAAA,IAAIH,SAAS,IAAIA,SAAS,CAACxH,MAAM,EAAE;CAClCyH,UAAAA,QAAQ,GAAGD,SAAS,CAACG,GAAG,EAAE,CAAA;CAC1BD,UAAAA,IAAI,GAAGH,MAAM,CAACK,aAAa,CAACD,GAAG,EAAE,CAAA;CAEjC,UAAA,IAAIlG,KAAK,GAAG+F,SAAS,CAACxH,MAAM,EAAE;CAC7ByH,YAAAA,QAAQ,CAACR,WAAW,CAACS,IAAI,CAAC,GAAGjG,KAAK,CAAA;CAClC+F,YAAAA,SAAS,CAAC/F,KAAK,CAAC,GAAGgG,QAAQ,CAAA;CAC3BF,YAAAA,MAAM,CAACK,aAAa,CAACnG,KAAK,CAAC,GAAGiG,IAAI,CAAA;CACnC,WAAA;CACD,SAAA;CACD,OAAA;CACD,KAAA;KAEA,KAAK,CAACd,OAAO,EAAE,CAAA;KAEf,IAAI,CAAC1G,KAAK,GAAG6F,KAAK,CAAA;CACnB,GAAA;CACD,CAAA;CAEA,MAAM8B,MAAM,SAASf,WAAW,CAAC;CAChCgB,EAAAA,IAAI,GAAG,IAAI,CAAA;CAEX7F,EAAAA,WAAWA,CAACuE,KAAK,EAAE/H,EAAE,EAAEkI,OAAO,EAAE;CAC/B,IAAA,KAAK,CAACH,KAAK,EAAE/H,EAAE,EAAEkI,OAAO,CAAC,CAAA;CAEzBN,IAAAA,OAAO,GAAGA,OAAO,CAAC7C,IAAI,CAAC,IAAI,CAAC,GAAGuE,KAAK,CAAC,MAAM,IAAI,CAACb,MAAM,EAAE,CAAC,CAAA;CAC1D,GAAA;CACD,CAAA;CAEA,MAAMc,UAAU,SAASlB,WAAW,CAAC;CACpC7E,EAAAA,WAAWA,CAACuE,KAAK,EAAE/H,EAAE,EAAEkI,OAAO,EAAE;CAC/B,IAAA,KAAK,CAACH,KAAK,EAAE/H,EAAE,EAAEkI,OAAO,CAAC,CAAA;CAEzBoB,IAAAA,KAAK,CAAC,MAAM,IAAI,CAACb,MAAM,EAAE,CAAC,CAAA;CAC3B,GAAA;CACD,CAAA;;CAEA;;CAEA,MAAMe,IAAI,SAASnB,WAAW,CAAC;CAC9B5G,EAAAA,KAAK,GAAG8F,KAAK,CAAA;CAEbkC,EAAAA,IAAI,GAAG,IAAI,CAAA;GAEXjJ,KAAK,CAAA;GAELuI,SAAS,CAAA;GACTI,aAAa,CAAA;;CAEb;CACA;;CAEA3F,EAAAA,WAAWA,CAACuE,KAAK,EAAE/H,EAAE,EAAEkI,OAAO,EAAE;CAC/B,IAAA,KAAK,CAACH,KAAK,EAAE/H,EAAE,EAAEkI,OAAO,CAAC,CAAA;KAEzB,OAAOwB,YAAY,CAAC,IAAI,CAACC,IAAI,CAAC5I,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;CAC1C,GAAA;CAEA4I,EAAAA,IAAIA,GAAG;CACN;;KAEA,IAAI,IAAI,CAAClI,KAAK,EAAE;CACf,MAAA,IAAI,IAAI,CAACA,KAAK,KAAK8F,KAAK,EAAE;SACzB,IAAI,CAACkB,MAAM,EAAE,CAAA;CACd,OAAC,MAAM;SACN,MAAMmB,OAAO,GAAGjC,OAAO,CAAA;CACvBA,QAAAA,OAAO,GAAG,IAAI,CAAA;CACdkC,QAAAA,UAAU,CAAC,MAAMC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAA;CAChCnC,QAAAA,OAAO,GAAGiC,OAAO,CAAA;CAClB,OAAA;CACD,KAAA;CAEA,IAAA,IAAIlC,QAAQ,EAAE;CACb,MAAA,MAAMqC,UAAU,GAAG,IAAI,CAAChB,SAAS,GAAG,IAAI,CAACA,SAAS,CAACxH,MAAM,GAAG,CAAC,CAAA;OAE7D,IAAImG,QAAQ,CAACa,OAAO,EAAE;CACrBb,QAAAA,QAAQ,CAACa,OAAO,CAACxD,IAAI,CAAC,IAAI,CAAC,CAAA;CAC3B2C,QAAAA,QAAQ,CAACc,WAAW,CAACzD,IAAI,CAACgF,UAAU,CAAC,CAAA;CACtC,OAAC,MAAM;CACNrC,QAAAA,QAAQ,CAACa,OAAO,GAAG,CAAC,IAAI,CAAC,CAAA;CACzBb,QAAAA,QAAQ,CAACc,WAAW,GAAG,CAACuB,UAAU,CAAC,CAAA;CACpC,OAAA;OAEA,IAAI,IAAI,CAAChB,SAAS,EAAE;CACnB,QAAA,IAAI,CAACA,SAAS,CAAChE,IAAI,CAAC2C,QAAQ,CAAC,CAAA;CAC7B,QAAA,IAAI,CAACyB,aAAa,CAACpE,IAAI,CAAC2C,QAAQ,CAACa,OAAO,CAAChH,MAAM,GAAG,CAAC,CAAC,CAAA;CACrD,OAAC,MAAM;CACN,QAAA,IAAI,CAACwH,SAAS,GAAG,CAACrB,QAAQ,CAAC,CAAA;SAC3B,IAAI,CAACyB,aAAa,GAAG,CAACzB,QAAQ,CAACa,OAAO,CAAChH,MAAM,GAAG,CAAC,CAAC,CAAA;CACnD,OAAA;CACD,KAAA;KAEA,OAAO,IAAI,CAACf,KAAK,CAAA;CAClB,GAAA;GAEAwJ,KAAKA,CAACxJ,KAAK,EAAE;CACZ,IAAA,IAAI,IAAI,CAACyJ,MAAM,KAAK,KAAK,IAAI,CAAC,IAAI,CAACA,MAAM,CAAC,IAAI,CAACzJ,KAAK,EAAEA,KAAK,CAAC,EAAE;OAC7D,IAAI,CAACA,KAAK,GAAGA,KAAK,CAAA;OAClB,IAAI,IAAI,CAACuI,SAAS,IAAI,IAAI,CAACA,SAAS,CAACxH,MAAM,EAAE;CAC5CsI,QAAAA,UAAU,CAAC,MAAM;CAChB,UAAA,KAAK,IAAIzB,CAAC,GAAG,CAAC,EAAEY,QAAQ,EAAEZ,CAAC,GAAG,IAAI,CAACW,SAAS,CAACxH,MAAM,EAAE6G,CAAC,EAAE,EAAE;CACzDY,YAAAA,QAAQ,GAAG,IAAI,CAACD,SAAS,CAACX,CAAC,CAAC,CAAA;CAE5B,YAAA,IAAIY,QAAQ,CAACvH,KAAK,KAAK6F,KAAK,EAAE;eAC7B,IAAI0B,QAAQ,CAACS,IAAI,EAAE;CAClB9B,gBAAAA,OAAO,CAAC5C,IAAI,CAACiE,QAAQ,CAAC,CAAA;CACvB,eAAC,MAAM;CACNpB,gBAAAA,OAAO,CAAC7C,IAAI,CAACiE,QAAQ,CAAC,CAAA;CACvB,eAAA;eACA,IAAIA,QAAQ,CAACD,SAAS,EAAE;iBACvBmB,UAAU,CAAClB,QAAQ,CAAC,CAAA;CACrB,eAAA;CACD,aAAA;aACAA,QAAQ,CAACvH,KAAK,GAAG8F,KAAK,CAAA;CACvB,WAAA;CACD,SAAC,CAAC,CAAA;CACH,OAAA;CACD,KAAA;CACD,GAAA;CACA0C,EAAAA,MAAMA,CAACE,CAAC,EAAEC,CAAC,EAAE;KACZ,OAAOD,CAAC,KAAKC,CAAC,CAAA;CACf,GAAA;CAEA3B,EAAAA,MAAMA,GAAG;KACR,IAAI,CAACN,OAAO,EAAE,CAAA;CAEd,IAAA,IAAIkC,SAAS,CAAA;KAEb,MAAM3B,IAAI,GAAGb,IAAI,CAAA;KAEjB,MAAMc,SAAS,GAAGlB,KAAK,CAAA;KACvB,MAAMmB,YAAY,GAAGlB,QAAQ,CAAA;KAE7BA,QAAQ,GAAGD,KAAK,GAAG,IAAI,CAAA;KACvB,IAAI;CACH4C,MAAAA,SAAS,GAAG,IAAI,CAACrK,EAAE,EAAE,CAAA;MACrB,CAAC,OAAO6I,GAAG,EAAE;OACb,IAAI,CAACpH,KAAK,GAAG8F,KAAK,CAAA;OAClB,IAAI,IAAI,CAACS,KAAK,EAAE;CACf,QAAA,IAAI,CAACA,KAAK,CAACsC,OAAO,CAAChK,IAAI,IAAIA,IAAI,CAAC6H,OAAO,EAAE,CAAC,CAAA;CAC1C,QAAA,IAAI,CAACH,KAAK,CAACzG,MAAM,GAAG,CAAC,CAAA;CACtB,OAAA;CACA,MAAA,IAAI,CAAC+G,SAAS,GAAGI,IAAI,GAAG,CAAC,CAAA;CAEzB,MAAA,MAAMG,GAAG,CAAA;CACV,KAAC,SAAS;CACTpB,MAAAA,KAAK,GAAGkB,SAAS,CAAA;CACjBjB,MAAAA,QAAQ,GAAGkB,YAAY,CAAA;CACxB,KAAA;CACA,IAAA,IAAI,IAAI,CAACN,SAAS,IAAII,IAAI,EAAE;CAC3B,MAAA,IAAI,IAAI,CAACJ,SAAS,KAAK,CAAC,EAAE;CACzB,QAAA,IAAI,CAAC0B,KAAK,CAACK,SAAS,CAAC,CAAA;CACtB,OAAC,MAAM;SACN,IAAI,CAAC7J,KAAK,GAAG6J,SAAS,CAAA;CACvB,OAAA;OACA,IAAI,CAAC/B,SAAS,GAAGI,IAAI,CAAA;CACtB,KAAA;CACD,GAAA;CACD,CAAA;;CAEA;;CAEA,MAAM6B,MAAM,CAAC;GACZ/J,KAAK,CAAA;GAELuI,SAAS,CAAA;GACTI,aAAa,CAAA;;CAEb;CACA;CACA;;CAEA;;CAEA3F,EAAAA,WAAWA,CAAChD,KAAK,EAAE0H,OAAO,EAAE;KAC3B,IAAI,CAAC1H,KAAK,GAAGA,KAAK,CAAA;CAClB,IAAA,IAAI0H,OAAO,EAAE;CACZlJ,MAAAA,MAAM,CAAC,IAAI,EAAEkJ,OAAO,CAAC,CAAA;OACrB,IAAI,IAAI,CAACsC,IAAI,EAAE;SACd,IAAI,CAACC,IAAI,GAAGjK,KAAK,CAAA;CAClB,OAAA;CACD,KAAA;CAEA,IAAA,IAAI,CAACmJ,IAAI,GAAGD,YAAY,CAAC,IAAI,CAACC,IAAI,CAAC5I,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;KAE9C,IAAI,CAACiJ,KAAK,GAAG,IAAI,CAACA,KAAK,CAACjJ,IAAI,CAAC,IAAI,CAAC,CAAA;KAClC,IAAI,CAAC0H,MAAM,GAAG,IAAI,CAACA,MAAM,CAAC1H,IAAI,CAAC,IAAI,CAAC,CAAA;CACrC,GAAA;CAEA4I,EAAAA,IAAIA,GAAG;CACN;;CAEA,IAAA,IAAIjC,QAAQ,EAAE;CACb,MAAA,MAAMqC,UAAU,GAAG,IAAI,CAAChB,SAAS,GAAG,IAAI,CAACA,SAAS,CAACxH,MAAM,GAAG,CAAC,CAAA;OAE7D,IAAImG,QAAQ,CAACa,OAAO,EAAE;CACrBb,QAAAA,QAAQ,CAACa,OAAO,CAACxD,IAAI,CAAC,IAAI,CAAC,CAAA;CAC3B2C,QAAAA,QAAQ,CAACc,WAAW,CAACzD,IAAI,CAACgF,UAAU,CAAC,CAAA;CACtC,OAAC,MAAM;CACNrC,QAAAA,QAAQ,CAACa,OAAO,GAAG,CAAC,IAAI,CAAC,CAAA;CACzBb,QAAAA,QAAQ,CAACc,WAAW,GAAG,CAACuB,UAAU,CAAC,CAAA;CACpC,OAAA;OAEA,IAAI,IAAI,CAAChB,SAAS,EAAE;CACnB,QAAA,IAAI,CAACA,SAAS,CAAChE,IAAI,CAAC2C,QAAQ,CAAC,CAAA;CAC7B,QAAA,IAAI,CAACyB,aAAa,CAACpE,IAAI,CAAC2C,QAAQ,CAACa,OAAO,CAAChH,MAAM,GAAG,CAAC,CAAC,CAAA;CACrD,OAAC,MAAM;CACN,QAAA,IAAI,CAACwH,SAAS,GAAG,CAACrB,QAAQ,CAAC,CAAA;SAC3B,IAAI,CAACyB,aAAa,GAAG,CAACzB,QAAQ,CAACa,OAAO,CAAChH,MAAM,GAAG,CAAC,CAAC,CAAA;CACnD,OAAA;CACD,KAAA;KAEA,OAAO,IAAI,CAACf,KAAK,CAAA;CAClB,GAAA;GAEAwJ,KAAKA,CAACxJ,KAAK,EAAE;CACZ,IAAA,IAAI,IAAI,CAACyJ,MAAM,KAAK,KAAK,IAAI,CAAC,IAAI,CAACA,MAAM,CAAC,IAAI,CAACzJ,KAAK,EAAEA,KAAK,CAAC,EAAE;OAC7D,IAAI,IAAI,CAACgK,IAAI,EAAE;CACd,QAAA,IAAI,CAACC,IAAI,GAAG,IAAI,CAACjK,KAAK,CAAA;CACvB,OAAA;OACA,IAAI,CAACA,KAAK,GAAGA,KAAK,CAAA;OAClB,IAAI,IAAI,CAACuI,SAAS,IAAI,IAAI,CAACA,SAAS,CAACxH,MAAM,EAAE;CAC5CsI,QAAAA,UAAU,CAAC,MAAM;CAChB,UAAA,KAAK,IAAIzB,CAAC,GAAG,CAAC,EAAEY,QAAQ,EAAEZ,CAAC,GAAG,IAAI,CAACW,SAAS,CAACxH,MAAM,EAAE6G,CAAC,EAAE,EAAE;CACzDY,YAAAA,QAAQ,GAAG,IAAI,CAACD,SAAS,CAACX,CAAC,CAAC,CAAA;CAE5B,YAAA,IAAIY,QAAQ,CAACvH,KAAK,KAAK6F,KAAK,EAAE;eAC7B,IAAI0B,QAAQ,CAACS,IAAI,EAAE;CAClB9B,gBAAAA,OAAO,CAAC5C,IAAI,CAACiE,QAAQ,CAAC,CAAA;CACvB,eAAC,MAAM;CACNpB,gBAAAA,OAAO,CAAC7C,IAAI,CAACiE,QAAQ,CAAC,CAAA;CACvB,eAAA;eACA,IAAIA,QAAQ,CAACD,SAAS,EAAE;iBACvBmB,UAAU,CAAClB,QAAQ,CAAC,CAAA;CACrB,eAAA;CACD,aAAA;aACAA,QAAQ,CAACvH,KAAK,GAAG8F,KAAK,CAAA;CACvB,WAAA;CACD,SAAC,CAAC,CAAA;CACH,OAAA;CACA,MAAA,OAAO,IAAI,CAAA;CACZ,KAAA;CACA,IAAA,OAAO,KAAK,CAAA;CACb,GAAA;GAEAkB,MAAMA,CAACjI,KAAK,EAAE;CACb,IAAA,IAAI0B,UAAU,CAAC1B,KAAK,CAAC,EAAE;CACtBA,MAAAA,KAAK,GAAGA,KAAK,CAAC,IAAI,CAACA,KAAK,CAAC,CAAA;CAC1B,KAAA;CACA,IAAA,OAAO,IAAI,CAACwJ,KAAK,CAACxJ,KAAK,CAAC,CAAA;CACzB,GAAA;CAEAyJ,EAAAA,MAAMA,CAACE,CAAC,EAAEC,CAAC,EAAE;KACZ,OAAOD,CAAC,KAAKC,CAAC,CAAA;CACf,GAAA;GAEA,EAAEtL,MAAM,CAACW,QAAQ,CAAI,GAAA;KACpB,MAAM,IAAI,CAACkK,IAAI,CAAA;KACf,MAAM,IAAI,CAACK,KAAK,CAAA;KAChB,MAAM,IAAI,CAACvB,MAAM,CAAA;CAClB,GAAA;CACD,CAAA;;CAEA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASiC,IAAIA,CAAC1K,EAAE,EAAEkI,OAAO,GAAG5F,SAAS,EAAE;GAC7C,MAAMqG,SAAS,GAAGlB,KAAK,CAAA;GACvB,MAAMmB,YAAY,GAAGlB,QAAQ,CAAA;GAE7B,MAAMgD,IAAI,GAAG,IAAI5C,IAAI,CAACL,KAAK,EAAES,OAAO,CAAC,CAAA;CAErCT,EAAAA,KAAK,GAAGiD,IAAI,CAAA;CACZhD,EAAAA,QAAQ,GAAGpF,SAAS,CAAA;GAEpB,IAAI;CACH,IAAA,OAAOuH,UAAU,CAAC,MAAM7J,EAAE,CAAC0K,IAAI,CAACvC,OAAO,CAACpH,IAAI,CAAC2J,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAA;CAC3D,GAAC,SAAS;CACTjD,IAAAA,KAAK,GAAGkB,SAAS,CAAA;CACjBjB,IAAAA,QAAQ,GAAGkB,YAAY,CAAA;CACxB,GAAA;CACD,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAAS+B,MAAMA,CAACC,YAAY,EAAE1C,OAAO,GAAG5F,SAAS,EAAE;CACzD,EAAA,OAAO,IAAIiI,MAAM,CAACK,YAAY,EAAE1C,OAAO,CAAC,CAAA;CACzC,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACO,SAAS2C,MAAMA,CAAC7K,EAAE,EAAEkI,OAAO,GAAG5F,SAAS,EAAE;CAC/C,EAAA,IAAI8G,MAAM,CAAC3B,KAAK,EAAEzH,EAAE,EAAEkI,OAAO,CAAC,CAAA;CAC/B,CAAA;;CAgBA;CACA;CACA;CACA;CACA;CACA;CACO,SAAS4C,UAAUA,CAAC9K,EAAE,EAAEkI,OAAO,GAAG5F,SAAS,EAAE;GACnD,OAAO,IAAIiH,UAAU,CAAC9B,KAAK,EAAEzH,EAAE,EAAEkI,OAAO,CAAC,CAAA;CAC1C,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CAEA;CAAkC,SAAS6C,IAAIA,CAC9C/K,EAAE,EACFkI,OAAO,GAAG5F,SAAS,EAClB;GACD,OAAO,IAAIkH,IAAI,CAAC/B,KAAK,EAAEzH,EAAE,EAAEkI,OAAO,CAAC,CAAA;CACpC,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMoB,KAAK,GAAGO,UAAU,CAAA;CAW/B,SAASmB,YAAYA,CAACjD,KAAK,EAAE/H,EAAE,EAAE;GAChC,MAAM2I,SAAS,GAAGlB,KAAK,CAAA;GACvB,MAAMmB,YAAY,GAAGlB,QAAQ,CAAA;CAE7BD,EAAAA,KAAK,GAAGM,KAAK,CAAA;CACbL,EAAAA,QAAQ,GAAGpF,SAAS,CAAA;GAEpB,IAAI;CACH,IAAA,OAAOuH,UAAU,CAAC7J,EAAE,EAAE,IAAI,CAAC,CAAA;IAC3B,CAAC,OAAO6I,GAAG,EAAE;CACb,IAAA,MAAMA,GAAG,CAAA;CACV,GAAC,SAAS;CACTpB,IAAAA,KAAK,GAAGkB,SAAS,CAAA;CACjBjB,IAAAA,QAAQ,GAAGkB,YAAY,CAAA;CACxB,GAAA;CACD,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACO,SAASqC,OAAOA,CAACjL,EAAE,EAAE;GAC3B,IAAI0H,QAAQ,KAAKpF,SAAS,EAAE;KAC3B,OAAOtC,EAAE,EAAE,CAAA;CACZ,GAAA;GAEA,MAAM4I,YAAY,GAAGlB,QAAQ,CAAA;CAC7BA,EAAAA,QAAQ,GAAGpF,SAAS,CAAA;GACpB,IAAI;KACH,OAAOtC,EAAE,EAAE,CAAA;CACZ,GAAC,SAAS;CACT0H,IAAAA,QAAQ,GAAGkB,YAAY,CAAA;CACxB,GAAA;CACD,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASsC,OAAOA,CAAClL,EAAE,EAAE;CAC3B,EAAA,IAAIyH,KAAK,EAAE;KACV,IAAIA,KAAK,CAACQ,QAAQ,EAAE;CACnBR,MAAAA,KAAK,CAACQ,QAAQ,CAAClD,IAAI,CAAC/E,EAAE,CAAC,CAAA;CACxB,KAAC,MAAM;CACNyH,MAAAA,KAAK,CAACQ,QAAQ,GAAG,CAACjI,EAAE,CAAC,CAAA;CACtB,KAAA;CACD,GAAA;CACA,EAAA,OAAOA,EAAE,CAAA;CACV,CAAA;;CAEA;;CAEA,SAASmL,MAAMA,CAAC7K,IAAI,EAAE;GACrB,QAAQA,IAAI,CAACmB,KAAK;CACjB,IAAA,KAAK6F,KAAK;CAAE,MAAA;CACX,QAAA,OAAA;CACD,OAAA;CACA,IAAA,KAAKE,KAAK;CAAE,MAAA;SACX,OAAOsC,QAAQ,CAACxJ,IAAI,CAAC,CAAA;CACtB,OAAA;CACD,GAAA;GAEA,MAAM8K,SAAS,GAAG,EAAE,CAAA;GAEpB,GAAG;KACF,IAAI9K,IAAI,CAACmB,KAAK,EAAE;CACf2J,MAAAA,SAAS,CAACrG,IAAI,CAACzE,IAAI,CAAC,CAAA;CACrB,KAAA;KACAA,IAAI,GAAGA,IAAI,CAACyH,KAAK,CAAA;CAClB,GAAC,QAAQzH,IAAI,IAAIA,IAAI,CAACgI,SAAS,GAAGT,IAAI,EAAA;CAEtC,EAAA,KAAK,IAAIO,CAAC,GAAGgD,SAAS,CAAC7J,MAAM,GAAG,CAAC,EAAEqI,OAAO,EAAExB,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;CACxD9H,IAAAA,IAAI,GAAG8K,SAAS,CAAChD,CAAC,CAAC,CAAA;KAEnB,QAAQ9H,IAAI,CAACmB,KAAK;CACjB,MAAA,KAAK8F,KAAK;CAAE,QAAA;WACXjH,IAAI,CAACmI,MAAM,EAAE,CAAA;CACb,UAAA,MAAA;CACD,SAAA;CACA,MAAA,KAAKjB,KAAK;CAAE,QAAA;CACXoC,UAAAA,OAAO,GAAGjC,OAAO,CAAA;CACjBA,UAAAA,OAAO,GAAG,IAAI,CAAA;WACdkC,UAAU,CAAC,MAAMC,QAAQ,CAACxJ,IAAI,EAAE8K,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;CAC9CzD,UAAAA,OAAO,GAAGiC,OAAO,CAAA;CACjB,UAAA,MAAA;CACD,SAAA;CACD,KAAA;CACD,GAAA;CACD,CAAA;CAEA,SAASC,UAAUA,CAAC7J,EAAE,EAAEqL,IAAI,GAAG,KAAK,EAAE;CACrC,EAAA,IAAI1D,OAAO,EAAE;KACZ,OAAO3H,EAAE,EAAE,CAAA;CACZ,GAAA;GAEA,IAAIsL,IAAI,GAAG,KAAK,CAAA;GAEhB,IAAI,CAACD,IAAI,EAAE;CACV1D,IAAAA,OAAO,GAAG,EAAE,CAAA;CACb,GAAA;CAEA,EAAA,IAAIC,OAAO,EAAE;CACZ0D,IAAAA,IAAI,GAAG,IAAI,CAAA;CACZ,GAAC,MAAM;CACN1D,IAAAA,OAAO,GAAG,EAAE,CAAA;CACb,GAAA;CAEAC,EAAAA,IAAI,EAAE,CAAA;GAEN,IAAI;CACH,IAAA,MAAM0D,GAAG,GAAGvL,EAAE,EAAE,CAAA;CAEhB,IAAA,IAAI2H,OAAO,EAAE;OACZ6D,QAAQ,CAAC7D,OAAO,CAAC,CAAA;CACjBA,MAAAA,OAAO,GAAG,IAAI,CAAA;CACf,KAAA;KACA,IAAI,CAAC2D,IAAI,EAAE;OACV,MAAMG,OAAO,GAAG7D,OAAO,CAAA;CACvBA,MAAAA,OAAO,GAAG,IAAI,CAAA;OACd,IAAI6D,OAAO,CAAClK,MAAM,EAAE;CACnBsI,QAAAA,UAAU,CAAC,MAAM6B,UAAU,CAACD,OAAO,CAAC,CAAC,CAAA;CACtC,OAAA;CACD,KAAA;CAEA,IAAA,OAAOF,GAAG,CAAA;IACV,CAAC,OAAO1C,GAAG,EAAE;KACb,IAAI,CAACyC,IAAI,EAAE;CACV1D,MAAAA,OAAO,GAAG,IAAI,CAAA;CACf,KAAA;CACAD,IAAAA,OAAO,GAAG,IAAI,CAAA;CAEd,IAAA,MAAMkB,GAAG,CAAA;CACV,GAAA;CACD,CAAA;CAEA,SAAS2C,QAAQA,CAACG,KAAK,EAAE;CACxB,EAAA,KAAK,IAAIvD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuD,KAAK,CAACpK,MAAM,EAAE6G,CAAC,EAAE,EAAE;CACtC+C,IAAAA,MAAM,CAACQ,KAAK,CAACvD,CAAC,CAAC,CAAC,CAAA;CACjB,GAAA;CACD,CAAA;CAEA,SAASsD,UAAUA,CAACC,KAAK,EAAE;CAC1B,EAAA,IAAIvD,CAAC,CAAA;CAEL,EAAA,IAAIyC,MAAM,CAAA;GACV,IAAIe,UAAU,GAAG,CAAC,CAAA;CAClB,EAAA,KAAKxD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuD,KAAK,CAACpK,MAAM,EAAE6G,CAAC,EAAE,EAAE;CAClCyC,IAAAA,MAAM,GAAGc,KAAK,CAACvD,CAAC,CAAC,CAAA;CAEjB,IAAA,IAAI,CAACyC,MAAM,CAACxB,IAAI,EAAE;OACjB8B,MAAM,CAACN,MAAM,CAAC,CAAA;CACf,KAAC,MAAM;CACNc,MAAAA,KAAK,CAACC,UAAU,EAAE,CAAC,GAAGf,MAAM,CAAA;CAC7B,KAAA;CACD,GAAA;GAEA,KAAKzC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwD,UAAU,EAAExD,CAAC,EAAE,EAAE;CAChC+C,IAAAA,MAAM,CAACQ,KAAK,CAACvD,CAAC,CAAC,CAAC,CAAA;CACjB,GAAA;CACD,CAAA;CAEA,SAAS0B,QAAQA,CAACxJ,IAAI,EAAEuL,MAAM,EAAE;GAC/BvL,IAAI,CAACmB,KAAK,GAAG6F,KAAK,CAAA;CAElB,EAAA,KAAK,IAAIc,CAAC,GAAG,CAAC,EAAEU,MAAM,EAAEV,CAAC,GAAG9H,IAAI,CAACiI,OAAO,CAAChH,MAAM,EAAE6G,CAAC,EAAE,EAAE;CACrDU,IAAAA,MAAM,GAAGxI,IAAI,CAACiI,OAAO,CAACH,CAAC,CAAC,CAAA;KAExB,IAAIU,MAAM,CAACP,OAAO,EAAE;OACnB,QAAQO,MAAM,CAACrH,KAAK;CACnB,QAAA,KAAK8F,KAAK;CAAE,UAAA;aACX,IAAIuB,MAAM,KAAK+C,MAAM,IAAI/C,MAAM,CAACR,SAAS,GAAGT,IAAI,EAAE;eACjDsD,MAAM,CAACrC,MAAM,CAAC,CAAA;CACf,aAAA;CACA,YAAA,MAAA;CACD,WAAA;CACA,QAAA,KAAKtB,KAAK;CAAE,UAAA;CACXsC,YAAAA,QAAQ,CAAChB,MAAM,EAAE+C,MAAM,CAAC,CAAA;CACxB,YAAA,MAAA;CACD,WAAA;CACD,OAAA;CACD,KAAA;CACD,GAAA;CACD,CAAA;CAEA,SAAS3B,UAAUA,CAAC5J,IAAI,EAAE;CACzB,EAAA,KAAK,IAAI8H,CAAC,GAAG,CAAC,EAAEY,QAAQ,EAAEZ,CAAC,GAAG9H,IAAI,CAACyI,SAAS,CAACxH,MAAM,EAAE6G,CAAC,EAAE,EAAE;CACzDY,IAAAA,QAAQ,GAAG1I,IAAI,CAACyI,SAAS,CAACX,CAAC,CAAC,CAAA;CAE5B,IAAA,IAAIY,QAAQ,CAACvH,KAAK,KAAK6F,KAAK,EAAE;OAC7B0B,QAAQ,CAACvH,KAAK,GAAG+F,KAAK,CAAA;OACtB,IAAIwB,QAAQ,CAACS,IAAI,EAAE;CAClB9B,QAAAA,OAAO,CAAC5C,IAAI,CAACiE,QAAQ,CAAC,CAAA;CACvB,OAAC,MAAM;CACNpB,QAAAA,OAAO,CAAC7C,IAAI,CAACiE,QAAQ,CAAC,CAAA;CACvB,OAAA;CACAA,MAAAA,QAAQ,CAACD,SAAS,IAAImB,UAAU,CAAClB,QAAQ,CAAC,CAAA;CAC3C,KAAA;CACD,GAAA;CACD,CAAA;;CAmBA;CACA;CACA;CACA;CACA;CACA;CACO,SAAS8C,SAAOA,CAACC,YAAY,GAAGzJ,SAAS,EAAE;CACjD,EAAA,MAAM0J,EAAE,GAAGlN,MAAM,EAAE,CAAA;GAEnB,OAAOmN,UAAU,CAAClL,IAAI,CAAC,IAAI,EAAEiL,EAAE,EAAED,YAAY,CAAC,CAAA;CAC/C,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,SAASE,UAAUA,CAACD,EAAE,EAAED,YAAY,EAAEG,QAAQ,EAAElM,EAAE,EAAE;GACnD,IAAIkM,QAAQ,KAAK5J,SAAS,EAAE;KAC3B,OAAOmF,KAAK,EAAErE,OAAO,IAAIqE,KAAK,CAACrE,OAAO,CAAC4I,EAAE,CAAC,KAAK1J,SAAS,GACrDmF,KAAK,CAACrE,OAAO,CAAC4I,EAAE,CAAC,GACjBD,YAAY,CAAA;CAChB,GAAC,MAAM;CACN,IAAA,IAAIR,GAAG,CAAA;CAEPT,IAAAA,UAAU,CAAC,MAAM;OAChBrD,KAAK,CAACrE,OAAO,GAAG;SACf,GAAGqE,KAAK,CAACrE,OAAO;CAChB,QAAA,CAAC4I,EAAE,GAAGE,QAAAA;QACN,CAAA;CACDX,MAAAA,GAAG,GAAGN,OAAO,CAACjL,EAAE,CAAC,CAAA;CAClB,KAAC,CAAC,CAAA;CAEF,IAAA,OAAOuL,GAAG,CAAA;CACX,GAAA;CACD,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMvD,KAAK,GAAG1E,EAAE,IAAI;GAC1B,MAAMU,CAAC,GAAGyD,KAAK,CAAA;CACf,EAAA,OAAO,CAAC,GAAG0E,IAAI,KAAK7I,EAAE,IAAI0H,YAAY,CAAChH,CAAC,EAAE,MAAMV,EAAE,CAAC,GAAG6I,IAAI,CAAC,CAAC,CAAA;CAC7D,CAAC,CAAA;;CAED;CACA;CACA;CACA;CACA;CACA;CACO,MAAMC,UAAU,GAAG5L,KAAK,IAC9B0B,UAAU,CAAC1B,KAAK,CAAC,IAAIqG,WAAW,IAAIrG,KAAK,CAAA;;CAE1C;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASkJ,YAAYA,CAAC1J,EAAE,EAAE;CAChCA,EAAAA,EAAE,CAAC6G,WAAW,CAAC,GAAGvE,SAAS,CAAA;CAC3B,EAAA,OAAOtC,EAAE,CAAA;CACV,CAAA;;CA+CA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMqM,SAAS,GAAGA,CAAC7L,KAAK,EAAER,EAAE,KAClCkC,UAAU,CAAC1B,KAAK,CAAC,GAAGqK,MAAM,CAAC,MAAM7K,EAAE,CAAC+B,QAAQ,CAACvB,KAAK,CAAC,CAAC,CAAC,GAAGR,EAAE,CAACQ,KAAK,CAAC,CAAA;;CAElE;CACA;CACA;CACA;CACA;CACA;CACO,SAAS8L,aAAaA,CAAC9L,KAAK,EAAER,EAAE,EAAE;CACxC,EAAA,IAAIkC,UAAU,CAAC1B,KAAK,CAAC,EAAE;KACtB,IAAIiK,IAAI,GAAGnI,SAAS,CAAA;CACpBuI,IAAAA,MAAM,CAAC,MAAM;CACZ,MAAA,MAAM0B,GAAG,GAAGxK,QAAQ,CAACvB,KAAK,CAAC,CAAA;CAC3BR,MAAAA,EAAE,CAACuM,GAAG,EAAE9B,IAAI,CAAC,CAAA;CACbA,MAAAA,IAAI,GAAG8B,GAAG,CAAA;CACX,KAAC,CAAC,CAAA;CACH,GAAC,MAAM;KACNvM,EAAE,CAACQ,KAAK,CAAC,CAAA;CACV,GAAA;CACD,CAAA;;CA6CA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMgM,IAAI,GAAGA,CAACxM,EAAE,EAAEkI,OAAO,GAAGxF,OAAO,KACzC+J,aAAa,CAACC,KAAK,IAAI;GACtB,MAAM;KAAEC,SAAS;KAAEC,QAAQ;CAAEC,IAAAA,OAAAA;CAAQ,GAAC,GAAG3E,OAAO,CAAA;GAEhD,MAAM,CAAC1H,KAAK,EAAEsM,QAAQ,CAAC,GAAGnC,MAAM,CAACgC,SAAS,CAAC,CAAA;CAE3C,EAAA,MAAMI,SAAS,GAAG/E,KAAK,CAAC4E,QAAQ,CAAC,CAAA;GAEjC,MAAMI,KAAK,GAAGA,MACbnO,OAAO,CAAC6G,OAAO,CAACxD,UAAU,CAAClC,EAAE,CAAC,GAAGA,EAAE,EAAE,GAAGA,EAAE,CAAC,CACzCG,IAAI,CAACqF,CAAC,IAAI;KACVsH,QAAQ,CACPL,aAAa,CAAC,MAAM;CACnBjH,MAAAA,CAAC,GAAGpD,QAAQ,CAACoD,CAAC,CAAC,IAAIA,CAAC,CAACyH,OAAO,GAAGzH,CAAC,CAACyH,OAAO,GAAGzH,CAAC,CAAA;OAC5C,OAAOtD,UAAU,CAACsD,CAAC,CAAC,GAAGA,CAAC,CAACkH,KAAK,CAAC,GAAGlH,CAAC,CAAA;CACpC,KAAC,CACF,CAAC,CAAA;KACD0H,SAAS,CAACH,SAAS,CAAC,CAAA;CACrB,GAAC,CAAC,CACD3M,KAAK,CAACsG,CAAC,IACPmG,OAAO,GACJC,QAAQ,CACRL,aAAa,CAAC,MACbvK,UAAU,CAAC2K,OAAO,CAAC,GAAGA,OAAO,CAACnG,CAAC,EAAEsG,KAAK,CAAC,GAAGH,OAC3C,CACD,CAAC,GACAM,OAAO,CAACC,KAAK,CAAC1G,CAAC,CACnB,CAAC,CAAA;CACHsG,EAAAA,KAAK,EAAE,CAAA;CAEP,EAAA,OAAOxM,KAAK,CAAA;CACb,CAAC,CAAC,CAAA;CAII,MAAM0M,SAAS,GAAGlN,EAAE,IAAIjB,cAAc,CAACiJ,KAAK,CAAChI,EAAE,CAAC,CAAC,CAAA;;CAExD;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASqN,GAAGA,CAACC,IAAI,EAAEC,QAAQ,EAAEC,IAAI,EAAE;CACzC,EAAA,MAAMzH,KAAK,GAAG,IAAI3B,GAAG,EAAE,CAAA;CACvB,EAAA,MAAMqJ,UAAU,GAAG,IAAIrJ,GAAG,EAAE,CAAC;;GAE7B,IAAIsJ,KAAK,GAAG,CAAC,CAAA;GAEb,IAAIC,IAAI,GAAG,EAAE,CAAA;CACb;GACA,IAAIlD,IAAI,GAAG,EAAE,CAAA;GAEb,SAASmD,KAAKA,GAAG;CAChB,IAAA,KAAK,IAAIxF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqC,IAAI,CAAClJ,MAAM,EAAE6G,CAAC,EAAE,EAAE;CACrCqC,MAAAA,IAAI,CAACrC,CAAC,CAAC,CAACD,OAAO,CAAC,IAAI,CAAC,CAAA;CACtB,KAAA;KACApC,KAAK,CAAC6H,KAAK,EAAE,CAAA;KACbH,UAAU,CAACG,KAAK,EAAE,CAAA;KAElBD,IAAI,CAACpM,MAAM,GAAG,CAAC,CAAA;KACfkJ,IAAI,CAAClJ,MAAM,GAAG,CAAC,CAAA;CAChB,GAAA;;CAEA;GACA2J,OAAO,CAAC0C,KAAK,CAAC,CAAA;CAEd,EAAA,MAAMC,GAAG,CAAC;KACTrK,WAAWA,CAACsK,IAAI,EAAE9K,KAAK,EAAEhD,EAAE,EAAE+N,MAAM,EAAE;CACpC,MAAA,IAAI,CAACL,KAAK,GAAG,CAAC,CAAC,CAAA;OACf,IAAI,CAACI,IAAI,GAAGA,IAAI,CAAA;OAChB,IAAI,CAAC9K,KAAK,GAAGA,KAAK,CAAA;OAClB,IAAI,CAAC+K,MAAM,GAAGA,MAAM,CAAA;OACpB,IAAI,CAACC,QAAQ,GAAG1L,SAAS,CAAA;CACzB,MAAA,IAAI,CAAC2L,KAAK,GAAGvD,IAAI,CAACsD,QAAQ,IAAI;SAC7B,IAAI,CAACA,QAAQ,GAAGA,QAAQ,CAAA;CACxB;CACA,QAAA,OAAOhO,EAAE,CAAC8N,IAAI,EAAE9K,KAAK,CAAC,CAAA;CACvB,OAAC,CAAC,CAAA;CACH,KAAA;KACA,IAAIkL,KAAKA,GAAG;CACX,MAAA,OAAO,IAAI,CAACD,KAAK,CAAC,CAAC,CAAC,CAAA;CACrB,KAAA;KACA,IAAIE,GAAGA,GAAG;OACT,OAAO,IAAI,CAACF,KAAK,CAAC,IAAI,CAACA,KAAK,CAAC1M,MAAM,GAAG,CAAC,CAAC,CAAA;CACzC,KAAA;KACA4G,OAAOA,CAACiG,GAAG,EAAE;CACZ;OACA,IAAIA,GAAG,KAAK9L,SAAS,EAAE;CACtB;CACA,QAAA,IAAI,CAAC,IAAI,CAACyL,MAAM,EAAE;CACjBhI,UAAAA,KAAK,CAAC9B,MAAM,CAAC,IAAI,CAAC6J,IAAI,CAAC,CAAA;CACxB,SAAC,MAAM;WACN,MAAMxM,GAAG,GAAGmM,UAAU,CAAC9J,GAAG,CAAC,IAAI,CAACmK,IAAI,CAAC,CAAA;CACrCxM,UAAAA,GAAG,CAACC,MAAM,KAAK,CAAC,GACbkM,UAAU,CAACxJ,MAAM,CAAC,IAAI,CAAC6J,IAAI,CAAC,GAC5BhL,eAAe,CAACxB,GAAG,EAAE,IAAI,CAAC,CAAA;CAC9B,SAAA;CACD,OAAA;OAEA,IAAI,CAAC0M,QAAQ,EAAE,CAAA;CAChB,KAAA;CACD,GAAA;;CAEA;CACD;CACA;CACA;GACC,SAASK,MAAMA,CAACrO,EAAE,EAAE;KACnB,MAAMsD,EAAE,GAAGtD,EAAE,GACV,CAAC8N,IAAI,EAAE9K,KAAK,KAAKhD,EAAE,CAACuN,QAAQ,CAACO,IAAI,EAAE9K,KAAK,CAAC,EAAEA,KAAK,CAAC,GACjDuK,QAAQ,CAAA;CAEX,IAAA,MAAM/M,KAAK,GAAGuB,QAAQ,CAACuL,IAAI,CAAC,IAAI,EAAE,CAAA;;CAElC;CACA,IAAA,MAAMgB,KAAK,GAAGnM,UAAU,CAAC3B,KAAK,CAAC,GAAGA,KAAK,CAACvB,OAAO,EAAE,GAAGA,OAAO,CAACuB,KAAK,CAAC,CAAA;CAElEkN,IAAAA,KAAK,EAAE,CAAA;CACPC,IAAAA,IAAI,GAAG,EAAE,CAAA;CACT,IAAA,MAAMY,OAAO,GAAG9D,IAAI,CAAClJ,MAAM,CAAA;KAE3B,KAAK,MAAM,CAACyB,KAAK,EAAE8K,IAAI,CAAC,IAAIQ,KAAK,EAAE;OAClC,IAAIE,GAAG,GAAGD,OAAO,GAAGxI,KAAK,CAACpC,GAAG,CAACmK,IAAI,CAAC,GAAGxL,SAAS,CAAA;;CAE/C;OACA,IAAIkM,GAAG,KAAKlM,SAAS,EAAE;SACtBkM,GAAG,GAAG,IAAIX,GAAG,CAACC,IAAI,EAAE9K,KAAK,EAAEM,EAAE,EAAE,KAAK,CAAC,CAAA;CACrCyC,QAAAA,KAAK,CAACnC,GAAG,CAACkK,IAAI,EAAEU,GAAG,CAAC,CAAA;CACrB,OAAC,MAAM,IAAIA,GAAG,CAACd,KAAK,KAAKA,KAAK,EAAE;CAC/B;CACA;CACA,QAAA,IAAIe,KAAK,GAAGhB,UAAU,CAAC9J,GAAG,CAACmK,IAAI,CAAC,CAAA;SAChC,IAAI,CAACW,KAAK,EAAE;CACXA,UAAAA,KAAK,GAAG,EAAE,CAAA;CACVhB,UAAAA,UAAU,CAAC7J,GAAG,CAACkK,IAAI,EAAEW,KAAK,CAAC,CAAA;CAC5B,SAAA;CACA,QAAA,KAAK,IAAIrG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqG,KAAK,CAAClN,MAAM,EAAE6G,CAAC,EAAE,EAAE;WACtC,IAAIqG,KAAK,CAACrG,CAAC,CAAC,CAACsF,KAAK,KAAKA,KAAK,EAAE;CAC7Bc,YAAAA,GAAG,GAAGC,KAAK,CAACrG,CAAC,CAAC,CAAA;CACd,YAAA,MAAA;CACD,WAAA;CACD,SAAA;CACA,QAAA,IAAIoG,GAAG,CAACd,KAAK,KAAKA,KAAK,EAAE;WACxBc,GAAG,GAAG,IAAIX,GAAG,CAACC,IAAI,EAAE9K,KAAK,EAAEM,EAAE,EAAE,IAAI,CAAC,CAAA;CACpCmL,UAAAA,KAAK,CAAC1J,IAAI,CAACyJ,GAAG,CAAC,CAAA;CAChB,SAAA;CACD,OAAA;CAEAA,MAAAA,GAAG,CAACd,KAAK,GAAGA,KAAK,CAAC;CAClBc,MAAAA,GAAG,CAACxL,KAAK,GAAGA,KAAK,CAAC;CAClB2K,MAAAA,IAAI,CAAC5I,IAAI,CAACyJ,GAAG,CAAC,CAAA;CACf,KAAA;;CAEA;CACA,IAAA,IAAIb,IAAI,CAACpM,MAAM,KAAK,CAAC,EAAE;CACtBqM,MAAAA,KAAK,EAAE,CAAA;CACR,KAAC,MAAM;CACN,MAAA,KAAK,IAAIxF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqC,IAAI,CAAClJ,MAAM,EAAE6G,CAAC,EAAE,EAAE;SACrC,IAAIqC,IAAI,CAACrC,CAAC,CAAC,CAACsF,KAAK,KAAKA,KAAK,EAAE;CAC5BjD,UAAAA,IAAI,CAACrC,CAAC,CAAC,CAACD,OAAO,EAAE,CAAA;CAClB,SAAA;CACD,OAAA;CACD,KAAA;;CAEA;CACA;CACA;KACA,IAAIqF,IAAI,IAAIG,IAAI,CAACpM,MAAM,GAAG,CAAC,IAAIkJ,IAAI,CAAClJ,MAAM,EAAE;CAC3C;CACA;CACA;OACA,MAAM;SAAE4I,CAAC;CAAEC,QAAAA,CAAAA;QAAG,GAAGhL,OAAO,CAACuO,IAAI,EAAE,CAACnN,KAAK,EAAEwC,KAAK,KAC3C2K,IAAI,CAAC3K,KAAK,CAAC,KAAKyH,IAAI,CAACzH,KAAK,CAAC,GAAG,GAAG,GAAG,GACrC,CAAC,CAAA;CAED,MAAA,IAAI0L,QAAQ,GAAGtE,CAAC,EAAE7I,MAAM,CAAA;CACxB,MAAA,IACC4I,CAAC,IACDC,CAAC,IACDD,CAAC,CAAC5I,MAAM,IACR6I,CAAC,CAAC7I,MAAM,IACR6I,CAAC,CAAC7I,MAAM,GAAG4I,CAAC,CAAC5I,MAAM,IACnB6I,CAAC,CAACuE,KAAK,CAACb,IAAI,IAAIrD,IAAI,CAACmE,QAAQ,CAACd,IAAI,CAAC,CAAC,EACnC;CACD,QAAA,KAAK,MAAMe,KAAK,IAAIzE,CAAC,EAAE;CACtB,UAAA,KAAK,MAAMoD,IAAI,IAAIrD,CAAC,EAAE;aACrB,IAAI0E,KAAK,CAAC7L,KAAK,KAAKwK,IAAI,CAACxK,KAAK,GAAG,CAAC,EAAE;eACnCwK,IAAI,CAACU,KAAK,CAACY,MAAM,CAAC,GAAGC,YAAY,CAACF,KAAK,CAAC,CAAC,CAAA;CACzCH,cAAAA,QAAQ,EAAE,CAAA;CACV,cAAA,MAAA;cACA,MAAM,IAAIG,KAAK,CAAC7L,KAAK,KAAKwK,IAAI,CAACxK,KAAK,GAAG,CAAC,EAAE;eAC1CwK,IAAI,CAACW,GAAG,CAACa,KAAK,CAAC,GAAGD,YAAY,CAACF,KAAK,CAAC,CAAC,CAAA;CACtCH,cAAAA,QAAQ,EAAE,CAAA;CACV,cAAA,MAAA;CACD,aAAA;CACD,WAAA;CACD,SAAA;CACD,OAAA;CAEA,MAAA,IAAIA,QAAQ,EAAE;CACb;CACA;CACA;;SAEA,IAAIO,OAAO,GAAGtB,IAAI,CAACA,IAAI,CAACpM,MAAM,GAAG,CAAC,CAAC,CAAA;CACnC,QAAA,KAAK,IAAI6G,CAAC,GAAGuF,IAAI,CAACpM,MAAM,GAAG,CAAC,EAAE6G,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;CACzC,UAAA,MAAM8G,QAAQ,GAAGvB,IAAI,CAACvF,CAAC,GAAG,CAAC,CAAC,CAAA;WAC5B,IAAI6G,OAAO,CAACf,KAAK,CAACiB,eAAe,KAAKD,QAAQ,CAACf,GAAG,EAAE;aACnDc,OAAO,CAACf,KAAK,CAACY,MAAM,CAAC,GAAGC,YAAY,CAACG,QAAQ,CAAC,CAAC,CAAA;CAChD,WAAA;CACAD,UAAAA,OAAO,GAAGC,QAAQ,CAAA;CACnB,SAAA;CACD,OAAA;CACD,KAAA;;CAEA;CACAzE,IAAAA,IAAI,GAAGkD,IAAI,CAAA;;CAEX;KACA,OAAOA,IAAI,CAACN,GAAG,CAACS,IAAI,IAAIA,IAAI,CAACG,KAAK,CAAC,CAAA;CACpC,GAAA;CACAI,EAAAA,MAAM,CAACvH,MAAM,CAAC,GAAGxE,SAAS,CAAA;CAC1B,EAAA,OAAO+L,MAAM,CAAA;CACd,CAAA;CAEA,SAASU,YAAYA,CAACP,GAAG,EAAE;GAC1B,MAAM;KAAEN,KAAK;CAAEC,IAAAA,GAAAA;CAAI,GAAC,GAAGK,GAAG,CAAA;CAC1B,EAAA,MAAMP,KAAK,GAAG,CAACC,KAAK,CAAC,CAAA;GAErB,IAAIkB,WAAW,GAAGlB,KAAK,CAAA;GACvB,OAAOkB,WAAW,KAAKjB,GAAG,EAAE;KAC3BiB,WAAW,GAAGA,WAAW,CAACA,WAAW,CAAA;CACrCnB,IAAAA,KAAK,CAAClJ,IAAI,CAACqK,WAAW,CAAC,CAAA;CACxB,GAAA;CAEA,EAAA,OAAOnB,KAAK,CAAA;CACb,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASvI,OAAOA,CAAC1F,EAAE,EAAE;CAC3B,EAAA,MAAMqP,QAAQ,GAAGnN,UAAU,CAAClC,EAAE,CAAC,GAAG+K,IAAI,CAAC/K,EAAE,CAAC,GAAG,MAAMA,EAAE,CAAA;GACrD,OAAO+K,IAAI,CAAC,MAAMuE,MAAM,CAACD,QAAQ,EAAE,CAAC,CAAC,CAAA;CACtC,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA,SAASC,MAAMA,CAACD,QAAQ,EAAE;CACzB,EAAA,IAAInN,UAAU,CAACmN,QAAQ,CAAC,EAAE;CACzB,IAAA,OAAOC,MAAM,CAACD,QAAQ,EAAE,CAAC,CAAA;CAC1B,GAAA;CAEA,EAAA,IAAIhQ,OAAO,CAACgQ,QAAQ,CAAC,EAAE;KACtB,MAAME,SAAS,GAAG,EAAE,CAAA;CACpB,IAAA,KAAK,IAAIC,KAAK,IAAIH,QAAQ,EAAE;CAC3BG,MAAAA,KAAK,GAAGF,MAAM,CAACE,KAAK,CAAC,CAAA;CACrBnQ,MAAAA,OAAO,CAACmQ,KAAK,CAAC,GACXD,SAAS,CAACxK,IAAI,CAAC,GAAGyK,KAAK,CAAC,GACxBD,SAAS,CAACxK,IAAI,CAACyK,KAAK,CAAC,CAAA;CACzB,KAAA;CACA,IAAA,OAAOD,SAAS,CAAA;CACjB,GAAA;CAEA,EAAA,OAAOF,QAAQ,CAAA;CAChB,CAAA;;CAaA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMI,WAAW,GAAGjP,KAAK,IAC/B0B,UAAU,CAAC1B,KAAK,CAAC,IAAImG,YAAY,IAAInG,KAAK,CAAA;;CAE3C;CACA;CACA;CACA;CACA;CACA;CACO,MAAMkP,eAAe,GAAGlP,KAAK,IACnC,CAAC4L,UAAU,CAAC5L,KAAK,CAAC,KACjB0B,UAAU,CAAC1B,KAAK,CAAC;CACjB;CACC,CAACnB,OAAO,CAACmB,KAAK,CAAC,IAAI4B,QAAQ,CAAC5B,KAAK,CAAC,IAAI,CAACA,KAAK,CAACL,IAAK,CAAC,CAAA;;CAEtD;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASwP,YAAYA,CAACN,QAAQ,EAAE;CACtC;CACD;CACA;CACA;;GAECA,QAAQ,GAAGhQ,OAAO,CAACgQ,QAAQ,CAAC,GAAGhO,IAAI,CAACgO,QAAQ,CAAC,GAAGA,QAAQ,CAAA;CAExD,EAAA,MAAMO,SAAS,GAAG,CAACvQ,OAAO,CAACgQ,QAAQ,CAAC,GACjC9B,QAAQ,CAAC8B,QAAQ,CAAC,GAClBA,QAAQ,CAAChC,GAAG,CAACE,QAAQ,CAAC,CAAA;CAEzB,EAAA,OAAO,CAAClO,OAAO,CAACgQ,QAAQ,CAAC,GACtB5C,aAAa,CAAC,CAAC,GAAGN,IAAI,KAAKyD,SAAS,CAACzD,IAAI,CAAC,CAAC,GAC3CM,aAAa,CAAC,CAAC,GAAGN,IAAI,KACtByD,SAAS,CAACvC,GAAG,CAACE,QAAQ,IAAIA,QAAQ,CAACpB,IAAI,CAAC,CACzC,CAAC,CAAA;CACJ,CAAA;CAEA,MAAMoB,QAAQ,GAAGiC,KAAK,IACrBtN,UAAU,CAACsN,KAAK,CAAC,GACdpD,UAAU,CAACoD,KAAK,CAAC,GAChBrD,IAAI,IAAI;CACR;CACL;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACK,EAAA,MAAM3G,CAAC,GAAGgK,KAAK,EAAE,CAAA;GACjB,OAAOtN,UAAU,CAACsD,CAAC,CAAC,GACjB4G,UAAU,CAAC5G,CAAC,CAAC,GACZA,CAAC,EAAE,GACHyF,OAAO,CAAC,MAAMzF,CAAC,CAAC,GAAG2G,IAAI,CAAC,CAAC,GAC1B3G,CAAC,CAAA;CACL,CAAC,GACA2G,IAAI,IAAIlB,OAAO,CAAC,MAAMuE,KAAK,CAAC,GAAGrD,IAAI,CAAC,CAAC,GACtC,MAAMqD,KAAK,CAAA;;CAEf;CACA;CACA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACO,SAAS/C,aAAaA,CAACzM,EAAE,EAAE;CACjCA,EAAAA,EAAE,CAAC2G,YAAY,CAAC,GAAGrE,SAAS,CAAA;CAC5B,EAAA,OAAOtC,EAAE,CAAA;CACV,CAAA;;CAcA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAAS6P,kBAAgBA,CAACvP,IAAI,EAAEwP,IAAI,EAAEC,OAAO,EAAE;CACrDzP,EAAAA,IAAI,CAACuP,gBAAgB,CACpBC,IAAI,EACJC,OAAO,EACP,CAAC7N,UAAU,CAAC6N,OAAO,CAAC,IAAIA,OACzB,CAAC,CAAA;;CAED;CACD;CACA;CACA;CACA;CACA;CACA;CACA;;GAEC,OAAO7E,OAAO,CAAC,MAAM8E,mBAAmB,CAAC1P,IAAI,EAAEwP,IAAI,EAAEC,OAAO,CAAC,CAAC,CAAA;CAC/D,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASC,mBAAmBA,CAAC1P,IAAI,EAAEwP,IAAI,EAAEC,OAAO,EAAE;CACxDzP,EAAAA,IAAI,CAAC0P,mBAAmB,CACvBF,IAAI,EACJC,OAAO,EACP,CAAC7N,UAAU,CAAC6N,OAAO,CAAC,IAAIA,OACzB,CAAC,CAAA;GAED,OAAO,MAAMF,kBAAgB,CAACvP,IAAI,EAAEwP,IAAI,EAAEC,OAAO,CAAC,CAAA;CACnD;;CC94CA;CACA;CACA;CACA;CACA;;CAEA;CACA,IAAIE,KAAK,CAAA;;CAET;CACA,IAAItE,OAAK,CAAA;CAET,SAASuE,KAAKA,GAAG;CAChBvE,EAAAA,OAAK,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAA;CAChCsE,EAAAA,KAAK,GAAG,KAAK,CAAA;CACd,CAAA;;CAEA;CACAC,KAAK,EAAE,CAAA;;CAEP;CACA;CACA;CACA;CACA;CACA;CACA;CACA,SAAS1L,GAAGA,CAAC2L,QAAQ,EAAEnQ,EAAE,EAAE;GAC1B,IAAI,CAACiQ,KAAK,EAAE;CACXA,IAAAA,KAAK,GAAG,IAAI,CAAA;KACZlR,cAAc,CAACqR,GAAG,CAAC,CAAA;CACpB,GAAA;GACAzE,OAAK,CAACwE,QAAQ,CAAC,CAACpL,IAAI,CAACiD,KAAK,CAAChI,EAAE,CAAC,CAAC,CAAA;CAChC,CAAA;;CAEA;CACA,SAASoQ,GAAGA,GAAG;GACd,MAAMC,CAAC,GAAG1E,OAAK,CAAA;CACfuE,EAAAA,KAAK,EAAE,CAAA;CAEP,EAAA,KAAK,MAAMpP,GAAG,IAAIuP,CAAC,EAAE;CACpBvP,IAAAA,GAAG,CAACS,MAAM,IAAIV,IAAI,CAACC,GAAG,CAAC,CAAA;CACxB,GAAA;CACD,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMwP,OAAO,GAAGtQ,EAAE,IAAIwE,GAAG,CAAC,CAAC,EAAExE,EAAE,CAAC,CAAA;;CAEvC;CACA;CACA;CACA;CACA;CACA;CACO,MAAMuQ,OAAO,GAAGvQ,EAAE,IAAIwE,GAAG,CAAC,CAAC,EAAExE,EAAE,CAAC,CAAA;;CAEvC;CACA;CACA;CACA;CACA;CACO,MAAMwQ,KAAK,GAAGxQ,EAAE,IAAIwE,GAAG,CAAC,CAAC,EAAExE,EAAE,CAAC,CAAA;;CAErC;CACA;CACA;CACA;CACA;CACO,MAAMyQ,OAAO,GAAGzQ,EAAE,IAAIwE,GAAG,CAAC,CAAC,EAAExE,EAAE,CAAC,CAAA;;CAEvC;CACA;CACA;CACA;CACA;CACA;CACO,MAAM0Q,KAAK,GAAG1Q,EAAE,IAAIwE,GAAG,CAAC,CAAC,EAAExE,EAAE,CAAC,CAAA;;CAErC;CACA;CACA;CACA;CACA;CACO,MAAME,MAAM,GAAGF,EAAE,IAAIwE,GAAG,CAAC,CAAC,EAAExE,EAAE,CAAC;;CCxFtC;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAM2Q,UAAU,GAAGA,CAACrQ,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEkM,KAAK,EAAEkE,SAAS,EAAEC,EAAE,KACjEhB,kBAAgB,CAACvP,IAAI,EAAEsQ,SAAS,EAAEpQ,KAAK,CAAC,CAAA;;CAEzC;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAM0F,SAAS,GAAG1E,SAAS,CAAC,CAACC,KAAK,EAAElB,IAAI,KAC9CkB,KAAK,CAACkC,GAAG,CAACpD,IAAI,EAAEA,IAAI,IACnBA,IAAI,CAAC+E,UAAU,CAAC,IAAI,CAAC,IAAI/E,IAAI,CAACuQ,WAAW,EAAE,IAAItS,MAAM,GAClD+B,IAAI,CAACwQ,KAAK,CAAC,CAAC,CAAC,CAACD,WAAW,EAAE,GAC3B,IACJ,CACD,CAAC,CAAA;CACD;CACA;CACA;CACA;CACA;;CC7BO,MAAME,OAAO,GAAGtP,UAAU,EAAE,CAAA;CAC5B,MAAMuP,SAAS,GAAGvP,UAAU,EAAE,CAAA;;CAErC;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMwP,WAAW,GAAGA,CAACC,QAAQ,EAAEnR,EAAE,EAAEoR,WAAW,KAAK;GACzDC,MAAM,CAACL,OAAO,EAAEG,QAAQ,EAAEnR,EAAE,EAAEoR,WAAW,CAAC,CAAA;CAC3C,CAAC,CAAA;;CAED;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAME,aAAa,GAAGA,CAACC,MAAM,EAAEvR,EAAE,EAAEoR,WAAW,KAAK;GACzDC,MAAM,CAACJ,SAAS,EAAEM,MAAM,EAAEvR,EAAE,EAAEoR,WAAW,CAAC,CAAA;CAC3C,CAAC,CAAA;;CAED;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMI,eAAe,GAAGA,CAACL,QAAQ,EAAEnR,EAAE,EAAEoR,WAAW,KAAK;GAC7DC,MAAM,CAACL,OAAO,EAAEG,QAAQ,EAAEnR,EAAE,EAAEoR,WAAW,CAAC,CAAA;GAC1CC,MAAM,CAACJ,SAAS,EAAEE,QAAQ,EAAEnR,EAAE,EAAEoR,WAAW,CAAC,CAAA;CAC7C,CAAC,CAAA;CAED,MAAMC,MAAM,GAAGA,CAACL,OAAO,EAAEzQ,IAAI,EAAEP,EAAE,EAAEoR,WAAW,GAAG,IAAI,KAAK;GACzDJ,OAAO,CAACpN,GAAG,CACVrD,IAAI,EACJ,CAAC6Q,WAAW,GAAGpR,EAAE,GAAG,CAAC,GAAGmM,IAAI,KAAKoE,OAAO,CAAC,MAAMvQ,EAAE,CAAC,GAAGmM,IAAI,CAAC,CAC3D,CAAC,CAAA;CACF,CAAC;;CClED;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMsF,aAAa,GAAGA,CAC5BnR,IAAI,EACJC,IAAI,EACJC,KAAK,EACLkM,KAAK,EACLkE,SAAS,EACTC,EAAE,KACEa,WAAW,CAACpR,IAAI,EAAEsQ,SAAS,EAAEpQ,KAAK,CAAC,CAAA;;CAExC;CACA;CACA;CACA;CACA;CACA;CACO,MAAMkR,WAAW,GAAGA,CAACpR,IAAI,EAAEC,IAAI,EAAEC,KAAK,KAC5C6L,SAAS,CAAC7L,KAAK,EAAEA,KAAK,IAAImR,YAAY,CAACrR,IAAI,EAAEC,IAAI,EAAEC,KAAK,CAAC,CAAC,CAAA;;CAE3D;CACA;CACA;CACA;CACA;CACO,SAASmR,YAAYA,CAACrR,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAE;CAC/C;CACA,EAAA,IAAI6B,eAAe,CAAC7B,KAAK,CAAC,EAAE;CAC3B;CACAF,IAAAA,IAAI,CAACC,IAAI,CAAC,GAAG,IAAI,CAAA;CAClB,GAAC,MAAM;CACND,IAAAA,IAAI,CAACC,IAAI,CAAC,GAAGC,KAAK,CAAA;CACnB,GAAA;CACD;;CCrCA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMoR,cAAc,GAAGA,CAC7BtR,IAAI,EACJC,IAAI,EACJC,KAAK,EACLkM,KAAK,EACLkE,SAAS,EACTC,EAAE,KACExQ,YAAY,CAACC,IAAI,EAAEsQ,SAAS,EAAEpQ,KAAK,CAAC,CAAA;;CAEzC;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMH,YAAY,GAAGA,CAACC,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEqQ,EAAE,KACjDxE,SAAS,CAAC7L,KAAK,EAAEA,KAAK,IAAIqR,aAAa,CAACvR,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEqQ,EAAE,CAAC,CAAC,CAAA;;CAEhE;CACA;CACA;CACA;CACA;CACA;CACO,SAASgB,aAAaA,CAACvR,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEqQ,EAAE,EAAE;CACpD;CACA,EAAA,IAAIxO,eAAe,CAAC7B,KAAK,CAAC,EAAE;KAC3BqQ,EAAE,IAAI7J,EAAE,CAAC6J,EAAE,CAAC,GACTvQ,IAAI,CAACwR,iBAAiB,CAAC9K,EAAE,CAAC6J,EAAE,CAAC,EAAEtQ,IAAI,CAAC,GACpCD,IAAI,CAACG,eAAe,CAACF,IAAI,CAAC,CAAA;CAC9B,GAAC,MAAM;KACNsQ,EAAE,IAAI7J,EAAE,CAAC6J,EAAE,CAAC,GACTvQ,IAAI,CAACsR,cAAc,CAAC5K,EAAE,CAAC6J,EAAE,CAAC,EAAEtQ,IAAI,EAAEC,KAAK,CAAC,GACxCF,IAAI,CAACD,YAAY,CAACE,IAAI,EAAEC,KAAK,CAAC,CAAA;CAClC,GAAA;CACD;;CCnDA;;;CAQA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMuR,cAAc,GAAGA,CAACzR,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEqQ,EAAE,KACnDxE,SAAS,CAAC7L,KAAK,EAAEA,KAAK,IAAIwR,eAAe,CAAC1R,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEqQ,EAAE,CAAC,CAAC,CAAA;;CAElE;CACA;CACA;CACA;CACA;CACA;CACA,MAAMmB,eAAe,GAAGA,CAAC1R,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEqQ,EAAE,KAAK;CAClD,EAAA,IAAIzO,QAAQ,CAAC5B,KAAK,CAAC,EAAE;CACpB;CACAmR,IAAAA,YAAY,CAACrR,IAAI,EAAEC,IAAI,EAAEC,KAAK,CAAC,CAAA;CAChC,GAAC,MAAM,IAAIgC,SAAS,CAAChC,KAAK,CAAC,IAAI,CAACD,IAAI,CAACqO,QAAQ,CAAC,GAAG,CAAC,EAAE;CACnD;CACA+C,IAAAA,YAAY,CAACrR,IAAI,EAAEC,IAAI,EAAEC,KAAK,CAAC,CAAA;CAChC,GAAC,MAAM;CACN;KACAqR,aAAa,CAACvR,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEqQ,EAAE,CAAC,CAAA;;CAEpC;KACAxO,eAAe,CAAC7B,KAAK,CAAC,IAAImR,YAAY,CAACrR,IAAI,EAAEC,IAAI,EAAEC,KAAK,CAAC,CAAA;CAC1D,GAAA;CACD,CAAC;;CCrCD;;;CAIA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMyR,SAAS,GAAGA,CAAC3R,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEkM,KAAK,EAAEkE,SAAS,EAAEC,EAAE,KAChEqB,OAAO,CAAC5R,IAAI,EAAEsQ,SAAS,EAAEpQ,KAAK,CAAC,CAAA;;CAEhC;CACA;CACA;CACA;CACA;CACA;CACO,MAAM0R,OAAO,GAAGA,CAAC5R,IAAI,EAAEC,IAAI,EAAEC,KAAK,KACxC6L,SAAS,CAAC7L,KAAK,EAAEA,KAAK,IAAI2R,QAAQ,CAAC7R,IAAI,EAAEC,IAAI,EAAEC,KAAK,CAAC,CAAC,CAAA;;CAEvD;CACA;CACA;CACA;CACA;CACO,MAAM2R,QAAQ,GAAGA,CAAC7R,IAAI,EAAEC,IAAI,EAAEC,KAAK;CACzC;CACA,CAACA,KAAK,GAAGF,IAAI,CAACG,eAAe,CAACF,IAAI,CAAC,GAAGD,IAAI,CAACD,YAAY,CAACE,IAAI,EAAE,EAAE,CAAC;;CC/BlE;;;CAKA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAM6R,QAAQ,GAAGA,CAAC9R,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEkM,KAAK,KAChD2F,YAAY,CAAC/R,IAAI,CAACgS,KAAK,EAAE9R,KAAK,CAAC,CAAA;;CAEhC;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAM+R,UAAU,GAAGA,CAACjS,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEkM,KAAK,EAAEkE,SAAS,EAAEC,EAAE,KACjEwB,YAAY,CACX/R,IAAI,CAACgS,KAAK,EACVlQ,QAAQ,CAAC5B,KAAK,CAAC,GAAGA,KAAK,GAAG;CAAE,EAAA,CAACoQ,SAAS,GAAGpQ,KAAAA;CAAM,CAChD,CAAC,CAAA;;CAEF;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMgS,QAAQ,GAAGA,CAAClS,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEkM,KAAK,EAAEkE,SAAS,EAAEC,EAAE,KAC/DwB,YAAY,CAAC/R,IAAI,CAACgS,KAAK,EAAE;GAAE,CAAC,IAAI,GAAG1B,SAAS,GAAGpQ,KAAAA;CAAM,CAAC,CAAC,CAAA;;CAExD;CACA;CACA;CACA;CACA,SAAS6R,YAAYA,CAACC,KAAK,EAAE9R,KAAK,EAAE;CACnC,EAAA,IAAI4B,QAAQ,CAAC5B,KAAK,CAAC,EAAE;CACpB,IAAA,IAAID,IAAI,CAAA;KACR,KAAKA,IAAI,IAAIC,KAAK,EAAE;OACnBiS,aAAa,CAACH,KAAK,EAAE/R,IAAI,EAAEC,KAAK,CAACD,IAAI,CAAC,CAAC,CAAA;CACxC,KAAA;CACA,IAAA,OAAA;CACD,GAAA;GACA,MAAMuP,IAAI,GAAG,OAAOtP,KAAK,CAAA;GACzB,IAAIsP,IAAI,KAAK,QAAQ,EAAE;KACtBwC,KAAK,CAACI,OAAO,GAAGlS,KAAK,CAAA;CACrB,IAAA,OAAA;CACD,GAAA;GACA,IAAIsP,IAAI,KAAK,UAAU,EAAE;CACxBzD,IAAAA,SAAS,CAAC7L,KAAK,EAAEA,KAAK,IAAI6R,YAAY,CAACC,KAAK,EAAEvQ,QAAQ,CAACvB,KAAK,CAAC,CAAC,CAAC,CAAA;CAC/D,IAAA,OAAA;CACD,GAAA;CACD,CAAA;;CAUA;CACA;CACA;CACA;CACA;CACA,MAAMiS,aAAa,GAAGA,CAACH,KAAK,EAAE/R,IAAI,EAAEC,KAAK,KACxC6L,SAAS,CAAC7L,KAAK,EAAEA,KAAK,IAAImS,cAAc,CAACL,KAAK,EAAE/R,IAAI,EAAEC,KAAK,CAAC,CAAC,CAAA;;CAE9D;CACA;CACA;CACA;CACA;CACA,MAAMmS,cAAc,GAAGA,CAACL,KAAK,EAAE/R,IAAI,EAAEC,KAAK;CACzC;CACA6B,eAAe,CAAC7B,KAAK,CAAC,GACnB8R,KAAK,CAACM,cAAc,CAACrS,IAAI,CAAC,GAC1B+R,KAAK,CAACZ,WAAW,CAACnR,IAAI,EAAEC,KAAK,CAAC;;CCxFlC;CAqBO,MAAMqS,QAAQ,GAAGA,MACvBC,MAAM,CAACC,eAAe,CAAC,IAAIC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC;;CCZ9D;CACA;CACA;CACA;CACA;CACA;CACO,MAAMC,MAAM,GAAGA,CAAC5S,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEkM,KAAK,KAC9CyG,UAAU,CAAC7S,IAAI,EAAEE,KAAK,CAAC,CAAA;;CAExB;CACA;CACA;CACA;CACA,MAAM2S,UAAU,GAAG3R,SAAS,CAAC,CAACC,KAAK,EAAEnB,IAAI,EAAEE,KAAK,KAAK;GACpD6D,YAAY,CACX/D,IAAI,EACJmB,KAAK,CAACkC,GAAG,CAACnD,KAAK,EAAEA,KAAK,IAAI;CACzB,IAAA,MAAMwL,EAAE,GAAG,GAAG,GAAG6G,QAAQ,EAAE,CAAA;CAC3BhO,IAAAA,qBAAqB,CACpBlD,qBAAqB,CAACrB,IAAI,CAAC,EAC3B6E,KAAK,CAAC3E,KAAK,CAACwF,OAAO,CAAC,QAAQ,EAAE,GAAG,GAAGgG,EAAE,CAAC,CACxC,CAAC,CAAA;CACD,IAAA,OAAOA,EAAE,CAAA;CACV,GAAC,CACF,CAAC,CAAA;CACF,CAAC,CAAC;;CC/BF;CACA;CACA;CACA;CACA;CACA;CACO,MAAMoH,MAAM,GAAGA,CAAC9S,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEkM,KAAK,KAC9C8D,KAAK,CAAC,MAAMhQ,KAAK,CAACF,IAAI,CAAC,CAAC,CAAA;;CAEzB;CACA;CACA;CACA;CACA;CACA;CACO,MAAM+S,UAAU,GAAGA,CAAC/S,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEkM,KAAK,KAClD+D,OAAO,CAAC,MAAMjQ,KAAK,CAACF,IAAI,CAAC,CAAC,CAAA;;CAE3B;CACA;CACA;CACA;CACA;CACA;CACO,MAAMgT,UAAU,GAAGA,CAAChT,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEkM,KAAK,KAClDxB,OAAO,CAAC,MAAM1K,KAAK,CAACF,IAAI,CAAC,CAAC;;CC7B3B;;;CAUA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMiT,QAAQ,GAAGA,CAACjT,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEkM,KAAK,KAChDnK,QAAQ,CAAC/B,KAAK,CAAC,GACZF,IAAI,CAACD,YAAY,CAAC,OAAO,EAAEG,KAAK,CAAC,GACjCgT,YAAY,CAAClT,IAAI,EAAEE,KAAK,CAAC,CAAA;;CAE7B;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMiT,UAAU,GAAGA,CACzBnT,IAAI,EACJC,IAAI,EACJC,KAAK,EACLkM,KAAK,EACLkE,SAAS,EACTC,EAAE,KAEF3O,UAAU,CAAC1B,KAAK,CAAC,GACdkT,iBAAiB,CAACpT,IAAI,EAAEsQ,SAAS,EAAEpQ,KAAK,CAAC,GACzCgT,YAAY,CAAClT,IAAI,EAAEE,KAAK,CAAC,CAAA;;CAE7B;CACA;CACA;CACA;CACA,SAASgT,YAAYA,CAAClT,IAAI,EAAEE,KAAK,EAAE;CAClC,EAAA,QAAQ,OAAOA,KAAK;CACnB,IAAA,KAAK,QAAQ;CAAE,MAAA;CACdmT,QAAAA,kBAAkB,CAACrT,IAAI,EAAEE,KAAK,EAAE,IAAI,CAAC,CAAA;CACrC,QAAA,MAAA;CACD,OAAA;CAEA,IAAA,KAAK,QAAQ;CAAE,MAAA;CACd,QAAA,IAAID,IAAI,CAAA;SACR,KAAKA,IAAI,IAAIC,KAAK,EAAE;WACnBkT,iBAAiB,CAACpT,IAAI,EAAEC,IAAI,EAAEC,KAAK,CAACD,IAAI,CAAC,CAAC,CAAA;CAC3C,SAAA;CACA,QAAA,MAAA;CACD,OAAA;CAEA,IAAA,KAAK,UAAU;CAAE,MAAA;SAChB8L,SAAS,CAAC7L,KAAK,EAAEA,KAAK,IAAIgT,YAAY,CAAClT,IAAI,EAAEE,KAAK,CAAC,CAAC,CAAA;CACpD,QAAA,MAAA;CACD,OAAA;CACD,GAAA;CACD,CAAA;CACA;CACA;CACA;CACA;CACA;CACA,MAAMkT,iBAAiB,GAAGA,CAACpT,IAAI,EAAEC,IAAI,EAAEC,KAAK,KAC3C8L,aAAa,CAAC9L,KAAK,EAAE,CAACA,KAAK,EAAEiK,IAAI,KAAK;CACrC;GACA,IAAI,CAACjK,KAAK,IAAI,CAACiK,IAAI,EAAE,CACpB,MAAM;CACNkJ,IAAAA,kBAAkB,CAACrT,IAAI,EAAEC,IAAI,EAAEC,KAAK,CAAC,CAAA;CACtC,GAAA;CACD,CAAC,CAAC,CAAA;;CAEH;CACA;CACA;CACA;CACA;;CAEA,MAAMmT,kBAAkB,GAAGA,CAACrT,IAAI,EAAEC,IAAI,EAAEC,KAAK;CAC5C;CACA,CAACA,KAAK,GACHiE,eAAe,CAACnE,IAAI,EAAEC,IAAI,CAAC,GAC3B8D,YAAY,CAAC/D,IAAI,EAAE,GAAGC,IAAI,CAACqT,IAAI,EAAE,CAACC,KAAK,CAAC,KAAK,CAAC,CAAC;;CC/DnDvC,aAAa,CAAC,MAAM,EAAEG,aAAa,EAAE,KAAK,CAAC,CAAA;CAG3CH,aAAa,CAAC,MAAM,EAAEM,cAAc,EAAE,KAAK,CAAC,CAAA;CAG5CN,aAAa,CAAC,MAAM,EAAEW,SAAS,EAAE,KAAK,CAAC,CAAA;CAKvCX,aAAa,CAAC,IAAI,EAAEX,UAAU,EAAE,KAAK,CAAC,CAAA;CAKtCW,aAAa,CAAC,KAAK,EAAEkB,QAAQ,EAAE,KAAK,CAAC,CAAA;CAOrC,KAAK,MAAM1E,IAAI,IAAI,CAClB,OAAO,EACP,aAAa,EACb,WAAW,EACX,WAAW,CACX,EAAE;CACFoD,EAAAA,WAAW,CAACpD,IAAI,EAAE4D,WAAW,EAAE,KAAK,CAAC,CAAA;CACtC,CAAA;CAKAR,WAAW,CAAC,OAAO,EAAEzO,IAAI,EAAE,KAAK,CAAC,CAAA;CACjCyO,WAAW,CAAC,OAAO,EAAEzO,IAAI,EAAE,KAAK,CAAC,CAAA;CAOjC+O,eAAe,CAAC,KAAK,EAAE0B,MAAM,EAAE,KAAK,CAAC,CAAA;CAKrC1B,eAAe,CAAC,SAAS,EAAE6B,UAAU,EAAE,KAAK,CAAC,CAAA;CAK7C7B,eAAe,CAAC,WAAW,EAAE8B,UAAU,EAAE,KAAK,CAAC,CAAA;CAK/C9B,eAAe,CAAC,KAAK,EAAE4B,MAAM,EAAE,KAAK,CAAC,CAAA;CAOrClC,WAAW,CAAC,OAAO,EAAEkB,QAAQ,EAAE,KAAK,CAAC,CAAA;CACrCd,aAAa,CAAC,OAAO,EAAEiB,UAAU,EAAE,KAAK,CAAC,CAAA;CAKzCrB,WAAW,CAAC,OAAO,EAAEqC,QAAQ,EAAE,KAAK,CAAC,CAAA;CACrCjC,aAAa,CAAC,OAAO,EAAEmC,UAAU,EAAE,KAAK,CAAC,CAAA;;CAEzC;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASK,WAAWA,CAACxT,IAAI,EAAEoM,KAAK,EAAEqH,eAAe,EAAE;CACzD,EAAA,IAAIxT,IAAI,CAAA;GAER,KAAKA,IAAI,IAAImM,KAAK,EAAE;CACnBsH,IAAAA,UAAU,CAAC1T,IAAI,EAAEC,IAAI,EAAEmM,KAAK,CAACnM,IAAI,CAAC,EAAEmM,KAAK,EAAEqH,eAAe,CAAC,CAAA;CAC5D,GAAA;CAEA,EAAA,OAAOzT,IAAI,CAAA;CACZ,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAAS0T,UAAUA,CAAC1T,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEkM,KAAK,EAAEuH,IAAI,EAAE;GAC1D,IAAI7R,QAAQ,CAAC5B,KAAK,CAAC,IAAI,MAAM,IAAIA,KAAK,EAAE;KACvCA,KAAK,CAACL,IAAI,CACT6H,KAAK,CAACxH,KAAK,IAAIwT,UAAU,CAAC1T,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEkM,KAAK,EAAEuH,IAAI,CAAC,CAC1D,CAAC,CAAA;CACD,IAAA,OAAA;CACD,GAAA;CACA;;CAEA,EAAA,IAAI5C,MAAM,GAAGL,OAAO,CAACrN,GAAG,CAACpD,IAAI,CAAC,CAAA;CAC9B,EAAA,IAAI8Q,MAAM,EAAE;KACXA,MAAM,CAAC/Q,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEkM,KAAK,CAAC,CAAA;CAChC,IAAA,OAAA;CACD,GAAA;;CAEA;CACA,EAAA,IAAIwH,KAAK,GAAGhO,SAAS,CAAC3F,IAAI,CAAC,CAAA;CAC3B,EAAA,IAAI2T,KAAK,EAAE;CACVrE,IAAAA,kBAAgB,CAACvP,IAAI,EAAE4T,KAAK,EAAE1T,KAAK,CAAC,CAAA;CACpC,IAAA,OAAA;CACD,GAAA;CAEA,EAAA,IAAID,IAAI,CAACqO,QAAQ,CAAC,GAAG,CAAC,EAAE;CACvB;KACA,IAAI,CAACiC,EAAE,EAAED,SAAS,CAAC,GAAGrQ,IAAI,CAACsT,KAAK,CAAC,GAAG,CAAC,CAAA;;CAErC;CACAxC,IAAAA,MAAM,GAAGJ,SAAS,CAACtN,GAAG,CAACkN,EAAE,CAAC,CAAA;CAC1B,IAAA,IAAIQ,MAAM,EAAE;CACXA,MAAAA,MAAM,CAAC/Q,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEkM,KAAK,EAAEkE,SAAS,EAAEC,EAAE,CAAC,CAAA;CAC/C,MAAA,OAAA;CACD,KAAA;;CAEA;CACAqD,IAAAA,KAAK,GAAGhO,SAAS,CAAC2K,EAAE,CAAC,CAAA;CACrB,IAAA,IAAIqD,KAAK,EAAE;CACVrE,MAAAA,kBAAgB,CAACvP,IAAI,EAAE4T,KAAK,EAAE1T,KAAK,CAAC,CAAA;CACpC,MAAA,OAAA;CACD,KAAA;KAEAuT,eAAe,CAACzT,IAAI,EAAEoM,KAAK,EAAEuH,IAAI,CAAC,GAC/BtC,YAAY,CAACrR,IAAI,EAAEC,IAAI,EAAEC,KAAK,CAAC,GAC/BuR,cAAc,CAACzR,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEqQ,EAAE,CAAC,CAAA;CACxC,IAAA,OAAA;CACD,GAAA;;CAEA;GACAkD,eAAe,CAACzT,IAAI,EAAEoM,KAAK,EAAEuH,IAAI,CAAC,GAC/BtC,YAAY,CAACrR,IAAI,EAAEC,IAAI,EAAEC,KAAK,CAAC,GAC/BuR,cAAc,CAACzR,IAAI,EAAEC,IAAI,EAAEC,KAAK,CAAC,CAAA;CACrC,CAAA;CAEA,MAAMuT,eAAe,GAAGA,CAACzT,IAAI,EAAEoM,KAAK,EAAEqH,eAAe;CACpD;CACAA,eAAe,KAAKzR,SAAS,GAC1ByR,eAAe,GACf,IAAI,IAAIrH,KAAK,IAAIpM,IAAI,CAACsQ,SAAS,EAAEhC,QAAQ,CAAC,GAAG,CAAC;;CCzLlD;;;CAqDA;;CAEA,MAAMuF,QAAQ,GAAG/Q,OAAO,EAAE,CAAA;;CAE1B;;CAEA;CACA;CACA;CACA;CACO,MAAMgR,QAAQ,GAAG1H,KAAK,IAAIA,KAAK,CAAC2C,QAAQ,CAAA;;CAE/C;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CAEO,SAASgF,SAASA,CAAC7T,KAAK,EAAEkM,KAAK,EAAE;GACvC,IAAIlM,KAAK,KAAK4T,QAAQ,EAAE;KACvB,OAAO1H,KAAK,CAAC2C,QAAQ,CAAA;CACtB,GAAA;;CAEA;GACAnQ,MAAM,CAACwN,KAAK,CAAC,CAAA;;CAEb;CACD;CACA;CACA;CACA;GACC,OAAOA,KAAK,KAAKpK,SAAS,GACvBgS,OAAO,CAAC9T,KAAK,CAAC,GACdiM,aAAa,CAAC6H,OAAO,CAAC9T,KAAK,CAAC,CAACO,IAAI,CAAC,IAAI,EAAE2L,KAAK,CAAC,CAAC,CAAA;CACnD,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;;CAEA,SAAS4H,OAAOA,CAAC9T,KAAK,EAAE;CACvB,EAAA,IAAIiP,WAAW,CAACjP,KAAK,CAAC,EAAE;CACvB,IAAA,OAAOA,KAAK,CAAA;CACb,GAAA;CAEA,EAAA,QAAQ,OAAOA,KAAK;CACnB,IAAA,KAAK,QAAQ;CAAE,MAAA;CACd;SACAA,KAAK,GAAG+T,SAAS,CAACxT,IAAI,CAAC,IAAI,EAAEP,KAAK,CAAC,CAAA;CACnC,QAAA,MAAA;CACD,OAAA;CACA,IAAA,KAAK,UAAU;CAAE,MAAA;SAChB,IAAIoG,QAAQ,IAAIpG,KAAK,EAAE;CACtB;WACAA,KAAK,GAAGgU,WAAW,CAACzT,IAAI,CAAC,IAAI,EAAEP,KAAK,CAAC,CAAA;CACrC,UAAA,MAAA;CACD,SAAA;;CAEA;CACH;CACA;CACA;CACA;CACA;CACG,QAAA,IAAI4L,UAAU,CAAC5L,KAAK,CAAC,EAAE;WACtBA,KAAK,GAAGiU,cAAc,CAAC1T,IAAI,CAAC,IAAI,EAAEP,KAAK,CAAC,CAAA;CACxC,UAAA,MAAA;CACD,SAAA;;CAEA;CACA;CACA,QAAA,MAAA;CACD,OAAA;CACA,IAAA;CAAS,MAAA;SACR,IAAIA,KAAK,YAAYkU,IAAI,EAAE;CAC1B;WACAlU,KAAK,GAAGmU,UAAU,CAAC5T,IAAI,CAAC,IAAI,EAAEP,KAAK,CAAC,CAAA;CACpC,UAAA,MAAA;CACD,SAAA;SAEAA,KAAK,GAAGiU,cAAc,CAAC1T,IAAI,CAAC,IAAI,EAAEP,KAAK,CAAC,CAAA;CACxC,QAAA,MAAA;CACD,OAAA;CACD,GAAA;GAEA,OAAOiM,aAAa,CAACjM,KAAK,CAAC,CAAA;CAC5B,CAAA;CAYA,SAASgU,WAAWA,CAAChU,KAAK,EAAEkM,KAAK,EAAE;CAClC,EAAA,MAAMtE,CAAC,GAAG,IAAI5H,KAAK,EAAE,CAAA;CACrB4H,EAAAA,CAAC,CAACsI,KAAK,IAAIA,KAAK,CAACtI,CAAC,CAACsI,KAAK,CAAC3P,IAAI,CAACqH,CAAC,CAAC,CAAC,CAAA;CACjCA,EAAAA,CAAC,CAAC8C,OAAO,IAAIA,OAAO,CAAC9C,CAAC,CAAC8C,OAAO,CAACnK,IAAI,CAACqH,CAAC,CAAC,CAAC,CAAA;CAEvC,EAAA,OAAOA,CAAC,CAACwM,MAAM,CAAClI,KAAK,CAAC,CAAA;CACvB,CAAA;CAEA,SAAS+H,cAAcA,CAACjU,KAAK,EAAEkM,KAAK,EAAE;CACrC,EAAA,OAAOlM,KAAK,CAAA;CACb,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,SAAS+T,SAASA,CAACM,OAAO,EAAEnI,KAAK,EAAE;CAClC;CACD;CACA;CACA;GACC,MAAMoI,KAAK,GAAGpI,KAAK,EAAEoI,KAAK,IAAI9N,EAAE,CAAC6N,OAAO,CAAC,CAAA;GAEzC,OAAOE,SAAS,CACfD,KAAK,EACLA,KAAK,IACJH,UAAU,CACTG,KAAK,GACF7T,eAAe,CAAC6T,KAAK,EAAED,OAAO,CAAC,GAC/B7T,aAAa,CAAC6T,OAAO,CAAC,EACzBnI,KACD,CAAC,EACFmI,OACD,CAAC,CAAA;CACF,CAAA;CAEA,SAASE,SAASA,CAACD,KAAK,EAAE9U,EAAE,EAAE6U,OAAO,EAAE;CACtC,EAAA,MAAMG,SAAS,GAAGb,QAAQ,EAAE,CAAA;CAE5B,EAAA,IAAIW,KAAK,IAAIA,KAAK,KAAKE,SAAS,EAAE;CACjC;KACA,OAAOb,QAAQ,CAACW,KAAK,EAAE,MAAM9U,EAAE,CAAC8U,KAAK,CAAC,CAAC,CAAA;CACxC,GAAA;;CAEA;CACD;CACA;CACA;CACC,EAAA,IAAIE,SAAS,IAAIH,OAAO,KAAK,eAAe,EAAE;KAC7C,OAAOV,QAAQ,CAACnN,EAAE,CAACI,IAAI,EAAE,MAAMpH,EAAE,CAACgV,SAAS,CAAC,CAAC,CAAA;CAC9C,GAAA;GAEA,OAAOhV,EAAE,CAACgV,SAAS,CAAC,CAAA;CACrB,CAAA;;CA6EA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,SAASL,UAAUA,CAACrU,IAAI,EAAEoM,KAAK,EAAE;CAChC,EAAA,IAAIA,KAAK,EAAE;CACVoH,IAAAA,WAAW,CAACxT,IAAI,EAAEoM,KAAK,CAAC,CAAA;CACzB,GAAA;CACA,EAAA,OAAOpM,IAAI,CAAA;CACZ,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,SAAS2U,cAAcA,CAACC,MAAM,EAAE1F,KAAK,EAAE2F,QAAQ,EAAE1K,IAAI,GAAGnI,SAAS,EAAE;CAClE,EAAA,QAAQ,OAAOkN,KAAK;CACnB;CACA,IAAA,KAAK,QAAQ,CAAA;CACb,IAAA,KAAK,QAAQ;CAAE,MAAA;SACd,IAAI/E,IAAI,YAAY2K,IAAI,EAAE;WACzB3K,IAAI,CAAC4K,SAAS,GAAG7F,KAAK,CAAA;CACtB,UAAA,OAAO/E,IAAI,CAAA;CACZ,SAAA;SACA,OAAO6K,UAAU,CAACJ,MAAM,EAAEhU,cAAc,CAACsO,KAAK,CAAC,EAAE2F,QAAQ,CAAC,CAAA;CAC3D,OAAA;CAEA,IAAA,KAAK,UAAU;CAAE,MAAA;CAChB;CACA,QAAA,IAAI1F,WAAW,CAACD,KAAK,CAAC,EAAE;WACvB,OAAOyF,cAAc,CAACC,MAAM,EAAEjK,OAAO,CAACuE,KAAK,CAAC,EAAE2F,QAAQ,CAAC,CAAA;CACxD,SAAA;SACA,IAAI7U,IAAI,GAAG,EAAE,CAAA;;CAEb;CACA;SACA4U,MAAM,GAAGK,iBAAiB,CACzBL,MAAM,EACN5S,SAAS,iBACT6S,QACD,CAAC,CAAA;;CAED;SACA,IAAIrO,MAAM,IAAI0I,KAAK,EAAE;CACpB3E,UAAAA,MAAM,CAAC,MAAM;aACZvK,IAAI,GAAGkV,MAAM,CACZlV,IAAI,EACJkP,KAAK,CAACA,KAAK,IAAI;CACd;CACP;CACA;CACA;CACA;CACA;CACA;eACO,MAAMtB,KAAK,GAAGqH,iBAAiB,CAC9BL,MAAM,EACN5S,SAAS,YACT,IACD,CAAC,CAAA;eACD,MAAM6L,GAAG,GAAGoH,iBAAiB,CAC5BL,MAAM,EACN5S,SAAS,UACT,IACD,CAAC,CAAA;CACD,cAAA,OAAO,CAAC4L,KAAK,EAAE+G,cAAc,CAAC9G,GAAG,EAAEqB,KAAK,EAAE,IAAI,CAAC,EAAErB,GAAG,CAAC,CAAA;CACtD,aAAC,CACF,CAAC,CAAA;CACF,WAAC,CAAC,CAAA;CAEFjD,UAAAA,OAAO,CAAC,MAAM;aACbsK,MAAM,CAAClV,IAAI,CAAC,CAAA;aACZ4U,MAAM,CAACxQ,MAAM,EAAE,CAAA;CAChB,WAAC,CAAC,CAAA;CACF,UAAA,OAAO,CAACpE,IAAI,EAAE4U,MAAM,CAAC,CAAA;CACtB,SAAA;;CAEA;;CAEArK,QAAAA,MAAM,CAAC,MAAM;WACZvK,IAAI,GAAGkV,MAAM,CAAClV,IAAI,EAAE,CACnB2U,cAAc,CAACC,MAAM,EAAE1F,KAAK,EAAE,EAAE,IAAI,EAAElP,IAAI,CAAC,CAAC,CAAC,CAAC,CAC9C,CAAC,CAAA;CACH,SAAC,CAAC,CAAA;CAEF4K,QAAAA,OAAO,CAAC,MAAM;WACbsK,MAAM,CAAClV,IAAI,CAAC,CAAA;WACZ4U,MAAM,CAACxQ,MAAM,EAAE,CAAA;CAChB,SAAC,CAAC,CAAA;CACF;CACH;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACG,QAAA,OAAO,CAACpE,IAAI,EAAE4U,MAAM,CAAC,CAAA;CACtB,OAAA;CAEA,IAAA,KAAK,QAAQ;CAAE,MAAA;CACd;CACA,QAAA,IAAI7V,OAAO,CAACmQ,KAAK,CAAC,EAAE;CACnB,UAAA,OAAOA,KAAK,CAACjO,MAAM,KAAK,CAAC,GACtB0T,cAAc,CAACC,MAAM,EAAE1F,KAAK,CAAC,CAAC,CAAC,EAAE2F,QAAQ,CAAC,GAC1C3F,KAAK,CAACnC,GAAG,CAACmC,KAAK,IACfyF,cAAc,CAACC,MAAM,EAAE1F,KAAK,EAAE2F,QAAQ,CACvC,CAAC,CAAA;CACJ,SAAA;;CAEA;SACA,IAAI3F,KAAK,YAAYkF,IAAI,EAAE;CAC1B;CACJ;CACA;CACA;CACA;CACA;WACI,IAAIlF,KAAK,YAAY7Q,gBAAgB,EAAE;CACtC,YAAA,OAAOsW,cAAc,CACpBC,MAAM,EACN3V,OAAO,CAACiQ,KAAK,CAACiG,UAAU,CAAC,EACzBN,QACD,CAAC,CAAA;CACF,WAAA;CACA,UAAA,OAAOG,UAAU,CAACJ,MAAM,EAAE1F,KAAK,EAAE2F,QAAQ,CAAC,CAAA;CAC3C,SAAA;;CAEA;CACH;CACA;CACA;SACG,IAAI3F,KAAK,KAAK,IAAI,EAAE;CACnB,UAAA,OAAOlN,SAAS,CAAA;CACjB,SAAA;;CAEA;SACA,IAAI,MAAM,IAAIkN,KAAK,EAAE;WACpB,MAAM,CAAChP,KAAK,EAAEsM,QAAQ,CAAC,GAAGnC,MAAM,CAACrI,SAAS,CAAC,CAAA;CAE3C,UAAA,MAAMoT,QAAQ,GAAGC,MAAM,IACtBjV,WAAW,CAACwU,MAAM,CAAC,IAAIpI,QAAQ,CAAC6I,MAAM,CAAC,CAAA;CAExC1V,UAAAA,QAAQ,CAACuP,KAAK,EAAEkG,QAAQ,CAAC,CAAA;CAEzB,UAAA,OAAOT,cAAc,CAACC,MAAM,EAAE1U,KAAK,EAAE2U,QAAQ,CAAC,CAAA;CAC/C,SAAA;;CAEA;SACA,IAAI1V,QAAQ,IAAI+P,KAAK,EAAE;CACtB,UAAA,OAAOyF,cAAc,CACpBC,MAAM,EACN3V,OAAO,CAACiQ,KAAK,CAAC5J,MAAM,EAAE,CAAC,EACvBuP,QACD,CAAC,CAAA;CACF,SAAA;;CAEA;SACA,IAAI3F,KAAK,YAAY/Q,aAAa,EAAE;CACnC;CACJ;CACA;CACA;CACA;CACI6R,UAAAA,OAAO,CAAC,MAAM;CACb,YAAA,IAAI5P,WAAW,CAACwU,MAAM,CAAC,EAAE;CACxB,cAAA,MAAMU,GAAG,GAAGjU,qBAAqB,CAACuT,MAAM,CAAC,CAAA;CACzCrQ,cAAAA,qBAAqB,CAAC+Q,GAAG,EAAEpG,KAAK,CAAC,CAAA;eAEjCtE,OAAO,CAAC,MAAMlG,wBAAwB,CAAC4Q,GAAG,EAAEpG,KAAK,CAAC,CAAC,CAAA;CACpD,aAAA;CACD,WAAC,CAAC,CAAA;CAEF,UAAA,OAAOlN,SAAS,CAAA;CACjB,SAAA;;CAEA;SACA,OAAO2S,cAAc,CACpBC,MAAM;CACN;CACA,QAAA,UAAU,IAAI1F,KAAK,GAAGA,KAAK,CAACyD,QAAQ,EAAE,GAAGvT,SAAS,CAAC8P,KAAK,CAAC,EACzD2F,QACD,CAAC,CAAA;CACF,OAAA;CACA,IAAA,KAAK,WAAW;CAAE,MAAA;CACjB,QAAA,OAAO7S,SAAS,CAAA;CACjB,OAAA;CACA,IAAA;CAAS,MAAA;CACR;CACA;CACA,QAAA,OAAOgT,UAAU,CAChBJ,MAAM,EACNhU,cAAc,CAACsO,KAAK,CAACyD,QAAQ,EAAE,CAAC,EAChCkC,QACD,CAAC,CAAA;CACF,OAAA;CACD,GAAA;CACD,CAAA;CAEAjE,WAAW,CACV,UAAU,EACV,CAAC5Q,IAAI,EAAE6Q,QAAQ,EAAE0E,SAAS,KAAKZ,cAAc,CAAC3U,IAAI,EAAEuV,SAAS,CAAC,EAC9D,KACD,CAAC,CAAA;;CAED;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,MAAMN,iBAAiB,GAAGA,CAACL,MAAM,EAAE7P,IAAI,EAAE8P,QAAQ,KAAK;GACrD,OAAOG,UAAU,CAACJ,MAAM,EAAEhU,cAAc,CAAC,EAAE,CAAC,EAAEiU,QAAQ,CAAC,CAAA;;CAEvD;CACD;CACA;CACA;CACA;CACA;CACA;CACA;CACA,CAAC,CAAA;CAED,MAAMW,IAAI,GAAGpX,UAAQ,CAACoX,IAAI,CAAA;;CAE1B;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CAEA,SAASR,UAAUA,CAACJ,MAAM,EAAE5U,IAAI,EAAE6U,QAAQ,EAAE;CAC3C;GACA,IAAID,MAAM,KAAKY,IAAI,EAAE;CACpB,IAAA,MAAMvV,IAAI,GAAGD,IAAI,CAACsQ,SAAS,CAAA;;CAE3B;CACA,IAAA,IAAInG,IAAI,CAAA;KACR,IAAIlK,IAAI,KAAK,OAAO,EAAE;CACrBkK,MAAAA,IAAI,GAAG7H,aAAa,CAACkT,IAAI,EAAE,OAAO,CAAC,CAAA;CACpC,KAAC,MAAM,IAAIvV,IAAI,KAAK,MAAM,EAAE;CAC3BkK,MAAAA,IAAI,GACH7H,aAAa,CACZkT,IAAI,EACJ,aAAa,GAAGxV,IAAI,CAACyV,YAAY,CAAC,MAAM,CAAC,GAAG,IAC7C,CAAC,IACDnT,aAAa,CACZkT,IAAI,EACJ,iBAAiB,GAAGxV,IAAI,CAACyV,YAAY,CAAC,UAAU,CAAC,GAAG,IACrD,CAAC,CAAA;MACF,MAAM,IAAIxV,IAAI,KAAK,MAAM,IAAID,IAAI,CAAC0V,GAAG,KAAK,WAAW,EAAE;CACvDvL,MAAAA,IAAI,GAAG7H,aAAa,CAACkT,IAAI,EAAE,uBAAuB,CAAC,CAAA;CACpD,KAAA;;CAEA;CACArL,IAAAA,IAAI,GAAGA,IAAI,CAACwL,WAAW,CAAC3V,IAAI,CAAC,GAAG4U,MAAM,CAACgB,WAAW,CAAC5V,IAAI,CAAC,CAAA;CACzD,GAAC,MAAM;CACN6U,IAAAA,QAAQ,GAAGD,MAAM,CAACpG,MAAM,CAACxO,IAAI,CAAC,GAAG4U,MAAM,CAACgB,WAAW,CAAC5V,IAAI,CAAC,CAAA;CAC1D,GAAA;CAEA,EAAA,OAAOA,IAAI,CAAA;CACZ,CAAA;;CAEA;;CAEA;CACA;CACA;CACA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASsU,MAAMA,CAACvF,QAAQ,EAAE6F,MAAM,EAAEhN,OAAO,GAAGxF,OAAO,EAAE;CAC3D,EAAA,MAAMyF,OAAO,GAAGuC,IAAI,CAACvC,OAAO,IAAI;CAC/BgO,IAAAA,MAAM,CAAC9G,QAAQ,EAAE6F,MAAM,EAAEhN,OAAO,CAAC,CAAA;CACjC,IAAA,OAAOC,OAAO,CAAA;CACf,GAAC,CAAC,CAAA;;CAEF;GACA+C,OAAO,CAAC/C,OAAO,CAAC,CAAA;CAEhB,EAAA,OAAOA,OAAO,CAAA;CACf,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASgO,MAAMA,CACrB9G,QAAQ,EACR6F,MAAM,GAAGxW,UAAQ,CAAC0X,IAAI,EACtBlO,OAAO,GAAGxF,OAAO,EAChB;GACD,IAAIwF,OAAO,CAAC0F,KAAK,IAAIsH,MAAM,EAAEA,MAAM,CAACmB,WAAW,GAAG,EAAE,CAAA;GAEpD,MAAM/V,IAAI,GAAG2U,cAAc,CAC1BC,MAAM,EACNxF,eAAe,CAACL,QAAQ,CAAC,GAAGiF,OAAO,CAACjF,QAAQ,CAAC,GAAGA,QAAQ,EACxDnH,OAAO,CAACiN,QACT,CAAC,CAAA;CAEDjK,EAAAA,OAAO,CAAC,MAAMsK,MAAM,CAAC,CAAClV,IAAI,CAAC,CAACe,IAAI,CAACiV,QAAQ,CAAC,CAAC,CAAC,CAAA;CAE5C,EAAA,OAAOhW,IAAI,CAAA;CACZ,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMiW,MAAM,GAAGlH,QAAQ;CAC7B;CACD;CACA;CACA;CACA;CACA;;CAEChO,IAAI,CAACmV,cAAc,CAACnH,QAAQ,CAAC,CAACoG,UAAU,CAAC,CAAA;;CAE1C;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASe,cAAcA,CAACnH,QAAQ,EAAE;CACxC,EAAA,MAAMoH,QAAQ,GAAG,IAAI9X,gBAAgB,EAAE,CAAA;CACvCsW,EAAAA,cAAc,CAACwB,QAAQ,EAAEpH,QAAQ,CAAC,CAAA;CAElC,EAAA,OAAOoH,QAAQ,CAAA;CAChB,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CAAkC,SAASrT,OAAOA,CACjD2I,YAAY,GAAGzJ,SAAS,EACvB;CACD;CACA,EAAA,MAAMoU,GAAG,GAAG5K,SAAO,CAACC,YAAY,CAAC,CAAA;;CAEjC;CACD;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACC2K,EAAAA,GAAG,CAACC,QAAQ,GAAGjK,KAAK,IACnBgK,GAAG,CAAChK,KAAK,CAAClM,KAAK,EAAE,MAAM+V,MAAM,CAAC7J,KAAK,CAAC2C,QAAQ,CAAC,CAAC,CAAA;CAE/C,EAAA,OAAOqH,GAAG,CAAA;CACX,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,SAASlB,MAAMA,CAAC/K,IAAI,GAAG,EAAE,EAAEmM,IAAI,GAAG,EAAE,EAAE;CACrCA,EAAAA,IAAI,GAAGA,IAAI,CAACvV,IAAI,CAACiV,QAAQ,CAAC,CAAA;CAC1B,EAAA,KAAK,IAAIlO,CAAC,GAAG,CAAC,EAAE0F,IAAI,EAAE1F,CAAC,GAAGqC,IAAI,CAAClJ,MAAM,EAAE6G,CAAC,EAAE,EAAE;CAC3C0F,IAAAA,IAAI,GAAGrD,IAAI,CAACrC,CAAC,CAAC,CAAA;KACd0F,IAAI,KACF8I,IAAI,CAACrV,MAAM,KAAK,CAAC,IAAI,CAACqV,IAAI,CAAChI,QAAQ,CAACd,IAAI,CAAC,CAAC,IAC3CA,IAAI,CAACpJ,MAAM,EAAE,CAAA;CACf,GAAA;CACA,EAAA,OAAOkS,IAAI,CAAA;CACZ;;CCrsBO,MAAMC,iBAAiB,GAAGC,CAAC,IACjCA,CAAC,CAAC9Q,OAAO,CAAC,cAAc,EAAE+Q,CAAC,IAAIA,CAAC,CAAC,CAAC,CAAC,CAACC,WAAW,EAAE,CAAC;;CCSnD;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASC,aAAaA,CAAC1W,IAAI,EAAEiD,WAAW,EAAE0E,OAAO,EAAE;GACzD,IAAIgP,cAAc,CAACvT,GAAG,CAACpD,IAAI,CAAC,KAAK+B,SAAS,EAAE;KAC3C4U,cAAc,CAACC,MAAM,CAAC5W,IAAI,EAAEiD,WAAW,EAAE0E,OAAO,CAAC,CAAA;CAClD,GAAA;CACD,CAAA;CAEO,MAAMkP,aAAa,SAASC,WAAW,CAAC;CAC9C7T,EAAAA,WAAWA,GAAG;CACb,IAAA,KAAK,EAAE,CAAA;CAEP,IAAA,MAAM8T,UAAU,GAAG,IAAI,CAACC,YAAY,CAAC;CACpCC,MAAAA,IAAI,EAAE,MAAA;CACP,KAAC,CAAC,CAAA;;CAEF;CACA,IAAA,MAAMhU,WAAW,GAAG,IAAI,CAACA,WAAW,CAAA;CAEpCyB,IAAAA,cAAc,CAACqS,UAAU,EAAE9T,WAAW,CAACiU,eAAe,CAAC,CAAA;CACvDxS,IAAAA,cAAc,CAACqS,UAAU,EAAE9T,WAAW,CAAC0B,WAAW,CAAC,CAAA;CACpD,GAAA;;CAEA;;CAEA;CACD;CACA;CACA;CACA;GACCrC,KAAKA,CAACA,KAAK,EAAE;CACZ,IAAA,OAAOD,aAAa,CAAC,IAAI,EAAEC,KAAK,CAAC,CAAA;CAClC,GAAA;CACA;CACD;CACA;CACA;CACA;GACC,IAAIuE,IAAIA,CAAC5G,KAAK,EAAE;CACf,IAAA,IAAI+B,QAAQ,CAAC/B,KAAK,CAAC,EAAE;CACpB,MAAA,IAAI,CAAC8W,UAAU,CAACI,SAAS,GAAGlX,KAAK,CAAA;CAClC,KAAC,MAAM;CACN,MAAA,IAAI,CAAC8W,UAAU,CAACK,eAAe,CAC9BnB,cAAc,CAACnC,SAAS,CAAC7T,KAAK,IAAI,MAAM,CAAC,CAC1C,CAAC,CAAA;CACF,KAAA;CACD,GAAA;;CAEA;CACD;CACA;CACA;CACA;GACC,IAAIoX,MAAMA,CAACpX,KAAK,EAAE;CACjB6L,IAAAA,SAAS,CAAC7L,KAAK,EAAEA,KAAK,IAAI;CACzBA,MAAAA,KAAK,GACFH,cAAY,CAAC,IAAI,EAAE,QAAQ,EAAE,EAAE,CAAC,GAChCI,eAAe,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;CACnC,KAAC,CAAC,CAAA;CACH,GAAA;;CAEA;;CAEA;CACD;CACA;CACA;CACA;CACA;CACCwF,EAAAA,IAAIA,CAACC,SAAS,EAAEC,IAAI,EAAE;CACrBF,IAAAA,IAAI,CAAC,IAAI,EAAEC,SAAS,EAAEC,IAAI,CAAC,CAAA;CAC5B,GAAA;;CAEA;;GAEA0R,OAAOA,CAACtX,IAAI,EAAE;CACb,IAAA,OAAO,IAAI,CAACsC,KAAK,CAAC,CAAiBtC,cAAAA,EAAAA,IAAI,IAAI,CAAC,CAAA;CAC7C,GAAA;CACD;;CC3FA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASuX,QAAQA,CAACpL,KAAK,EAAE;CAC/B;GACA,MAAMqL,eAAe,SAASX,aAAa,CAAC;KAC3C,OAAOlS,WAAW,GAAG,CACpBO,GAAG,CAAA;AACN;AACA;AACA;AACA,GAAA,CAAI,CACD,CAAA;;CAED;CACF;CACA;CACA;KACE,IAAIuS,IAAIA,CAACxX,KAAK,EAAE;CACf6L,MAAAA,SAAS,CAAC7L,KAAK,EAAEA,KAAK,IAAK,IAAI,CAAC4G,IAAI,GAAG5G,KAAK,GAAG,SAAS,GAAG,EAAG,CAAC,CAAA;CAChE,KAAA;CACD,GAAA;GAEA,MAAMD,IAAI,GAAG,eAAe,CAAA;CAE5B0W,EAAAA,aAAa,CAAC1W,IAAI,EAAEwX,eAAe,CAAC,CAAA;GAEpC,OAAO1D,SAAS,CAAC9T,IAAI,EAAE;KACtByX,IAAI,EAAEtL,KAAK,CAACsL,IAAI;KAChB3I,QAAQ,EAAE3C,KAAK,CAAC2C,QAAAA;CACjB,GAAC,CAAC,CAAA;CACH;;CC5CA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CAEO,MAAM4I,OAAO,GAAGvL,KAAK;CAC3B;CACA2H,SAAS,CAAC3H,KAAK,CAACwL,SAAS,EAAE;CAAE,EAAA,GAAGxL,KAAK;CAAEwL,EAAAA,SAAS,EAAE5V,SAAAA;CAAU,CAAC,CAAC;;CCN/D;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CAEO,MAAM6V,GAAG,GAAGzL,KAAK,IACvBW,GAAG,CACF,MAAM;CACLX,EAAAA,KAAK,CAAC0L,YAAY,IAAIzM,KAAK,EAAE,CAAA;GAC7B,OAAOe,KAAK,CAAC2L,IAAI,CAAA;CAClB,CAAC,EACD1I,YAAY,CAACjD,KAAK,CAAC2C,QAAQ,CAAC,EAC5B,IACD,CAAC,CAAA;CAEF,IAAIiJ,MAAM,CAAA;;CAEV;CACA,SAAS3M,KAAKA,GAAG;GAChB,IAAI,CAAC2M,MAAM,EAAE;CACZA,IAAAA,MAAM,GAAG,IAAI,CAAA;CAEb,IAAA,MAAMC,MAAM,GAAG5X,aAAa,EAAE,CAAA;CAC9B,IAAA,MAAM6X,MAAM,GAAG5X,eAAe,CAAC6X,SAAS,CAAA;CAExCnI,IAAAA,OAAO,CAAC,MAAM;CACbgI,MAAAA,MAAM,GAAG,KAAK,CAAA;CACd;CACAC,MAAAA,MAAM,IACLA,MAAM,KAAK5X,aAAa,EAAE,IAC1BD,WAAW,CAAC6X,MAAM,CAAC,IACnBA,MAAM,CAACG,KAAK,EAAE,CAAA;OAEf9X,eAAe,CAAC6X,SAAS,GAAGD,MAAM,CAAA;CACnC,KAAC,CAAC,CAAA;CACH,GAAA;CACD;;CCpDA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASG,MAAMA,CAACjM,KAAK,EAAE;GAC7ByJ,MAAM,CAACzJ,KAAK,CAAC2C,QAAQ,EAAE3C,KAAK,CAACkM,KAAK,CAAC,CAAA;CACpC;;CCTA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMC,IAAI,GAAGnM,KAAK,IACxB2H,SAAS,CAACsE,MAAM,EAAE;GACjBC,KAAK,EAAEla,UAAQ,CAACoX,IAAI;GACpBzG,QAAQ,EAAE3C,KAAK,CAAC2C,QAAAA;CACjB,CAAC,CAAC;;CCVH;CACA;CACA;CACA;CACA;CACO,SAASyJ,eAAeA,CAAChL,IAAI,EAAE;CACrC;GACAA,IAAI,CAAC2K,SAAS,GAAG,CAAC,CAAA;;CAElB;CACA3K,EAAAA,IAAI,CAACiL,cAAc,CAAC,IAAI,CAAC,CAAA;CAC1B,CAAA;;CAEA;CACO,MAAMC,oBAAoB,GAAGA,MACnCC,gBAAgB,CAACpZ,UAAQ,CAACqZ,IAAI,CAAC,CAAA;;CAEhC;CACA;CACA;CACA;CACA;CACA;CACO,SAASD,gBAAgBA,CAACE,QAAQ,EAAE;CAC1C,EAAA,IAAIA,QAAQ,EAAE;KACb,IAAI;CACH;CACA,MAAA,MAAMrL,IAAI,GAAGlL,aAAa,CAAClE,UAAQ,EAAEya,QAAQ,CAAC,CAAA;CAC9C,MAAA,IAAIrL,IAAI,EAAE;SACTgL,eAAe,CAAChL,IAAI,CAAC,CAAA;CACrB,QAAA,OAAO,IAAI,CAAA;CACZ,OAAA;CACD,KAAC,CAAC,OAAOpH,CAAC,EAAE,EAAC;CACd,GAAA;CACA,EAAA,OAAO,KAAK,CAAA;CACb,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACO,SAAS0S,4BAA4BA,CAACD,QAAQ,EAAE;GACtD,IAAI,CAACF,gBAAgB,CAACE,QAAQ,CAAC,EAAEE,WAAW,EAAE,CAAA;CAC/C,CAAA;;CAEA;CACO,MAAMA,WAAW,GAAGA,MAC1B7a,MAAM,CAAC8a,QAAQ,CAAC;CAAEC,EAAAA,GAAG,EAAE,CAAC;CAAEC,EAAAA,QAAQ,EAAE,MAAA;CAAO,CAAC,CAAC;;CCnDvC,MAAMC,kBAAkB,GAAGnb,MAAM,CAACmb,kBAAkB,CAAA;;CAE3D;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,SAASC,mBAAmBA,CAACC,MAAM,EAAE;GACpC,IAAI;KACH,OAAOC,kBAAkB,CAACD,MAAM,CAAC,CAAA;IACjC,CAAC,OAAOjT,CAAC,EAAE;CACX,IAAA,OAAOiT,MAAM,CAAA;CACd,GAAA;CACD,CAAA;;CAGA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAME,UAAU,GAAGC,IAAI,IAC7BA,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,OAAO,CAACC,IAAI,CAACD,IAAI,CAAC,CAAA;;CAEzD;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAME,UAAU,GAAGC,GAAG;CAC5B;CACA,OAAO,CAACF,IAAI,CAACE,GAAG,CAAC,IAAI,CAAC,CAACA,GAAG,GAAG,GAAG,EAAE3U,UAAU,CAACxF,MAAM,GAAG,GAAG,CAAC,CAAA;;CAE3D;CACA;CACA;CACA;CACA;CACA;CACO,MAAMoa,UAAU,GAAGD,GAAG,IAAI,CAACJ,UAAU,CAACI,GAAG,CAAC,CAAA;;CAEjD;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAME,aAAa,GAAGA,CAACF,GAAG,EAAEG,MAAM,KACxCA,MAAM,GACHH,GAAG,CAACjU,OAAO,CAAC,oBAAoB,EAAE,CAACmE,CAAC,EAAEC,CAAC;CACvC;CACAgQ,MAAM,CAAChQ,CAAC,CAAC,KAAK9H,SAAS,GAAGmX,kBAAkB,CAACW,MAAM,CAAChQ,CAAC,CAAC,CAAC,GAAGD,CAC3D,CAAC,GACA8P,GAAG;;CC5DP;CAAkC,SAAS7Y,MAAMA,CAACsL,KAAK,GAAGhK,OAAO,EAAE;GAClE,MAAM,CAAC2M,QAAQ,EAAEgL,WAAW,EAAEC,cAAc,CAAC,GAAG3P,MAAM,CAAC,EAAE,CAAC,CAAA;GAE1D,OAAO;CACN4P,IAAAA,IAAI,EAAE,EAAE;CAAE;KACVT,IAAI,EAAEA,MAAM,EAAE;CAAE;CAChB5E,IAAAA,MAAM,EAAE5S,SAAS;CAAE;KACnBkY,IAAI,EAAEA,MAAM,KAAK;CAAE;CACnBJ,IAAAA,MAAM,EAAEA,MAAM,MAAM1X,OAAO;CAAE;CAC7B8V,IAAAA,MAAM,EAAE,EAAE;CAAE;CACZ;KACAiC,WAAW,EAAEjL,KAAK,IAAI;OACrB8K,cAAc,CAACjL,QAAQ,IAAI;CAC1BA,QAAAA,QAAQ,CAACtK,IAAI,CAACyK,KAAK,CAAC,CAAA;SACpB,OAAO,CAAC,GAAGH,QAAQ,CAAC,CAAA;CACrB,OAAC,CAAC,CAAA;MACF;KACDqL,cAAc,EAAElL,KAAK,IAAI;OACxB8K,cAAc,CAACjL,QAAQ,IAAI;CAC1BvM,QAAAA,eAAe,CAACuM,QAAQ,EAAEG,KAAK,CAAC,CAAA;SAChC,OAAO,CAAC,GAAGH,QAAQ,CAAC,CAAA;CACrB,OAAC,CAAC,CAAA;MACF;KACDsL,SAAS,EAAE5P,IAAI,CAAC,MAAM;CACrB,MAAA;CACC;CACJ;CACA;CACA;CACA;CACA;CACA;CACA;SACIsE,QAAQ,EAAE,CAAC9N,MAAM;CACjB;CACA8N,QAAAA,QAAQ,EAAE,CAACV,KAAK,CAACU,QAAQ,IAAI,CAACA,QAAQ,CAACmL,IAAI,EAAE,CAAA;CAAC,QAAA;CAEhD,KAAC,CAAC;CACF;KACA,GAAG9N,KAAAA;IACH,CAAA;CACF,CAAA;CAEO,MAAMZ,OAAO,GAAG1I,OAAO,CAAChC,MAAM,EAAE,CAAC;;CCxBxC;;CAEA,MAAM,CAACwZ,WAAW,EAAEC,WAAW,CAAC,GAAGlQ,MAAM,CAACmQ,UAAS,EAAE;CACpD7Q,EAAAA,MAAM,EAAE,KAAA;CACT,CAAC,CAAC,CAAA;;CAEF;;CAEA,MAAM8Q,QAAQ,GAAGhQ,IAAI,CAAC,MAAM6P,WAAW,EAAE,CAACG,QAAQ,CAAC,CAAA;CACnD,MAAMC,MAAM,GAAGjQ,IAAI,CAAC,MAAM6P,WAAW,EAAE,CAACI,MAAM,CAAC,CAAA;CAC/C,MAAMlB,IAAI,GAAG/O,IAAI,CAAC,MAAM6P,WAAW,EAAE,CAACd,IAAI,CAAC,CAAA;;CAE3C;CACA;CACA;CACA,MAAMZ,IAAI,GAAGnO,IAAI,CAAC,MACjB+O,IAAI,EAAE,CAACmB,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG,GAAGL,WAAW,EAAE,CAAC1B,IAC5C,CAAC,CAAA;;CAED;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CAEA;CACO,MAAMrZ,QAAQ,GAAG;GACvBia,IAAI;GACJiB,QAAQ;GACR7B,IAAI;GACJgC,IAAI,EAAEnQ,IAAI,CAAC,MAAMgQ,QAAQ,EAAE,GAAG7B,IAAI,EAAE,CAAC;GACrCrW,KAAK,EAAEkI,IAAI,CAAC,MAAM;CACjB,IAAA,MAAMvK,KAAK,GAAGwa,MAAM,EAAE,CAAA;CACtB,IAAA,MAAMG,YAAY,GAAGha,KAAK,EAAE,CAAA;CAC5B,IAAA,MAAMiZ,MAAM,GAAG,IAAIgB,GAAG,CAACtb,QAAM,GAAG,GAAG,GAAGU,KAAK,CAAC,CAAC2a,YAAY,CAAA;CACzD,IAAA,KAAK,MAAM,CAACE,GAAG,EAAE7a,KAAK,CAAC,IAAI4Z,MAAM,CAACnb,OAAO,EAAE,EAAE;CAC5Ckc,MAAAA,YAAY,CAACE,GAAG,CAAC,GAAG7a,KAAK,CAAA;CAC1B,KAAA;CACA,IAAA,OAAO2a,YAAY,CAAA;CACpB,GAAC,CAAC;GACFf,MAAM,EAAEA,MAAM;KACb,MAAMkB,MAAM,GAAG,EAAE,CAAA;KACjBnY,WAAW,CAAC2I,OAAO,EAAE,EAAE,QAAQ,EAAE1I,OAAO,IAAI;CAC3CkY,MAAAA,MAAM,CAACvW,IAAI,CAAC3B,OAAO,CAACgX,MAAM,CAAC,CAAA;CAC5B,KAAC,CAAC,CAAA;CACF,IAAA,MAAMA,MAAM,GAAGjZ,KAAK,EAAE,CAAA;CAEtB,IAAA,KAAK,MAAMoa,KAAK,IAAID,MAAM,EAAE;CAC3B;CACA,MAAA,KAAK,MAAM,CAACD,GAAG,EAAE7a,KAAK,CAAC,IAAIvB,OAAO,CAACsc,KAAK,EAAE,EAAE,IAAI7Y,OAAO,CAAC,EAAE;CACzD0X,QAAAA,MAAM,CAACiB,GAAG,CAAC,GACV7a,KAAK,KAAK8B,SAAS,GAAGsX,mBAAkB,CAACpZ,KAAK,CAAC,GAAGA,KAAK,CAAA;CACzD,OAAA;CACD,KAAA;CACA,IAAA,OAAO4Z,MAAM,CAAA;CACd,GAAA;CACD,CAAC,CAAA;CAED,IAAIoB,WAAW,GAAG,EAAE,CAAA;;CAmBpB;CACA;CACA;CACA;CACA;CACA;CACA,eAAeC,WAAWA,CAAC3B,IAAI,EAAE;GAChC,MAAM4B,cAAc,GAAG,EAAE,CAAA;CACzB,EAAA,KAAK,MAAMC,WAAW,IAAIH,WAAW,EAAE;KACtC,IAAI1B,IAAI,CAAC7W,OAAO,CAAC0Y,WAAW,CAAC7B,IAAI,CAAC,KAAK,CAAC,EAAE;CACzC,MAAA,IAAI,EAAE,MAAM6B,WAAW,CAACpO,QAAQ,EAAE,CAACnN,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,EACrD,OAAO,KAAK,CAAA;CACd,KAAC,MAAM;CACNsb,MAAAA,cAAc,CAAC3W,IAAI,CAAC4W,WAAW,CAAC,CAAA;CACjC,KAAA;CACD,GAAA;CACAH,EAAAA,WAAW,GAAGE,cAAc,CAAA;CAC5B,EAAA,OAAO,IAAI,CAAA;CACZ,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,eAAeE,QAAQA,CAAC9B,IAAI,EAAE5R,OAAO,GAAGxF,OAAO,EAAE;CAChD,EAAA,IAAIoY,UAAS,CAAChB,IAAI,KAAKA,IAAI,EAAE;CAC5B,IAAA,IAAI,MAAM2B,WAAW,CAAC3B,IAAI,CAAC,EAAE;OAC5B,MAAM9Z,EAAE,GAAGA,MAAM6b,gBAAgB,CAAC/B,IAAI,EAAE5R,OAAO,CAAC,CAAA;CAChD;CACAxJ,MAAAA,UAAQ,CAACod,mBAAmB,IAC5BhB,UAAS,CAAChB,IAAI,CAAC9T,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK8T,IAAI,CAAC9T,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,GAC1DtH,UAAQ,CAACod,mBAAmB,CAAC9b,EAAE,CAAC,GAChCA,EAAE,EAAE,CAAA;CACR,KAAA;CACD,GAAA;CACD,CAAA;CAEA,SAAS6b,gBAAgBA,CAAC/B,IAAI,EAAE5R,OAAO,EAAE;GACxC,IAAIA,OAAO,CAAClC,OAAO,EAAE;KACpBpG,OAAO,CAACmc,YAAY,CAAC,IAAI,EAAE,EAAE,EAAEjC,IAAI,CAAC,CAAA;CACrC,GAAC,MAAM;KACNla,OAAO,CAACoc,SAAS,CAAC,IAAI,EAAE,EAAE,EAAElC,IAAI,CAAC,CAAA;CAClC,GAAA;GACAe,WAAW,CAACC,UAAS,CAAC,CAAA;CAEtB,EAAA,IAAInY,QAAQ,CAACuF,OAAO,CAACsQ,MAAM,CAAC,EAAE;CAC7BY,IAAAA,4BAA4B,CAAC0B,UAAS,CAAC5B,IAAI,CAAC,CAAA;CAC7C,GAAA;CACD,CAAA;;CA6CA;;CAEA,IAAI+C,iBAAiB,GAAG,KAAK,CAAA;CAEtB,SAASC,YAAYA,GAAG;GAC9B,IAAI,CAACD,iBAAiB,EAAE;CACvBA,IAAAA,iBAAiB,GAAG,IAAI,CAAA;CAExBvd,IAAAA,UAAQ,CAACmR,gBAAgB,CAAC,OAAO,EAAEsM,WAAW,CAAC,CAAA;CAE/CtM,IAAAA,gBAAgB,CAAC,YAAY,EAAEuM,gBAAgB,CAAC,CAAA;CAChDvM,IAAAA,gBAAgB,CAAC,UAAU,EAAEuM,gBAAgB,CAAC,CAAA;CAC/C,GAAA;CACD,CAAA;;CAEA;CACA;CACA,eAAeA,gBAAgBA,GAAG;CACjC;CACA;CACA;CACA;CACA,EAAA,MAAMC,KAAK,GAAG3d,UAAQ,CAAC2d,KAAK,CAAA;CAC5B3d,EAAAA,UAAQ,CAAC2d,KAAK,GAAGA,KAAK,GAAG,GAAG,CAAA;GAC5B3d,UAAQ,CAAC2d,KAAK,GAAGA,KAAK,CAAA;CAEtB,EAAA,IAAI,MAAMZ,WAAW,CAACX,UAAS,CAAChB,IAAI,CAAC,EAAE;KACtCe,WAAW,CAACC,UAAS,CAAC,CAAA;CACvB,GAAC,MAAM;CACNlb,IAAAA,OAAO,CAACoc,SAAS,CAAC,IAAI,EAAE,EAAE,EAAEnc,QAAQ,CAACia,IAAI,EAAE,CAAC,CAAA;CAC7C,GAAA;CACD,CAAA;CAEA,SAASqC,WAAWA,CAACzV,CAAC,EAAE;GACvB,IACCA,CAAC,CAAC4V,gBAAgB,IAClB5V,CAAC,CAAC6V,MAAM,KAAK,CAAC,IACd7V,CAAC,CAAC8V,OAAO,IACT9V,CAAC,CAAC+V,MAAM,IACR/V,CAAC,CAACgW,OAAO,IACThW,CAAC,CAACiW,QAAQ,EAEV,OAAA;;CAED;CACA,EAAA,MAAMrc,IAAI,GAAGoG,CAAC,CACZkW,YAAY,EAAE,CACdC,IAAI,CAAC/O,IAAI,IAAIA,IAAI,YAAYgP,iBAAiB,CAAC,CAAA;;CAEjD;GACA,IACC,CAACxc,IAAI,IACL,CAACA,IAAI,CAACwZ,IAAI,IACVxZ,IAAI,CAACyc,QAAQ,IACbzc,IAAI,CAACwD,MAAM,IACX,CAACxD,IAAI,CAACwZ,IAAI,CAACxU,UAAU,CAAC,MAAM,CAAC;CAAI;GACjC0U,UAAU,CAAC1Z,IAAI,CAACwZ,IAAI,CAAC,IACpBxZ,IAAI,CAAC0V,GAAG,IAAI1V,IAAI,CAAC0V,GAAG,CAACnC,KAAK,CAAC,IAAI,CAAC,CAACjF,QAAQ,CAAC,UAAU,CAAE,EAEvD,OAAA;GAEDnI,cAAc,CAACC,CAAC,CAAC,CAAA;CAEjBkV,EAAAA,QAAQ,CAACtb,IAAI,CAACwZ,IAAI,EAAE;KACnB9T,OAAO,EAAE1F,IAAI,CAAC0F,OAAAA;CACf,GAAC,CAAC,CAAA;CACH;;CCvQA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASgX,IAAIA,CAACtQ,KAAK,EAAE;CAC3B,EAAA,MAAMa,QAAQ,GAAGoC,YAAY,CAACjD,KAAK,CAAC2C,QAAQ,CAAC,CAAA;GAC7C,MAAM7O,KAAK,GAAGuK,IAAI,CAAC,MAAMhJ,QAAQ,CAAC2K,KAAK,CAACsL,IAAI,CAAC,CAAC,CAAA;GAC9C,MAAMiF,SAAS,GAAGlS,IAAI,CAAC,MAAM,CAAC,CAACvK,KAAK,EAAE,CAAC,CAAA;;CAEvC;GACA,MAAM0c,QAAQ,GAAG7a,eAAe,CAACqK,KAAK,CAACwQ,QAAQ,CAAC,GAC7C5a,SAAS,GACTyI,IAAI,CAAC,MAAMrF,OAAO,CAACgH,KAAK,CAACwQ,QAAQ,CAAC,CAAC,CAAA;CAEtC,EAAA,OAAOnS,IAAI,CAAC,MAAOkS,SAAS,EAAE,GAAG1P,QAAQ,CAAC/M,KAAK,CAAC,GAAG0c,QAAS,CAAC,CAAA;CAC9D;;CClBO,SAAS1E,MAAMA,CAACpV,OAAO,EAAE;CAC/B;CACD;CACA;CACA;CACC,EAAA,IAAI,CAAC4V,oBAAoB,EAAE,EAAE;KAC5B,IACC,CAAC7V,WAAW,CAACC,OAAO,EAAE,QAAQ,EAAEA,OAAO,IAAI;OAC1C,IAAIA,OAAO,CAACoV,MAAM,EAAE;CACnB,QAAA,KAAK,MAAM1K,IAAI,IAAI1K,OAAO,CAACoV,MAAM,EAAE;CAClC,UAAA,IAAIS,gBAAgB,CAACnL,IAAI,CAAC,EAAE;CAC3B,YAAA,OAAO,IAAI,CAAA;CACZ,WAAA;CACD,SAAA;CACD,OAAA;CACD,KAAC,CAAC,EACD;CACDuL,MAAAA,WAAW,EAAE,CAAA;CACd,KAAA;CACD,GAAA;CACD;;CCZA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAAS8D,MAAMA,CAACzQ,KAAK,EAAE;CAC7BwP,EAAAA,YAAY,EAAE,CAAA;CAEd,EAAA,MAAMhH,MAAM,GAAGpJ,OAAO,EAAE,CAAA;CAExB,EAAA,MAAMyO,IAAI,GACTrF,MAAM,CAACqF,IAAI,GACXJ,aAAa;CACZ;CACAzN,EAAAA,KAAK,CAACwO,IAAI,KAAK5Y,SAAS,GACrB,SAAS;CAAC;CACV;CACDoK,EAAAA,KAAK,CAACwO,IAAI,CACRlV,OAAO,CAAC,GAAG,EAAE,SAAS,CAAA;CACvB;IACCA,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,EACvB0G,KAAK,CAAC0N,MACP,CAAC,CAAA;CAEF,EAAA,MAAMgD,KAAK,GAAG,IAAIC,MAAM,CACvB,GAAG,GAAG9C,IAAI,CAACvU,OAAO,CAAC,oBAAoB,EAAE,eAAe,CACzD,CAAC,CAAA;GAED,IAAI8T,IAAI,GAAG,EAAE,CAAA;GACb,MAAM,CAACM,MAAM,EAAEkD,SAAS,CAAC,GAAG3S,MAAM,CAAC,MAAMjI,OAAO,CAAC,CAAA;;CAEjD;CACA,EAAA,MAAM8X,IAAI,GAAGzP,IAAI,CAAC,MAAM;CACvB,IAAA,MAAMmQ,IAAI,GAAGrb,QAAQ,CAACqb,IAAI,EAAE,CAAA;CAC5B,IAAA,IAAIkC,KAAK,CAACrD,IAAI,CAACmB,IAAI,CAAC,EAAE;OACrBoC,SAAS,CAAC,MAAMF,KAAK,CAACG,IAAI,CAACrC,IAAI,CAAC,CAACsC,MAAM,CAAC,CAAA;OAExC,IAAI1D,IAAI,KAAK,EAAE,EAAE;CAChBA,QAAAA,IAAI,GAAGoB,IAAI,CAAClV,OAAO,CAACkV,IAAI,CAAClV,OAAO,CAACoX,KAAK,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,CAAA;CAChD;SACAtD,IAAI;CACH;SACAha,QAAM;CACN;SACCga,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC;CAC5B;SACAA,IAAI,CAAA;CACN,OAAA;CAEA5Z,MAAAA,MAAM,CAAC,MAAMsY,MAAM,CAACpV,OAAO,CAAC,CAAC,CAAA;CAE7B,MAAA,OAAO,IAAI,CAAA;CACZ,KAAC,MAAM;CACN,MAAA,OAAO,KAAK,CAAA;CACb,KAAA;CACD,GAAC,CAAC,CAAA;GAEF,MAAMA,OAAO,GAAGhC,MAAM,CAAC;KACtBmZ,IAAI;CAAE;KACNT,IAAI,EAAEA,MAAMA,IAAI;CAAE;KAClBM,MAAM;KACN5B,MAAM,EAAE9L,KAAK,CAAC8L,MAAM;KACpBtD,MAAM;CACNsF,IAAAA,IAAAA;CACD,GAAC,CAAC,CAAA;CAEFtF,EAAAA,MAAM,CAACuF,WAAW,CAACrX,OAAO,CAAC,CAAA;GAE3B8H,OAAO,CAAC,MAAMgK,MAAM,CAACwF,cAAc,CAACtX,OAAO,CAAC,CAAC,CAAA;CAE7C,EAAA,OAAOiR,SAAS,CAACvI,OAAO,CAAC6K,QAAQ,EAAE;CAClCnW,IAAAA,KAAK,EAAE4C,OAAO;CACdiM,IAAAA,QAAQ,EAAEgF,SAAS,CAAC4D,OAAO,EAAE;CAC5BC,MAAAA,SAAS,EAAExL,KAAK,CAAC+Q,QAAQ,GAAG3F,QAAQ,GAAGkF,IAAI;CAC3ChF,MAAAA,IAAI,EAAEA,MAAMwC,IAAI,EAAE,IAAI7X,QAAQ,CAAC+J,KAAK,CAACsL,IAAI,CAAC;OAC1CkF,QAAQ,EAAExQ,KAAK,CAACwQ,QAAQ;OACxB7N,QAAQ,EAAE3C,KAAK,CAAC2C,QAAAA;MAChB,CAAA;CACF,GAAC,CAAC,CAAA;CACH,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA8N,MAAM,CAACO,OAAO,GAAGhR,KAAK,IAAI;CACzB,EAAA,MAAMtJ,OAAO,GAAG0I,OAAO,EAAE,CAAA;GACzB,OAAOuI,SAAS,CAAC2I,IAAI,EAAE;KACtBhF,IAAI,EAAE5U,OAAO,CAACuX,SAAS;KACvBtL,QAAQ,EAAE3C,KAAK,CAAC2C,QAAAA;CACjB,GAAC,CAAC,CAAA;CACH,CAAC;;CCzHD;CACA;CACA;CACA;CACA;CACA;CACA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CAEO,SAASsO,CAACA,CAACjR,KAAK,EAAE;CACxBwP,EAAAA,YAAY,EAAE,CAAA;GAEd,IAAIpC,IAAI,GAAGK,aAAa,CAACzN,KAAK,CAACoN,IAAI,EAAEpN,KAAK,CAAC0N,MAAM,CAAC,CAAA;;CAElD;CACA;GACA,MAAMG,IAAI,GAAGzO,OAAO,EAAE,CAACgO,IAAI,EAAE,CAAA;GAC7BA,IAAI,GACH,CAACI,UAAU,CAACJ,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAACS,IAAI,GAC1BT,IAAI,GACJS,IAAI,CAAC3L,QAAQ,CAAC,IAAI,CAAC;CAClB;CACD;GACA2L,IAAI,GAAGT,IAAI,GACV,IAAIsB,GAAG,CAACtB,IAAI,EAAES,IAAI,CAAC,CAACT,IAAI,CAAA;GAE7B,OAAOzF,SAAS,CAAC,GAAG,EAAE;KAAE,GAAG;CAAE,MAAA,GAAG3H,KAAK;OAAEoN,IAAI;CAAEM,MAAAA,MAAM,EAAE9X,SAAAA;CAAU,KAAA;CAAE,GAAC,CAAC,CAAA;CACpE;;CC5CA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASsb,UAAUA,CAACrQ,QAAQ,EAAEsQ,KAAK,EAAE,GAAG1R,IAAI,EAAE;CACpD,EAAA,IAAIH,EAAE,CAAA;CACN,EAAA,MAAMhM,EAAE,GAAG;KACV8d,KAAK,EAAEA,MAAM;CACZzR,MAAAA,SAAS,CAACwR,KAAK,EAAEA,KAAK,IAAI;SACzB7d,EAAE,CAAC+d,IAAI,EAAE,CAAA;CACT,QAAA,IAAIF,KAAK,GAAGvH,QAAQ,EACnBtK,EAAE,GAAGgS,UAAU,CAACzQ,QAAQ,EAAEsQ,KAAK,EAAE,GAAG1R,IAAI,CAAC,CAAA;CAC3C,OAAC,CAAC,CAAA;CACF,MAAA,OAAOnM,EAAE,CAAA;MACT;CAED+d,IAAAA,IAAI,EAAEA,MAAME,YAAY,CAACjS,EAAE,CAAA;IAC3B,CAAA;CAEDd,EAAAA,OAAO,CAAClL,EAAE,CAAC+d,IAAI,CAAC,CAAA;CAEhB,EAAA,OAAO/d,EAAE,CAAA;CACV;;CCrBA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASke,IAAIA,CAAChG,SAAS,EAAEhQ,OAAO,GAAGxF,OAAO,EAAE;GAClD,MAAM;KAAEiK,SAAS;KAAEC,QAAQ;CAAEC,IAAAA,OAAAA;CAAQ,GAAC,GAAG3E,OAAO,CAAA;GAEhD,IAAIiW,KAAK,GAAG,CAAC,CAAA;GACb,OAAO3R,IAAI,CAAC0L,SAAS,EAAE;KACtBvL,SAAS;CACTE,IAAAA,OAAO,EAAEA,CAACnG,CAAC,EAAEsG,KAAK,KACjBmR,KAAK,EAAE,GAAG,EAAE,GACTP,UAAU,CAAC5Q,KAAK,EAAE,IAAI,CAAC,CAAC8Q,KAAK,EAAE,IAAIxb,SAAS,GAC5CJ,UAAU,CAAC2K,OAAO,CAAC,GAClBA,OAAO,CAACnG,CAAC,EAAEsG,KAAK,CAAC,GACjBH,OAAO;KACZD,QAAQ,EAAEA,MAAM;CACf,MAAA,IAAIxJ,OAAO,GAAG0I,OAAO,EAAE,CAAA;OAEvB0M,MAAM,CAACpV,OAAO,CAAC,CAAA;;CAEf;OACAwJ,QAAQ,IAAIA,QAAQ,EAAE,CAAA;CACvB,KAAA;CACD,GAAC,CAAC,CAAA;CACH;;CCzCA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASwR,MAAMA,CAAC1R,KAAK,EAAE;GAC5B,MAAM2R,OAAO,GAAG3Y,OAAO,CAAC,MAAMgH,KAAK,CAAC2C,QAAQ,CAAC,CAAA;GAE7C,MAAM6N,QAAQ,GAAG7a,eAAe,CAACqK,KAAK,CAACwQ,QAAQ,CAAC,GAC5CnS,IAAI,CAAC,MAAM;CACT,IAAA,MAAMvF,CAAC,GAAG6Y,OAAO,EAAE,CAACxB,IAAI,CAACyB,KAAK,IAAI,EAAE,MAAM,IAAIA,KAAK,CAAC,CAAC,CAAA;CACrD,IAAA,OAAO9Y,CAAC,IAAIA,CAAC,CAAC6J,QAAQ,CAAA;IACvB,CAAC,GACFtE,IAAI,CAAC,MAAMrF,OAAO,CAACgH,KAAK,CAACwQ,QAAQ,CAAC,CAAC,CAAA;GAEvC,MAAMoB,KAAK,GAAGvT,IAAI,CAAC,MACjBsT,OAAO,EAAE,CAACxB,IAAI,CAACyB,KAAK,IAAI,CAAC,CAACvc,QAAQ,CAACuc,KAAK,CAACtG,IAAI,CAAC,CAChD,CAAC,CAAA;CAED,EAAA,MAAMxX,KAAK,GAAGuK,IAAI,CAAC,MAAMuT,KAAK,EAAE,IAAIvc,QAAQ,CAACuc,KAAK,EAAE,CAACtG,IAAI,CAAC,CAAC,CAAA;CAE3D,EAAA,MAAMzK,QAAQ,GAAGxC,IAAI,CACnB,MAAMuT,KAAK,EAAE,IAAI3O,YAAY,CAAC2O,KAAK,EAAE,CAACjP,QAAQ,CAChD,CAAC,CAAA;CACD,EAAA,OAAOtE,IAAI,CAAC,MAAOuT,KAAK,EAAE,GAAG/Q,QAAQ,EAAE,CAAC/M,KAAK,CAAC,GAAG0c,QAAS,CAAC,CAAA;CAC7D,CAAA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,MAAMqB,KAAK,GAAGvc,QAAQ;;;;;;;;;;;;;;;;;;;CClB7B,MAAMwc,eAAe,GAAGrf,WAAW,CAClCF,OAAO,CAACwf,uBAAuB,CAAC,CAACpR,GAAG,CAAC,CAAC,CAACqR,CAAC,EAAEC,CAAC,CAAC,KAAK,CAChDD,CAAC,CAAC5N,WAAW,EAAE,EACf6N,CAAC,CACD,CACF,CAAC,CAAA;;CAED;;CAEA,MAAM3S,EAAE,GAAG,MAAM,CAAA;CACjB,MAAM4S,GAAG,GAAG,CAAe,aAAA,CAAA,CAAA;;CAE3B;CACA;CACA;CACA;CACA;CACA;CACA,MAAMC,SAAS,GAAGrd,SAAS,CAC1B,CAACuE,KAAK,EAAE+Y,OAAO,KACd/Y,KAAK,CAACpC,GAAG,CAACmb,OAAO,EAAEA,OAAO,IAAI;CAC7B,EAAA,MAAMnZ,QAAQ,GAAG3E,aAAa,CAAC,UAAU,CAAC,CAAA;CAE1C2E,EAAAA,QAAQ,CAAC+R,SAAS,GAAGoH,OAAO,CAC1BC,IAAI,CAACH,GAAG,CAAC,CACTI,UAAU,CAAC,CAAIJ,CAAAA,EAAAA,GAAG,GAAG,EAAE,CAAA,CAAA,EAAI5S,EAAE,CAAG,CAAA,CAAA,CAAA;CACjC;CAAA,GACChG,OAAO,CAAC,eAAe,EAAE,MAAM,CAAA;CAChC;CAAA,GACCA,OAAO,CAAC,4BAA4B,EAAE,cAAc,CAAC,CAAA;GAEvD,OAAOL,QAAQ,CAACmZ,OAAO,CAAA;CACxB,CAAC,CAAC,EACH5a,SACD,CAAC,CAAA;;CAED;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CAEO,SAAS+a,IAAIA,GAAG;CACtB;CACD;CACA;CACA;CACA;CACA;CACA;CACA;;CAEC,EAAA,SAAS7X,IAAIA,CAACzB,QAAQ,EAAE,GAAGC,MAAM,EAAE;CAClC,IAAA,MAAMsZ,MAAM,GAAGL,SAAS,CAAClZ,QAAQ,CAAC,CAAA;KAElC,IAAI3C,KAAK,GAAG,CAAC,CAAA;KACb,SAASiL,KAAKA,CAAC3N,IAAI,EAAE;CACpB;CACA,MAAA,IAAIA,IAAI,CAACuB,QAAQ,KAAK,CAAC,EAAE;CACxB,QAAA,MAAM+O,SAAS,GAAGtQ,IAAI,CAACsQ,SAAS,CAAA;SAChC,IAAIA,SAAS,KAAK5E,EAAE,EAAE;CACrB,UAAA,OAAOpG,MAAM,CAAC5C,KAAK,EAAE,CAAC,CAAA;CACvB,SAAA;;CAEA;CACA,QAAA,MAAM0J,KAAK,GAAGvL,KAAK,EAAE,CAAA;CACrB,QAAA,KAAK,IAAI;WAAEZ,IAAI;CAAEC,UAAAA,KAAAA;CAAM,SAAC,IAAIF,IAAI,CAAC6e,UAAU,EAAE;WAC5C,IAAI3e,KAAK,KAAKwL,EAAE,EAAE;CACjBxL,YAAAA,KAAK,GAAGoF,MAAM,CAAC5C,KAAK,EAAE,CAAC,CAAA;CACxB,WAAA;CAEA,UAAA,IAAIzC,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;CACpBmM,YAAAA,KAAK,CAAC,OAAO,GAAGmK,iBAAiB,CAACtW,IAAI,CAACwQ,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGvQ,KAAK,CAAA;YACzD,MAAM,IAAID,IAAI,CAAC+E,UAAU,CAAC,OAAO,CAAC,EAAE;CACpCoH,YAAAA,KAAK,CAAC,OAAO,GAAGmK,iBAAiB,CAACtW,IAAI,CAACwQ,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGvQ,KAAK,CAAA;YACzD,MAAM,IAAID,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;aAC3BmM,KAAK,CAAC,OAAO,GAAGnM,IAAI,CAACwQ,KAAK,CAAC,CAAC,CAAC,CAAC,GAAGvQ,KAAK,CAAA;YACtC,MAAM,IAAID,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;aAC3BmM,KAAK,CAAC,KAAK,GAAGnM,IAAI,CAACwQ,KAAK,CAAC,CAAC,CAAC,CAAC,GAAGvQ,KAAK,CAAA;CACrC,WAAC,MAAM;CACNkM,YAAAA,KAAK,CAACnM,IAAI,CAAC,GAAGC,KAAK,CAAA;CACpB,WAAA;CACD,SAAA;;CAEA;CACA,QAAA,IAAIF,IAAI,CAACmV,UAAU,CAAClU,MAAM,EAAE;CAC3BmL,UAAAA,KAAK,CAAC2C,QAAQ,GAAGhO,IAAI,CAAC9B,OAAO,CAACe,IAAI,CAACmV,UAAU,CAAC,CAACpI,GAAG,CAACY,KAAK,CAAC,CAAC,CAAA;CAC3D,SAAA;CAEA,QAAA,OAAOoG,SAAS,CACfjN,IAAI,CAACgY,UAAU,CAACxO,SAAS,CAAC,IAAIA,SAAS,EACvClE,KACD,CAAC,CAAA;CACF,OAAC,MAAM;CACN,QAAA,OAAOpM,IAAI,CAAC+e,SAAS,EAAE,CAAA;CACxB,OAAA;CACD,KAAA;CAEA,IAAA,OAAOhe,IAAI,CAAC9B,OAAO,CAAC2f,MAAM,CAACzJ,UAAU,CAAC,CAACpI,GAAG,CAACY,KAAK,CAAC,CAAC,CAAA;CACnD,GAAA;GAEA7G,IAAI,CAACgY,UAAU,GAAG;KAAE,GAAGZ,eAAAA;IAAiB,CAAA;CACxCpX,EAAAA,IAAI,CAAC+P,MAAM,GAAGmI,cAAc,IAAI;CAC/B,IAAA,IAAI/e,IAAI,CAAA;KACR,KAAKA,IAAI,IAAI+e,cAAc,EAAE;CAC5BlY,MAAAA,IAAI,CAACgY,UAAU,CAAC7e,IAAI,CAACuQ,WAAW,EAAE,CAAC,GAAGwO,cAAc,CAAC/e,IAAI,CAAC,CAAA;CAC3D,KAAA;IACA,CAAA;CAED,EAAA,OAAO6G,IAAI,CAAA;CACZ,CAAA;CAwHO,MAAMA,IAAI,GAAG6X,IAAI,EAAE;;CCjQ1B;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACO,SAASM,WAAWA,CAAC/e,KAAK,EAAE;CAClC,EAAA,MAAM6M,GAAG,GAAG,IAAIjJ,GAAG,EAAE,CAAA;GAErB,IAAIqG,IAAI,GAAG,EAAE,CAAA;CAEbK,EAAAA,UAAU,CAAC,MAAM;CAChB,IAAA,MAAMyB,GAAG,GAAG/L,KAAK,EAAE,CAAA;CAEnB,IAAA,MAAMgf,QAAQ,GAAGrd,UAAU,CAACoK,GAAG,CAAC,GAAGhN,OAAO,CAACgN,GAAG,CAAC3G,MAAM,EAAE,CAAC,GAAG,CAAC2G,GAAG,CAAC,CAAA;;CAEhE;CACA,IAAA,KAAK,MAAM/L,KAAK,IAAIiK,IAAI,EAAE;CACzB,MAAA,IAAI,CAAC+U,QAAQ,CAAC5Q,QAAQ,CAACpO,KAAK,CAAC,EAAE;CAC9B,QAAA,MAAMyO,OAAO,GAAG5B,GAAG,CAAC1J,GAAG,CAACnD,KAAK,CAAC,CAAA;CAC9ByO,QAAAA,OAAO,IAAIA,OAAO,CAACjF,KAAK,CAAC,KAAK,CAAC,CAAA;CAChC,OAAA;CACD,KAAA;;CAEA;CACA,IAAA,KAAK,MAAMxJ,KAAK,IAAIgf,QAAQ,EAAE;CAC7B,MAAA,IAAI,CAAC/U,IAAI,CAACmE,QAAQ,CAACpO,KAAK,CAAC,EAAE;CAC1B,QAAA,MAAMyO,OAAO,GAAG5B,GAAG,CAAC1J,GAAG,CAACnD,KAAK,CAAC,CAAA;CAC9ByO,QAAAA,OAAO,IAAIA,OAAO,CAACjF,KAAK,CAAC,IAAI,CAAC,CAAA;CAC/B,OAAA;CACD,KAAA;CAEAS,IAAAA,IAAI,GAAG+U,QAAQ,CAAA;CAChB,GAAC,CAAC,CAAA;;CAEF;CACD;CACA;CACA;CACA;CACA;CACA;CACC,EAAA,OAAO,SAASC,UAAUA,CAAC3R,IAAI,EAAE;CAChC,IAAA,IAAI0R,QAAQ,GAAGnS,GAAG,CAAC1J,GAAG,CAACmK,IAAI,CAAC,CAAA;KAC5B,IAAI,CAAC0R,QAAQ,EAAE;OACdA,QAAQ,GAAG7U,MAAM,CAACF,IAAI,CAACmE,QAAQ,CAACd,IAAI,CAAC,CAAC,CAAA;OACtC0R,QAAQ,CAACE,OAAO,GAAG,CAAC,CAAA;CACpBrS,MAAAA,GAAG,CAACzJ,GAAG,CAACkK,IAAI,EAAE0R,QAAQ,CAAC,CAAA;CACxB,KAAA;KAEAA,QAAQ,CAACE,OAAO,EAAE,CAAA;CAElBxU,IAAAA,OAAO,CAAC,MAAM;CACb,MAAA,IAAI,EAAEsU,QAAQ,CAACE,OAAO,KAAK,CAAC,EAAE;CAC7BrS,QAAAA,GAAG,CAACpJ,MAAM,CAAC6J,IAAI,CAAC,CAAA;CACjB,OAAA;CACD,KAAC,CAAC,CAAA;KAEF,OAAO0R,QAAQ,CAAC7V,IAAI,CAAA;IACpB,CAAA;CACF;;CC7DA,IAAIgW,SAAS,GAAG,CAAC,CAAA;CACjB,MAAMC,UAAU,GAAG,CACf,QAAQ,EACR,OAAO,EACP,KAAK,EACL,OAAO,EACP,MAAM,EACN,OAAO,EACP,MAAM,EACN,UAAU,EACV,OAAO,EACP,QAAQ,EACR,OAAO,EACP,SAAS,EACT,MAAM,EACN,OAAO,EACP,OAAO,EACP,SAAS,EACT,OAAO,EACP,KAAK,EACL,WAAW,EACX,UAAU,EACV,WAAW,EACX,aAAa,EACb,OAAO,EACP,WAAW,EACX,OAAO,CACR;GACDC,OAAO,GAAG,CACR,KAAK,EACL,QAAQ,EACR,MAAM,EACN,OAAO,EACP,MAAM,EACN,OAAO,EACP,QAAQ,EACR,OAAO,EACP,OAAO,EACP,OAAO,EACP,QAAQ,CACT;GACDC,KAAK,GAAG,CACN,OAAO,EACP,OAAO,EACP,OAAO,EACP,KAAK,EACL,MAAM,EACN,KAAK,EACL,MAAM,EACN,QAAQ,EACR,UAAU,EACV,QAAQ,EACR,OAAO,EACP,OAAO,EACP,UAAU,CACX,CAAA;CAEH,SAASC,OAAOA,CAACC,GAAG,EAAE;CACpB,EAAA,OAAOC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,IAAI,CAAC,GAAGH,GAAG,CAAA;CAC/C,CAAA;CAEA,SAASI,SAASA,CAACC,KAAK,EAAE;CACxB,EAAA,IAAIla,IAAI,GAAG,IAAI7G,KAAK,CAAC+gB,KAAK,CAAC,CAAA;GAC3B,KAAK,IAAIjY,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiY,KAAK,EAAEjY,CAAC,EAAE,EAAE;CAC9B,IAAA,MAAM,CAACkY,KAAK,EAAEC,QAAQ,CAAC,GAAG5V,MAAM,CAC9B,CAAGiV,EAAAA,UAAU,CAACG,OAAO,CAACH,UAAU,CAACre,MAAM,CAAC,CAAC,CAAA,CAAA,EACvCse,OAAO,CAACE,OAAO,CAACF,OAAO,CAACte,MAAM,CAAC,CAAC,CAC9Bue,CAAAA,EAAAA,KAAK,CAACC,OAAO,CAACD,KAAK,CAACve,MAAM,CAAC,CAAC,EAClC,CAAC,CAAA;KACD4E,IAAI,CAACiC,CAAC,CAAC,GAAG;OACR4D,EAAE,EAAE2T,SAAS,EAAE;OACfW,KAAK;CACLC,MAAAA,QAAAA;MACD,CAAA;CACH,GAAA;CACA,EAAA,OAAOpa,IAAI,CAAA;CACb,CAAA;CAEA,MAAMqa,OAAO,GAAGA,CAAC;GAAExU,EAAE;GAAE3G,IAAI;CAAErF,EAAAA,EAAAA;CAAG,CAAC,KAC/BoH,IAAI,CAAA;AACN;AACA,UAAA,EAAY4E,EAAE,CAAA;AACd;AACA;AACA,eAAA,EAAiBhM,EAAE,CAAA;AACnB;AACA,MAAA,EAAQqF,IAAI,CAAA;AACZ;AACA,QAAS,CAAA,CAAA;CAET,MAAMob,GAAG,GAAGA,MAAM;GAChB,MAAM,CAACta,IAAI,EAAEua,OAAO,CAAC,GAAG/V,MAAM,CAAC,EAAE,CAAC,CAAA;GAClC,MAAM,CAAC6U,QAAQ,EAAEmB,WAAW,CAAC,GAAGhW,MAAM,CAAC,EAAE,CAAC,CAAA;GAC1C,MAAMyF,GAAG,GAAGA,MAAMsQ,OAAO,CAACN,SAAS,CAAC,IAAI,CAAC,CAAC,CAAA;GAC1C,MAAMQ,OAAO,GAAGA,MAAM;CACpBF,IAAAA,OAAO,CAACN,SAAS,CAAC,KAAK,CAAC,CAAC,CAAA;IAC1B,CAAA;CACD,EAAA,MAAM5b,GAAG,GAAGA,MAAMkc,OAAO,CAACG,CAAC,IAAI,CAAC,GAAGA,CAAC,EAAE,GAAGT,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;CAC1D,EAAA,MAAM3X,MAAM,GAAGA,MACba,KAAK,CAAC,MAAM;CACV,IAAA,KAAK,IAAIlB,CAAC,GAAG,CAAC,EAAEyY,CAAC,GAAG1a,IAAI,EAAE,EAAE2a,GAAG,GAAGD,CAAC,CAACtf,MAAM,EAAE6G,CAAC,GAAG0Y,GAAG,EAAE1Y,CAAC,IAAI,EAAE,EAC1DyY,CAAC,CAACzY,CAAC,CAAC,CAACmY,QAAQ,CAACQ,CAAC,IAAIA,CAAC,GAAG,MAAM,CAAC,CAAA;CAClC,GAAC,CAAC,CAAA;GACJ,MAAMC,QAAQ,GAAGA,MAAM;KACrB,MAAMH,CAAC,GAAG1a,IAAI,EAAE,CAAC4K,KAAK,EAAE,CAAA;CACxB,IAAA,IAAI8P,CAAC,CAACtf,MAAM,GAAG,GAAG,EAAE;CAClB,MAAA,IAAI0f,GAAG,GAAGJ,CAAC,CAAC,CAAC,CAAC,CAAA;CACdA,MAAAA,CAAC,CAAC,CAAC,CAAC,GAAGA,CAAC,CAAC,GAAG,CAAC,CAAA;CACbA,MAAAA,CAAC,CAAC,GAAG,CAAC,GAAGI,GAAG,CAAA;OACZP,OAAO,CAACG,CAAC,CAAC,CAAA;CACZ,KAAA;IACD,CAAA;CACD,EAAA,MAAMjT,KAAK,GAAGA,MAAM8S,OAAO,CAAC,EAAE,CAAC,CAAA;CAC/B,EAAA,MAAMhc,MAAM,GAAGsH,EAAE,IACf0U,OAAO,CAACG,CAAC,IAAI;CACX,IAAA,MAAMK,GAAG,GAAGL,CAAC,CAACM,SAAS,CAACC,KAAK,IAAIA,KAAK,CAACpV,EAAE,KAAKA,EAAE,CAAC,CAAA;CACjD6U,IAAAA,CAAC,CAAC3d,MAAM,CAACge,GAAG,EAAE,CAAC,CAAC,CAAA;KAChB,OAAO,CAAC,GAAGL,CAAC,CAAC,CAAA;CACf,GAAC,CAAC,CAAA;CACJ,EAAA,MAAMpB,UAAU,GAAGF,WAAW,CAACC,QAAQ,CAAC,CAAA;GAExCpY,IAAI,CAAC+P,MAAM,CAAC;CAAEqJ,IAAAA,OAAAA;CAAQ,GAAC,CAAC,CAAA;CAExB,EAAA,OAAOpZ,IAAI,CAAA;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAA,EAAoBgJ,GAAG,CAAA;AACvB;AACA;AACA;AACA;AACA,kBAAA,EAAoBwQ,OAAO,CAAA;AAC3B;AACA;AACA;AACA;AACA,kBAAA,EAAoBpc,GAAG,CAAA;AACvB;AACA;AACA;AACA;AACA,kBAAA,EAAoBiE,MAAM,CAAA;AAC1B;AACA;AACA;AACA;AACA,kBAAA,EAAoBmF,KAAK,CAAA;AACzB;AACA;AACA;AACA;AACA,kBAAA,EAAoBoT,QAAQ,CAAA;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAA,EAAiBta,CAAC,IAAI;AACd,IAAA,MAAM2a,OAAO,GAAG3a,CAAC,CAAC5C,MAAM,CAAA;AACxB,IAAA,IAAIud,OAAO,CAACV,WAAW,KAAKre,SAAS,EAAE;AACrCqe,MAAAA,WAAW,CAACU,OAAO,CAACV,WAAW,CAAC,CAAA;AAClC,KAAC,MAAM,IAAIU,OAAO,CAACC,SAAS,KAAKhf,SAAS,EAAE;AAC1CoC,MAAAA,MAAM,CAAC2c,OAAO,CAACC,SAAS,CAAC,CAAA;AAC3B,KAAA;GACD,CAAA;AACP;AACA;AACA,mBAAA,EAAqBnb,IAAI,CAAA;AACzB,UAAA,EAAYqI,GAAG,IAAI;IACP,MAAM;MAAExC,EAAE;AAAEsU,MAAAA,KAAAA;AAAM,KAAC,GAAG9R,GAAG,CAAA;AAEzB,IAAA,OAAOpH,IAAI,CAAA,kBAAA,EAAqBqY,UAAU,CAACzT,EAAE,CAAC,CAAA;AAC1D,mCAAA,EAAqCA,EAAE,CAAA;AACvC;AACA,kCAAoCA,EAAAA,EAAE,KAAKsU,KAAK,CAAA;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,iCAAA,EAAmCtU,EAAE,CAAA;AACrC;AACA;AACA;AACA;AACA,iBAAkB,CAAA,CAAA;GACP,CAAA;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAS,CAAA,CAAA;CACT,CAAC,CAAA;CAED4I,MAAM,CAAC6L,GAAG,EAAE/hB,QAAQ,CAAC6iB,cAAc,CAAC,MAAM,CAAC,CAAC;;;;;;"}