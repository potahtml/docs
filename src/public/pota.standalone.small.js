import{createSignal as n,createMemo as e,createRoot as t,createRenderEffect as o,createEffect as r,batch as c,onCleanup as s,untrack as i,getOwner as a,runWithOwner as l,useContext as u}from"solid-js/dist/solid.js";var f="0.2.1";const d=Object.assign,h=Array.isArray,p=(n,...e)=>h(n)?n[0](...e,...n.slice(1)):n(...e),m=()=>Object.create(null);const w=Object.defineProperty,b={enumerable:!0,configurable:!0},v=(n,e,t)=>w(n,e,{...t,...b}),g=Object.entries,y=n=>"function"==typeof n?y(n()):n,L=n=>"function"==typeof n,x=n=>null!==n&&"object"==typeof n,S=n=>null==n,k=Object.keys,E=n=>void 0===n||y(n),R=new WeakMap;function M(n,e,t){const o=void 0!==t,r=function(n,e=!0){let t=R.get(n);return void 0===t&&e&&(t=m(),R.set(n,t)),t}(n,o);return o&&void 0===r[e]&&(r[e]=t),r&&r[e]}const N={getOwnPropertyDescriptor:(n,e)=>({enumerable:!0,configurable:!0})};function I(n,e){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}const C=Array.from,U=Symbol(),T=Symbol(),P=Symbol(),O=Symbol(),j=Symbol(),A={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML",html:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink"},H=n=>L(n)&&null===n[O];function $(n){return n[O]=null,n}const D=(e,t)=>{const o=n(e,t);return $(o[0]),o},q=n=>$(e(n)),K=n=>t(n),W=n=>{o(n)},_=n=>{r(n)},z=n=>c(n),B=n=>s(n),V=n=>i(n);function F(n){const[e,t]=D(!0),o=q((()=>{if(!e())return n()}));return $((()=>(t(!1),o())))}const J=()=>{const n=a();return e=>l(n,e)};class X{[j]=null;constructor(n,e){this.mapper=Y(n,e,!0)}map(n){return this.mapper(n)}}function Y(n,e,t){const o=new Map,r=new Map;let c=0,s=[],i=[];function a(){for(const n of i)n.dispose(!0);o.clear(),r.clear(),s.length=0,i.length=0}function l(n,s,i,a){return K((l=>{const u=V((()=>i?i(e(n,s),s):e(n,s))),f={runId:-1,nodes:1===c?u:null,begin:t?u[0]:null,end:t?u.at(-1):null,dispose:e=>{if(!e)if(a){const e=r.get(n);1===e.length?r.delete(n):I(e,f)}else o.delete(n);l()}};return f}))}function u(n){const e=n.begin,t=n.end,o=[e];let r=e.nextSibling;for(;r!==t;)o.push(r),r=r.nextSibling;return o.push(t),o}return B(a),function(e){const f=y(n)||[];c++,s=[];for(const[n,t]of f.entries()){let i=o.get(t);if(i){if(i.runId===c){let o=r.get(t);for(i of(o||(o=[],r.set(t,o)),o))if(i.runId!==c)break;i.runId===c&&(i=l(t,n,e,!0),o.push(i))}}else i=l(t,n,e,!1),o.set(t,i);i.runId=c,s.push(i)}if(0===s.length)a();else for(const n of i)n.runId!==c&&n.dispose();if(t&&s.length>1&&i.length>0){let n=s[s.length-1];for(let e=s.length-1;e>0;e--){const t=s[e-1];n.begin.previousSibling!==t.end&&n.begin.before(...u(t)),n=t}}if(i=s,1===c)try{return s.map((n=>n.nodes))}finally{for(const n of s)n.nodes=null}return null}}let G=class{};G[P]=null;const Q=n=>L(n)&&null===n[P],Z=n=>L(n)&&null===n[T],nn=n=>!H(n)&&(L(n)||!h(n)&&x(n)&&!n.then);function en(n){return n[T]=null,n}function tn(n){return n=(h(n)?n:[n]).map((n=>H(n)?n:L(n)?(...e)=>V((()=>n(...e))):()=>n)),en(((...e)=>n.map((n=>n(...e)))))}en((()=>null));function on(n,e){if(x(e)){for(const[t,o]of g(e))rn(n,t,o);return}const t=typeof e;"string"!==t?"function"!==t||_((()=>{on(n,y(e))})):n.cssText=e}function rn(n,e,t){L(t)?_((()=>{cn(n,e,y(t))})):cn(n,e,t)}function cn(n,e,t){S(t)?n.removeProperty(e):n.setProperty(e,t)}function sn(n,e){if(x(e)){for(const[t,o]of g(e))an(n,t,o);return}const t=typeof e;"string"!==t?"function"!==t||_((()=>{sn(n,y(e))})):an(n,e,!0)}function an(n,e,t){L(t)?_((()=>{ln(n,e,y(t))})):ln(n,e,t)}function ln(n,e,t){t?n.add(...e.trim().split(/\s+/)):n.remove(e)}const un=(n,e,t,o)=>hn(n,e,t);function fn(n,e,t,o){L(t)?_((()=>{dn(n,e,y(t),o)})):dn(n,e,t,o)}function dn(n,e,t,o){"boolean"==typeof t?pn(n,e,t):mn(n,e,t,o)}function hn(n,e,t){L(t)?_((()=>{pn(n,e,y(t))})):pn(n,e,t)}function pn(n,e,t){S(t)?delete n[e]:n[e]=t}function mn(n,e,t,o){S(t)?o&&A[o]?n.removeAttributeNS(A[o],e):n.removeAttribute(e):o&&A[o]?n.setAttributeNS(A[o],e,t):n.setAttribute(e,t)}let wn,bn;const vn=[];function gn(){bn=[[],[],[]],wn=!1}function yn(n,e){Ln(),bn[n].push(e)}function Ln(){wn||(wn=!0,queueMicrotask(xn))}function xn(){const n=bn;gn();for(const e of n)for(const n of e)p(n);for(const n of vn)p(n)}gn();const Sn=n=>yn(1,n);const kn=(n,e,t,o)=>yn(0,[t,n]),En=(n,e,t,o)=>M(n,"onUnmount",[]).push([t,n]),Rn=m();function Mn(n){return n in Rn||(n.startsWith("on")&&void 0!==window[n.toLowerCase()]?Rn[n]=n.slice(2).toLowerCase():Rn[n]=null),Rn[n]}const Nn=m();function In(n,e,t,o=!0,r=!0){const c=M(n,`${o?e:`${e}Native`}Handlers`,[]);if(o?(e in Nn&&0!==Nn[e]||(Nn[e]=0,document.addEventListener(e,Tn,{passive:!0})),Nn[e]++,B((()=>{0==--Nn[e]&&document.removeEventListener(e,Tn)}))):(0===c.length&&n.addEventListener(e,Un),B((()=>{Cn(n,e,t,o,!1)}))),void 0===t[U]&&(t[U]=h(t)?t:[t]),c.push(t),r)return()=>Cn(n,e,t,o)}function Cn(n,e,t,o=!0,r=!0){const c=M(n,`${o?e:`${e}Native`}Handlers`);if(I(c,t),o||0!==c.length||n.removeEventListener(e,Un),r)return()=>In(n,e,t,o)}function Un(n){const e=`${n.type}Native`,t=M(n.currentTarget,`${e}Handlers`);Pn(n.target,t,n)}function Tn(n){const e=n.type;let t=n.composedPath&&n.composedPath()[0]||n.target;for(n.target!==t&&v(n,"target",{value:t}),v(n,"currentTarget",{get:()=>t});t;){const o=M(t,`${e}Handlers`);if(o&&!t.disabled&&(Pn(t,o,n),n.cancelBubble))break;t=t.parentNode}}function Pn(n,e,t){for(const o of e)if(o[U][0].call(n,...o[U].slice(1),t),t.cancelBubble)break}const On=m(),jn=m(),An=(n,e)=>{On[n]=e},Hn=(n,e)=>{jn[n]=e};An("style",((n,e,t,o)=>on(n.style,t))),Hn("style",((n,e,t,o,r,c)=>on(n.style,x(t)?t:{[r]:t}))),Hn("var",((n,e,t,o,r,c)=>on(n.style,{["--"+r]:t}))),An("class",((n,e,t,o)=>sn(n.classList,t))),Hn("class",((n,e,t,o,r,c)=>sn(n.classList,x(t)?t:{[r]:t}))),["innerHTML","textContent","value","innerText"].forEach((n=>An(n,un))),Hn("prop",((n,e,t,o,r,c)=>hn(n,r,t))),Hn("attr",((n,e,t,o,r,c)=>function(n,e,t,o){L(t)?_((()=>{mn(n,e,y(t),o)})):mn(n,e,t,o)}(n,r,t))),An("onMount",kn),An("onUnmount",En),Hn("onMount",kn),Hn("onUnmount",En),An("ref",kn),Hn("ref",kn),Hn("on",((n,e,t,o,r,c)=>In(n,r,t,!1,!1)));const $n=n=>document.createElement(n),Dn=(n,e)=>document.createElementNS(n,e),qn=n=>document.createTextNode(n),Kn=()=>new DocumentFragment,Wn=()=>{};function _n(n,e){if(n===Wn)return e.children;Object.freeze(e);const t=zn();return Z(n)?en((()=>n(e,t))):en((()=>Jn(n)(e,t)))}const zn=()=>({namespaceURI:void 0,parent:void 0});function Bn(n){return Z(n)?n:en(Jn(n))}const Vn=new Map;var Fn;function Jn(n){let e=Vn.get(n);if(e)return e;switch(typeof n){case"string":e=(e=m(),t=zn())=>V((()=>function(n,e,t){const o=Xn(),r=e.xmlns?e.xmlns:o.namespaceURI&&o.namespaceURI!==A.html?o.namespaceURI:t.parent?.namespaceURI?t.parent.namespaceURI:A[n];return Yn(r?Dn(r,n):$n(n),e,t)}(n,e,t)));break;case"function":if(Q(n)){e=(e=m())=>V((()=>{const t=new n;return t.onReady&&Sn(t.onReady.bind(t)),t.onCleanup&&B(t.onCleanup.bind(t)),t.render(e)}));break}e=(e=m(),t=zn())=>V((()=>n(e,t)));break;default:if(n instanceof Node){e=(e=m(),t=zn())=>V((()=>Yn(n.cloneNode(!0),e,t)));break}e=()=>n}return Vn.set(n,e),e}Fn=()=>Vn.clear(),Ln(),vn.push(Fn);const Xn=function(n=m()){let e=n;return function n(t,o){if(void 0===t)return e;{const r=n();e=t;const c=o();return e=r,c}}}(m());function Yn(n,e,t){if(n.namespaceURI!==A.html){n[U]=t,t.namespaceURI=n.namespaceURI;const e=Xn();e[U]&&(t.parent=e[U])}return B((()=>{const e=M(n,"onUnmount");if(e)for(const t of e)p(t,n);n.isConnected&&n.remove()})),function(n,e){for(const[t,o]of g(e)){if("children"===t)continue;if(On[t]){On[t](n,t,o,e);continue}let r=Mn(t);if(r){In(n,r,o,!0,!1);continue}const[c,s]=-1!==t.indexOf(":")?t.split(":"):["",t];jn[c]?jn[c](n,t,o,e,s,c):(r=Mn(c),r?In(n,r,o,!0,!1):fn(n,t,o,c))}}(n,e),void 0!==e.children&&Xn(n,(()=>{Gn(n,e.children)})),n}function Gn(n,e,t){switch(typeof e){case"string":case"number":case"undefined":return Zn(n,qn(e),t);case"function":{if(Z(e))return Gn(n,e(),t);let o;return n=Qn(n,e.name,t),W((()=>(o=Gn(n,e(),!0),o))),[o,n]}case"object":if(h(e))return e.map((e=>Gn(n,e,t)));if(e instanceof Node)return Zn(n,e,t);if(null===e)return null;if(null===e[j]){let t;return W((()=>(t=e.map((e=>{const t=Qn(n,"begin",!0),o=Qn(n,"end",!0);return[t,Gn(o,e,!0),o]})),t))),t}if(e.then){const[o,r]=D(""),c=J();return e.then((e=>n.isConnected&&r(L(e)?c(e):e))),Gn(n,o,t)}return e instanceof Map||e instanceof Set?C(e.values()).map((e=>Gn(n,e,t))):Gn(n,"toString"in e?e.toString():JSON.stringify(e),t);default:return Zn(n,qn(e.toString()),t)}}const Qn=(n,e,t)=>Zn(n,qn(""),t);function Zn(n,e,t){if(n===document.head){const t=n.querySelector.bind(n),o=e.tagName;let r;"META"===o?r=t('meta[name="'+e.name+'"]')||t('meta[property="'+e.property+'"]'):"TITLE"===o&&(r=t("title")),r?r.replaceWith(e):n.appendChild(e)}else t?n.before(e):n.appendChild(e);return B((()=>{e.isConnected&&e.remove()})),e}function ne(n,e,t=m()){const o=K((o=>(ee(n,e,t),o))),r=e?M(e,"onUnmount",[]):[],c=()=>{I(r,c),o()};return r.push(c),B(c),c}function ee(n,e,t=m()){return t.clear&&(e.textContent=""),Gn(e||document.body,nn(n)?Bn(n):n,t.relative)}function te(n,...e){let t=Vn.get(n);t||(t=$n("pota"),t.innerHTML=n.join("<pota></pota>"),Vn.set(n,t));const o=t.cloneNode(!0),r=document.evaluate("//*[@*='<pota></pota>']|//pota",o,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),c=[];for(let n=0;n<r.snapshotLength;n++)c.push(r.snapshotItem(n));let s=0;const i={relative:!0};for(const n of c)if("pota"===n.localName){const t=e[s++];ee(t instanceof Node?en((()=>t)):t,n,i),n&&n.remove()}else{const t=C(n.attributes).filter((n=>"<pota></pota>"===n.value));for(const o of t)n.removeAttribute(o.name),n[o.name]=e[s++]}return 1===o.childNodes.length?o.childNodes[0]:C(o.childNodes)}function oe(n,e,t){return void 0===customElements.get(n)&&customElements.define(n,e,t),Bn(n)}function re(n=m()){const e=function(n={}){const e=Symbol(),t={id:e,defaultValue:n};return function(n,o){if(void 0===n)return u(t);{let t;return W((()=>{V((()=>{const r=a();r.context={...r.context,[e]:n},t=o()}))})),t}}}(n);return e.Provider=n=>e(n.value,(()=>ce(n.children))),e}function ce(n){const e=Kn();return Gn(e,n),e}function se(n){const e=L(n)?q(n):()=>n;return q((()=>ie(e())))}function ie(n){if(L(n))return ie(n());if(h(n)){const e=[];for(let t of n)t=ie(t),h(t)?e.push(...t):e.push(t);return e}return n}function ae(){const[n,e]=D();return t=>t?e(t):n()}const le=n=>en((e=>{const t=J(),o=(r=!0)=>n().then((n=>t((()=>Bn(n.default)(e))))).catch((e=>r?o(!1):console.error(e)||(()=>n+" is offline")));return o()}));class ue extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}hide(){this.shadowRoot.innerHTML=""}show(){this.shadowRoot.innerHTML="<slot/>"}set when(n){y(n)?this.show():this.hide()}}function fe(n){return oe("pota-collapse",ue),_n("pota-collapse",{when:n.when,children:n.children})}const de=n=>Bn(n.component)({...n,component:null});function he(n){const e=tn(n.children);return q((()=>new X(n.each,e)))}function pe(n){return ne(n.children,n.mount),null}const me=n=>_n(pe,{mount:document.head,children:n.children});function we(n){const e=tn(n.children),t=q((()=>y(n.when))),o=q((()=>!!t())),r=S(n.fallback)?null:F((()=>se(n.fallback)));return q((()=>o()?e(t):r))}function be(n){const e=se((()=>n.children)),t=S(n.fallback)?null:F((()=>se(n.fallback))),o=q((()=>e().find((n=>!!y(n.when))))),r=q((()=>o()&&y(o().when))),c=q((()=>o()&&tn(o().children)));return q((()=>o()?c()(r):t))}const ve=n=>n;function ge(n,...e){const t=[],o=m();for(const r of e){const e=m();for(const t of r)o[t]=null,e[t]=n[t];t.push(e)}const r=m();for(const e of k(n))void 0===o[e]&&(r[e]=n[e]);return t.unshift(r),t}const ye=f;const Le=()=>window.scrollTo({top:0,behavior:"auto"});function xe(n){(function(n){if(n)try{const e=document.querySelector(n);if(e)return function(n){n.scrollTop=0,n.scrollIntoView({behavior:"auto"})}(e),!0}catch(n){}return!1})(n)||Le()}function Se(n){try{return decodeURIComponent(n)}catch(e){return n}}const ke=window.location.origin,Ee=(n,e)=>e?n.replace(/\:([a-z0-9_\-]+)/gi,(function(n,t){return void 0!==e[t]?encodeURIComponent(e[t]):n})):n,Re=()=>!1;function Me(n=m()){const[e,t]=D([]);return{base:"",href:()=>"",parent:null,show:Re,scrolls:[],addChildren:n=>{t((e=>(e.push(n),[...e])))},removeChildren:n=>{t((e=>(I(e,n),[...e])))},noneMatch:F((()=>e().length&&e().every((n=>!n.show())))),...n}}const Ne=re(Me());Ne.beforeLeave=[];const Ie=n=>Ne.beforeLeave.push({href:Ne().href(),callback:n});async function Ce(n){const e=[];for(const t of Ne.beforeLeave)if(0!==n.indexOf(t.href)){if(!await t.callback().catch((()=>!1)))return!1}else e.push(t);return Ne.beforeLeave=e,!0}const[Ue,Te]=D(window.location,{equals:!1}),Pe=q((()=>Ue().pathname)),Oe=F((()=>Ue().search)),je=q((()=>Ue().href)),Ae=q((()=>je().endsWith("#")?"#":Ue().hash));let He=m(),$e="";const De=d(m(),{hash:Ae,pathname:Pe,path:()=>Pe()+Ae(),query:()=>{const n=Oe();if($e!==n){$e=n,He=m();const e=new URL(ke+"/"+n).searchParams;for(const[n,t]of e.entries())He[n]=t}return He},href:je}),qe=()=>De;async function Ke(){const n=document.title;document.title=n+" ",document.title=n,await Ce(window.location.href)?Te(window.location):window.history.pushState(null,"",De.href())}addEventListener("hashchange",Ke),addEventListener("popstate",Ke);const[We,_e]=D((()=>m())),ze=F((()=>{const n=m();for(const[e,t]of g(We()()||n))n[e]=void 0!==t?Se(t):t;return n})),Be=()=>((n,e=m())=>new Proxy(e,{get:(e,t,o)=>n()[t],has:(e,t)=>t in n(),ownKeys:e=>k(n()),...N}))(ze);function Ve(n){const e=Ne(),t=e.base+Ee(void 0===n.path?"(|#.*)$":n.path.replace("$","(|#.*)$").replace(/^#/,"/#"),n.params),o=new RegExp("^"+t.replace(/\:([a-z0-9_\-]+)/gi,"(?<$1>.+)")),r=n.scrolls?e.scrolls.concat(n.scrolls):e.scrolls;let c="";const s=q((()=>{const n=De.path();return!!o.test(n)&&(_e((()=>()=>o.exec(n).groups)),""===c&&(c=n.replace(n.replace(o,""),""),c=ke+("/"!==c[0]?"/":"")+c),(n=>{yn(2,n)})((()=>function(n){for(const e of n)xe(e);xe(window.location.hash)}(r))),!0)})),i=Me({base:t,href:()=>c,scrolls:r,parent:e,show:s});return e.addChildren(i),B((()=>{e.removeChildren(i)})),_n(Ne.Provider,{value:i,children:_n(de,{component:n.collapse?fe:we,when:()=>s()&&E(n.when),fallback:n.fallback,children:n.children})})}function Fe(n){let e=Ee(n.href,n.params);const t=Ne().href();return e=(n=>"/"===n[0]||"#"===n[0]||/^http/.test(n))(e[0])||!t?e:t.includes("/#")?t+e:new URL(e,t).href,_n("a",{...n,href:e,params:null})}async function Je(n,e=m()){window.location.href!==n&&await Ce(n)&&(e.replace?window.history.replaceState(null,"",n):window.history.pushState(null,"",n),Te(window.location),E(e.scroll)&&xe(window.location.hash))}function Xe(n,e=m()){n=Ee(n,e.params),Je(/^http/.test(n)?n:new URL(n,window.location.href).href,e)}Ve.Default=n=>_n(we,{when:Ne().noneMatch,children:n.children});const Ye=n=>Xe(n.href,n);function Ge(n){const e=new Map;let t;_((()=>{const o=n();if(o===t)return;const r=e.get(t);r&&r.write(!1);const c=e.get(o);c&&c.write(!0),t=o}));const o=n();return function(n){if(!e.has(n)){B((()=>e.delete(n)));const[t,r]=D(n===o);e.set(n,{read:t,write:r})}return e.get(n).read}}document.addEventListener("click",(function(n){if(n.defaultPrevented||0!==n.button||n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)return;const e=n.composedPath().find((n=>n instanceof HTMLAnchorElement));var t;!e||!e.href||e.download||e.target||!/^http/.test(e.href)||(t=e.href,/^http/.test(t)&&!(t+"/").startsWith(ke+"/"))||e.rel&&e.rel.split(/\s/).includes("external")||(n.preventDefault(),Je(e.href,{replace:e.replace}))}));export{Fe as A,fe as Collapse,G as Component,de as Dynamic,he as For,Wn as Fragment,me as Head,ve as Match,Ye as Navigate,pe as Portal,Ve as Route,we as Show,be as Switch,In as addEventListener,z as batch,B as cleanup,re as context,Bn as create,oe as customElement,_ as effect,y as getValue,_n as jsx,_n as jsxs,le as lazy,F as lazyMemo,Y as map,q as memo,Xe as navigate,B as onCleanup,Sn as onReady,An as propsPlugin,Hn as propsPluginNS,ge as propsSplit,ae as ref,Cn as removeEventListener,ne as render,W as renderEffect,se as resolve,K as root,Ge as selector,D as signal,te as template,ce as toHTML,V as untrack,Ie as useBeforeLeave,qe as useLocation,Be as useParams,ye as version,J as withOwner};
//# sourceMappingURL=pota.standalone.small.js.map
